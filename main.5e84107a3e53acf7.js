(self.webpackChunkthunders_pwa=self.webpackChunkthunders_pwa||[]).push([[792],{2791:(Gt,Un,tt)=>{"use strict";function nt(n){return"function"==typeof n}function An(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Kt=An(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Yt(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class pt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(nt(r))try{r()}catch(s){e=s instanceof Kt?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{jn(s)}catch(o){e=e??[],o instanceof Kt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Kt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jn(e);else{if(e instanceof pt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Yt(t,e)}remove(e){const{_finalizers:t}=this;t&&Yt(t,e),e instanceof pt&&e._removeParent(this)}}pt.EMPTY=(()=>{const n=new pt;return n.closed=!0,n})();const zt=pt.EMPTY;function Cn(n){return n instanceof pt||n&&"closed"in n&&nt(n.remove)&&nt(n.add)&&nt(n.unsubscribe)}function jn(n){nt(n)?n():n.unsubscribe()}const vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Qr={setTimeout(n,e,...t){const{delegate:r}=Qr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Qr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Is(n){Qr.setTimeout(()=>{const{onUnhandledError:e}=vn;if(!e)throw n;e(n)})}function ho(){}const Tc=Ts("C",void 0,void 0);function Ts(n,e,t){return{kind:n,value:e,error:t}}let Vo=null;function wr(n){if(vn.useDeprecatedSynchronousErrorHandling){const e=!Vo;if(e&&(Vo={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Vo;if(Vo=null,t)throw r}}else n()}class Ss extends pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Cn(e)&&e.add(this)):this.destination=Bp}static create(e,t,r){return new Ps(e,t,r)}next(e){this.isStopped?Sc(function Ql(n){return Ts("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Sc(function ml(n){return Ts("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sc(Tc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xs=Function.prototype.bind;function Ds(n,e){return xs.call(n,e)}class Va{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ca(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ca(r)}else ca(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ca(t)}}}class Ps extends Ss{constructor(e,t,r){let i;if(super(),nt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&vn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ds(e.next,s),error:e.error&&Ds(e.error,s),complete:e.complete&&Ds(e.complete,s)}):i=e}this.destination=new Va(i)}}function ca(n){vn.useDeprecatedSynchronousErrorHandling?function Zr(n){vn.useDeprecatedSynchronousErrorHandling&&Vo&&(Vo.errorThrown=!0,Vo.error=n)}(n):Is(n)}function Sc(n,e){const{onStoppedNotification:t}=vn;t&&Qr.setTimeout(()=>t(n,e))}const Bp={closed:!0,next:ho,error:function sf(n){throw n},complete:ho},Su="function"==typeof Symbol&&Symbol.observable||"@@observable";function ua(n){return n}function fo(n){return 0===n.length?ua:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function En(n){return n&&n instanceof Ss||function ct(n){return n&&nt(n.next)&&nt(n.error)&&nt(n.complete)}(n)&&Cn(n)}(t)?t:new Ps(t,r,i);return wr(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=We(r))((i,s)=>{const o=new Ps({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Su](){return this}pipe(...t){return fo(t)(this)}toPromise(t){return new(t=We(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function We(n){var e;return null!==(e=n??vn.Promise)&&void 0!==e?e:Promise}const $t=An(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let pn=(()=>{class n extends Ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new rs(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $t}next(t){wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?zt:(this.currentObservers=null,s.push(t),new pt(()=>{this.currentObservers=null,Yt(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Ve;return t.source=this,t}}return n.create=(e,t)=>new rs(e,t),n})();class rs extends pn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:zt}}function Ui(n){return nt(n?.lift)}function Wn(n){return e=>{if(Ui(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bn(n,e,t,r,i){return new af(n,e,t,r,i)}class af extends Ss{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Xt(n,e){return Wn((t,r)=>{let i=0;t.subscribe(Bn(r,s=>{r.next(n.call(e,s,i++))}))})}function Ln(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function Od(n){return this instanceof Od?(this.v=n,this):new Od(n)}function bO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function bE(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const AE=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function wO(n){return nt(n?.then)}function AO(n){return nt(n[Su])}function CO(n){return Symbol.asyncIterator&&nt(n?.[Symbol.asyncIterator])}function EO(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const IO=function XX(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function TO(n){return nt(n?.[IO])}function SO(n){return function yO(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(f){return function(m){return Promise.resolve(m).then(f,d)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(f,m){r[f]&&(i[f]=function(v){return new Promise(function(y,b){s.push([f,v,y,b])>1||l(f,v)})},m&&(i[f]=m(i[f])))}function l(f,m){try{!function c(f){f.value instanceof Od?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}(r[f](m))}catch(v){h(s[0][3],v)}}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,m){f(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Od(t.read());if(i)return yield Od(void 0);yield yield Od(r)}}finally{t.releaseLock()}})}function xO(n){return nt(n?.getReader)}function go(n){if(n instanceof Ve)return n;if(null!=n){if(AO(n))return function QX(n){return new Ve(e=>{const t=n[Su]();if(nt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(AE(n))return function ZX(n){return new Ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(wO(n))return function JX(n){return new Ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Is)})}(n);if(CO(n))return DO(n);if(TO(n))return function eQ(n){return new Ve(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(xO(n))return function tQ(n){return DO(SO(n))}(n)}throw EO(n)}function DO(n){return new Ve(e=>{(function nQ(n,e){var t,r,i,s;return function _O(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=bO(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function xu(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function hs(n,e,t=1/0){return nt(e)?hs((r,i)=>Xt((s,o)=>e(r,s,i,o))(go(n(r,i))),t):("number"==typeof e&&(t=e),Wn((r,i)=>function rQ(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=v=>c<r?m(v):l.push(v),m=v=>{s&&e.next(v),c++;let y=!1;go(t(v,u++)).subscribe(Bn(e,b=>{i?.(b),s?f(b):e.next(b)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<r;){const b=l.shift();o?xu(e,o,()=>m(b)):m(b)}h()}catch(b){e.error(b)}}))};return n.subscribe(Bn(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function Up(n=1/0){return hs(ua,n)}const xc=new Ve(n=>n.complete());function PO(n){return n&&nt(n.schedule)}function CE(n){return n[n.length-1]}function MO(n){return nt(CE(n))?n.pop():void 0}function O_(n){return PO(CE(n))?n.pop():void 0}function B1(n,e=0){return Wn((t,r)=>{t.subscribe(Bn(r,i=>xu(r,n,()=>r.next(i),e),()=>xu(r,n,()=>r.complete(),e),i=>xu(r,n,()=>r.error(i),e)))})}function U1(n,e=0){return Wn((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function kO(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ve(t=>{xu(t,e,()=>{const r=n[Symbol.asyncIterator]();xu(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function fs(n,e){return e?function dQ(n,e){if(null!=n){if(AO(n))return function oQ(n,e){return go(n).pipe(U1(e),B1(e))}(n,e);if(AE(n))return function lQ(n,e){return new Ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(wO(n))return function aQ(n,e){return go(n).pipe(U1(e),B1(e))}(n,e);if(CO(n))return kO(n,e);if(TO(n))return function cQ(n,e){return new Ve(t=>{let r;return xu(t,e,()=>{r=n[IO](),xu(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>nt(r?.return)&&r.return()})}(n,e);if(xO(n))return function uQ(n,e){return kO(SO(n),e)}(n,e)}throw EO(n)}(n,e):go(n)}function EE(...n){const e=O_(n),t=function sQ(n,e){return"number"==typeof CE(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?go(r[0]):Up(t)(fs(r,e)):xc}class ja extends pn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Qt(...n){return fs(n,O_(n))}function RO(n={}){const{connector:e=(()=>new pn),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},m=()=>{const v=o;f(),v?.unsubscribe()};return Wn((v,y)=>{c++,!d&&!u&&h();const b=l=l??e();y.add(()=>{c--,0===c&&!d&&!u&&(a=IE(m,i))}),b.subscribe(y),!o&&c>0&&(o=new Ps({next:A=>b.next(A),error:A=>{d=!0,h(),a=IE(f,t,A),b.error(A)},complete:()=>{u=!0,h(),a=IE(f,r),b.complete()}}),go(v).subscribe(o))})(s)}}function IE(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ps({next:()=>{r.unsubscribe(),n()}});return go(e(...t)).subscribe(r)}function da(n,e){return Wn((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Bn(r,l=>{i?.unsubscribe();let c=0;const u=s++;go(n(l,u)).subscribe(i=Bn(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function fQ(n,e){return n===e}function Ar(n){for(let e in n)if(n[e]===Ar)return e;throw Error("Could not find renamed property on target object.")}function j1(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ps(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ps).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function TE(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const pQ=Ar({__forward_ref__:Ar});function zr(n){return n.__forward_ref__=zr,n.toString=function(){return ps(this())},n}function ln(n){return SE(n)?n():n}function SE(n){return"function"==typeof n&&n.hasOwnProperty(pQ)&&n.__forward_ref__===zr}function xE(n){return n&&!!n.\u0275providers}const NO="https://g.co/ng/security#xss";class qe extends Error{constructor(e,t){super(function z1(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function gn(n){return"string"==typeof n?n:null==n?"":String(n)}function DE(n,e){throw new qe(-201,!1)}function vl(n,e){null==n&&function tn(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Et(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mo(n){return{providers:n.providers||[],imports:n.imports||[]}}function $1(n){return OO(n,G1)||OO(n,LO)}function OO(n,e){return n.hasOwnProperty(e)?n[e]:null}function H1(n){return n&&(n.hasOwnProperty(PE)||n.hasOwnProperty(AQ))?n[PE]:null}const G1=Ar({\u0275prov:Ar}),PE=Ar({\u0275inj:Ar}),LO=Ar({ngInjectableDef:Ar}),AQ=Ar({ngInjectorDef:Ar});var zn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(zn||{});let ME;function ha(n){const e=ME;return ME=n,e}function VO(n,e,t){const r=$1(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&zn.Optional?null:void 0!==e?e:void DE(ps(n))}const $r=globalThis;class gt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Et({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const L_={},LE="__NG_DI_FLAG__",q1="ngTempTokenPath",IQ=/\n/gm,UO="__source";let jp;function Ld(n){const e=jp;return jp=n,e}function xQ(n,e=zn.Default){if(void 0===jp)throw new qe(-203,!1);return null===jp?VO(n,void 0,e):jp.get(n,e&zn.Optional?null:void 0,e)}function bt(n,e=zn.Default){return(function FO(){return ME}()||xQ)(ln(n),e)}function vt(n,e=zn.Default){return bt(n,W1(e))}function W1(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function FE(n){const e=[];for(let t=0;t<n.length;t++){const r=ln(n[t]);if(Array.isArray(r)){if(0===r.length)throw new qe(900,!1);let i,s=zn.Default;for(let o=0;o<r.length;o++){const a=r[o],l=DQ(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(bt(i,s))}else e.push(bt(r))}return e}function F_(n,e){return n[LE]=e,n.prototype[LE]=e,n}function DQ(n){return n[LE]}function Du(n){return{toString:n}.toString()}var K1=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(K1||{}),Zl=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Zl||{});const Dc={},ur=[],Y1=Ar({\u0275cmp:Ar}),VE=Ar({\u0275dir:Ar}),BE=Ar({\u0275pipe:Ar}),zO=Ar({\u0275mod:Ar}),Pu=Ar({\u0275fac:Ar}),V_=Ar({__NG_ELEMENT_ID__:Ar}),$O=Ar({__NG_ENV_ID__:Ar});function HO(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function UE(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];qO(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function GO(n){return 3===n||4===n||6===n}function qO(n){return 64===n.charCodeAt(0)}function B_(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||WO(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function WO(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const KO="ng-template";function kQ(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==HO(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function YO(n){return 4===n.type&&n.value!==KO}function RQ(n,e,t){return e===(4!==n.type||t?n.value:KO)}function NQ(n,e,t){let r=4;const i=n.attrs||[],s=function FQ(n){for(let e=0;e<n.length;e++)if(GO(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!RQ(n,l,t)||""===l&&1===e.length){if(Jl(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!kQ(n.attrs,c,t)){if(Jl(r))return!1;o=!0}continue}const d=OQ(8&r?"class":l,i,YO(n),t);if(-1===d){if(Jl(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==HO(f,c,0)||2&r&&c!==h){if(Jl(r))return!1;o=!0}}}}else{if(!o&&!Jl(r)&&!Jl(l))return!1;if(o&&Jl(l))continue;o=!1,r=l|1&r}}return Jl(r)||o}function Jl(n){return 0==(1&n)}function OQ(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function VQ(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function XO(n,e,t=!1){for(let r=0;r<e.length;r++)if(NQ(n,e[r],t))return!0;return!1}function QO(n,e){return n?":not("+e.trim()+")":e}function UQ(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Jl(o)&&(e+=QO(s,i),i=""),r=o,s=s||!Jl(r);t++}return""!==i&&(e+=QO(s,i)),e}function fa(n){return Du(()=>{const e=JO(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===K1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zl.Emulated,styles:n.styles||ur,_:null,schemas:n.schemas||null,tView:null,id:""};eL(t);const r=n.dependencies;return t.directiveDefs=X1(r,!1),t.pipeDefs=X1(r,!0),t.id=function KQ(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function HQ(n){return nr(n)||Hs(n)}function GQ(n){return null!==n}function Uo(n){return Du(()=>({type:n.type,bootstrap:n.bootstrap||ur,declarations:n.declarations||ur,imports:n.imports||ur,exports:n.exports||ur,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ZO(n,e){if(null==n)return Dc;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function cn(n){return Du(()=>{const e=JO(n);return eL(e),e})}function jo(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function nr(n){return n[Y1]||null}function Hs(n){return n[VE]||null}function zo(n){return n[BE]||null}function $a(n,e){const t=n[zO]||null;if(!t&&!0===e)throw new Error(`Type ${ps(n)} does not have '\u0275mod' property.`);return t}function JO(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Dc,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ur,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ZO(n.inputs,e),outputs:ZO(n.outputs)}}function eL(n){n.features?.forEach(e=>e(n))}function X1(n,e){if(!n)return null;const t=e?zo:HQ;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(GQ)}const Di=0,dt=1,In=2,li=3,ec=4,U_=5,_o=6,$p=7,zi=8,Fd=9,Hp=10,mn=11,j_=12,tL=13,Gp=14,$i=15,z_=16,qp=17,Pc=18,$_=19,nL=20,Vd=21,Mu=22,H_=23,G_=24,$n=25,jE=1,rL=2,Mc=7,Wp=9,Gs=11;function pa(n){return Array.isArray(n)&&"object"==typeof n[jE]}function $o(n){return Array.isArray(n)&&!0===n[jE]}function zE(n){return 0!=(4&n.flags)}function cf(n){return n.componentOffset>-1}function Z1(n){return 1==(1&n.flags)}function tc(n){return!!n.template}function $E(n){return 0!=(512&n[In])}function uf(n,e){return n.hasOwnProperty(Pu)?n[Pu]:null}let qs=null,J1=!1;function yl(n){const e=qs;return qs=n,e}const oL={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function lL(n){if(!W_(n)||n.dirty){if(!n.producerMustRecompute(n)&&!dL(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function uL(n){n.dirty=!0,function cL(n){if(void 0===n.liveConsumerNode)return;const e=J1;J1=!0;try{for(const t of n.liveConsumerNode)t.dirty||uL(t)}finally{J1=e}}(n),n.consumerMarkedDirty?.(n)}function GE(n){return n&&(n.nextProducerIndex=0),yl(n)}function qE(n,e){if(yl(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(W_(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)eb(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function dL(n){Kp(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(lL(t),r!==t.version))return!0}return!1}function hL(n){if(Kp(n),W_(n))for(let e=0;e<n.producerNode.length;e++)eb(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function eb(n,e){if(function pL(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Kp(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)eb(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Kp(i),i.producerIndexOfThis[r]=e}}function W_(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Kp(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let gL=null;const yL=()=>{},aZ=(()=>({...oL,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:yL}))();class lZ{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ha(){return bL}function bL(n){return n.type.prototype.ngOnChanges&&(n.setInput=uZ),cZ}function cZ(){const n=AL(this),e=n?.current;if(e){const t=n.previous;if(t===Dc)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uZ(n,e,t,r){const i=this.declaredInputs[t],s=AL(n)||function dZ(n,e){return n[wL]=e}(n,{previous:Dc,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new lZ(l&&l.currentValue,e,a===Dc),n[r]=e}Ha.ngInherit=!0;const wL="__ngSimpleChanges__";function AL(n){return n[wL]||null}const kc=function(n,e,t){};function Hr(n){for(;Array.isArray(n);)n=n[Di];return n}function tb(n,e){return Hr(e[n])}function ga(n,e){return Hr(e[n.index])}function IL(n,e){return n.data[e]}function Yp(n,e){return n[e]}function Ga(n,e){const t=e[n];return pa(t)?t:t[Di]}function Ud(n,e){return null==e?null:n[e]}function TL(n){n[qp]=0}function _Z(n){1024&n[In]||(n[In]|=1024,xL(n,1))}function SL(n){1024&n[In]&&(n[In]&=-1025,xL(n,-1))}function xL(n,e){let t=n[li];if(null===t)return;t[U_]+=e;let r=t;for(t=t[li];null!==t&&(1===e&&1===r[U_]||-1===e&&0===r[U_]);)t[U_]+=e,r=t,t=t[li]}const nn={lFrame:BL(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ML(){return nn.bindingsEnabled}function Ue(){return nn.lFrame.lView}function rr(){return nn.lFrame.tView}function rt(n){return nn.lFrame.contextLView=n,n[zi]}function it(n){return nn.lFrame.contextLView=null,n}function Ws(){let n=kL();for(;null!==n&&64===n.type;)n=n.parent;return n}function kL(){return nn.lFrame.currentTNode}function Rc(n,e){const t=nn.lFrame;t.currentTNode=n,t.isParent=e}function QE(){return nn.lFrame.isParent}function Ho(){const n=nn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Qp(){return nn.lFrame.bindingIndex++}function Ru(n){const e=nn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function DZ(n,e){const t=nn.lFrame;t.bindingIndex=t.bindingRootIndex=n,JE(e)}function JE(n){nn.lFrame.currentDirectiveIndex=n}function LL(){return nn.lFrame.currentQueryIndex}function tI(n){nn.lFrame.currentQueryIndex=n}function MZ(n){const e=n[dt];return 2===e.type?e.declTNode:1===e.type?n[_o]:null}function FL(n,e,t){if(t&zn.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&zn.Host||(i=MZ(s),null===i||(s=s[Gp],10&i.type))););if(null===i)return!1;e=i,n=s}const r=nn.lFrame=VL();return r.currentTNode=e,r.lView=n,!0}function nI(n){const e=VL(),t=n[dt];nn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function VL(){const n=nn.lFrame,e=null===n?null:n.child;return null===e?BL(n):e}function BL(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function UL(){const n=nn.lFrame;return nn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jL=UL;function rI(){const n=UL();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Go(){return nn.lFrame.selectedIndex}function df(n){nn.lFrame.selectedIndex=n}function bi(){const n=nn.lFrame;return IL(n.tView,n.selectedIndex)}let $L=!0;function nb(){return $L}function jd(n){$L=n}function rb(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function ib(n,e,t){HL(n,e,3,t)}function sb(n,e,t,r){(3&n[In])===t&&HL(n,e,t,r)}function iI(n,e){let t=n[In];(3&t)===e&&(t&=8191,t+=1,n[In]=t)}function HL(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[qp]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[qp]+=65536),(a<s||-1==s)&&(BZ(n,t,e,l),n[qp]=(4294901760&n[qp])+l+2),l++}function GL(n,e){kc(4,n,e);const t=yl(null);try{e.call(n)}finally{yl(t),kc(5,n,e)}}function BZ(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[In]>>13<n[qp]>>16&&(3&n[In])===e&&(n[In]+=8192,GL(a,s)):GL(a,s)}const Zp=-1;class Y_{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function oI(n){return n!==Zp}function X_(n){return 32767&n}function Q_(n,e){let t=function $Z(n){return n>>16}(n),r=e;for(;t>0;)r=r[Gp],t--;return r}let aI=!0;function ob(n){const e=aI;return aI=n,e}const qL=255,WL=5;let HZ=0;const Nc={};function ab(n,e){const t=KL(n,e);if(-1!==t)return t;const r=e[dt];r.firstCreatePass&&(n.injectorIndex=e.length,lI(r.data,n),lI(e,null),lI(r.blueprint,null));const i=lb(n,e),s=n.injectorIndex;if(oI(i)){const o=X_(i),a=Q_(i,e),l=a[dt].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function lI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function KL(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function lb(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=t3(i),null===r)return Zp;if(t++,i=i[Gp],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Zp}function cI(n,e,t){!function GZ(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(V_)&&(r=t[V_]),null==r&&(r=t[V_]=HZ++);const i=r&qL;e.data[n+(i>>WL)]|=1<<i}(n,e,t)}function YL(n,e,t){if(t&zn.Optional||void 0!==n)return n;DE()}function XL(n,e,t,r){if(t&zn.Optional&&void 0===r&&(r=null),!(t&(zn.Self|zn.Host))){const i=n[Fd],s=ha(void 0);try{return i?i.get(e,r,t&zn.Optional):VO(e,r,t&zn.Optional)}finally{ha(s)}}return YL(r,0,t)}function QL(n,e,t,r=zn.Default,i){if(null!==n){if(2048&e[In]&&!(r&zn.Self)){const o=function QZ(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[In]&&!(512&o[In]);){const a=ZL(s,o,t,r|zn.Self,Nc);if(a!==Nc)return a;let l=s.parent;if(!l){const c=o[nL];if(c){const u=c.get(t,Nc,r);if(u!==Nc)return u}l=t3(o),o=o[Gp]}s=l}return i}(n,e,t,r,Nc);if(o!==Nc)return o}const s=ZL(n,e,t,r,Nc);if(s!==Nc)return s}return XL(e,t,r,i)}function ZL(n,e,t,r,i){const s=function KZ(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(V_)?n[V_]:void 0;return"number"==typeof e?e>=0?e&qL:XZ:e}(t);if("function"==typeof s){if(!FL(e,n,r))return r&zn.Host?YL(i,0,r):XL(e,t,r,i);try{let o;if(o=s(r),null!=o||r&zn.Optional)return o;DE()}finally{jL()}}else if("number"==typeof s){let o=null,a=KL(n,e),l=Zp,c=r&zn.Host?e[$i][_o]:null;for((-1===a||r&zn.SkipSelf)&&(l=-1===a?lb(n,e):e[a+8],l!==Zp&&e3(r,!1)?(o=e[dt],a=X_(l),e=Q_(l,e)):a=-1);-1!==a;){const u=e[dt];if(JL(s,a,u.data)){const d=WZ(a,e,t,o,r,c);if(d!==Nc)return d}l=e[a+8],l!==Zp&&e3(r,e[dt].data[a+8]===c)&&JL(s,a,e)?(o=u,a=X_(l),e=Q_(l,e)):a=-1}}return i}function WZ(n,e,t,r,i,s){const o=e[dt],a=o.data[n+8],u=cb(a,o,t,null==r?cf(a)&&aI:r!=o&&0!=(3&a.type),i&zn.Host&&s===a);return null!==u?hf(e,o,u,a):Nc}function cb(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const m=o[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(i){const f=o[l];if(f&&tc(f)&&f.type===t)return l}return null}function hf(n,e,t,r){let i=n[t];const s=e.data;if(function UZ(n){return n instanceof Y_}(i)){const o=i;o.resolving&&function gQ(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new qe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function _r(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():gn(n)}(s[t]));const a=ob(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?ha(o.injectImpl):null;FL(n,r,zn.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function VZ(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=bL(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&ha(c),ob(a),o.resolving=!1,jL()}}return i}function JL(n,e,t){return!!(t[e+(n>>WL)]&1<<n)}function e3(n,e){return!(n&zn.Self||n&zn.Host&&e)}class qo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QL(this._tNode,this._lView,e,W1(r),t)}}function XZ(){return new qo(Ws(),Ue())}function Ks(n){return Du(()=>{const e=n.prototype.constructor,t=e[Pu]||uI(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Pu]||uI(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function uI(n){return SE(n)?()=>{const e=uI(ln(n));return e&&e()}:uf(n)}function t3(n){const e=n[dt],t=e.type;return 2===t?e.declTNode:1===t?n[_o]:null}const eg="__parameters__";function ng(n,e,t){return Du(()=>{const r=function dI(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(eg)?l[eg]:Object.defineProperty(l,eg,{value:[]})[eg];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function ig(n,e){n.forEach(t=>Array.isArray(t)?ig(t,e):e(t))}function r3(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function db(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qa(n,e,t){let r=sg(n,e);return r>=0?n[1|r]=t:(r=~r,function iJ(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function hI(n,e){const t=sg(n,e);if(t>=0)return n[1|t]}function sg(n,e){return function i3(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const vo=F_(ng("Optional"),8),fb=F_(ng("SkipSelf"),4);function vb(n){return 128==(128&n.flags)}var zd=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(zd||{});const _I=new Map;let xJ=0;const yI="__ngContext__";function yo(n,e){pa(e)?(n[yI]=e[$_],function PJ(n){_I.set(n[$_],n)}(e)):n[yI]=e}let bI;function wI(n,e){return bI(n,e)}function r0(n){const e=n[li];return $o(e)?e[li]:e}function E3(n){return T3(n[j_])}function I3(n){return T3(n[ec])}function T3(n){for(;null!==n&&!$o(n);)n=n[ec];return n}function lg(n,e,t,r,i){if(null!=r){let s,o=!1;$o(r)?s=r:pa(r)&&(o=!0,r=r[Di]);const a=Hr(r);0===n&&null!==t?null==i?P3(e,t,a):ff(e,t,a,i||null,!0):1===n&&null!==t?ff(e,t,a,i||null,!0):2===n?function Ib(n,e,t){const r=Cb(n,e);r&&function YJ(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function ZJ(n,e,t,r,i){const s=t[Mc];s!==Hr(t)&&lg(e,n,r,s,i);for(let a=Gs;a<t.length;a++){const l=t[a];o0(l[dt],l,n,e,r,s)}}(e,n,s,t,i)}}function wb(n,e,t){return n.createElement(e,t)}function x3(n,e){const t=n[Wp],r=t.indexOf(e);SL(e),t.splice(r,1)}function Ab(n,e){if(n.length<=Gs)return;const t=Gs+e,r=n[t];if(r){const i=r[z_];null!==i&&i!==n&&x3(i,r),e>0&&(n[t-1][ec]=r[ec]);const s=db(n,Gs+e);!function jJ(n,e){o0(n,e,e[mn],2,null,null),e[Di]=null,e[_o]=null}(r[dt],r);const o=s[Pc];null!==o&&o.detachView(s[dt]),r[li]=null,r[ec]=null,r[In]&=-129}return r}function CI(n,e){if(!(256&e[In])){const t=e[mn];e[H_]&&hL(e[H_]),e[G_]&&hL(e[G_]),t.destroyNode&&o0(n,e,t,3,null,null),function HJ(n){let e=n[j_];if(!e)return EI(n[dt],n);for(;e;){let t=null;if(pa(e))t=e[j_];else{const r=e[Gs];r&&(t=r)}if(!t){for(;e&&!e[ec]&&e!==n;)pa(e)&&EI(e[dt],e),e=e[li];null===e&&(e=n),pa(e)&&EI(e[dt],e),t=e&&e[ec]}e=t}}(e)}}function EI(n,e){if(!(256&e[In])){e[In]&=-129,e[In]|=256,function KJ(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Y_)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];kc(4,a,l);try{l.call(a)}finally{kc(5,a,l)}}else{kc(4,i,s);try{s.call(i)}finally{kc(5,i,s)}}}}}(n,e),function WJ(n,e){const t=n.cleanup,r=e[$p];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[$p]=null);const i=e[Vd];if(null!==i){e[Vd]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[dt].type&&e[mn].destroy();const t=e[z_];if(null!==t&&$o(e[li])){t!==e[li]&&x3(t,e);const r=e[Pc];null!==r&&r.detachView(n)}!function MJ(n){_I.delete(n[$_])}(e)}}function II(n,e,t){return function D3(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Di];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Zl.None||s===Zl.Emulated)return null}return ga(r,t)}}(n,e.parent,t)}function ff(n,e,t,r,i){n.insertBefore(e,t,r,i)}function P3(n,e,t){n.appendChild(e,t)}function M3(n,e,t,r,i){null!==r?ff(n,e,t,r,i):P3(n,e,t)}function Cb(n,e){return n.parentNode(e)}let TI,PI,Sb,N3=function R3(n,e,t){return 40&n.type?ga(n,t):null};function Eb(n,e,t,r){const i=II(n,r,e),s=e[mn],a=function k3(n,e,t){return N3(n,e,t)}(r.parent||e[_o],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)M3(s,i,t[l],a,!1);else M3(s,i,t,a,!1);void 0!==TI&&TI(s,r,e,t,i)}function s0(n,e){if(null!==e){const t=e.type;if(3&t)return ga(e,n);if(4&t)return SI(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return s0(n,r);{const i=n[e.index];return $o(i)?SI(-1,i):Hr(i)}}if(32&t)return wI(e,n)()||Hr(n[e.index]);{const r=L3(n,e);return null!==r?Array.isArray(r)?r[0]:s0(r0(n[$i]),r):s0(n,e.next)}}return null}function L3(n,e){return null!==e?n[$i][_o].projection[e.projection]:null}function SI(n,e){const t=Gs+n+1;if(t<e.length){const r=e[t],i=r[dt].firstChild;if(null!==i)return s0(r,i)}return e[Mc]}function xI(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&yo(Hr(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)xI(n,e,t.child,r,i,s,!1),lg(e,n,i,a,s);else if(32&l){const c=wI(t,r);let u;for(;u=c();)lg(e,n,i,u,s);lg(e,n,i,a,s)}else 16&l?V3(n,e,r,t,i,s):lg(e,n,i,a,s);t=o?t.projectionNext:t.next}}function o0(n,e,t,r,i,s){xI(t,r,n.firstChild,e,i,s,!1)}function V3(n,e,t,r,i,s){const o=t[$i],l=o[_o].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)lg(e,n,i,l[c],s);else{let c=l;const u=o[li];vb(r)&&(c.flags|=128),xI(n,e,c,u,i,s,!0)}}function B3(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function U3(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&UE(n,e,r),null!==i&&B3(n,e,i),null!==s&&function eee(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function $3(n){return function MI(){if(void 0===Sb&&(Sb=null,$r.trustedTypes))try{Sb=$r.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Sb}()?.createScriptURL(n)||n}class H3{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${NO})`}}function $d(n){return n instanceof H3?n.changingThisBreaksApplicationSecurity:n}function a0(n,e){const t=function uee(n){return n instanceof H3&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${NO})`)}return t===e}const pee=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var dg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(dg||{});function LI(n){const e=c0();return e?e.sanitize(dg.URL,n)||"":a0(n,"URL")?$d(n):function kI(n){return(n=String(n)).match(pee)?n:"unsafe:"+n}(gn(n))}function Q3(n){const e=c0();if(e)return $3(e.sanitize(dg.RESOURCE_URL,n)||"");if(a0(n,"ResourceURL"))return $3($d(n));throw new qe(904,!1)}function c0(){const n=Ue();return n&&n[Hp].sanitizer}const u0=new gt("ENVIRONMENT_INITIALIZER"),J3=new gt("INJECTOR",-1),e4=new gt("INJECTOR_DEF_TYPES");class FI{get(e,t=L_){if(t===L_){const r=new Error(`NullInjectorError: No provider for ${ps(e)}!`);throw r.name="NullInjectorError",r}return t}}function See(...n){return{\u0275providers:t4(0,n),\u0275fromNgModule:!0}}function t4(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return ig(e,o=>{const a=o;Db(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&n4(i,s),t}function n4(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];BI(i,s=>{e(s,r)})}}function Db(n,e,t,r){if(!(n=ln(n)))return!1;let i=null,s=H1(n);const o=!s&&nr(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=H1(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Db(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{ig(s.imports,u=>{Db(u,e,t,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&n4(c,e)}if(!a){const c=uf(i)||(()=>new i);e({provide:i,useFactory:c,deps:ur},i),e({provide:e4,useValue:i,multi:!0},i),e({provide:u0,useValue:()=>bt(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;BI(l,u=>{e(u,c)})}}}return i!==n&&void 0!==n.providers}function BI(n,e){for(let t of n)xE(t)&&(t=t.\u0275providers),Array.isArray(t)?BI(t,e):e(t)}const xee=Ar({provide:String,useValue:Ar});function UI(n){return null!==n&&"object"==typeof n&&xee in n}function pf(n){return"function"==typeof n}const jI=new gt("Set Injector scope."),Pb={},Pee={};let zI;function Mb(){return void 0===zI&&(zI=new FI),zI}class wl{}class hg extends wl{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,HI(e,o=>this.processProvider(o)),this.records.set(J3,fg(void 0,this)),i.has("environment")&&this.records.set(wl,fg(void 0,this));const s=this.records.get(jI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(e4.multi,ur,zn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ld(this),r=ha(void 0);try{return e()}finally{Ld(t),ha(r)}}get(e,t=L_,r=zn.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($O))return e[$O](this);r=W1(r);const s=Ld(this),o=ha(void 0);try{if(!(r&zn.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function Oee(n){return"function"==typeof n||"object"==typeof n&&n instanceof gt}(e)&&$1(e);l=c&&this.injectableDefInScope(c)?fg($I(e),Pb):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&zn.Self?Mb():this.parent).get(e,t=r&zn.Optional&&t===L_?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[q1]=a[q1]||[]).unshift(ps(e)),s)throw a;return function PQ(n,e,t,r){const i=n[q1];throw e[UO]&&i.unshift(e[UO]),n.message=function MQ(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ps(e);if(Array.isArray(e))i=e.map(ps).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ps(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(IQ,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[q1]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{ha(o),Ld(s)}}resolveInjectorInitializers(){const e=Ld(this),t=ha(void 0);try{const i=this.get(u0.multi,ur,zn.Self);for(const s of i)s()}finally{Ld(e),ha(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ps(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new qe(205,!1)}processProvider(e){let t=pf(e=ln(e))?e:ln(e&&e.provide);const r=function kee(n){return UI(n)?fg(void 0,n.useValue):fg(s4(n),Pb)}(e);if(pf(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=fg(void 0,Pb,!0),i.factory=()=>FE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Pb&&(t.value=Pee,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Nee(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ln(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function $I(n){const e=$1(n),t=null!==e?e.factory:uf(n);if(null!==t)return t;if(n instanceof gt)throw new qe(204,!1);if(n instanceof Function)return function Mee(n){const e=n.length;if(e>0)throw function e0(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new qe(204,!1);const t=function wQ(n){return n&&(n[G1]||n[LO])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new qe(204,!1)}function s4(n,e,t){let r;if(pf(n)){const i=ln(n);return uf(i)||$I(i)}if(UI(n))r=()=>ln(n.useValue);else if(function i4(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...FE(n.deps||[]));else if(function r4(n){return!(!n||!n.useExisting)}(n))r=()=>bt(ln(n.useExisting));else{const i=ln(n&&(n.useClass||n.provide));if(!function Ree(n){return!!n.deps}(n))return uf(i)||$I(i);r=()=>new i(...FE(n.deps))}return r}function fg(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function HI(n,e){for(const t of n)Array.isArray(t)?HI(t,e):t&&xE(t)?HI(t.\u0275providers,e):e(t)}const kb=new gt("AppId",{providedIn:"root",factory:()=>Lee}),Lee="ng",o4=new gt("Platform Initializer"),Ou=new gt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),a4=new gt("CSP nonce",{providedIn:"root",factory:()=>function ug(){if(void 0!==PI)return PI;if(typeof document<"u")return document;throw new qe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let l4=(n,e,t)=>null;function ZI(n,e,t=!1){return l4(n,e,t)}class qee{}class d4{}class Kee{resolveComponentFactory(e){throw function Wee(n){const e=Error(`No component factory found for ${ps(n)}.`);return e.ngComponent=n,e}(e)}}let Vb=(()=>{class n{static{this.NULL=new Kee}}return n})();function Yee(){return mg(Ws(),Ue())}function mg(n,e){return new Wa(ga(n,e))}let Wa=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Yee}}return n})();function Xee(n){return n instanceof Wa?n.nativeElement:n}class f4{}let Lu=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Qee(){const n=Ue(),t=Ga(Ws().index,n);return(pa(t)?t:n)[mn]}()}}return n})(),Zee=(()=>{class n{static{this.\u0275prov=Et({token:n,providedIn:"root",factory:()=>null})}}return n})();class _g{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const p4=new _g("16.2.12"),tT={};function v4(n,e=null,t=null,r){const i=y4(n,e,t,r);return i.resolveInjectorInitializers(),i}function y4(n,e=null,t=null,r,i=new Set){const s=[t||ur,See(n)];return r=r||("object"==typeof n?void 0:ps(n)),new hg(s,e||Mb(),r||null,i)}let Ys=(()=>{class n{static{this.THROW_IF_NOT_FOUND=L_}static{this.NULL=new FI}static create(t,r){if(Array.isArray(t))return v4({name:""},r,t,"");{const i=t.name??"";return v4({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Et({token:n,providedIn:"any",factory:()=>bt(J3)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function rT(n){return n.ngOriginalError}class Fu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&rT(e);for(;t&&rT(t);)t=rT(t);return t||null}}function iT(n){return e=>{setTimeout(n,void 0,e)}}const ci=class ote extends pn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=iT(s),i&&(i=iT(i)),o&&(o=iT(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof pt&&e.add(a),a}};function w4(...n){}class dr{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ci(!1),this.onMicrotaskEmpty=new ci(!1),this.onStable=new ci(!1),this.onError=new ci(!1),typeof Zone>"u")throw new qe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function ate(){const n="function"==typeof $r.requestAnimationFrame;let e=$r[n?"requestAnimationFrame":"setTimeout"],t=$r[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function ute(n){const e=()=>{!function cte(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call($r,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,oT(n),n.isCheckStableRunning=!0,sT(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),oT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function hte(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return A4(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),C4(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return A4(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),C4(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,oT(n),sT(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!dr.isInAngularZone())throw new qe(909,!1)}static assertNotInAngularZone(){if(dr.isInAngularZone())throw new qe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,lte,w4,w4);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const lte={};function sT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function oT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function A4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function C4(n){n._nesting--,sT(n)}class dte{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ci,this.onMicrotaskEmpty=new ci,this.onStable=new ci,this.onError=new ci}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const E4=new gt("",{providedIn:"root",factory:I4});function I4(){const n=vt(dr);let e=!0;return EE(new Ve(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Ve(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{dr.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{dr.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(RO()))}function Vu(n){return n instanceof Function?n():n}let aT=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Et({token:n,providedIn:"root",factory:()=>new n})}}return n})();function f0(n){for(;n;){n[In]|=64;const e=r0(n);if($E(n)&&!e)return n;n=e}return null}const P4=new gt("",{providedIn:"root",factory:()=>!1});let jb=null;function N4(n,e){return n[e]??F4()}function O4(n,e){const t=F4();t.producerNode?.length&&(n[e]=jb,t.lView=n,jb=L4())}const Ate={...oL,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{f0(n.lView)},lView:null};function L4(){return Object.create(Ate)}function F4(){return jb??=L4(),jb}const yn={};function z(n){V4(rr(),Ue(),Go()+n,!1)}function V4(n,e,t,r){if(!r)if(3==(3&e[In])){const s=n.preOrderCheckHooks;null!==s&&ib(e,s,t)}else{const s=n.preOrderHooks;null!==s&&sb(e,s,0,t)}df(t)}function Le(n,e=zn.Default){const t=Ue();return null===t?bt(n,e):QL(Ws(),t,ln(n),e)}function zb(n,e,t,r,i,s,o,a,l,c,u){const d=e.blueprint.slice();return d[Di]=i,d[In]=140|r,(null!==c||n&&2048&n[In])&&(d[In]|=2048),TL(d),d[li]=d[Gp]=n,d[zi]=t,d[Hp]=o||n&&n[Hp],d[mn]=a||n&&n[mn],d[Fd]=l||n&&n[Fd]||null,d[_o]=s,d[$_]=function DJ(){return xJ++}(),d[Mu]=u,d[nL]=c,d[$i]=2==e.type?n[$i]:d,d}function bg(n,e,t,r,i){let s=n.data[e];if(null===s)s=function lT(n,e,t,r,i){const s=kL(),o=QE(),l=n.data[e]=function Pte(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Xp(){return null!==nn.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function xZ(){return nn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function K_(){const n=nn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Rc(s,!0),s}function p0(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function U4(n,e,t,r,i){const s=N4(e,H_),o=Go(),a=2&r;try{df(-1),a&&e.length>$n&&V4(n,e,$n,!1),kc(a?2:0,i);const c=a?s:null,u=GE(c);try{null!==c&&(c.dirty=!1),t(r,i)}finally{qE(c,u)}}finally{a&&null===e[H_]&&O4(e,H_),df(o),kc(a?3:1,i)}}function cT(n,e,t){if(zE(e)){const r=yl(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{yl(r)}}}function uT(n,e,t){ML()&&(function Fte(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;cf(t)&&function Hte(n,e,t){const r=ga(e,n),i=j4(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=$b(n,zb(n,i,null,o,r,e,null,n[Hp].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ab(t,e),yo(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=hf(e,n,a,t);yo(c,e),null!==o&&Gte(0,a-i,c,l,0,o),tc(l)&&(Ga(t.index,e)[zi]=hf(e,n,a,t))}}(n,e,t,ga(t,e)),64==(64&t.flags)&&q4(n,e,t))}function dT(n,e,t=ga){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function j4(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=hT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hT(n,e,t,r,i,s,o,a,l,c,u){const d=$n+r,h=d+i,f=function Ete(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:yn);return t}(d,h),m="function"==typeof c?c():c;return f[dt]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}let z4=n=>null;function $4(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?H4(t,e,i,s):r.hasOwnProperty(i)&&H4(t,e,r[i],s)}return t}function H4(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function fT(n,e,t,r){if(ML()){const i=null===r?null:{"":-1},s=function Bte(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(XO(e,o.selectors,!1))if(r||(r=[]),tc(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),pT(n,e,a.length)}else r.unshift(o),pT(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&G4(n,e,t,o,i,a),i&&function Ute(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new qe(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=B_(t.mergedAttrs,t.attrs)}function G4(n,e,t,r,i,s){for(let c=0;c<r.length;c++)cI(ab(t,e),n,r[c].type);!function zte(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=p0(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=B_(t.mergedAttrs,u.hostAttrs),$te(n,t,e,l,u),jte(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function Mte(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<i;u++){const d=s[u],h=t?t.get(d):null,m=h?h.outputs:null;l=$4(d.inputs,u,l,h?h.inputs:null),c=$4(d.outputs,u,c,m);const v=null===l||null===o||YO(e)?null:qte(l,u,o);a.push(v)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function q4(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function PZ(){return nn.lFrame.currentDirectiveIndex}();try{df(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];JE(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Vte(l,c)}}finally{df(-1),JE(o)}}function Vte(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function pT(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function jte(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;tc(e)&&(t[""]=n)}}function $te(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=uf(i.type)),o=new Y_(s,tc(i),Le);n.blueprint[r]=o,t[r]=o,function Ote(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Lte(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,p0(n,t,i.hostVars,yn),i)}function Oc(n,e,t,r,i,s){const o=ga(n,e);!function gT(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?gn(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[mn],o,s,n.value,t,r,i)}function Gte(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)W4(r,t,o[a++],o[a++],o[a++])}function W4(n,e,t,r,i){const s=yl(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{yl(s)}}function qte(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function K4(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function Y4(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];tI(t[r]),o.contentQueries(2,e[s],s)}}}function $b(n,e){return n[j_]?n[tL][ec]=e:n[j_]=e,n[tL]=e,e}function mT(n,e,t){tI(0);const r=yl(null);try{e(n,t)}finally{yl(r)}}function X4(n){return n[$p]||(n[$p]=[])}function Q4(n){return n.cleanup||(n.cleanup=[])}function J4(n,e){const t=n[Fd],r=t?t.get(Fu,null):null;r&&r.handleError(e)}function _T(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];W4(n.data[o],e[o],r,a,i)}}function Bu(n,e,t){const r=tb(e,n);!function S3(n,e,t){n.setValue(e,t)}(n[mn],r,t)}function Wte(n,e){const t=Ga(e,n),r=t[dt];!function Kte(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Di];null!==i&&null===t[Mu]&&(t[Mu]=ZI(i,t[Fd])),vT(r,t,t[zi])}function vT(n,e,t){nI(e);try{const r=n.viewQuery;null!==r&&mT(1,r,t);const i=n.template;null!==i&&U4(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Y4(n,e),n.staticViewQueries&&mT(2,n.viewQuery,t);const s=n.components;null!==s&&function Yte(n,e){for(let t=0;t<e.length;t++)Wte(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[In]&=-5,rI()}}let eF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function oZ(n,e,t){const r=Object.create(aZ);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>uL(r),run:()=>{if(r.dirty=!1,r.hasRun&&!dL(r))return;r.hasRun=!0;const o=GE(r);try{r.cleanupFn(),r.cleanupFn=yL,r.fn(i)}finally{qE(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Et({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Hb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=TE(i,a):2==s&&(r=TE(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function g0(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Hr(s)),$o(s)&&tF(s,r);const o=t.type;if(8&o)g0(n,e,t.child,r);else if(32&o){const a=wI(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=L3(e,t);if(Array.isArray(a))r.push(...a);else{const l=r0(e[$i]);g0(l[dt],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function tF(n,e){for(let t=Gs;t<n.length;t++){const r=n[t],i=r[dt].firstChild;null!==i&&g0(r[dt],r,i,e)}n[Mc]!==n[Di]&&e.push(n[Mc])}function Gb(n,e,t,r=!0){const i=e[Hp],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{nF(n,e,n.template,t)}catch(l){throw r&&J4(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function nF(n,e,t,r){const i=e[In];if(256!=(256&i)){e[Hp].effectManager?.flush(),nI(e);try{TL(e),function NL(n){return nn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&U4(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&ib(e,c,null)}else{const c=n.preOrderHooks;null!==c&&sb(e,c,0,null),iI(e,0)}if(function Zte(n){for(let e=E3(n);null!==e;e=I3(e)){if(!e[rL])continue;const t=e[Wp];for(let r=0;r<t.length;r++){_Z(t[r])}}}(e),rF(e,2),null!==n.contentQueries&&Y4(n,e),o){const c=n.contentCheckHooks;null!==c&&ib(e,c)}else{const c=n.contentHooks;null!==c&&sb(e,c,1),iI(e,1)}!function Cte(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=N4(e,G_);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)df(~s);else{const o=s,a=t[++i],l=t[++i];DZ(a,o),r.dirty=!1;const c=GE(r);try{l(2,e[o])}finally{qE(r,c)}}}}finally{null===e[G_]&&O4(e,G_),df(-1)}}(n,e);const a=n.components;null!==a&&sF(e,a,0);const l=n.viewQuery;if(null!==l&&mT(2,l,r),o){const c=n.viewCheckHooks;null!==c&&ib(e,c)}else{const c=n.viewHooks;null!==c&&sb(e,c,2),iI(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[In]&=-73,SL(e)}finally{rI()}}}function rF(n,e){for(let t=E3(n);null!==t;t=I3(t))for(let r=Gs;r<t.length;r++)iF(t[r],e)}function Jte(n,e,t){iF(Ga(e,n),t)}function iF(n,e){if(!function gZ(n){return 128==(128&n[In])}(n))return;const t=n[dt],r=n[In];if(80&r&&0===e||1024&r||2===e)nF(t,n,t.template,n[zi]);else if(n[U_]>0){rF(n,1);const i=t.components;null!==i&&sF(n,i,1)}}function sF(n,e,t){for(let r=0;r<e.length;r++)Jte(n,e[r],t)}class m0{get rootNodes(){const e=this._lView,t=e[dt];return g0(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zi]}set context(e){this._lView[zi]=e}get destroyed(){return 256==(256&this._lView[In])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[li];if($o(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Ab(e,r),db(t,r))}this._attachedToViewContainer=!1}CI(this._lView[dt],this._lView)}onDestroy(e){!function DL(n,e){if(256==(256&n[In]))throw new qe(911,!1);null===n[Vd]&&(n[Vd]=[]),n[Vd].push(e)}(this._lView,e)}markForCheck(){f0(this._cdRefInjectingView||this._lView)}detach(){this._lView[In]&=-129}reattach(){this._lView[In]|=128}detectChanges(){Gb(this._lView[dt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new qe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $J(n,e){o0(n,e,e[mn],2,null,null)}(this._lView[dt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new qe(902,!1);this._appRef=e}}class ene extends m0{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Gb(e[dt],e,e[zi],!1)}checkNoChanges(){}get context(){return null}}class oF extends Vb{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=nr(e);return new _0(t,this.ngModule)}}function aF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class nne{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=W1(r);const i=this.injector.get(e,tT,r);return i!==tT||t===tT?i:this.parentInjector.get(e,t,r)}}class _0 extends d4{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=aF(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return aF(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function jQ(n){return n.map(UQ).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof wl?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new nne(e,s):e,a=o.get(f4,null);if(null===a)throw new qe(407,!1);const d={rendererFactory:a,sanitizer:o.get(Zee,null),effectManager:o.get(eF,null),afterRenderEventManager:o.get(aT,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=r?function Ite(n,e,t,r){const s=r.get(P4,!1)||t===Zl.ShadowDom,o=n.selectRootElement(e,s);return function Tte(n){z4(n)}(o),o}(h,r,this.componentDef.encapsulation,o):wb(h,f,function tne(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),b=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let A=null;null!==m&&(A=ZI(m,o,!0));const T=hT(0,null,null,1,0,null,null,null,null,null,null),P=zb(null,T,null,b,null,null,d,h,o,null,A);let V,q;nI(P);try{const N=this.componentDef;let D,S=null;N.findHostDirectiveDefs?(D=[],S=new Map,N.findHostDirectiveDefs(N,D,S),D.push(N)):D=[N];const F=function ine(n,e){const t=n[dt],r=$n;return n[r]=e,bg(t,r,2,"#host",null)}(P,m),I=function sne(n,e,t,r,i,s,o){const a=i[dt];!function one(n,e,t,r){for(const i of n)e.mergedAttrs=B_(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Hb(e,e.mergedAttrs,!0),null!==t&&U3(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=ZI(e,i[Fd]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=zb(i,j4(t),null,u,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&pT(a,n,r.length-1),$b(i,d),i[n.index]=d}(F,m,N,D,P,d,h);q=IL(T,$n),m&&function lne(n,e,t,r){if(r)UE(n,t,["ng-version",p4.full]);else{const{attrs:i,classes:s}=function zQ(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Jl(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&UE(n,t,i),s&&s.length>0&&B3(n,t,s.join(" "))}}(h,N,m,r),void 0!==t&&function cne(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(q,this.ngContentSelectors,t),V=function ane(n,e,t,r,i,s){const o=Ws(),a=i[dt],l=ga(o,i);G4(a,i,o,t,null,r);for(let u=0;u<t.length;u++)yo(hf(i,a,o.directiveStart+u,o),i);q4(a,i,o),l&&yo(l,i);const c=hf(i,a,o.directiveStart+o.componentOffset,o);if(n[zi]=i[zi]=c,null!==s)for(const u of s)u(c,e);return cT(a,o,n),c}(I,N,D,S,P,[une]),vT(T,P,null)}finally{rI()}return new rne(this.componentType,V,mg(q,P),P,q)}}class rne extends qee{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ene(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;_T(s[dt],s,i,e,t),this.previousInputValues.set(e,t),f0(Ga(this._tNode.index,s))}}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function une(){const n=Ws();rb(Ue()[dt],n)}function Cr(n){let e=function lF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(tc(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new qe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=qb(n.inputs),o.inputTransforms=qb(n.inputTransforms),o.declaredInputs=qb(n.declaredInputs),o.outputs=qb(n.outputs);const a=i.hostBindings;a&&pne(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&hne(n,l),c&&fne(n,c),j1(n.inputs,i.inputs),j1(n.declaredInputs,i.declaredInputs),j1(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),j1(o.inputTransforms,i.inputTransforms)),tc(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Cr&&(t=!1)}}e=Object.getPrototypeOf(e)}!function dne(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=B_(i.hostAttrs,t=B_(t,i.hostAttrs))}}(r)}function qb(n){return n===Dc?{}:n===ur?[]:n}function hne(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function fne(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function pne(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function hF(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Wb(n){return!!yT(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function yT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Lc(n,e,t){return n[e]=t}function bo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function gf(n,e,t,r){const i=bo(n,e,t);return bo(n,e+1,r)||i}function Pi(n,e,t,r){const i=Ue();return bo(i,Qp(),e)&&(rr(),Oc(bi(),i,n,e,t,r)),Pi}function Cg(n,e,t,r,i,s){const a=gf(n,function ku(){return nn.lFrame.bindingIndex}(),t,i);return Ru(2),a?e+gn(t)+r+gn(i)+s:yn}function Be(n,e,t,r,i,s,o,a){const l=Ue(),c=rr(),u=n+$n,d=c.firstCreatePass?function Bne(n,e,t,r,i,s,o,a,l){const c=e.consts,u=bg(e,n,4,o||null,Ud(c,a));fT(e,t,u,Ud(c,l)),rb(e,u);const d=u.tView=hT(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,s,o):c.data[u];Rc(d,!1);const h=IF(c,l,d,n);nb()&&Eb(c,l,h,d),yo(h,l),$b(l,l[u]=K4(h,l,h,d)),Z1(d)&&uT(c,l,d),null!=o&&dT(l,d,a)}let IF=function TF(n,e,t,r){return jd(!0),e[mn].createComment("")};function IT(n){return Yp(function SZ(){return nn.lFrame.contextLView}(),$n+n)}function ae(n,e,t){const r=Ue();return bo(r,Qp(),e)&&function Ka(n,e,t,r,i,s,o,a){const l=ga(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(_T(n,t,u,r,i),cf(e)&&function Rte(n,e){const t=Ga(e,n);16&t[In]||(t[In]|=64)}(t,e.index)):3&e.type&&(r=function kte(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}(rr(),bi(),r,n,e,r[mn],t,!1),ae}function TT(n,e,t,r,i){const o=i?"class":"style";_T(n,t,e.inputs[o],o,r)}function x(n,e,t,r){const i=Ue(),s=rr(),o=$n+n,a=i[mn],l=s.firstCreatePass?function $ne(n,e,t,r,i,s){const o=e.consts,l=bg(e,n,2,r,Ud(o,i));return fT(e,t,l,Ud(o,s)),null!==l.attrs&&Hb(l,l.attrs,!1),null!==l.mergedAttrs&&Hb(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=SF(s,i,l,a,e,n);i[o]=c;const u=Z1(l);return Rc(l,!0),U3(a,c,l),32!=(32&l.flags)&&nb()&&Eb(s,i,c,l),0===function yZ(){return nn.lFrame.elementDepthCount}()&&yo(c,i),function bZ(){nn.lFrame.elementDepthCount++}(),u&&(uT(s,i,l),cT(s,l,i)),null!==r&&dT(i,l),x}function M(){let n=Ws();QE()?function ZE(){nn.lFrame.isParent=!1}():(n=n.parent,Rc(n,!1));const e=n;(function AZ(n){return nn.skipHydrationRootTNode===n})(e)&&function TZ(){nn.skipHydrationRootTNode=null}(),function wZ(){nn.lFrame.elementDepthCount--}();const t=rr();return t.firstCreatePass&&(rb(t,n),zE(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function jZ(n){return 0!=(8&n.flags)}(e)&&TT(t,e,Ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function zZ(n){return 0!=(16&n.flags)}(e)&&TT(t,e,Ue(),e.stylesWithoutHost,!1),M}function oe(n,e,t,r){return x(n,e,t,r),M(),oe}let SF=(n,e,t,r,i,s)=>(jd(!0),wb(r,i,function zL(){return nn.lFrame.currentNamespace}()));function Fn(){return Ue()}function A0(n){return!!n&&"function"==typeof n.then}function PF(n){return!!n&&"function"==typeof n.subscribe}function Ee(n,e,t,r){const i=Ue(),s=rr(),o=Ws();return function kF(n,e,t,r,i,s,o){const a=Z1(r),c=n.firstCreatePass&&Q4(n),u=e[zi],d=X4(e);let h=!0;if(3&r.type||o){const v=ga(r,e),y=o?o(v):v,b=d.length,A=o?P=>o(Hr(P[r.index])):r.index;let T=null;if(!o&&a&&(T=function Yne(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[$p],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,h=!1;else{s=NF(r,e,u,s,!1);const P=t.listen(y,i,s);d.push(s,P),c&&c.push(i,A,b,b+1)}}else s=NF(r,e,u,s,!1);const f=r.outputs;let m;if(h&&null!==f&&(m=f[i])){const v=m.length;if(v)for(let y=0;y<v;y+=2){const V=e[m[y]][m[y+1]].subscribe(s),q=d.length;d.push(s,V),c&&c.push(i,r.index,q,-(q+1))}}}(s,i,i[mn],o,n,e,r),Ee}function RF(n,e,t,r){try{return kc(6,e,t),!1!==t(r)}catch(i){return J4(n,i),!1}finally{kc(7,e,t)}}function NF(n,e,t,r,i){return function s(o){if(o===Function)return r;f0(n.componentOffset>-1?Ga(n.index,e):e);let l=RF(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)l=RF(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function Te(n=1){return function kZ(n){return(nn.lFrame.contextLView=function RZ(n,e){for(;n>0;)e=e[Gp],n--;return e}(n,nn.lFrame.contextLView))[zi]}(n)}function Zb(n,e){return n<<17|e<<2}function Hd(n){return n>>17&32767}function PT(n){return 2|n}function mf(n){return(131068&n)>>2}function MT(n,e){return-131069&n|e<<2}function kT(n){return 1|n}function HF(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Hd(s):mf(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];ire(n[a],e)&&(l=!0,n[a+1]=r?kT(u):PT(u)),a=r?Hd(u):mf(u)}l&&(n[t+1]=r?PT(s):kT(s))}function ire(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&sg(n,e)>=0}function rn(n,e){return function nc(n,e,t,r){const i=Ue(),s=rr(),o=Ru(2);s.firstUpdatePass&&function JF(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Go()],o=function ZF(n,e){return e>=n.expandoStartIndex}(n,t);(function r6(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function fre(n,e,t,r){const i=function eI(n){const e=nn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=C0(t=RT(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=RT(i,n,e,t,r),null===s){let l=function pre(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==mf(r))return n[Hd(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=RT(null,n,e,l[1],r),l=C0(l,e.attrs,r),function gre(n,e,t,r){n[Hd(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function mre(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=C0(r,n[s].hostAttrs,t);return C0(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function nre(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Hd(o),l=mf(o);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||sg(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const h=Hd(n[a+1]);n[r+1]=Zb(h,a),0!==h&&(n[h+1]=MT(n[h+1],r)),n[a+1]=function ere(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Zb(a,0),0!==a&&(n[a+1]=MT(n[a+1],r)),a=r;else n[r+1]=Zb(l,0),0===a?a=r:n[l+1]=MT(n[l+1],r),l=r;c&&(n[r+1]=PT(n[r+1])),HF(n,u,r,!0),HF(n,u,r,!1),function rre(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&sg(s,e)>=0&&(t[r+1]=kT(t[r+1]))}(e,u,n,r,s),o=Zb(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==yn&&bo(i,o,e)&&function t6(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function tre(n){return 1==(1&n)}(c)?n6(l,e,t,i,mf(c),o):void 0;Jb(u)||(Jb(s)||function Jne(n){return 2==(2&n)}(c)&&(s=n6(l,null,t,i,a,o)),function JJ(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:zd.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=zd.Important),n.setStyle(t,r,i,s))}}(r,o,tb(Go(),t),i,s))}(s,s.data[Go()],i,i[mn],n,i[o+1]=function bre(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ps($d(n)))),n}(e,t),r,o)}(n,e,null,!0),rn}function RT(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=C0(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function C0(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qa(n,o,!!t||e[++s]))}return void 0===n?null:n}function n6(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===yn&&(h=d?ur:void 0);let f=d?hI(h,r):u===r?h:void 0;if(c&&!Jb(f)&&(f=hI(l,r)),Jb(f)&&(a=f,o))return a;const m=n[i+1];i=o?Hd(m):mf(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=hI(l,r))}return a}function Jb(n){return void 0!==n}function H(n,e=""){const t=Ue(),r=rr(),i=n+$n,s=r.firstCreatePass?bg(r,i,1,e,null):r.data[i],o=i6(r,t,s,e,n);t[i]=o,nb()&&Eb(r,t,o,s),Rc(s,!1)}let i6=(n,e,t,r,i)=>(jd(!0),function bb(n,e){return n.createText(e)}(e[mn],r));function Qe(n){return Hn("",n,""),Qe}function Hn(n,e,t){const r=Ue(),i=function Ag(n,e,t,r){return bo(n,Qp(),t)?e+gn(t)+r:yn}(r,n,e,t);return i!==yn&&Bu(r,Go(),i),Hn}function ic(n,e,t,r,i){const s=Ue(),o=Cg(s,n,e,t,r,i);return o!==yn&&Bu(s,Go(),o),ic}const _f=void 0;var zre=["en",[["a","p"],["AM","PM"],_f],[["AM","PM"],_f,_f],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_f,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_f,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_f,"{1} 'at' {0}",_f],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jre(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Mg={};function Wo(n){const e=function $re(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=E6(e);if(t)return t;const r=e.split("-")[0];if(t=E6(r),t)return t;if("en"===r)return zre;throw new qe(701,!1)}function E6(n){return n in Mg||(Mg[n]=$r.ng&&$r.ng.common&&$r.ng.common.locales&&$r.ng.common.locales[n]),Mg[n]}var Gr=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Gr||{});const kg="en-US";let I6=kg;function LT(n,e,t,r,i){if(n=ln(n),Array.isArray(n))for(let s=0;s<n.length;s++)LT(n[s],e,t,r,i);else{const s=rr(),o=Ue(),a=Ws();let l=pf(n)?n:ln(n.provide);const c=s4(n),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(pf(n)||!n.multi){const f=new Y_(c,i,Le),m=VT(l,e,i?u:u+h,d);-1===m?(cI(ab(a,o),s,l),FT(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[m]=f,o[m]=f)}else{const f=VT(l,e,u+h,d),m=VT(l,e,u,u+h),y=m>=0&&t[m];if(i&&!y||!i&&!(f>=0&&t[f])){cI(ab(a,o),s,l);const b=function jie(n,e,t,r,i){const s=new Y_(n,t,Le);return s.multi=[],s.index=e,s.componentProviders=0,X6(s,i,r&&!t),s}(i?Uie:Bie,t.length,i,r,c);!i&&y&&(t[m].providerFactory=b),FT(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),o.push(b)}else FT(s,n,f>-1?f:m,X6(t[i?m:f],c,!i&&r));!i&&r&&y&&t[m].componentProviders++}}}function FT(n,e,t,r){const i=pf(e),s=function Dee(n){return!!n.useClass}(e);if(i||s){const l=(s?ln(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function X6(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function VT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Bie(n,e,t,r){return BT(this.multi,[])}function Uie(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=hf(t,t[dt],this.providerFactory.index,r);s=a.slice(0,o),BT(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],BT(i,s);return s}function BT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ui(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Vie(n,e,t){const r=rr();if(r.firstCreatePass){const i=tc(n);LT(t,r.data,r.blueprint,i,!0),LT(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class vf{}class Q6{}class UT extends vf{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new oF(this);const i=$a(e);this._bootstrapComponents=Vu(i.bootstrap),this._r3Injector=y4(e,t,[{provide:vf,useValue:this},{provide:Vb,useValue:this.componentFactoryResolver},...r],ps(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class jT extends Q6{constructor(e){super(),this.moduleType=e}create(e){return new UT(this.moduleType,e,[])}}class Z6 extends vf{constructor(e){super(),this.componentFactoryResolver=new oF(this),this.instance=null;const t=new hg([...e.providers,{provide:vf,useValue:this},{provide:Vb,useValue:this.componentFactoryResolver}],e.parent||Mb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function zT(n,e,t=null){return new Z6({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Hie=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=t4(0,t.type),i=r.length>0?zT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Et({token:n,providedIn:"environment",factory:()=>new n(bt(wl))})}}return n})();function J6(n){n.getStandaloneInjector=e=>e.get(Hie).getOrCreateStandaloneInjector(n)}function Jr(n,e,t,r,i,s){return function l8(n,e,t,r,i,s,o,a){const l=e+t;return function Kb(n,e,t,r,i){const s=gf(n,e,t,r);return bo(n,e+2,i)||s}(n,l,i,s,o)?Lc(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):D0(n,l+3)}(Ue(),Ho(),n,e,t,r,i,s)}function D0(n,e){const t=n[e];return t===yn?void 0:t}function ei(n,e){const t=rr();let r;const i=n+$n;t.firstCreatePass?(r=function lse(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=uf(r.type)),a=ha(Le);try{const l=ob(!1),c=s();return ob(l),function zne(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Ue(),i,c),c}finally{ha(a)}}function Cl(n,e,t){const r=n+$n,i=Ue(),s=Yp(i,r);return P0(i,r)?function o8(n,e,t,r,i,s){const o=e+t;return bo(n,o,i)?Lc(n,o+1,s?r.call(s,i):r(i)):D0(n,o+1)}(i,Ho(),e,s.transform,t,s):s.transform(t)}function va(n,e,t,r){const i=n+$n,s=Ue(),o=Yp(s,i);return P0(s,i)?function a8(n,e,t,r,i,s,o){const a=e+t;return gf(n,a,i,s)?Lc(n,a+2,o?r.call(o,i,s):r(i,s)):D0(n,a+2)}(s,Ho(),e,o.transform,t,r,o):o.transform(t,r)}function P0(n,e){return n[dt].data[e].pure}function hse(){return this._results[Symbol.iterator]()}class HT{get changes(){return this._changes||(this._changes=new ci)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=HT.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=hse)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function bl(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function nJ(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function pse(n,e,t,r=!0){const i=e[dt];if(function GJ(n,e,t,r){const i=Gs+r,s=t.length;r>0&&(t[i-1][ec]=e),r<s-Gs?(e[ec]=t[i],r3(t,Gs+r,e)):(t.push(e),e[ec]=null),e[li]=t;const o=e[z_];null!==o&&t!==o&&function qJ(n,e){const t=n[Wp];e[$i]!==e[li][li][$i]&&(n[rL]=!0),null===t?n[Wp]=[e]:t.push(e)}(o,e);const a=e[Pc];null!==a&&a.insertView(n),e[In]|=128}(i,e,n,t),r){const s=SI(t,n),o=e[mn],a=Cb(o,n[Mc]);null!==a&&function zJ(n,e,t,r,i,s){r[Di]=i,r[_o]=e,o0(n,r,t,1,i,s)}(i,n[_o],o,e,a,s)}}let Uu=(()=>{class n{static{this.__NG_ELEMENT_ID__=_se}}return n})();const gse=Uu,mse=class extends gse{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function fse(n,e,t,r){const i=e.tView,a=zb(n,i,t,4096&n[In]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[z_]=n[e.index];const c=n[Pc];return null!==c&&(a[Pc]=c.createEmbeddedView(i)),vT(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new m0(i)}};function _se(){return iw(Ws(),Ue())}function iw(n,e){return 4&n.type?new mse(e,n,mg(n,e)):null}let sc=(()=>{class n{static{this.__NG_ELEMENT_ID__=Cse}}return n})();function Cse(){return _8(Ws(),Ue())}const Ese=sc,g8=class extends Ese{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mg(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){const e=lb(this._hostTNode,this._hostLView);if(oI(e)){const t=Q_(e,this._hostLView),r=X_(e);return new qo(t[dt].data[r+8],t)}return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=m8(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Gs}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function J_(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const v=t||{};a=v.index,r=v.injector,i=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef}const l=o?e:new _0(nr(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const y=(o?c:this.parentInjector).get(wl,null);y&&(s=y)}nr(l.componentType??{});const f=l.create(c,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function mZ(n){return $o(n[li])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=i[li],u=new g8(c,c[_o],c[li]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return pse(a,i,o,!r),e.attachToViewContainerRef(),r3(GT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=m8(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Ab(this._lContainer,t);r&&(db(GT(this._lContainer),t),CI(r[dt],r))}detach(e){const t=this._adjustIndex(e,-1),r=Ab(this._lContainer,t);return r&&null!=db(GT(this._lContainer),t)?new m0(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function m8(n){return n[8]}function GT(n){return n[8]||(n[8]=[])}function _8(n,e){let t;const r=e[n.index];return $o(r)?t=r:(t=K4(r,e,null,n),e[n.index]=t,$b(e,t)),v8(t,e,n,r),new g8(t,n,e)}let v8=function y8(n,e,t,r){if(n[Mc])return;let i;i=8&t.type?Hr(r):function Ise(n,e){const t=n[mn],r=t.createComment(""),i=ga(e,n);return ff(t,Cb(t,i),r,function XJ(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Mc]=i};class qT{constructor(e){this.queryList=e,this.matches=null}clone(){return new qT(this.queryList)}setDirty(){this.queryList.setDirty()}}class WT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new WT(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==S8(e,t).matches&&this.queries[t].setDirty()}}class b8{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class KT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new KT(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class YT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new YT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,xse(t,s)),this.matchTNodeWithReadOption(e,t,cb(t,e,s,!1,!1))}else r===Uu?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,cb(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Wa||i===sc||i===Uu&&4&t.type)this.addMatch(t.index,-2);else{const s=cb(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function xse(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Pse(n,e,t,r){return-1===t?function Dse(n,e){return 11&n.type?mg(n,e):4&n.type?iw(n,e):null}(e,n):-2===t?function Mse(n,e,t){return t===Wa?mg(e,n):t===Uu?iw(e,n):t===sc?_8(e,n):void 0}(n,e,r):hf(n,n[dt],t,e)}function w8(n,e,t,r){const i=e[Pc].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:Pse(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function XT(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=w8(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=Gs;d<u.length;d++){const h=u[d];h[z_]===h[li]&&XT(h[dt],h,c,r)}if(null!==u[Wp]){const d=u[Wp];for(let h=0;h<d.length;h++){const f=d[h];XT(f[dt],f,c,r)}}}}}return r}function A8(n){const e=Ue(),t=rr(),r=LL();tI(r+1);const i=S8(t,r);if(n.dirty&&function pZ(n){return 4==(4&n[In])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?XT(t,e,r,[]):w8(t,e,i,r);n.reset(s,Xee),n.notifyOnChanges()}return!0}return!1}function C8(n,e,t,r){const i=rr();if(i.firstCreatePass){const s=Ws();(function T8(n,e,t){null===n.queries&&(n.queries=new KT),n.queries.track(new YT(e,t))})(i,new b8(e,t,r),s.index),function Nse(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}!function I8(n,e,t){const r=new HT(4==(4&t));(function Dte(n,e,t,r){const i=X4(e);i.push(t),n.firstCreatePass&&Q4(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Pc]&&(e[Pc]=new WT),e[Pc].queries.push(new qT(r))}(i,Ue(),t)}function S8(n,e){return n.queries.getByIndex(e)}const aw=new gt("Application Initializer");let nS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=vt(aw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(A0(s))t.push(s);else if(PF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),H8=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const ju=new gt("LocaleId",{providedIn:"root",factory:()=>vt(ju,zn.Optional|zn.SkipSelf)||function noe(){return typeof $localize<"u"&&$localize.locale||kg}()});let G8=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ja(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class soe{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let q8=(()=>{class n{compileModuleSync(t){return new jT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Vu($a(t).declarations).reduce((o,a)=>{const l=nr(a);return l&&o.push(new _0(l)),o},[]);return new soe(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const X8=new gt(""),cw=new gt("");let aS,sS=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,aS||(function Soe(n){aS=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{dr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(bt(dr),bt(oS),bt(cw))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})(),oS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return aS?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Gd=null;const Q8=new gt("AllowMultipleToken"),lS=new gt("PlatformDestroyListeners"),cS=new gt("appBootstrapListener");class J8{constructor(e,t){this.name=e,this.token=t}}function tV(n,e,t=[]){const r=`Platform: ${e}`,i=new gt(r);return(s=[])=>{let o=uS();if(!o||o.injector.get(Q8,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Poe(n){if(Gd&&!Gd.get(Q8,!1))throw new qe(400,!1);(function Z8(){!function tZ(n){gL=n}(()=>{throw new qe(600,!1)})})(),Gd=n;const e=n.get(rV);(function eV(n){n.get(o4,null)?.forEach(t=>t())})(n)}(function nV(n=[],e){return Ys.create({name:e,providers:[{provide:jI,useValue:"platform"},{provide:lS,useValue:new Set([()=>Gd=null])},...n]})}(a,r))}return function koe(n){const e=uS();if(!e)throw new qe(401,!1);return e}()}}function uS(){return Gd?.get(rV)??null}let rV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Roe(n="zone.js",e){return"noop"===n?new dte:"zone.js"===n?new dr(e):n}(r?.ngZone,function iV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function $ie(n,e,t){return new UT(n,e,t)}(t.moduleType,this.injector,function cV(n){return[{provide:dr,useFactory:n},{provide:u0,multi:!0,useFactory:()=>{const e=vt(Ooe,{optional:!0});return()=>e.initialize()}},{provide:lV,useFactory:Noe},{provide:E4,useFactory:I4}]}(()=>i)),o=s.injector.get(Fu,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{uw(this._modules,s),a.unsubscribe()})}),function sV(n,e,t){try{const r=t();return A0(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(nS);return a.runInitializers(),a.donePromise.then(()=>(function T6(n){vl(n,"Expected localeId to be defined"),"string"==typeof n&&(I6=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ju,kg)||kg),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=oV({},r);return function xoe(n,e,t){const r=new jT(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(yf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new qe(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new qe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(lS,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(bt(Ys))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function oV(n,e){return Array.isArray(e)?e.reduce(oV,n):{...n,...e}}let yf=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=vt(lV),this.zoneIsStable=vt(E4),this.componentTypes=[],this.components=[],this.isStable=vt(G8).hasPendingTasks.pipe(da(t=>t?Qt(!1):this.zoneIsStable),function hQ(n,e=ua){return n=n??fQ,Wn((t,r)=>{let i,s=!0;t.subscribe(Bn(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),RO()),this._injector=vt(wl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof d4;if(!this._injector.get(nS).done)throw!i&&function zp(n){const e=nr(n)||Hs(n)||zo(n);return null!==e&&e.standalone}(t),new qe(405,!1);let o;o=i?t:this._injector.get(Vb).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Doe(n){return n.isBoundToModule}(o)?void 0:this._injector.get(vf),c=o.create(Ys.NULL,[],r||o.selector,a),u=c.location.nativeElement,d=c.injector.get(X8,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),uw(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new qe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;uw(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(cS,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>uw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new qe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const lV=new gt("",{providedIn:"root",factory:()=>vt(Fu).handleError.bind(void 0)});function Noe(){const n=vt(dr),e=vt(Fu);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Ooe=(()=>{class n{constructor(){this.zone=vt(dr),this.applicationRef=vt(yf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let dw=(()=>{class n{static{this.__NG_ELEMENT_ID__=Voe}}return n})();function Voe(n){return function Boe(n,e,t){if(cf(n)&&!t){const r=Ga(n.index,e);return new m0(r,r)}return 47&n.type?new m0(e[$i],e):null}(Ws(),Ue(),16==(16&n))}class pV{constructor(){}supports(e){return Wb(e)}create(e){return new Hoe(e)}}const $oe=(n,e)=>e;class Hoe{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||$oe}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<mV(r,i,s)?t:r,a=mV(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,m=f+h;u<=m&&m<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Wb(e))throw new qe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function wne(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Goe(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new gV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Goe{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qoe{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class gV{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new qoe,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mV(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class _V{constructor(){}supports(e){return e instanceof Map||yT(e)}create(){return new Woe}}class Woe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||yT(e)))throw new qe(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new Koe(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class Koe{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vV(){return new pw([new pV])}let pw=(()=>{class n{static{this.\u0275prov=Et({token:n,providedIn:"root",factory:vV})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||vV()),deps:[[n,new fb,new vo]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new qe(901,!1)}}return n})();function yV(){return new R0([new _V])}let R0=(()=>{class n{static{this.\u0275prov=Et({token:n,providedIn:"root",factory:yV})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||yV()),deps:[[n,new fb,new vo]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new qe(901,!1)}}return n})();const Qoe=tV(null,"core",[]);let Zoe=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(bt(yf))}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({})}}return n})();function Og(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let mS=null;function qd(){return mS}class hae{}const El=new gt("DocumentToken");let _S=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:function(){return vt(pae)},providedIn:"platform"})}}return n})();const fae=new gt("Location Initialized");let pae=(()=>{class n extends _S{constructor(){super(),this._doc=vt(El),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qd().getBaseHref(this._doc)}onPopState(t){const r=qd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=qd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function vS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xV(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function zu(n){return n&&"?"!==n[0]?"?"+n:n}let wf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:function(){return vt(PV)},providedIn:"root"})}}return n})();const DV=new gt("appBaseHref");let PV=(()=>{class n extends wf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??vt(El).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+zu(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+zu(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+zu(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(bt(_S),bt(DV,8))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gae=(()=>{class n extends wf{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=vS(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+zu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+zu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(bt(_S),bt(DV,8))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})(),yS=(()=>{class n{constructor(t){this._subject=new ci,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function vae(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(xV(MV(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+zu(r))}normalize(t){return n.stripTrailingSlash(function _ae(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,MV(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zu(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zu(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=zu}static{this.joinWithSlash=vS}static{this.stripTrailingSlash=xV}static{this.\u0275fac=function(r){return new(r||n)(bt(wf))}}static{this.\u0275prov=Et({token:n,factory:function(){return function mae(){return new yS(bt(wf))}()},providedIn:"root"})}}return n})();function MV(n){return n.replace(/\/index.html$/,"")}var mw=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(mw||{}),Yo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Yo||{}),Lr=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Lr||{}),Ya=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ya||{}),Hi=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Hi||{});function _w(n,e){return Tl(Wo(n)[Gr.DateFormat],e)}function vw(n,e){return Tl(Wo(n)[Gr.TimeFormat],e)}function yw(n,e){return Tl(Wo(n)[Gr.DateTimeFormat],e)}function Il(n,e){const t=Wo(n),r=t[Gr.NumberSymbols][e];if(typeof r>"u"){if(e===Hi.CurrencyDecimal)return t[Gr.NumberSymbols][Hi.Decimal];if(e===Hi.CurrencyGroup)return t[Gr.NumberSymbols][Hi.Group]}return r}function RV(n){if(!n[Gr.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Gr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Tl(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function wS(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const kae=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,N0={},Rae=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var $u=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}($u||{}),hr=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(hr||{}),fr=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(fr||{});function Nae(n,e,t,r){let i=function $ae(n){if(LV(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return bw(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(kae))return function Hae(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,c),e}(r)}const e=new Date(n);if(!LV(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Hu(t,e)||e;let a,o=[];for(;e;){if(a=Rae.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let l=i.getTimezoneOffset();r&&(l=OV(r,l),i=function zae(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function jae(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(OV(e,i)-i))}(i,r,!0));let c="";return o.forEach(u=>{const d=function Uae(n){if(CS[n])return CS[n];let e;switch(n){case"G":case"GG":case"GGG":e=qr(fr.Eras,Lr.Abbreviated);break;case"GGGG":e=qr(fr.Eras,Lr.Wide);break;case"GGGGG":e=qr(fr.Eras,Lr.Narrow);break;case"y":e=is(hr.FullYear,1,0,!1,!0);break;case"yy":e=is(hr.FullYear,2,0,!0,!0);break;case"yyy":e=is(hr.FullYear,3,0,!1,!0);break;case"yyyy":e=is(hr.FullYear,4,0,!1,!0);break;case"Y":e=Ew(1);break;case"YY":e=Ew(2,!0);break;case"YYY":e=Ew(3);break;case"YYYY":e=Ew(4);break;case"M":case"L":e=is(hr.Month,1,1);break;case"MM":case"LL":e=is(hr.Month,2,1);break;case"MMM":e=qr(fr.Months,Lr.Abbreviated);break;case"MMMM":e=qr(fr.Months,Lr.Wide);break;case"MMMMM":e=qr(fr.Months,Lr.Narrow);break;case"LLL":e=qr(fr.Months,Lr.Abbreviated,Yo.Standalone);break;case"LLLL":e=qr(fr.Months,Lr.Wide,Yo.Standalone);break;case"LLLLL":e=qr(fr.Months,Lr.Narrow,Yo.Standalone);break;case"w":e=AS(1);break;case"ww":e=AS(2);break;case"W":e=AS(1,!0);break;case"d":e=is(hr.Date,1);break;case"dd":e=is(hr.Date,2);break;case"c":case"cc":e=is(hr.Day,1);break;case"ccc":e=qr(fr.Days,Lr.Abbreviated,Yo.Standalone);break;case"cccc":e=qr(fr.Days,Lr.Wide,Yo.Standalone);break;case"ccccc":e=qr(fr.Days,Lr.Narrow,Yo.Standalone);break;case"cccccc":e=qr(fr.Days,Lr.Short,Yo.Standalone);break;case"E":case"EE":case"EEE":e=qr(fr.Days,Lr.Abbreviated);break;case"EEEE":e=qr(fr.Days,Lr.Wide);break;case"EEEEE":e=qr(fr.Days,Lr.Narrow);break;case"EEEEEE":e=qr(fr.Days,Lr.Short);break;case"a":case"aa":case"aaa":e=qr(fr.DayPeriods,Lr.Abbreviated);break;case"aaaa":e=qr(fr.DayPeriods,Lr.Wide);break;case"aaaaa":e=qr(fr.DayPeriods,Lr.Narrow);break;case"b":case"bb":case"bbb":e=qr(fr.DayPeriods,Lr.Abbreviated,Yo.Standalone,!0);break;case"bbbb":e=qr(fr.DayPeriods,Lr.Wide,Yo.Standalone,!0);break;case"bbbbb":e=qr(fr.DayPeriods,Lr.Narrow,Yo.Standalone,!0);break;case"B":case"BB":case"BBB":e=qr(fr.DayPeriods,Lr.Abbreviated,Yo.Format,!0);break;case"BBBB":e=qr(fr.DayPeriods,Lr.Wide,Yo.Format,!0);break;case"BBBBB":e=qr(fr.DayPeriods,Lr.Narrow,Yo.Format,!0);break;case"h":e=is(hr.Hours,1,-12);break;case"hh":e=is(hr.Hours,2,-12);break;case"H":e=is(hr.Hours,1);break;case"HH":e=is(hr.Hours,2);break;case"m":e=is(hr.Minutes,1);break;case"mm":e=is(hr.Minutes,2);break;case"s":e=is(hr.Seconds,1);break;case"ss":e=is(hr.Seconds,2);break;case"S":e=is(hr.FractionalSeconds,1);break;case"SS":e=is(hr.FractionalSeconds,2);break;case"SSS":e=is(hr.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Aw($u.Short);break;case"ZZZZZ":e=Aw($u.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Aw($u.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Aw($u.Long);break;default:return null}return CS[n]=e,e}(u);c+=d?d(i,t,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function bw(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Hu(n,e){const t=function bae(n){return Wo(n)[Gr.LocaleId]}(n);if(N0[t]=N0[t]||{},N0[t][e])return N0[t][e];let r="";switch(e){case"shortDate":r=_w(n,Ya.Short);break;case"mediumDate":r=_w(n,Ya.Medium);break;case"longDate":r=_w(n,Ya.Long);break;case"fullDate":r=_w(n,Ya.Full);break;case"shortTime":r=vw(n,Ya.Short);break;case"mediumTime":r=vw(n,Ya.Medium);break;case"longTime":r=vw(n,Ya.Long);break;case"fullTime":r=vw(n,Ya.Full);break;case"short":const i=Hu(n,"shortTime"),s=Hu(n,"shortDate");r=ww(yw(n,Ya.Short),[i,s]);break;case"medium":const o=Hu(n,"mediumTime"),a=Hu(n,"mediumDate");r=ww(yw(n,Ya.Medium),[o,a]);break;case"long":const l=Hu(n,"longTime"),c=Hu(n,"longDate");r=ww(yw(n,Ya.Long),[l,c]);break;case"full":const u=Hu(n,"fullTime"),d=Hu(n,"fullDate");r=ww(yw(n,Ya.Full),[u,d])}return r&&(N0[t][e]=r),r}function ww(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function oc(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function is(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function Lae(n,e){switch(n){case hr.FullYear:return e.getFullYear();case hr.Month:return e.getMonth();case hr.Date:return e.getDate();case hr.Hours:return e.getHours();case hr.Minutes:return e.getMinutes();case hr.Seconds:return e.getSeconds();case hr.FractionalSeconds:return e.getMilliseconds();case hr.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===hr.Hours)0===a&&-12===t&&(a=12);else if(n===hr.FractionalSeconds)return function Oae(n,e){return oc(n,3).substring(0,e)}(a,e);const l=Il(o,Hi.MinusSign);return oc(a,e,l,r,i)}}function qr(n,e,t=Yo.Format,r=!1){return function(i,s){return function Fae(n,e,t,r,i,s){switch(t){case fr.Months:return function Cae(n,e,t){const r=Wo(n),s=Tl([r[Gr.MonthsFormat],r[Gr.MonthsStandalone]],e);return Tl(s,t)}(e,i,r)[n.getMonth()];case fr.Days:return function Aae(n,e,t){const r=Wo(n),s=Tl([r[Gr.DaysFormat],r[Gr.DaysStandalone]],e);return Tl(s,t)}(e,i,r)[n.getDay()];case fr.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function Sae(n){const e=Wo(n);return RV(e),(e[Gr.ExtraData][2]||[]).map(r=>"string"==typeof r?wS(r):[wS(r[0]),wS(r[1])])}(e),u=function xae(n,e,t){const r=Wo(n);RV(r);const s=Tl([r[Gr.ExtraData][0],r[Gr.ExtraData][1]],e)||[];return Tl(s,t)||[]}(e,i,r),d=c.findIndex(h=>{if(Array.isArray(h)){const[f,m]=h,v=o>=f.hours&&a>=f.minutes,y=o<m.hours||o===m.hours&&a<m.minutes;if(f.hours<m.hours){if(v&&y)return!0}else if(v||y)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function wae(n,e,t){const r=Wo(n),s=Tl([r[Gr.DayPeriodsFormat],r[Gr.DayPeriodsStandalone]],e);return Tl(s,t)}(e,i,r)[o<12?0:1];case fr.Eras:return function Eae(n,e){return Tl(Wo(n)[Gr.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Aw(n){return function(e,t,r){const i=-1*r,s=Il(t,Hi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case $u.Short:return(i>=0?"+":"")+oc(o,2,s)+oc(Math.abs(i%60),2,s);case $u.ShortGMT:return"GMT"+(i>=0?"+":"")+oc(o,1,s);case $u.Long:return"GMT"+(i>=0?"+":"")+oc(o,2,s)+":"+oc(Math.abs(i%60),2,s);case $u.Extended:return 0===r?"Z":(i>=0?"+":"")+oc(o,2,s)+":"+oc(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Vae=0,Cw=4;function NV(n){return bw(n.getFullYear(),n.getMonth(),n.getDate()+(Cw-n.getDay()))}function AS(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=NV(t),o=function Bae(n){const e=bw(n,Vae,1).getDay();return bw(n,0,1+(e<=Cw?Cw:Cw+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return oc(i,n,Il(r,Hi.MinusSign))}}function Ew(n,e=!1){return function(t,r){return oc(NV(t).getFullYear(),n,Il(r,Hi.MinusSign),e)}}const CS={};function OV(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function LV(n){return n instanceof Date&&!isNaN(n.valueOf())}const Gae=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function SS(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}const DS=/\s+/,UV=[];let Fg=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=UV,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(DS):UV}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(DS):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(DS).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Le(pw),Le(R0),Le(Wa),Le(Lu))}}static{this.\u0275dir=cn({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class ile{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wd=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ile(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),zV(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{zV(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Le(sc),Le(Uu),Le(pw))}}static{this.\u0275dir=cn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function zV(n,e){n.context.$implicit=e.item}let Sl=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sle,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$V("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$V("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Le(sc),Le(Uu))}}static{this.\u0275dir=cn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class sle{constructor(){this.$implicit=null,this.ngIf=null}}function $V(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ps(e)}'.`)}function ac(n,e){return new qe(2100,!1)}const vle=new gt("DATE_PIPE_DEFAULT_TIMEZONE"),yle=new gt("DATE_PIPE_DEFAULT_OPTIONS");let L0=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return Nae(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw ac()}}static{this.\u0275fac=function(r){return new(r||n)(Le(ju,16),Le(vle,24),Le(yle,24))}}static{this.\u0275pipe=jo({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),qV=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function kS(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Xae(n,e,t){return function IS(n,e,t,r,i,s,o=!1){let a="",l=!1;if(isFinite(n)){let c=function Jae(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(c=function Zae(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(c));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){const A=s.match(Gae);if(null===A)throw new Error(`${s} is not a valid digit info`);const T=A[1],P=A[3],V=A[5];null!=T&&(u=SS(T)),null!=P&&(d=SS(P)),null!=V?h=SS(V):null!=P&&d>h&&(h=d)}!function ele(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let l=0!==s;const c=e+n.integerLen,u=r.reduceRight(function(d,h,f,m){return m[f]=(h+=d)<10?h:h-10,l&&(0===m[f]&&f>=c?m.pop():l=!1),h>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}(c,d,h);let f=c.digits,m=c.integerLen;const v=c.exponent;let y=[];for(l=f.every(A=>!A);m<u;m++)f.unshift(0);for(;m<0;m++)f.unshift(0);m>0?y=f.splice(m,f.length):(y=f,f=[0]);const b=[];for(f.length>=e.lgSize&&b.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)b.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&b.unshift(f.join("")),a=b.join(Il(t,r)),y.length&&(a+=Il(t,i)+y.join("")),v&&(a+=Il(t,Hi.Exponential)+"+"+v)}else a=Il(t,Hi.Infinity);return a=n<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function TS(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?t.minFrac=t.maxFrac=u+1:"#"===d?t.maxFrac=u+1:t.posSuf+=d}const c=a.split(",");if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const u=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf("#");t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function bS(n,e){return Wo(n)[Gr.NumberFormats][e]}(e,mw.Percent),Il(e,Hi.MinusSign)),e,Hi.Group,Hi.Decimal,t,!0).replace(new RegExp("%","g"),Il(e,Hi.PercentSign))}(function RS(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw ac()}}static{this.\u0275fac=function(r){return new(r||n)(Le(ju,16))}}static{this.\u0275pipe=jo({name:"percent",type:n,pure:!0,standalone:!0})}}return n})();let xle=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({})}}return n})();const WV="browser";function KV(n){return n===WV}function YV(n){return"server"===n}let kle=(()=>{class n{static{this.\u0275prov=Et({token:n,providedIn:"root",factory:()=>new Rle(bt(El),window)})}}return n})();class Rle{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Nle(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ice extends hae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class LS extends ice{static makeCurrent(){!function dae(n){mS||(mS=n)}(new LS)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function sce(){return V0=V0||document.querySelector("base"),V0?V0.getAttribute("href"):null}();return null==t?null:function oce(n){xw=xw||document.createElement("a"),xw.setAttribute("href",n);const e=xw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){V0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function nle(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let xw,V0=null,lce=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();const FS=new gt("EventManagerPlugins");let eB=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new qe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(bt(FS),bt(dr))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();class tB{constructor(e){this._doc=e}}const VS="ng-app-id";let nB=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=YV(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${VS}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(VS),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(VS,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(bt(El),bt(kb),bt(a4,8),bt(Ou))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();const BS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},US=/%COMP%/g,hce=new gt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function iB(n,e){return e.map(t=>t.replace(US,n))}let sB=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=YV(a),this.defaultRenderer=new jS(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zl.ShadowDom&&(r={...r,encapsulation:Zl.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof aB?i.applyToHost(t):i instanceof zS&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Zl.Emulated:s=new aB(l,c,r,this.appId,u,o,a,d);break;case Zl.ShadowDom:return new mce(l,c,t,r,o,a,this.nonce,d);default:s=new zS(l,c,r,u,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(bt(eB),bt(nB),bt(kb),bt(hce),bt(El),bt(Ou),bt(dr),bt(a4))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();class jS{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(BS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(oB(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oB(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new qe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=BS[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=BS[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(zd.DashCase|zd.Important)?e.style.setProperty(t,r,i&zd.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&zd.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=qd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function oB(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class mce extends jS{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=iB(i.id,i.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class zS extends jS{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?iB(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class aB extends zS{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function fce(n){return"_ngcontent-%COMP%".replace(US,n)}(c),this.hostAttr=function pce(n){return"_nghost-%COMP%".replace(US,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let _ce=(()=>{class n extends tB{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(bt(El))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();const lB=["alt","control","meta","shift"],vce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yce={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bce=(()=>{class n extends tB{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),lB.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=vce[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),lB.forEach(o=>{o!==i&&(0,yce[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(bt(El))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();const uB=[{provide:Ou,useValue:WV},{provide:o4,useValue:function wce(){LS.makeCurrent()},multi:!0},{provide:El,useFactory:function Cce(){return function iee(n){PI=n}(document),document},deps:[]}],Ece=tV(Qoe,"browser",uB),Ice=new gt(""),dB=[{provide:cw,useClass:class ace{addToWindow(e){$r.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new qe(5103,!1);return s},$r.getAllAngularTestabilities=()=>e.getAllTestabilities(),$r.getAllAngularRootElements=()=>e.getAllRootElements(),$r.frameworkStabilizers||($r.frameworkStabilizers=[]),$r.frameworkStabilizers.push(r=>{const i=$r.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?qd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:X8,useClass:sS,deps:[dr,oS,cw]},{provide:sS,useClass:sS,deps:[dr,oS,cw]}],hB=[{provide:jI,useValue:"root"},{provide:Fu,useFactory:function Ace(){return new Fu},deps:[]},{provide:FS,useClass:_ce,multi:!0,deps:[El,dr,Ou]},{provide:FS,useClass:bce,multi:!0,deps:[El]},sB,nB,eB,{provide:f4,useExisting:sB},{provide:class Ole{},useClass:lce,deps:[]},[]];let Tce=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:kb,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(bt(Ice,12))}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({providers:[...hB,...dB],imports:[xle,Zoe]})}}return n})(),fB=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(bt(El))}}static{this.\u0275prov=Et({token:n,factory:function(r){let i=null;return i=r?new r:function xce(){return new fB(bt(El))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:Nce}=Array,{getPrototypeOf:Oce,prototype:Lce,keys:Fce}=Object;function _B(n){if(1===n.length){const e=n[0];if(Nce(e))return{args:e,keys:null};if(function Vce(n){return n&&"object"==typeof n&&Oce(n)===Lce}(e)){const t=Fce(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Bce}=Array;function HS(n){return Xt(e=>function Uce(n,e){return Bce(e)?n(...e):n(e)}(n,e))}function vB(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Dw(...n){const e=O_(n),t=MO(n),{args:r,keys:i}=_B(n);if(0===r.length)return fs([],e);const s=new Ve(function jce(n,e,t=ua){return r=>{yB(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)yB(e,()=>{const c=fs(n[l],e);let u=!1;c.subscribe(Bn(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>vB(i,o):ua));return t?s.pipe(HS(t)):s}function yB(n,e,t){n?xu(t,n,e):e()}const B0=An(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function U0(...n){return function zce(){return Up(1)}()(fs(n,O_(n)))}function Pw(n){return new Ve(e=>{go(n()).subscribe(e)})}function Vg(n,e){const t=nt(n)?n:()=>n,r=i=>i.error(t());return new Ve(e?i=>e.schedule(r,0,i):r)}function GS(){return Wn((n,e)=>{let t=null;n._refCount++;const r=Bn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qS extends Ve{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ui(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pt;const t=this.getSubject();e.add(this.source.subscribe(Bn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pt.EMPTY)}return e}refCount(){return GS()(this)}}function ba(n){return n<=0?()=>xc:Wn((e,t)=>{let r=0;e.subscribe(Bn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wa(n,e){return Wn((t,r)=>{let i=0;t.subscribe(Bn(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Mw(n){return Wn((e,t)=>{let r=!1;e.subscribe(Bn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function bB(n=Hce){return Wn((e,t)=>{let r=!1;e.subscribe(Bn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Hce(){return new B0}function Af(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wa((i,s)=>n(i,s,r)):ua,ba(1),t?Mw(e):bB(()=>new B0))}function j0(n,e){return nt(e)?hs(n,e,1):hs(n,1)}function Ms(n,e,t){const r=nt(n)||e||t?{next:n,error:e,complete:t}:n;return r?Wn((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Bn(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):ua}function Cf(n){return Wn((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Bn(t,void 0,void 0,o=>{s=go(n(o,Cf(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function WS(n){return n<=0?()=>xc:Wn((e,t)=>{let r=[];e.subscribe(Bn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function wB(n){return Xt(()=>n)}function KS(n){return Wn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Dn="primary",z0=Symbol("RouteTitle");class Yce{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bg(n){return new Yce(n)}function Xce(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Bc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!AB(n[i],e[i]))return!1;return!0}function AB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function CB(n){return n.length>0?n[n.length-1]:null}function Yd(n){return function Rce(n){return!!n&&(n instanceof Ve||nt(n.lift)&&nt(n.subscribe))}(n)?n:A0(n)?fs(Promise.resolve(n)):Qt(n)}const Zce={exact:function TB(n,e,t){if(!Ef(n.segments,e.segments)||!kw(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!TB(n.children[r],e.children[r],t))return!1;return!0},subset:SB},EB={exact:function Jce(n,e){return Bc(n,e)},subset:function eue(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AB(n[t],e[t]))},ignored:()=>!0};function IB(n,e,t){return Zce[t.paths](n.root,e.root,t.matrixParams)&&EB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function SB(n,e,t){return xB(n,e,e.segments,t)}function xB(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ef(i,t)||e.hasChildren()||!kw(i,t,r))}if(n.segments.length===t.length){if(!Ef(n.segments,t)||!kw(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!SB(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ef(n.segments,i)&&kw(n.segments,i,r)&&n.children[Dn])&&xB(n.children[Dn],e,s,r)}}function kw(n,e,t){return e.every((r,i)=>EB[t](n[i].parameters,r.parameters))}class Ug{constructor(e=new Er([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bg(this.queryParams)),this._queryParamMap}toString(){return rue.serialize(this)}}class Er{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rw(this)}}class $0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bg(this.parameters)),this._parameterMap}toString(){return MB(this)}}function Ef(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let H0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:function(){return new YS},providedIn:"root"})}}return n})();class YS{parse(e){const t=new pue(e);return new Ug(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${G0(e.root,!0)}`,r=function oue(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Nw(t)}=${Nw(i)}`).join("&"):`${Nw(t)}=${Nw(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function iue(n){return encodeURI(n)}(e.fragment)}`:""}`}}const rue=new YS;function Rw(n){return n.segments.map(e=>MB(e)).join("/")}function G0(n,e){if(!n.hasChildren())return Rw(n);if(e){const t=n.children[Dn]?G0(n.children[Dn],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Dn&&r.push(`${i}:${G0(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nue(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Dn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Dn&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Dn?[G0(n.children[Dn],!1)]:[`${i}:${G0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dn]?`${Rw(n)}/${t[0]}`:`${Rw(n)}/(${t.join("//")})`}}function DB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nw(n){return DB(n).replace(/%3B/gi,";")}function XS(n){return DB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ow(n){return decodeURIComponent(n)}function PB(n){return Ow(n.replace(/\+/g,"%20"))}function MB(n){return`${XS(n.path)}${function sue(n){return Object.keys(n).map(e=>`;${XS(e)}=${XS(n[e])}`).join("")}(n.parameters)}`}const aue=/^[^\/()?;#]+/;function QS(n){const e=n.match(aue);return e?e[0]:""}const lue=/^[^\/()?;=#]+/,uue=/^[^=?&#]+/,hue=/^[^&#]+/;class pue{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Er([],{}):new Er([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dn]=new Er(e,t)),r}parseSegment(){const e=QS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new qe(4009,!1);return this.capture(e),new $0(Ow(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function cue(n){const e=n.match(lue);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=QS(this.remaining);i&&(r=i,this.capture(r))}e[Ow(t)]=Ow(r)}parseQueryParam(e){const t=function due(n){const e=n.match(uue);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function fue(n){const e=n.match(hue);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=PB(t),s=PB(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=QS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new qe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Dn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Dn]:new Er([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new qe(4011,!1)}}function kB(n){return n.segments.length>0?new Er([],{[Dn]:n}):n}function RB(n){const e={};for(const r of Object.keys(n.children)){const s=RB(n.children[r]);if(r===Dn&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function gue(n){if(1===n.numberOfChildren&&n.children[Dn]){const e=n.children[Dn];return new Er(n.segments.concat(e.segments),e.children)}return n}(new Er(n.segments,e))}function If(n){return n instanceof Ug}function NB(n){let e;const i=kB(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new Er(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function OB(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return ZS(i,i,i,t,r);const s=function _ue(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new FB(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new FB(t,e,r)}(e);if(s.toRoot())return ZS(i,i,new Er([],{}),t,r);const o=function vue(n,e,t){if(n.isAbsolute)return new Fw(e,!0,0);if(!t)return new Fw(e,!1,NaN);if(null===t.parent)return new Fw(t,!0,0);const r=Lw(n.commands[0])?0:1;return function yue(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new qe(4005,!1);i=r.segments.length}return new Fw(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?W0(o.segmentGroup,o.index,s.commands):VB(o.segmentGroup,o.index,s.commands);return ZS(i,o.segmentGroup,a,t,r)}function Lw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function q0(n){return"object"==typeof n&&null!=n&&n.outlets}function ZS(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:LB(n,e,t);const a=kB(RB(o));return new Ug(a,s,i)}function LB(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:LB(s,e,t)}),new Er(n.segments,r)}class FB{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Lw(r[0]))throw new qe(4003,!1);const i=r.find(q0);if(i&&i!==CB(r))throw new qe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fw{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function VB(n,e,t){if(n||(n=new Er([],{})),0===n.segments.length&&n.hasChildren())return W0(n,e,t);const r=function wue(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(q0(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!UB(l,c,o))return s;r+=2}else{if(!UB(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Er(n.segments.slice(0,r.pathIndex),{});return s.children[Dn]=new Er(n.segments.slice(r.pathIndex),n.children),W0(s,0,i)}return r.match&&0===i.length?new Er(n.segments,{}):r.match&&!n.hasChildren()?JS(n,e,t):r.match?W0(n,0,i):JS(n,e,t)}function W0(n,e,t){if(0===t.length)return new Er(n.segments,{});{const r=function bue(n){return q0(n[0])?n[0].outlets:{[Dn]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Dn)&&n.children[Dn]&&1===n.numberOfChildren&&0===n.children[Dn].segments.length){const s=W0(n.children[Dn],e,t);return new Er(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=VB(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Er(n.segments,i)}}function JS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(q0(s)){const l=Aue(s.outlets);return new Er(r,l)}if(0===i&&Lw(t[0])){r.push(new $0(n.segments[e].path,BB(t[0]))),i++;continue}const o=q0(s)?s.outlets[Dn]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Lw(a)?(r.push(new $0(o,BB(a))),i+=2):(r.push(new $0(o,{})),i++)}return new Er(r,{})}function Aue(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=JS(new Er([],{}),0,r))}),e}function BB(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function UB(n,e,t){return n==t.path&&Bc(e,t.parameters)}const K0="imperative";class Uc{constructor(e,t){this.id=e,this.url=t}}class Vw extends Uc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xd extends Uc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Y0 extends Uc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jg extends Uc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Bw extends Uc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jB extends Uc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cue extends Uc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eue extends Uc{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Iue extends Uc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tue extends Uc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sue{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xue{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Due{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pue{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mue{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kue{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zB{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ex{}class tx{constructor(e){this.url=e}}class Rue{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new X0,this.attachRef=null}}let X0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Rue,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class $B{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nx(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rx(e,this._root).map(t=>t.value)}}function nx(n,e){if(n===e.value)return e;for(const t of e.children){const r=nx(n,t);if(r)return r}return null}function rx(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rx(n,t);if(r.length)return r.unshift(e),r}return[]}class Gu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class HB extends $B{constructor(e,t){super(e),this.snapshot=t,ix(this,e)}toString(){return this.snapshot.toString()}}function GB(n,e){const t=function Nue(n,e){const o=new Uw([],{},{},"",{},Dn,e,null,{});return new WB("",new Gu(o,[]))}(0,e),r=new ja([new $0("",{})]),i=new ja({}),s=new ja({}),o=new ja({}),a=new ja(""),l=new $g(r,i,o,a,s,Dn,e,t.root);return l.snapshot=t.root,new HB(new Gu(l,[]),t)}class $g{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Xt(c=>c[z0]))??Qt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Xt(e=>Bg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Xt(e=>Bg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qB(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Oue(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Uw{get title(){return this.data?.[z0]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class WB extends $B{constructor(e,t){super(t),this.url=e,ix(this,t)}toString(){return KB(this._root)}}function ix(n,e){e.value._routerState=n,e.children.forEach(t=>ix(n,t))}function KB(n){const e=n.children.length>0?` { ${n.children.map(KB).join(", ")} } `:"";return`${n.value}${e}`}function sx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Bc(e.params,t.params)||n.paramsSubject.next(t.params),function Qce(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Bc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ox(n,e){const t=Bc(n.params,e.params)&&function tue(n,e){return Ef(n,e)&&n.every((t,r)=>Bc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ox(n.parent,e.parent))}let ax=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dn,this.activateEvents=new ci,this.deactivateEvents=new ci,this.attachEvents=new ci,this.detachEvents=new ci,this.parentContexts=vt(X0),this.location=vt(sc),this.changeDetector=vt(dw),this.environmentInjector=vt(wl),this.inputBinder=vt(jw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new qe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new qe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new qe(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new qe(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Lue(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=cn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ha]})}}return n})();class Lue{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$g?this.route:e===X0?this.childContexts:this.parent.get(e,t)}}const jw=new gt("");let YB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Dw([r.queryParams,r.params,r.data]).pipe(da(([s,o,a],l)=>(a={...s,...o,...a},0===l?Qt(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function uae(n){const e=nr(n);if(!e)return null;const t=new _0(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();function Q0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Vue(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Q0(n,r,i);return Q0(n,r)})}(n,e,t);return new Gu(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Q0(n,a)),o}}const r=function Bue(n){return new $g(new ja(n.url),new ja(n.params),new ja(n.queryParams),new ja(n.fragment),new ja(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Q0(n,s));return new Gu(r,i)}}const lx="ngNavigationCancelingError";function XB(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=If(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QB(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function QB(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[lx]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ZB(n){return n&&n[lx]}let JB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fa({type:n,selectors:[["ng-component"]],standalone:!0,features:[J6],decls:1,vars:0,template:function(r,i){1&r&&oe(0,"router-outlet")},dependencies:[ax],encapsulation:2})}}return n})();function cx(n){const e=n.children&&n.children.map(cx),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dn&&(t.component=JB),t}function lc(n){return n.outlet||Dn}function Z0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Wue{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sx(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=zg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=zg(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=zg(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=zg(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new kue(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Pue(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(sx(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),sx(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Z0(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class eU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zw{constructor(e,t){this.component=e,this.route=t}}function Kue(n,e,t){const r=n._root;return J0(r,e?e._root:null,t,[r.value])}function Hg(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function bQ(n){return null!==$1(n)}(n)?e.get(n):n:r}function J0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=zg(e);return n.children.forEach(o=>{(function Xue(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Que(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ef(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ef(n.url,e.url)||!Bc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ox(n,e)||!Bc(n.queryParams,e.queryParams);default:return!ox(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new eU(r)):(s.data=o.data,s._resolvedData=o._resolvedData),J0(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zw(a.outlet.component,o))}else o&&ev(e,a,i),i.canActivateChecks.push(new eU(r)),J0(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ev(a,t.getContext(o),i)),i}function ev(n,e,t){const r=zg(n),i=n.value;Object.entries(r).forEach(([s,o])=>{ev(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new zw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function tv(n){return"function"==typeof n}function tU(n){return n instanceof B0||"EmptyError"===n?.name}const $w=Symbol("INITIAL_VALUE");function Gg(){return da(n=>Dw(n.map(e=>e.pipe(ba(1),function $ce(...n){const e=O_(n);return Wn((t,r)=>{(e?U0(n,t,e):U0(n,t)).subscribe(r)})}($w)))).pipe(Xt(e=>{for(const t of e)if(!0!==t){if(t===$w)return $w;if(!1===t||t instanceof Ug)return t}return!0}),wa(e=>e!==$w),ba(1)))}function nU(n){return function Ba(...n){return fo(n)}(Ms(e=>{if(If(e))throw XB(0,e)}),Xt(e=>!0===e))}class Hw{constructor(e){this.segmentGroup=e||null}}class rU{constructor(e){this.urlTree=e}}function qg(n){return Vg(new Hw(n))}function iU(n){return Vg(new rU(n))}class _de{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new qe(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Qt(r);if(i.numberOfChildren>1||!i.children[Dn])return Vg(new qe(4e3,!1));i=i.children[Dn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ug(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Er(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new qe(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const ux={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vde(n,e,t,r,i){const s=dx(n,e,t);return s.matched?(r=function jue(n,e){return n.providers&&!n._injector&&(n._injector=zT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function pde(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Qt(i.map(o=>{const a=Hg(o,n);return Yd(function rde(n){return n&&tv(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Gg(),nU()):Qt(!0)}(r,e,t).pipe(Xt(o=>!0===o?s:{...ux}))):Qt(s)}function dx(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ux}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Xce)(t,n,e);if(!i)return{...ux};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function sU(n,e,t,r){return t.length>0&&function wde(n,e,t){return t.some(r=>Gw(n,e,r)&&lc(r)!==Dn)}(n,t,r)?{segmentGroup:new Er(e,bde(r,new Er(t,n.children))),slicedSegments:[]}:0===t.length&&function Ade(n,e,t){return t.some(r=>Gw(n,e,r))}(n,t,r)?{segmentGroup:new Er(n.segments,yde(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Er(n.segments,n.children),slicedSegments:t}}function yde(n,e,t,r,i){const s={};for(const o of r)if(Gw(n,t,o)&&!i[lc(o)]){const a=new Er([],{});s[lc(o)]=a}return{...i,...s}}function bde(n,e){const t={};t[Dn]=e;for(const r of n)if(""===r.path&&lc(r)!==Dn){const i=new Er([],{});t[lc(r)]=i}return t}function Gw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Tde{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new _de(this.urlSerializer,this.urlTree)}noMatchError(e){return new qe(4002,!1)}recognize(){const e=sU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Dn).pipe(Cf(t=>{if(t instanceof rU)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Hw?this.noMatchError(t):t}),Xt(t=>{const r=new Uw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dn,this.rootComponentType,null,{}),i=new Gu(r,t),s=new WB("",i),o=function mue(n,e,t=null,r=null){return OB(NB(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Dn).pipe(Cf(r=>{throw r instanceof Hw?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=qB(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return fs(i).pipe(j0(s=>{const o=r.children[s],a=function Gue(n,e){const t=n.filter(r=>lc(r)===e);return t.push(...n.filter(r=>lc(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),function qce(n,e){return Wn(function Gce(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Bn(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),Mw(null),function Wce(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wa((i,s)=>n(i,s,r)):ua,WS(1),t?Mw(e):bB(()=>new B0))}(),hs(s=>{if(null===s)return qg(r);const o=oU(s);return function Sde(n){n.sort((e,t)=>e.value.outlet===Dn?-1:t.value.outlet===Dn?1:e.value.outlet.localeCompare(t.value.outlet))}(o),Qt(o)}))}processSegment(e,t,r,i,s,o){return fs(t).pipe(j0(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Cf(l=>{if(l instanceof Hw)return Qt(null);throw l}))),Af(a=>!!a),Cf(a=>{if(tU(a))return function Ede(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?Qt([]):qg(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function Cde(n,e,t,r){return!!(lc(n)===r||r!==Dn&&Gw(e,t,n))&&("**"===n.path||dx(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):qg(i):qg(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?iU(s):this.applyRedirects.lineralizeSegments(r,s).pipe(hs(o=>{const a=new Er(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=dx(t,i,s);if(!a)return qg(t);const d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?iU(d):this.applyRedirects.lineralizeSegments(i,d).pipe(hs(h=>this.processSegment(e,r,t,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?CB(i).parameters:{};a=Qt({snapshot:new Uw(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,aU(r),lc(r),r.component??r._loadedComponent??null,r,lU(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=vde(t,r,i,e).pipe(Xt(({matched:l,consumedSegments:c,remainingSegments:u,parameters:d})=>l?{snapshot:new Uw(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,aU(r),lc(r),r.component??r._loadedComponent??null,r,lU(r)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(da(l=>null===l?qg(t):this.getChildConfig(e=r._injector??e,r,i).pipe(da(({routes:c})=>{const u=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=l,{segmentGroup:m,slicedSegments:v}=sU(t,h,f,c);if(0===v.length&&m.hasChildren())return this.processChildren(u,c,m).pipe(Xt(b=>null===b?null:[new Gu(d,b)]));if(0===c.length&&0===v.length)return Qt([new Gu(d,[])]);const y=lc(r)===s;return this.processSegment(u,c,m,v,y?Dn:s,!0).pipe(Xt(b=>[new Gu(d,b)]))}))))}getChildConfig(e,t,r){return t.children?Qt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Qt({routes:t._loadedRoutes,injector:t._loadedInjector}):function fde(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Qt(!0):Qt(i.map(o=>{const a=Hg(o,n);return Yd(function Jue(n){return n&&tv(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Gg(),nU())}(e,t,r).pipe(hs(i=>i?this.configLoader.loadChildren(e,t).pipe(Ms(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function mde(n){return Vg(QB(!1,3))}())):Qt({routes:[],injector:e})}}function xde(n){const e=n.value.routeConfig;return e&&""===e.path}function oU(n){const e=[],t=new Set;for(const r of n){if(!xde(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=oU(r.children);e.push(new Gu(r.value,i))}return e.filter(r=>!t.has(r))}function aU(n){return n.data||{}}function lU(n){return n.resolve||{}}function cU(n){return"string"==typeof n.title||null===n.title}function hx(n){return da(e=>{const t=n(e);return t?fs(t).pipe(Xt(()=>e)):Qt(e)})}const Wg=new gt("ROUTES");let fx=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=vt(q8)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Qt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Yd(t.loadComponent()).pipe(Xt(uU),Ms(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),KS(()=>{this.componentLoaders.delete(t)})),i=new qS(r,()=>new pn).pipe(GS());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Qt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function Ode(n,e,t,r){return Yd(n.loadChildren()).pipe(Xt(uU),hs(i=>i instanceof Q6||Array.isArray(i)?Qt(i):fs(e.compileModuleAsync(i))),Xt(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Wg,[],{optional:!0,self:!0}).flat()),{routes:o.map(cx),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(KS(()=>{this.childrenLoaders.delete(r)})),o=new qS(s,()=>new pn).pipe(GS());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uU(n){return function Lde(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let qw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pn,this.transitionAbortSubject=new pn,this.configLoader=vt(fx),this.environmentInjector=vt(wl),this.urlSerializer=vt(H0),this.rootContexts=vt(X0),this.inputBindingEnabled=null!==vt(jw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Qt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new xue(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Sue(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ja({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:K0,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wa(s=>0!==s.id),Xt(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),da(s=>{this.currentTransition=s;let o=!1,a=!1;return Qt(s).pipe(Ms(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),da(l=>{const c=l.currentBrowserUrl.toString(),u=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new jg(l.id,this.urlSerializer.serialize(l.rawUrl),h,0)),l.resolve(null),xc}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Qt(l).pipe(da(h=>{const f=this.transitions?.getValue();return this.events.next(new Vw(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?xc:Promise.resolve(h)}),function Dde(n,e,t,r,i,s){return hs(o=>function Ide(n,e,t,r,i,s,o="emptyOnly"){return new Tde(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Xt(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ms(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new jB(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:h,extractedUrl:f,source:m,restoredState:v,extras:y}=l,b=new Vw(h,this.urlSerializer.serialize(f),m,v);this.events.next(b);const A=GB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:A,urlAfterRedirects:f,extras:{...y,skipLocationChange:!1,replaceUrl:!1}},Qt(s)}{const h="";return this.events.next(new jg(l.id,this.urlSerializer.serialize(l.extractedUrl),h,1)),l.resolve(null),xc}}),Ms(l=>{const c=new Cue(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Xt(l=>(this.currentTransition=s={...l,guards:Kue(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function sde(n,e){return hs(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Qt({...t,guardsResult:!0}):function ode(n,e,t,r){return fs(n).pipe(hs(i=>function hde(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Qt(s.map(a=>{const l=Z0(e)??i,c=Hg(a,l);return Yd(function nde(n){return n&&tv(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Af())})).pipe(Gg()):Qt(!0)}(i.component,i.route,t,e,r)),Af(i=>!0!==i,!0))}(o,r,i,n).pipe(hs(a=>a&&function Zue(n){return"boolean"==typeof n}(a)?function ade(n,e,t,r){return fs(e).pipe(j0(i=>U0(function cde(n,e){return null!==n&&e&&e(new Due(n)),Qt(!0)}(i.route.parent,r),function lde(n,e){return null!==n&&e&&e(new Mue(n)),Qt(!0)}(i.route,r),function dde(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Yue(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Pw(()=>Qt(o.guards.map(l=>{const c=Z0(o.node)??t,u=Hg(l,c);return Yd(function tde(n){return n&&tv(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(Af())})).pipe(Gg())));return Qt(s).pipe(Gg())}(n,i.path,t),function ude(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qt(!0);const i=r.map(s=>Pw(()=>{const o=Z0(e)??t,a=Hg(s,o);return Yd(function ede(n){return n&&tv(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Af())}));return Qt(i).pipe(Gg())}(n,i.route,t))),Af(i=>!0!==i,!0))}(r,s,n,e):Qt(a)),Xt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Ms(l=>{if(s.guardsResult=l.guardsResult,If(l.guardsResult))throw XB(0,l.guardsResult);const c=new Eue(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),wa(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),hx(l=>{if(l.guards.canActivateChecks.length)return Qt(l).pipe(Ms(c=>{const u=new Iue(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),da(c=>{let u=!1;return Qt(c).pipe(function Pde(n,e){return hs(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Qt(t);let s=0;return fs(i).pipe(j0(o=>function Mde(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!cU(i)&&(s[z0]=i.title),function kde(n,e,t,r){const i=function Rde(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Qt({});const s={};return fs(i).pipe(hs(o=>function Nde(n,e,t,r){const i=Z0(e)??r,s=Hg(n,i);return Yd(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Af(),Ms(a=>{s[o]=a}))),WS(1),wB(s),Cf(o=>tU(o)?xc:Vg(o)))}(s,n,e,r).pipe(Xt(o=>(n._resolvedData=o,n.data=qB(n,t).resolve,i&&cU(i)&&(n.data[z0]=i.title),null)))}(o.route,r,n,e)),Ms(()=>s++),WS(1),hs(o=>s===i.length?Qt(t):xc))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ms({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),Ms(c=>{const u=new Tue(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),hx(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ms(h=>{u.component=h}),Xt(()=>{})));for(const h of u.children)d.push(...c(h));return d};return Dw(c(l.targetSnapshot.root)).pipe(Mw(),ba(1))}),hx(()=>this.afterPreactivation()),Xt(l=>{const c=function Fue(n,e,t){const r=Q0(n,e._root,t?t._root:void 0);return new HB(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),Ms(()=>{this.events.next(new ex)}),((n,e,t,r)=>Xt(i=>(new Wue(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ba(1),Ms({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),function Kce(n){return Wn((e,t)=>{go(n).subscribe(Bn(t,()=>t.complete(),ho)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ms(l=>{throw l}))),KS(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Cf(l=>{if(a=!0,ZB(l))this.events.next(new Y0(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function Uue(n){return ZB(n)&&If(n.url)}(l)?this.events.next(new tx(l.url)):s.resolve(!1);else{this.events.next(new Bw(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return xc}))}))}cancelNavigationTransition(t,r,i){const s=new Y0(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dU(n){return n!==K0}let hU=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Dn);return r}getResolvedTitleForRoute(t){return t.data[z0]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:function(){return vt(Fde)},providedIn:"root"})}}return n})(),Fde=(()=>{class n extends hU{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(bt(fB))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vde=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:function(){return vt(Ude)},providedIn:"root"})}}return n})();class Bde{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Ude=(()=>{class n extends Bde{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ks(n)))(i||n)}}()}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ww=new gt("",{providedIn:"root",factory:()=>({})});let jde=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:function(){return vt(zde)},providedIn:"root"})}}return n})(),zde=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var nv=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(nv||{});function fU(n,e){n.events.pipe(wa(t=>t instanceof Xd||t instanceof Y0||t instanceof Bw||t instanceof jg),Xt(t=>t instanceof Xd||t instanceof jg?nv.COMPLETE:t instanceof Y0&&(0===t.code||1===t.code)?nv.REDIRECTING:nv.FAILED),wa(t=>t!==nv.REDIRECTING),ba(1)).subscribe(()=>{e()})}function $de(n){throw n}function Hde(n,e,t){return e.parse("/")}const Gde={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qde={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=vt(H8),this.isNgZoneEnabled=!1,this._events=new pn,this.options=vt(Ww,{optional:!0})||{},this.pendingTasks=vt(G8),this.errorHandler=this.options.errorHandler||$de,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Hde,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=vt(jde),this.routeReuseStrategy=vt(Vde),this.titleStrategy=vt(hU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=vt(Wg,{optional:!0})?.flat()??[],this.navigationTransitions=vt(qw),this.urlSerializer=vt(H0),this.location=vt(yS),this.componentInputBindingEnabled=!!vt(jw,{optional:!0}),this.eventsSubscription=new pt,this.isNgZoneEnabled=vt(dr)instanceof dr&&dr.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ug,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=GB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(pU(r)&&this._events.next(r));if(r instanceof Vw)dU(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof jg)this.rawUrlTree=i.rawUrl;else if(r instanceof jB){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof ex)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Y0)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof tx){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||dU(i.source)};this.scheduleNavigation(s,K0,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Bw&&this.restoreHistory(i,!0),r instanceof Xd&&(this.navigated=!0),pU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),K0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=NB(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return OB(d,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=If(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,K0,null,r)}navigate(t,r={skipLocationChange:!1}){return function Wde(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new qe(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Gde}:!1===r?{...qde}:r,If(t))return IB(this.currentUrlTree,t,i);const s=this.parseUrl(t);return IB(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});const u=this.pendingTasks.add();return fU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pU(n){return!(n instanceof ex||n instanceof tx)}let Kg=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new pn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof Xd&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function Z3(n,e,t){return function Tee(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Q3:LI}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Le(wo),Le($g),function ub(n){return function qZ(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(GO(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Ws(),n)}("tabindex"),Le(Lu),Le(Wa),Le(wf))}}static{this.\u0275dir=cn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ee("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Pi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Og],skipLocationChange:["skipLocationChange","skipLocationChange",Og],replaceUrl:["replaceUrl","replaceUrl",Og],routerLink:"routerLink"},standalone:!0,features:[hF,Ha]})}}return n})(),px=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ci,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Xd&&this.update()})}ngAfterContentInit(){Qt(this.links.changes,Qt(null)).pipe(Up()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=fs(t).pipe(Up()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Kde(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(Le(wo),Le(Wa),Le(Lu),Le(dw),Le(Kg,8))}}static{this.\u0275dir=cn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&C8(s,Kg,5),2&r){let o;A8(o=function E8(){return function Rse(n,e){return n[Pc].queries[e].queryList}(Ue(),LL())}())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Ha]})}}return n})();class gU{}let Yde=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(wa(t=>t instanceof Xd),j0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=zT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return fs(i).pipe(Up())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Qt(null);const s=i.pipe(hs(o=>null===o?Qt(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?fs([s,this.loader.loadComponent(r)]).pipe(Up()):s})}static{this.\u0275fac=function(r){return new(r||n)(bt(wo),bt(q8),bt(wl),bt(gU),bt(fx))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const gx=new gt("");let mU=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xd?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof jg&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function B4(){throw new Error("invalid")}()}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();function qu(n,e){return{\u0275kind:n,\u0275providers:e}}function vU(){const n=vt(Ys);return e=>{const t=n.get(yf);if(e!==t.components[0])return;const r=n.get(wo),i=n.get(yU);1===n.get(mx)&&r.initialNavigation(),n.get(bU,null,zn.Optional)?.setUpPreloading(),n.get(gx,null,zn.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const yU=new gt("",{factory:()=>new pn}),mx=new gt("",{providedIn:"root",factory:()=>1}),bU=new gt("");function Jde(n){return qu(0,[{provide:bU,useExisting:Yde},{provide:gU,useExisting:n}])}const wU=new gt("ROUTER_FORROOT_GUARD"),the=[yS,{provide:H0,useClass:YS},wo,X0,{provide:$g,useFactory:function _U(n){return n.routerState.root},deps:[wo]},fx,[]];function nhe(){return new J8("Router",wo)}let AU=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[the,[],{provide:Wg,multi:!0,useValue:t},{provide:wU,useFactory:ohe,deps:[[wo,new vo,new fb]]},{provide:Ww,useValue:r||{}},r?.useHash?{provide:wf,useClass:gae}:{provide:wf,useClass:PV},{provide:gx,useFactory:()=>{const n=vt(kle),e=vt(dr),t=vt(Ww),r=vt(qw),i=vt(H0);return t.scrollOffset&&n.setOffset(t.scrollOffset),new mU(i,r,n,e,t)}},r?.preloadingStrategy?Jde(r.preloadingStrategy).\u0275providers:[],{provide:J8,multi:!0,useFactory:nhe},r?.initialNavigation?ahe(r):[],r?.bindToComponentInputs?qu(8,[YB,{provide:jw,useExisting:YB}]).\u0275providers:[],[{provide:CU,useFactory:vU},{provide:cS,multi:!0,useExisting:CU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Wg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(bt(wU,8))}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({})}}return n})();function ohe(n){return"guarded"}function ahe(n){return["disabled"===n.initialNavigation?qu(3,[{provide:aw,multi:!0,useFactory:()=>{const e=vt(wo);return()=>{e.setUpLocationChangeListener()}}},{provide:mx,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qu(2,[{provide:mx,useValue:0},{provide:aw,multi:!0,deps:[Ys],useFactory:e=>{const t=e.get(fae,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(wo),s=e.get(yU);fU(i,()=>{r(!0)}),e.get(qw).afterPreactivation=()=>(r(!0),s.closed?Qt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const CU=new gt("");class ks{static ordinaGiocatoriPerCognome(e){return[...e].sort((t,r)=>{const i=(t.cognome||"").toLowerCase(),s=(r.cognome||"").toLowerCase();if(i<s)return-1;if(i>s)return 1;const o=(t.nome||"").toLowerCase(),a=(r.nome||"").toLowerCase();return o<a?-1:o>a?1:0})}static openMaps(e){if(!e)return;const r=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`;window.open(r,"_blank")}static formatDate(e){if(!e)return"Non specificata";let t;if("string"==typeof e&&e.match(/^\d{2}\/\d{2}\/\d{4}$/))return e;if("string"==typeof e&&e.includes("-")){const o=e.split("-");if(3===o.length)return`${o[2]}/${o[1]}/${o[0]}`;t=new Date(e)}else t=new Date(e);return isNaN(t.getTime())?"string"==typeof e?e:"":`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`}static formatDateTime(e){if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}static formatDateWithDay(e){if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"string"==typeof e?e:"";const i=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"][t.getDay()],s=String(t.getDate()).padStart(2,"0");return`${i} ${s}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`}catch{return"string"==typeof e?e:""}}static formatDateWithFullDay(e){if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"string"==typeof e?e:"";const i=["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"][t.getDay()],s=String(t.getDate()).padStart(2,"0");return`${i} ${s}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`}catch{return"string"==typeof e?e:""}}static parseDataPartita(e){if(!e)return null;try{if(e.match(/^\d{4}-\d{2}-\d{2}$/))return new Date(e);const t=e.split(" "),r=t.length>1?t[1]:t[0],[i,s]=r.split("/").map(u=>parseInt(u));if(isNaN(i)||isNaN(s))return null;const o=new Date,a=o.getFullYear(),l=o.getMonth()+1;let c=a;return l>=9&&s<=8?c=a+1:l<=8&&s>=9&&(c=a-1),new Date(c,s-1,i)}catch(t){return console.warn("Error parsing date:",e,t),null}}static getIcsConstants(e,t,r,i){return["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//PuntoVolley Thunders//Calendario//IT","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`DTSTART:${e}`,`DTEND:${t}`,`DTSTAMP:${r}`,`UID:partita-${i.numeroGara}-${r}@thunders.it`,`SUMMARY:${i.ospitante} vs ${i.ospite}`,`DESCRIPTION:Partita ${i.campionato}\\nGara n. ${i.numeroGara}`,`LOCATION:${i.indirizzo}`,"STATUS:CONFIRMED","SEQUENCE:0","BEGIN:VALARM","TRIGGER:-PT1H","ACTION:DISPLAY","DESCRIPTION:Partita tra 1 ora","END:VALARM","END:VEVENT","END:VCALENDAR"].join("\r\n")}}var Q=tt(467);const EU=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},IU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EU(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new hhe;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kw=function(n){return function(n){const e=EU(n);return IU.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Yw=function(n){try{return IU.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Xw=()=>{try{return function ghe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Yw(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},SU=n=>{const e=(n=>{var e,t;return null===(t=null===(e=Xw())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xU=()=>{var n;return null===(n=Xw())||void 0===n?void 0:n.config};class DU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function PU(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Kw(JSON.stringify({alg:"none",type:"JWT"})),Kw(JSON.stringify(o)),""].join(".")}function Xs(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class jc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,jc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rv.prototype.create)}}class rv{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Dhe(n,e){return n.replace(Phe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new jc(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Phe=/\{\$([^}]+)}/g;function iv(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(NU(s)&&NU(o)){if(!iv(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function NU(n){return null!==n&&"object"==typeof n}function vx(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class khe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Rhe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=yx),void 0===i.error&&(i.error=yx),void 0===i.complete&&(i.complete=yx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yx(){}function ki(n){return n&&n._delegate?n._delegate:n}class Qd{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tf="[DEFAULT]";class Bhe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new DU;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function jhe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Tf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Tf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,Q.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Tf){return this.instances.has(e)}getOptions(e=Tf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Tf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Tf){return this.component?this.component.multipleInstances?e:Tf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class zhe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Bhe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const wx=[];var Kn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Kn||{});const OU={debug:Kn.DEBUG,verbose:Kn.VERBOSE,info:Kn.INFO,warn:Kn.WARN,error:Kn.ERROR,silent:Kn.SILENT},$he=Kn.INFO,Hhe={[Kn.DEBUG]:"log",[Kn.VERBOSE]:"log",[Kn.INFO]:"info",[Kn.WARN]:"warn",[Kn.ERROR]:"error"},Ghe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=Hhe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Ax{constructor(e){this.name=e,this._logLevel=$he,this._logHandler=Ghe,this._userLogHandler=null,wx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?OU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kn.DEBUG,...e),this._logHandler(this,Kn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kn.VERBOSE,...e),this._logHandler(this,Kn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kn.INFO,...e),this._logHandler(this,Kn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kn.WARN,...e),this._logHandler(this,Kn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kn.ERROR,...e),this._logHandler(this,Kn.ERROR,...e)}}const qhe=(n,e)=>e.some(t=>n instanceof t);let LU,FU;const VU=new WeakMap,Cx=new WeakMap,BU=new WeakMap,Ex=new WeakMap,Ix=new WeakMap;let Tx={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Cx.get(n);if("objectStoreNames"===e)return n.objectStoreNames||BU.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zd(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Jhe(n){return"function"==typeof n?function Zhe(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Khe(){return FU||(FU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Sx(this),e),Zd(VU.get(this))}:function(...e){return Zd(n.apply(Sx(this),e))}:function(e,...t){const r=n.call(Sx(this),e,...t);return BU.set(r,e.sort?e.sort():[e]),Zd(r)}}(n):(n instanceof IDBTransaction&&function Xhe(n){if(Cx.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Cx.set(n,e)}(n),qhe(n,function Whe(){return LU||(LU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Tx):n)}function Zd(n){if(n instanceof IDBRequest)return function Yhe(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Zd(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&VU.set(t,n)}).catch(()=>{}),Ix.set(e,n),e}(n);if(Ex.has(n))return Ex.get(n);const e=Jhe(n);return e!==n&&(Ex.set(n,e),Ix.set(e,n)),e}const Sx=n=>Ix.get(n),tfe=["get","getKey","getAll","getAllKeys","count"],nfe=["put","add","delete","clear"],xx=new Map;function UU(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(xx.get(e))return xx.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=nfe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tfe.includes(t))return;const s=function(){var o=(0,Q.A)(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return xx.set(e,s),s}!function Qhe(n){Tx=n(Tx)}(n=>({...n,get:(e,t,r)=>UU(e,t)||n.get(e,t,r),has:(e,t)=>!!UU(e,t)||n.has(e,t)}));class rfe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function ife(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Zw="@firebase/app",Dx="0.10.13",Wu=new Ax("@firebase/app"),Jw="[DEFAULT]",kfe={[Zw]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Sf=new Map,sv=new Map,ov=new Map;function jU(n,e){try{n.container.addComponent(e)}catch(t){Wu.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xf(n){const e=n.name;if(ov.has(e))return Wu.debug(`There were multiple attempts to register component ${e}.`),!1;ov.set(e,n);for(const t of Sf.values())jU(t,n);for(const t of sv.values())jU(t,n);return!0}function Px(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Df(n){return void 0!==n.settings}const xl=new rv("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class zU{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xl.create("app-deleted",{appName:this._name})}}const av="10.14.1";function $U(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Jw,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw xl.create("bad-app-name",{appName:String(i)});if(t||(t=xU()),!t)throw xl.create("no-options");const s=Sf.get(i);if(s){if(iv(t,s.options)&&iv(r,s.config))return s;throw xl.create("duplicate-app",{appName:i})}const o=new zhe(i);for(const l of ov.values())o.addComponent(l);const a=new zU(t,r,o);return Sf.set(i,a),a}function Mx(n=Jw){const e=Sf.get(n);if(!e&&n===Jw&&xU())return $U();if(!e)throw xl.create("no-app",{appName:n});return e}function HU(){return Array.from(Sf.values())}function Ao(n,e,t){var r;let i=null!==(r=kfe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Wu.warn(a.join(" "))}xf(new Qd(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ffe="firebase-heartbeat-database",Vfe=1,lv="firebase-heartbeat-store";let Rx=null;function GU(){return Rx||(Rx=function efe(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Zd(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Zd(o.result),l.oldVersion,l.newVersion,Zd(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(Ffe,Vfe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(lv)}catch(t){console.warn(t)}}}).catch(n=>{throw xl.create("idb-open",{originalErrorMessage:n.message})})),Rx}function Nx(){return(Nx=(0,Q.A)(function*(n){try{const t=(yield GU()).transaction(lv),r=yield t.objectStore(lv).get(WU(n));return yield t.done,r}catch(e){if(e instanceof jc)Wu.warn(e.message);else{const t=xl.create("idb-get",{originalErrorMessage:e?.message});Wu.warn(t.message)}}})).apply(this,arguments)}function qU(n,e){return Ox.apply(this,arguments)}function Ox(){return(Ox=(0,Q.A)(function*(n,e){try{const r=(yield GU()).transaction(lv,"readwrite");yield r.objectStore(lv).put(e,WU(n)),yield r.done}catch(t){if(t instanceof jc)Wu.warn(t.message);else{const r=xl.create("idb-set",{originalErrorMessage:t?.message});Wu.warn(r.message)}}})).apply(this,arguments)}function WU(n){return`${n.name}!${n.options.appId}`}class zfe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Hfe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,Q.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=KU();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Wu.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,Q.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=KU(),{heartbeatsToSend:i,unsentEntries:s}=function $fe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),YU(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),YU(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=Kw(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Wu.warn(r),""}})()}}function KU(){return(new Date).toISOString().substring(0,10)}class Hfe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,Q.A)(function*(){return!!function kU(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function She(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,Q.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Bfe(n){return Nx.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,Q.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return qU(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,Q.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return qU(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function YU(n){return Kw(JSON.stringify({version:2,heartbeats:n})).length}!function Gfe(n){xf(new Qd("platform-logger",e=>new rfe(e),"PRIVATE")),xf(new Qd("heartbeat",e=>new zfe(e),"PRIVATE")),Ao(Zw,Dx,n),Ao(Zw,Dx,"esm2017"),Ao("fire-js","")}(""),Ao("firebase","10.14.1","app");class Kfe extends pt{constructor(e,t){super()}schedule(e,t=0){return this}}const e2={setInterval(n,e,...t){const{delegate:r}=e2;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=e2;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class XU extends Kfe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return e2.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&e2.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Yt(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const QU={now:()=>(QU.delegate||Date).now(),delegate:void 0};class cv{constructor(e,t=cv.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}cv.now=QU.now;class ZU extends cv{constructor(e,t=cv.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Qfe=new class Xfe extends ZU{}(class Yfe extends XU{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Lx=new ZU(XU),Zfe=Lx,t2=new _g("ANGULARFIRE2_VERSION");function Fx(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const n2=(n,e)=>{const t=e?[e]:HU(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class JU{constructor(){return n2(Jfe)}}const Jfe="app-check";function Yg(){}class e7{zone;delegate;constructor(e,t=Qfe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class epe{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yg,{},Yg,Yg)),t.pipe(Ms({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vx=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new e7(Zone.current)),this.insideAngular=t.run(()=>new e7(Zone.current,Lx)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(bt(dr))};static \u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Pf(n){return Xg().ngZone.run(()=>n())}function npe(n){return function rpe(n){return function(t){return(t=t.lift(new epe(n.ngZone))).pipe(U1(n.outsideAngular),B1(n.insideAngular))}}(Xg())(n)}const ipe=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Pf(()=>n.apply(void 0,r))},Co=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Pf(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yg,{},Yg,Yg))),r[s]=ipe(r[s],t));const i=function tpe(n){return Xg().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Ve){const s=Xg();return i.pipe(U1(s.outsideAngular),B1(s.insideAngular))}return Pf(()=>i)}return i instanceof Ve?i.pipe(npe):i instanceof Promise?Pf(()=>new Promise((s,o)=>i.then(a=>Pf(()=>s(a)),a=>Pf(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Pf(()=>i)};class Qg{constructor(e){return e}}class Bx{constructor(){return HU()}}const Ux=new gt("angularfire2._apps"),ope={provide:Qg,useFactory:function spe(n){return n&&1===n.length?n[0]:new Qg(Mx())},deps:[[new vo,Ux]]},ape={provide:Bx,deps:[[new vo,Ux]]};function lpe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Qg(r)}}let cpe=(()=>{class n{constructor(t){Ao("angularfire",t2.full,"core"),Ao("angularfire",t2.full,"app"),Ao("angular",p4.full,t.toString())}static \u0275fac=function(r){return new(r||n)(bt(Ou))};static \u0275mod=Uo({type:n});static \u0275inj=mo({providers:[ope,ape]})}return n})();function upe(n,...e){return{ngModule:cpe,providers:[{provide:Ux,useFactory:lpe(n),multi:!0,deps:[dr,Ys,Vx,...e]}]}}const dpe=Co($U,!0);const hpe=function t7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},n7=new rv("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),r2=new Ax("@firebase/auth");function i2(n,...e){r2.logLevel<=Kn.ERROR&&r2.error(`Auth (${av}): ${n}`,...e)}function Aa(n,...e){throw zx(n,...e)}function Dl(n,...e){return zx(n,...e)}function jx(n,e,t){const r=Object.assign(Object.assign({},hpe()),{[e]:t});return new rv("auth","Firebase",r).create(e,{appName:n.name})}function Rs(n){return jx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zx(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return n7.create(n,...e)}function st(n,e,...t){if(!n)throw zx(e,...t)}function zc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw i2(e),new Error(e)}function Jd(n,e){n||zc(e)}function r7(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function ppe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function $x(){return"http:"===r7()||"https:"===r7()}()||function Ihe(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class dv{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jd(t>e,"Short delay should be less than long delay!"),this.isMobile=function whe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xs())}()||function The(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return ppe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class i7{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void zc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void zc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void zc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_pe=new dv(3e4,6e4);function ti(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ni(n,e,t,r){return Gx.apply(this,arguments)}function Gx(){return(Gx=(0,Q.A)(function*(n,e,t,r,i={}){return s7(n,i,(0,Q.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=vx(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return function Ehe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),i7.fetch()(o7(n,n.config.apiHost,t,a),c)}))})).apply(this,arguments)}function s7(n,e,t){return qx.apply(this,arguments)}function qx(){return(qx=(0,Q.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},mpe),e);try{const i=new ype(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw hv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw hv(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw hv(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw hv(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jx(n,u,c);Aa(n,u)}}catch(i){if(i instanceof jc)throw i;Aa(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function o7(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function Hx(n,e){Jd(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class ype{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Dl(this.auth,"network-request-failed")),_pe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hv(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Dl(n,e,r);return i.customData._tokenResponse=t,i}function Xx(){return(Xx=(0,Q.A)(function*(n,e){return ni(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function d7(n,e){return Zx.apply(this,arguments)}function Zx(){return(Zx=(0,Q.A)(function*(n,e){return ni(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function fv(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Jx(){return(Jx=(0,Q.A)(function*(n,e=!1){const t=ki(n),r=yield t.getIdToken(e),i=s2(r);st(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:fv(e5(i.auth_time)),issuedAtTime:fv(e5(i.iat)),expirationTime:fv(e5(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function e5(n){return 1e3*Number(n)}function s2(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return i2("JWT malformed, contained fewer than 3 sections"),null;try{const i=Yw(t);return i?JSON.parse(i):(i2("Failed to decode base64 JWT payload"),null)}catch(i){return i2("Caught error parsing JWT payload as JSON",i?.toString()),null}}function h7(n){const e=s2(n);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Yu(n,e){return t5.apply(this,arguments)}function t5(){return(t5=(0,Q.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof jc&&function Epe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Ipe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,Q.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,Q.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class n5{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fv(this.lastLoginAt),this.creationTime=fv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pv(n){return r5.apply(this,arguments)}function r5(){return(r5=(0,Q.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Yu(n,d7(t,{idToken:r}));st(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?f7(s.providerUserInfo):[],a=function Spe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new n5(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})).apply(this,arguments)}function i5(){return(i5=(0,Q.A)(function*(n){const e=ki(n);yield pv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function f7(n){return n.map(e=>{var{providerId:t}=e,r=Ln(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function s5(){return(s5=(0,Q.A)(function*(n,e){const t=yield s7(n,{},(0,Q.A)(function*(){const r=vx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=o7(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",i7.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function o5(){return(o5=(0,Q.A)(function*(n,e){return ni(n,"POST","/v2/accounts:revokeToken",ti(n,e))})).apply(this,arguments)}class Jg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h7(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(0!==e.length,"internal-error");const t=h7(e);this.updateTokensAndExpiration(e,null,t)}getToken(e){var t=this;return(0,Q.A)(function*(r,i=!1){return i||!t.accessToken||t.isExpired?(st(t.refreshToken,r,"user-token-expired"),t.refreshToken?(yield t.refresh(r,t.refreshToken),t.accessToken):null):t.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,Q.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function xpe(n,e){return s5.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Jg;return r&&(st("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(st("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(st("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jg,this.toJSON())}_performRefresh(){return zc("not implemented")}}function eh(n,e){st("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Xu{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Ln(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ipe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new n5(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,Q.A)(function*(){const r=yield Yu(t,t.stsTokenManager.getToken(t.auth,e));return st(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Cpe(n){return Jx.apply(this,arguments)}(this,e)}reload(){return function Tpe(n){return i5.apply(this,arguments)}(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var t=this;return(0,Q.A)(function*(r,i=!1){let s=!1;r.idToken&&r.idToken!==t.stsTokenManager.accessToken&&(t.stsTokenManager.updateFromServerResponse(r),s=!0),i&&(yield pv(t)),yield t.auth._persistUserIfCurrent(t),s&&t.auth._notifyListenersIfCurrent(t)}).apply(this,arguments)}delete(){var e=this;return(0,Q.A)(function*(){if(Df(e.auth.app))return Promise.reject(Rs(e.auth));const t=yield e.getIdToken();return yield Yu(e,function wpe(n,e){return Xx.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(o=t.photoURL)&&void 0!==o?o:void 0,v=null!==(a=t.tenantId)&&void 0!==a?a:void 0,y=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,b=null!==(c=t.createdAt)&&void 0!==c?c:void 0,A=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:T,emailVerified:P,isAnonymous:V,providerData:q,stsTokenManager:N}=t;st(T&&N,e,"internal-error");const D=Jg.fromJSON(this.name,N);st("string"==typeof T,e,"internal-error"),eh(d,e.name),eh(h,e.name),st("boolean"==typeof P,e,"internal-error"),st("boolean"==typeof V,e,"internal-error"),eh(f,e.name),eh(m,e.name),eh(v,e.name),eh(y,e.name),eh(b,e.name),eh(A,e.name);const S=new Xu({uid:T,auth:e,email:h,emailVerified:P,displayName:d,isAnonymous:V,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:D,createdAt:b,lastLoginAt:A});return q&&Array.isArray(q)&&(S.providerData=q.map(F=>Object.assign({},F))),y&&(S._redirectEventId=y),S}static _fromIdTokenResponse(e,t){return(0,Q.A)(function*(r,i,s=!1){const o=new Jg;o.updateFromServerResponse(i);const a=new Xu({uid:i.localId,auth:r,stsTokenManager:o,isAnonymous:s});return yield pv(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,t,r){return(0,Q.A)(function*(){const i=t.users[0];st(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?f7(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new Jg;a.updateFromIdToken(r);const l=new Xu({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new n5(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(l,c),l})()}}const p7=new Map;function Qu(n){Jd(n instanceof Function,"Expected a class definition");let e=p7.get(n);return e?(Jd(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,p7.set(n,e),e)}const g7=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,Q.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,Q.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,Q.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,Q.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function o2(n,e,t){return`firebase:${n}:${e}:${t}`}class em{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=o2(this.userKey,i.apiKey,s),this.fullPersistenceKey=o2("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,Q.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Xu._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,Q.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t){return(0,Q.A)(function*(r,i,s="authUser"){if(!i.length)return new em(Qu(g7),r,s);const o=(yield Promise.all(i.map(function(){var d=(0,Q.A)(function*(h){if(yield h._isAvailable())return h});return function(h){return d.apply(this,arguments)}}()))).filter(d=>d);let a=o[0]||Qu(g7);const l=o2(s,r.config.apiKey,r.name);let c=null;for(const d of i)try{const h=yield d._get(l);if(h){const f=Xu._fromJSON(r,h);d!==a&&(c=f),a=d;break}}catch{}const u=o.filter(d=>d._shouldAllowMigration);return a._shouldAllowMigration&&u.length?(a=u[0],c&&(yield a._set(l,c.toJSON())),yield Promise.all(i.map(function(){var d=(0,Q.A)(function*(h){if(h!==a)try{yield h._remove(l)}catch{}});return function(h){return d.apply(this,arguments)}}())),new em(a,r,s)):new em(a,r,s)}).apply(this,arguments)}}function m7(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function b7(n=Xs()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function _7(n=Xs()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function A7(n=Xs()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function C7(n=Xs()){return/webos/i.test(n)}(e))return"Webos";if(function v7(n=Xs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function y7(n=Xs()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function w7(n=Xs()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function E7(n,e=[]){let t;switch(n){case"Browser":t=m7(Xs());break;case"Worker":t=`${m7(Xs())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${av}/${r}`}class kpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,Q.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function l5(){return(l5=(0,Q.A)(function*(n,e={}){return ni(n,"GET","/v2/passwordPolicy",ti(n,e))})).apply(this,arguments)}class Ope{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=null===(t=l.meetsMinPasswordLength)||void 0===t||t),l.isValid&&(l.isValid=null===(r=l.meetsMaxPasswordLength)||void 0===r||r),l.isValid&&(l.isValid=null===(i=l.containsLowercaseLetter)||void 0===i||i),l.isValid&&(l.isValid=null===(s=l.containsUppercaseLetter)||void 0===s||s),l.isValid&&(l.isValid=null===(o=l.containsNumericCharacter)||void 0===o||o),l.isValid&&(l.isValid=null===(a=l.containsNonAlphanumericCharacter)||void 0===a||a),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Lpe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I7(this),this.idTokenSubscription=new I7(this),this.beforeStateQueue=new kpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Qu(t)),this._initializationPromise=this.queue((0,Q.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield em.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,Q.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,Q.A)(function*(){try{const r=yield d7(t,{idToken:e}),i=yield Xu._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,Q.A)(function*(){var r;if(Df(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(l,l))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=s?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return st(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,Q.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,Q.A)(function*(){try{yield pv(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function gpe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,Q.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,Q.A)(function*(){if(Df(t.app))return Promise.reject(Rs(t));const r=e?ki(e):null;return r&&st(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,Q.A)(function*(r,i=!1){if(!t._deleted)return r&&st(t.tenantId===r.tenantId,t,"tenant-id-mismatch"),i||(yield t.beforeStateQueue.runMiddleware(r)),t.queue((0,Q.A)(function*(){yield t.directlySetCurrentUser(r),t.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return(0,Q.A)(function*(){return Df(e.app)?Promise.reject(Rs(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return Df(this.app)?Promise.reject(Rs(this)):this.queue((0,Q.A)(function*(){yield t.assertedPersistence.setPersistence(Qu(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,Q.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,Q.A)(function*(){const t=yield function Rpe(n){return l5.apply(this,arguments)}(e),r=new Ope(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rv("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,Q.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function Dpe(n,e){return o5.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,Q.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,Q.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Qu(e)||t._popupRedirectResolver;st(r,t,"argument-error"),t.redirectPersistenceManager=yield em.create(t,[Qu(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,Q.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,Q.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,Q.A)(function*(){if(e===t.currentUser)return t.queue((0,Q.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}{const l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){var t=this;return(0,Q.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,Q.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,Q.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function fpe(n,...e){r2.logLevel<=Kn.WARN&&r2.warn(`Auth (${av}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}class I7{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Mhe(n,e){const t=new khe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gv={loadJS:()=>(0,Q.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};(function T7(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new dv(3e4,6e4),new dv(2e3,1e4),new dv(3e4,6e4),new dv(5e3,15e3),encodeURIComponent("fac");var sj="@firebase/auth";class Ume{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,Q.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Xw(),function Fpe(n){gv=n}({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Dl("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function qme(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function zme(n){xf(new Qd("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;st(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E7(n)},c=new Lpe(r,i,s,l);return function Gpe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qu);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xf(new Qd("auth-internal",e=>{const t=function Gi(n){return ki(n)}(e.getProvider("auth").getImmediate());return new Ume(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ao(sj,"1.7.9",function jme(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),Ao(sj,"1.7.9","esm2017")}("Browser");class QD{constructor(){return n2("auth")}}var Rf,dj,cj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uj={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(N,D,S){S||(S=0);var F=Array(16);if("string"==typeof D)for(var I=0;16>I;++I)F[I]=D.charCodeAt(S++)|D.charCodeAt(S++)<<8|D.charCodeAt(S++)<<16|D.charCodeAt(S++)<<24;else for(I=0;16>I;++I)F[I]=D[S++]|D[S++]<<8|D[S++]<<16|D[S++]<<24;var O=N.g[3],L=(D=N.g[0])+(O^(S=N.g[1])&((I=N.g[2])^O))+F[0]+3614090360&4294967295;L=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=(S=(I=(O=(D=S+(L<<7&4294967295|L>>>25))+((L=O+(I^D&(S^I))+F[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=I+(S^O&(D^S))+F[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=S+(D^I&(O^D))+F[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=D+(O^S&(I^O))+F[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=O+(I^D&(S^I))+F[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=I+(S^O&(D^S))+F[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=S+(D^I&(O^D))+F[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=D+(O^S&(I^O))+F[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=O+(I^D&(S^I))+F[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=I+(S^O&(D^S))+F[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=S+(D^I&(O^D))+F[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=D+(O^S&(I^O))+F[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=O+(I^D&(S^I))+F[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=I+(S^O&(D^S))+F[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=S+(D^I&(O^D))+F[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=D+(I^O&(S^I))+F[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=O+(S^I&(D^S))+F[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=I+(D^S&(O^D))+F[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=S+(O^D&(I^O))+F[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=D+(I^O&(S^I))+F[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=O+(S^I&(D^S))+F[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=I+(D^S&(O^D))+F[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=S+(O^D&(I^O))+F[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=D+(I^O&(S^I))+F[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=O+(S^I&(D^S))+F[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=I+(D^S&(O^D))+F[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=S+(O^D&(I^O))+F[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=D+(I^O&(S^I))+F[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=O+(S^I&(D^S))+F[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=I+(D^S&(O^D))+F[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=S+(O^D&(I^O))+F[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=D+(S^I^O)+F[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=O+(D^S^I)+F[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=I+(O^D^S)+F[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=S+(I^O^D)+F[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=D+(S^I^O)+F[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=O+(D^S^I)+F[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=I+(O^D^S)+F[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=S+(I^O^D)+F[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=D+(S^I^O)+F[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=O+(D^S^I)+F[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=I+(O^D^S)+F[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=S+(I^O^D)+F[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=D+(S^I^O)+F[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=O+(D^S^I)+F[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=I+(O^D^S)+F[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=S+(I^O^D)+F[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=D+(I^(S|~O))+F[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=O+(S^(D|~I))+F[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=I+(D^(O|~S))+F[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=S+(O^(I|~D))+F[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=D+(I^(S|~O))+F[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=O+(S^(D|~I))+F[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=I+(D^(O|~S))+F[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=S+(O^(I|~D))+F[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=D+(I^(S|~O))+F[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=O+(S^(D|~I))+F[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=I+(D^(O|~S))+F[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=S+(O^(I|~D))+F[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((O=(D=S+((L=D+(I^(S|~O))+F[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=O+(S^(D|~I))+F[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^((I=O+((L=I+(D^(O|~S))+F[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~D))+F[9]+3951481745&4294967295,N.g[0]=N.g[0]+D&4294967295,N.g[1]=N.g[1]+(I+(L<<21&4294967295|L>>>11))&4294967295,N.g[2]=N.g[2]+I&4294967295,N.g[3]=N.g[3]+O&4294967295}function o(N,D){this.h=D;for(var S=[],F=!0,I=N.length-1;0<=I;I--){var O=0|N[I];F&&O==D||(S[I]=O,F=!1)}this.g=S}(function e(N,D){function S(){}S.prototype=D.prototype,N.D=D.prototype,N.prototype=new S,N.prototype.constructor=N,N.C=function(F,I,O){for(var L=Array(arguments.length-2),te=2;te<arguments.length;te++)L[te-2]=arguments[te];return D.prototype[I].apply(F,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(N,D){void 0===D&&(D=N.length);for(var S=D-this.blockSize,F=this.B,I=this.h,O=0;O<D;){if(0==I)for(;O<=S;)i(this,N,O),O+=this.blockSize;if("string"==typeof N){for(;O<D;)if(F[I++]=N.charCodeAt(O++),I==this.blockSize){i(this,F),I=0;break}}else for(;O<D;)if(F[I++]=N[O++],I==this.blockSize){i(this,F),I=0;break}}this.h=I,this.o+=D},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var D=1;D<N.length-8;++D)N[D]=0;var S=8*this.o;for(D=N.length-8;D<N.length;++D)N[D]=255&S,S/=256;for(this.u(N),N=Array(16),D=S=0;4>D;++D)for(var F=0;32>F;F+=8)N[S++]=this.g[D]>>>F&255;return N};var a={};function l(N){return-128<=N&&128>N?function s(N,D){var S=a;return Object.prototype.hasOwnProperty.call(S,N)?S[N]:S[N]=D(N)}(N,function(D){return new o([0|D],0>D?-1:0)}):new o([0|N],0>N?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return d;if(0>N)return y(c(-N));for(var D=[],S=1,F=0;N>=S;F++)D[F]=N/S|0,S*=4294967296;return new o(D,0)}var d=l(0),h=l(1),f=l(16777216);function m(N){if(0!=N.h)return!1;for(var D=0;D<N.g.length;D++)if(0!=N.g[D])return!1;return!0}function v(N){return-1==N.h}function y(N){for(var D=N.g.length,S=[],F=0;F<D;F++)S[F]=~N.g[F];return new o(S,~N.h).add(h)}function b(N,D){return N.add(y(D))}function A(N,D){for(;(65535&N[D])!=N[D];)N[D+1]+=N[D]>>>16,N[D]&=65535,D++}function T(N,D){this.g=N,this.h=D}function P(N,D){if(m(D))throw Error("division by zero");if(m(N))return new T(d,d);if(v(N))return D=P(y(N),D),new T(y(D.g),y(D.h));if(v(D))return D=P(N,y(D)),new T(y(D.g),D.h);if(30<N.g.length){if(v(N)||v(D))throw Error("slowDivide_ only works with positive integers.");for(var S=h,F=D;0>=F.l(N);)S=V(S),F=V(F);var I=q(S,1),O=q(F,1);for(F=q(F,2),S=q(S,2);!m(F);){var L=O.add(F);0>=L.l(N)&&(I=I.add(S),O=L),F=q(F,1),S=q(S,1)}return D=b(N,I.j(D)),new T(I,D)}for(I=d;0<=N.l(D);){for(S=Math.max(1,Math.floor(N.m()/D.m())),F=48>=(F=Math.ceil(Math.log(S)/Math.LN2))?1:Math.pow(2,F-48),L=(O=c(S)).j(D);v(L)||0<L.l(N);)L=(O=c(S-=F)).j(D);m(O)&&(O=h),I=I.add(O),N=b(N,L)}return new T(I,N)}function V(N){for(var D=N.g.length+1,S=[],F=0;F<D;F++)S[F]=N.i(F)<<1|N.i(F-1)>>>31;return new o(S,N.h)}function q(N,D){var S=D>>5;D%=32;for(var F=N.g.length-S,I=[],O=0;O<F;O++)I[O]=0<D?N.i(O+S)>>>D|N.i(O+S+1)<<32-D:N.i(O+S);return new o(I,N.h)}(n=o.prototype).m=function(){if(v(this))return-y(this).m();for(var N=0,D=1,S=0;S<this.g.length;S++){var F=this.i(S);N+=(0<=F?F:4294967296+F)*D,D*=4294967296}return N},n.toString=function(N){if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if(m(this))return"0";if(v(this))return"-"+y(this).toString(N);for(var D=c(Math.pow(N,6)),S=this,F="";;){var I=P(S,D).g,O=((0<(S=b(S,I.j(D))).g.length?S.g[0]:S.h)>>>0).toString(N);if(m(S=I))return O+F;for(;6>O.length;)O="0"+O;F=O+F}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h},n.l=function(N){return v(N=b(this,N))?-1:m(N)?0:1},n.abs=function(){return v(this)?y(this):this},n.add=function(N){for(var D=Math.max(this.g.length,N.g.length),S=[],F=0,I=0;I<=D;I++){var O=F+(65535&this.i(I))+(65535&N.i(I)),L=(O>>>16)+(this.i(I)>>>16)+(N.i(I)>>>16);F=L>>>16,S[I]=(L&=65535)<<16|(O&=65535)}return new o(S,-2147483648&S[S.length-1]?-1:0)},n.j=function(N){if(m(this)||m(N))return d;if(v(this))return v(N)?y(this).j(y(N)):y(y(this).j(N));if(v(N))return y(this.j(y(N)));if(0>this.l(f)&&0>N.l(f))return c(this.m()*N.m());for(var D=this.g.length+N.g.length,S=[],F=0;F<2*D;F++)S[F]=0;for(F=0;F<this.g.length;F++)for(var I=0;I<N.g.length;I++){var O=this.i(F)>>>16,L=65535&this.i(F),te=N.i(I)>>>16,me=65535&N.i(I);S[2*F+2*I]+=L*me,A(S,2*F+2*I),S[2*F+2*I+1]+=O*me,A(S,2*F+2*I+1),S[2*F+2*I+1]+=L*te,A(S,2*F+2*I+1),S[2*F+2*I+2]+=O*te,A(S,2*F+2*I+2)}for(F=0;F<D;F++)S[F]=S[2*F+1]<<16|S[2*F];for(F=D;F<2*D;F++)S[F]=0;return new o(S,0)},n.A=function(N){return P(this,N).h},n.and=function(N){for(var D=Math.max(this.g.length,N.g.length),S=[],F=0;F<D;F++)S[F]=this.i(F)&N.i(F);return new o(S,this.h&N.h)},n.or=function(N){for(var D=Math.max(this.g.length,N.g.length),S=[],F=0;F<D;F++)S[F]=this.i(F)|N.i(F);return new o(S,this.h|N.h)},n.xor=function(N){for(var D=Math.max(this.g.length,N.g.length),S=[],F=0;F<D;F++)S[F]=this.i(F)^N.i(F);return new o(S,this.h^N.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dj=uj.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(N,D){if(0==N.length)throw Error("number format error: empty string");if(2>(D=D||10)||36<D)throw Error("radix out of range: "+D);if("-"==N.charAt(0))return y(u(N.substring(1),D));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(D,8)),F=d,I=0;I<N.length;I+=8){var O=Math.min(8,N.length-I),L=parseInt(N.substring(I,I+O),D);8>O?(O=c(Math.pow(D,O)),F=F.j(O).add(c(L))):F=(F=F.j(S)).add(c(L))}return F},Rf=uj.Integer=o}).apply(typeof cj<"u"?cj:typeof self<"u"?self:typeof window<"u"?window:{});var hj,Cv,fj,y2,JD,pj,gj,mj,v2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ed={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(g,E,R){return g==Array.prototype||g==Object.prototype||(g[E]=R.value),g},r=function t(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof v2&&v2];for(var E=0;E<g.length;++E){var R=g[E];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}(this);!function i(g,E){if(E)e:{var R=r;g=g.split(".");for(var W=0;W<g.length-1;W++){var ge=g[W];if(!(ge in R))break e;R=R[ge]}(E=E(W=R[g=g[g.length-1]]))!=W&&null!=E&&e(R,g,{configurable:!0,writable:!0,value:E})}}("Array.prototype.values",function(g){return g||function(){return function s(g,E){g instanceof String&&(g+="");var R=0,W=!1,ge={next:function(){if(!W&&R<g.length){var Se=R++;return{value:E(Se,g[Se]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}(this,function(E,R){return R})}});var o=o||{},a=this||self;function l(g){var E=typeof g;return"array"==(E="object"!=E?E:g?Array.isArray(g)?"array":E:"null")||"object"==E&&"number"==typeof g.length}function c(g){var E=typeof g;return"object"==E&&null!=g||"function"==E}function u(g,E,R){return g.call.apply(g.bind,arguments)}function d(g,E,R){if(!g)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,W),g.apply(E,ge)}}return function(){return g.apply(E,arguments)}}function h(g,E,R){return(h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:d).apply(null,arguments)}function f(g,E){var R=Array.prototype.slice.call(arguments,1);return function(){var W=R.slice();return W.push.apply(W,arguments),g.apply(this,W)}}function m(g,E){function R(){}R.prototype=E.prototype,g.aa=E.prototype,g.prototype=new R,g.prototype.constructor=g,g.Qb=function(W,ge,Se){for(var Ze=Array(arguments.length-2),lr=2;lr<arguments.length;lr++)Ze[lr-2]=arguments[lr];return E.prototype[ge].apply(W,Ze)}}function v(g){const E=g.length;if(0<E){const R=Array(E);for(let W=0;W<E;W++)R[W]=g[W];return R}return[]}function y(g,E){for(let R=1;R<arguments.length;R++){const W=arguments[R];if(l(W)){const ge=g.length||0,Se=W.length||0;g.length=ge+Se;for(let Ze=0;Ze<Se;Ze++)g[ge+Ze]=W[Ze]}else g.push(W)}}function A(g){return/^[\s\xa0]*$/.test(g)}function T(){var g=a.navigator;return g&&(g=g.userAgent)?g:""}function P(g){return P[" "](g),g}P[" "]=function(){};var V=!(-1==T().indexOf("Gecko")||-1!=T().toLowerCase().indexOf("webkit")&&-1==T().indexOf("Edge")||-1!=T().indexOf("Trident")||-1!=T().indexOf("MSIE")||-1!=T().indexOf("Edge"));function q(g,E,R){for(const W in g)E.call(R,g[W],W,g)}function D(g){const E={};for(const R in g)E[R]=g[R];return E}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(g,E){let R,W;for(let ge=1;ge<arguments.length;ge++){for(R in W=arguments[ge],W)g[R]=W[R];for(let Se=0;Se<S.length;Se++)R=S[Se],Object.prototype.hasOwnProperty.call(W,R)&&(g[R]=W[R])}}function I(g){var E=1;g=g.split(":");const R=[];for(;0<E&&g.length;)R.push(g.shift()),E--;return g.length&&R.push(g.join(":")),R}function O(g){a.setTimeout(()=>{throw g},0)}function L(){var g=be;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}var me=new class b{constructor(E,R){this.i=E,this.j=R,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}(()=>new le,g=>g.reset());class le{constructor(){this.next=this.g=this.h=null}set(E,R){this.h=E,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,he=!1,be=new class te{constructor(){this.h=this.g=null}add(E,R){const W=me.get();W.set(E,R),this.h?this.h.next=W:this.g=W,this.h=W}},Ge=()=>{const g=a.Promise.resolve(void 0);ue=()=>{g.then(Pe)}};var Pe=()=>{for(var g;g=L();){try{g.h.call(g.g)}catch(R){O(R)}var E=me;E.j(g),100>E.h&&(E.h++,g.next=E.g,E.g=g)}he=!1};function j(){this.s=this.s,this.C=this.C}function Y(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Y.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const R=()=>{};a.addEventListener("test",R,E),a.removeEventListener("test",R,E)}catch{}return g}();function ie(g,E){if(Y.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var R=this.type=g.type,W=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget){if(V){e:{try{P(E.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(E=null)}}else"mouseover"==R?E=g.fromElement:"mouseout"==R&&(E=g.toElement);this.relatedTarget=E,W?(this.clientX=void 0!==W.clientX?W.clientX:W.pageX,this.clientY=void 0!==W.clientY?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:de[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ie.aa.h.call(this)}}m(ie,Y);var de={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function Ie(g,E,R,W,ge){this.listener=g,this.proxy=null,this.src=E,this.type=R,this.capture=!!W,this.ha=ge,this.key=++Ce,this.da=this.fa=!1}function ke(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Me(g){this.src=g,this.g={},this.h=0}function Je(g,E){var R=E.type;if(R in g.g){var Se,W=g.g[R],ge=Array.prototype.indexOf.call(W,E,void 0);(Se=0<=ge)&&Array.prototype.splice.call(W,ge,1),Se&&(ke(E),0==g.g[R].length&&(delete g.g[R],g.h--))}}function et(g,E,R,W){for(var ge=0;ge<g.length;++ge){var Se=g[ge];if(!Se.da&&Se.listener==E&&Se.capture==!!R&&Se.ha==W)return ge}return-1}Me.prototype.add=function(g,E,R,W,ge){var Se=g.toString();(g=this.g[Se])||(g=this.g[Se]=[],this.h++);var Ze=et(g,E,W,ge);return-1<Ze?(E=g[Ze],R||(E.fa=!1)):((E=new Ie(E,this.src,Se,!!W,ge)).fa=R,g.push(E)),E};var De="closure_lm_"+(1e6*Math.random()|0),re={};function Mn(g,E,R,W,ge){if(W&&W.once)return Ke(g,E,R,W,ge);if(Array.isArray(E)){for(var Se=0;Se<E.length;Se++)Mn(g,E[Se],R,W,ge);return null}return R=Zt(R),g&&g[fe]?g.K(E,R,c(W)?!!W.capture:!!W,ge):sn(g,E,R,!1,W,ge)}function sn(g,E,R,W,ge,Se){if(!E)throw Error("Invalid event type");var Ze=c(ge)?!!ge.capture:!!ge,lr=Rn(g);if(lr||(g[De]=lr=new Me(g)),(R=lr.add(E,R,W,Ze,Se)).proxy)return R;if(W=function Vt(){const E=Rt;return function g(R){return E.call(g.src,g.listener,R)}}(),R.proxy=W,W.src=g,W.listener=R,g.addEventListener)ne||(ge=Ze),void 0===ge&&(ge=!1),g.addEventListener(E.toString(),W,ge);else if(g.attachEvent)g.attachEvent(on(E.toString()),W);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(W)}return R}function Ke(g,E,R,W,ge){if(Array.isArray(E)){for(var Se=0;Se<E.length;Se++)Ke(g,E[Se],R,W,ge);return null}return R=Zt(R),g&&g[fe]?g.L(E,R,c(W)?!!W.capture:!!W,ge):sn(g,E,R,!0,W,ge)}function Tt(g,E,R,W,ge){if(Array.isArray(E))for(var Se=0;Se<E.length;Se++)Tt(g,E[Se],R,W,ge);else W=c(W)?!!W.capture:!!W,R=Zt(R),g&&g[fe]?(g=g.i,(E=String(E).toString())in g.g&&-1<(R=et(Se=g.g[E],R,W,ge))&&(ke(Se[R]),Array.prototype.splice.call(Se,R,1),0==Se.length&&(delete g.g[E],g.h--))):g&&(g=Rn(g))&&(E=g.g[E.toString()],g=-1,E&&(g=et(E,R,W,ge)),(R=-1<g?E[g]:null)&&at(R))}function at(g){if("number"!=typeof g&&g&&!g.da){var E=g.src;if(E&&E[fe])Je(E.i,g);else{var R=g.type,W=g.proxy;E.removeEventListener?E.removeEventListener(R,W,g.capture):E.detachEvent?E.detachEvent(on(R),W):E.addListener&&E.removeListener&&E.removeListener(W),(R=Rn(E))?(Je(R,g),0==R.h&&(R.src=null,E[De]=null)):ke(g)}}}function on(g){return g in re?re[g]:re[g]="on"+g}function Rt(g,E){if(g.da)g=!0;else{E=new ie(E,this);var R=g.listener,W=g.ha||g.src;g.fa&&at(g),g=R.call(W,E)}return g}function Rn(g){return(g=g[De])instanceof Me?g:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zt(g){return"function"==typeof g?g:(g[Ht]||(g[Ht]=function(E){return g.handleEvent(E)}),g[Ht])}function hn(){j.call(this),this.i=new Me(this),this.M=this,this.F=null}function Dt(g,E){var R,W=g.F;if(W)for(R=[];W;W=W.F)R.push(W);if(g=g.M,W=E.type||E,"string"==typeof E)E=new Y(E,g);else if(E instanceof Y)E.target=E.target||g;else{var ge=E;F(E=new Y(W,g),ge)}if(ge=!0,R)for(var Se=R.length-1;0<=Se;Se--){var Ze=E.g=R[Se];ge=It(Ze,W,!0,E)&&ge}if(ge=It(Ze=E.g=g,W,!0,E)&&ge,ge=It(Ze,W,!1,E)&&ge,R)for(Se=0;Se<R.length;Se++)ge=It(Ze=E.g=R[Se],W,!1,E)&&ge}function It(g,E,R,W){if(!(E=g.i.g[String(E)]))return!0;E=E.concat();for(var ge=!0,Se=0;Se<E.length;++Se){var Ze=E[Se];if(Ze&&!Ze.da&&Ze.capture==R){var lr=Ze.listener,Si=Ze.ha||Ze.src;Ze.fa&&Je(g.i,Ze),ge=!1!==lr.call(Si,W)&&ge}}return ge&&!W.defaultPrevented}function qt(g,E,R){if("function"==typeof g)R&&(g=h(g,R));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=h(g.handleEvent,g)}return 2147483647<Number(E)?-1:a.setTimeout(g,E||0)}function Pt(g){g.g=qt(()=>{g.g=null,g.i&&(g.i=!1,Pt(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}m(hn,j),hn.prototype[fe]=!0,hn.prototype.removeEventListener=function(g,E,R,W){Tt(this,g,E,R,W)},hn.prototype.N=function(){if(hn.aa.N.call(this),this.i){var E,g=this.i;for(E in g.g){for(var R=g.g[E],W=0;W<R.length;W++)ke(R[W]);delete g.g[E],g.h--}}this.F=null},hn.prototype.K=function(g,E,R,W){return this.i.add(String(g),E,!1,R,W)},hn.prototype.L=function(g,E,R,W){return this.i.add(String(g),E,!0,R,W)};class mr extends j{constructor(E,R){super(),this.m=E,this.l=R,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vn(g){j.call(this),this.h=g,this.g={}}m(Vn,j);var Xe=[];function Ot(g){q(g.g,function(E,R){this.g.hasOwnProperty(R)&&at(E)},g),g.g={}}Vn.prototype.N=function(){Vn.aa.N.call(this),Ot(this)},Vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fn=a.JSON.stringify,Lt=a.JSON.parse,Sn=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function Mt(){}function si(){}Mt.prototype.h=null;var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){Y.call(this,"d")}function qn(){Y.call(this,"c")}m(Wt,Y),m(qn,Y);var so={},Li=null;function Ro(){return Li=Li||new hn}function js(g){Y.call(this,so.La,g)}function Bt(g){const E=Ro();Dt(E,new js(E))}function Ul(g,E){Y.call(this,so.STAT_EVENT,g),this.stat=E}function oi(g){const E=Ro();Dt(E,new Ul(E,g))}function ra(g,E){Y.call(this,so.Ma,g),this.size=E}function zs(g,E){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},E)}function kr(){this.g=!0}function Pa(g,E,R,W){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+function rl(g,E){if(!g.g)return E;if(!E)return null;try{var R=JSON.parse(E);if(R)for(g=0;g<R.length;g++)if(Array.isArray(R[g])){var W=R[g];if(!(2>W.length)){var ge=W[1];if(Array.isArray(ge)&&!(1>ge.length)){var Se=ge[0];if("noop"!=Se&&"stop"!=Se&&"close"!=Se)for(var Ze=1;Ze<ge.length;Ze++)ge[Ze]=""}}}return fn(R)}catch{return E}}(g,R)+(W?" "+W:"")})}so.La="serverreachability",m(js,Y),so.STAT_EVENT="statevent",m(Ul,Y),so.Ma="timingevent",m(ra,Y),kr.prototype.xa=function(){this.g=!1},kr.prototype.info=function(){};var sa,ia={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ma={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function oo(){}function No(g,E,R,W){this.j=g,this.i=E,this.l=R,this.R=W||1,this.U=new Vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new il}function il(){this.i=null,this.g="",this.h=!1}m(oo,Mt),oo.prototype.g=function(){return new XMLHttpRequest},oo.prototype.i=function(){return{}},sa=new oo;var gu={},mu={};function _u(g,E,R){g.L=1,g.v=bd(ol(E)),g.m=R,g.P=!0,gd(g,null)}function gd(g,E){g.F=Date.now(),md(g),g.A=ol(g.v);var R=g.A,W=g.R;Array.isArray(W)||(W=[String(W)]),D_(R.i,"t",W),g.C=0,R=g.j.J,g.h=new il,g.g=Ti(g.j,R?E:null,!g.m),0<g.O&&(g.M=new mr(h(g.Y,g,g.g),g.O)),E=g.U,R=g.g,W=g.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(Xe[0]=ge.toString()),ge=Xe);for(var Se=0;Se<ge.length;Se++){var Ze=Mn(R,ge[Se],W||E.handleEvent,!1,E.h||E);if(!Ze)break;E.g[Ze.key]=Ze}E=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,E)):(g.u="GET",g.g.ea(g.A,g.u,null,E)),Bt(),function us(g,E,R,W,ge,Se){g.info(function(){if(g.g)if(Se)for(var Ze="",lr=Se.split("&"),Si=0;Si<lr.length;Si++){var jt=lr[Si].split("=");if(1<jt.length){var Yr=jt[0];jt=jt[1];var xi=Yr.split("_");Ze=2<=xi.length&&"type"==xi[1]?Ze+(Yr+"=")+jt+"&":Ze+(Yr+"=redacted&")}}else Ze=null;else Ze=Se;return"XMLHTTP REQ ("+W+") [attempt "+ge+"]: "+E+"\n"+R+"\n"+Ze})}(g.i,g.u,g.A,g.l,g.R,g.m)}function T_(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function Ep(g,E){var R=g.C,W=E.indexOf("\n",R);return-1==W?mu:(R=Number(E.substring(R,W)),isNaN(R)?gu:(W+=1)+R>E.length?mu:(E=E.slice(W,W+R),g.C=W+R,E))}function md(g){g.S=Date.now()+g.I,Ip(g,g.I)}function Ip(g,E){if(null!=g.B)throw Error("WatchDog timer not null");g.B=zs(h(g.ba,g),E)}function Oo(g){g.B&&(a.clearTimeout(g.B),g.B=null)}function mc(g){0==g.j.G||g.J||or(g.j,g)}function jl(g){Oo(g);var E=g.M;E&&"function"==typeof E.ma&&E.ma(),g.M=null,Ot(g.U),g.g&&(E=g.g,g.g=null,E.abort(),E.ma())}function _d(g,E){try{var R=g.j;if(0!=R.G&&(R.g==g||xp(R.h,g)))if(!g.K&&xp(R.h,g)&&3==R.G){try{var W=R.Da.g.parse(E)}catch{W=null}if(Array.isArray(W)&&3==W.length){var ge=W;if(0==ge[0]){e:if(!R.u){if(R.g){if(!(R.g.F+3e3<g.F))break e;en(R),Sd(R)}mt(R),oi(18)}}else R.za=ge[1],0<R.za-R.T&&37500>ge[2]&&R.F&&0==R.v&&!R.C&&(R.C=zs(h(R.Za,R),6e3));if(1>=vd(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Nr(R,11)}else if((g.K||R.g==g)&&en(R),!A(E))for(ge=R.Da.g.parse(E),E=0;E<ge.length;E++){let jt=ge[E];if(R.T=jt[0],jt=jt[1],2==R.G)if("c"==jt[0]){R.K=jt[1],R.ia=jt[2];const Yr=jt[3];null!=Yr&&(R.la=Yr,R.j.info("VER="+R.la));const xi=jt[4];null!=xi&&(R.Aa=xi,R.j.info("SVER="+R.Aa));const Ac=jt[5];null!=Ac&&"number"==typeof Ac&&0<Ac&&(R.L=W=1.5*Ac,R.j.info("backChannelRequestTimeoutMs_="+W)),W=R;const yi=g.g;if(yi){const Wl=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var Se=W.h;Se.g||-1==Wl.indexOf("spdy")&&-1==Wl.indexOf("quic")&&-1==Wl.indexOf("h2")||(Se.j=Se.l,Se.g=new Set,Se.h&&(vi(Se,Se.h),Se.h=null))}if(W.D){const Dd=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Dd&&(W.ya=Dd,yr(W.I,W.D,Dd))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-g.F,R.j.info("Handshake RTT: "+R.R+"ms"));var Ze=g;if((W=R).qa=Fi(W,W.J?W.ia:null,W.W),Ze.K){Dp(W.h,Ze);var lr=Ze,Si=W.L;Si&&(lr.I=Si),lr.B&&(Oo(lr),md(lr)),W.g=Ze}else je(W);0<R.i.length&&B(R)}else"stop"!=jt[0]&&"close"!=jt[0]||Nr(R,7);else 3==R.G&&("stop"==jt[0]||"close"==jt[0]?"stop"==jt[0]?Nr(R,7):wc(R):"noop"!=jt[0]&&R.l&&R.l.ta(jt),R.v=0)}Bt()}catch{}}function Tp(g){this.l=g||10,g=a.PerformanceNavigationTiming?0<(g=a.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sp(g){return!!g.h||!!g.g&&g.g.size>=g.j}function vd(g){return g.h?1:g.g?g.g.size:0}function xp(g,E){return g.h?g.h==E:!!g.g&&g.g.has(E)}function vi(g,E){g.g?g.g.add(E):g.h=E}function Dp(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}function Pp(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let E=g.i;for(const R of g.g.values())E=E.concat(R.D);return E}return v(g.i)}function ka(g,E){if(g.forEach&&"function"==typeof g.forEach)g.forEach(E,void 0);else if(l(g)||"string"==typeof g)Array.prototype.forEach.call(g,E,void 0);else for(var R=function yd(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(l(g)||"string"==typeof g){var E=[];g=g.length;for(var R=0;R<g;R++)E.push(R);return E}E=[],R=0;for(const W in g)E[R++]=W;return E}}}(g),W=function _c(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(l(g)){for(var E=[],R=g.length,W=0;W<R;W++)E.push(g[W]);return E}for(W in E=[],R=0,g)E[R++]=g[W];return E}(g),ge=W.length,Se=0;Se<ge;Se++)E.call(void 0,W[Se],R&&R[Se],g)}No.prototype.ca=function(g){g=g.target;const E=this.M;E&&3==Na(g)?E.j():this.Y(g)},No.prototype.Y=function(g){try{if(g==this.g)e:{const xi=Na(this.g);var E=this.g.Ba();if(this.g.Z(),!(3>xi)&&(3!=xi||this.g&&(this.h.h||this.g.oa()||ql(this.g)))){this.J||4!=xi||7==E||Bt(),Oo(this);var R=this.g.Z();this.X=R;t:if(T_(this)){var W=ql(this.g);g="";var ge=W.length,Se=4==Na(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){jl(this),mc(this);var Ze="";break t}this.h.i=new a.TextDecoder}for(E=0;E<ge;E++)this.h.h=!0,g+=this.h.i.decode(W[E],{stream:!(Se&&E==ge-1)});W.length=0,this.h.g+=g,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=200==R,function bs(g,E,R,W,ge,Se,Ze){g.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ge+"]: "+E+"\n"+R+"\n"+Se+" "+Ze})}(this.i,this.u,this.A,this.l,this.R,xi,R),this.o){if(this.T&&!this.K){t:{if(this.g){var lr,Si=this.g;if((lr=Si.g?Si.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(lr)){var jt=lr;break t}}jt=null}if(!(R=jt)){this.o=!1,this.s=3,oi(12),jl(this),mc(this);break e}Pa(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_d(this,R)}if(this.P){let yi;for(R=!0;!this.J&&this.C<Ze.length;){if(yi=Ep(this,Ze),yi==mu){4==xi&&(this.s=4,oi(14),R=!1),Pa(this.i,this.l,null,"[Incomplete Response]");break}if(yi==gu){this.s=4,oi(15),Pa(this.i,this.l,Ze,"[Invalid Chunk]"),R=!1;break}Pa(this.i,this.l,yi,null),_d(this,yi)}if(T_(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=xi||0!=Ze.length||this.h.h||(this.s=1,oi(16),R=!1),this.o=this.o&&R,R){if(0<Ze.length&&!this.W){this.W=!0;var Yr=this.j;Yr.g==this&&Yr.ba&&!Yr.M&&(Yr.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),Ct(Yr),Yr.M=!0,oi(11))}}else Pa(this.i,this.l,Ze,"[Invalid Chunked Response]"),jl(this),mc(this)}else Pa(this.i,this.l,Ze,null),_d(this,Ze);4==xi&&jl(this),this.o&&!this.J&&(4==xi?or(this.j,this):(this.o=!1,md(this)))}else(function bc(g){const E={};g=(g.g&&2<=Na(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let W=0;W<g.length;W++){if(A(g[W]))continue;var R=I(g[W]);const ge=R[0];if("string"!=typeof(R=R[1]))continue;R=R.trim();const Se=E[ge]||[];E[ge]=Se,Se.push(R)}!function N(g,E){for(const R in g)E.call(void 0,g[R],R,g)}(E,function(W){return W.join(", ")})})(this.g),400==R&&0<Ze.indexOf("Unknown SID")?(this.s=3,oi(12)):(this.s=0,oi(13)),jl(this),mc(this)}}}catch{}},No.prototype.cancel=function(){this.J=!0,jl(this)},No.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function pu(g,E){g.info(function(){return"TIMEOUT: "+E})}(this.i,this.A),2!=this.L&&(Bt(),oi(17)),jl(this),this.s=2,mc(this)):Ip(this,this.S-g)},Tp.prototype.cancel=function(){if(this.i=Pp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof sl){this.h=g.h,Uh(this,g.j),this.o=g.o,this.g=g.g,jh(this,g.s),this.l=g.l;var E=g.i,R=new Ad;R.i=E.i,E.g&&(R.g=new Map(E.g),R.h=E.h),al(this,R),this.m=g.m}else g&&(E=String(g).match(vu))?(this.h=!1,Uh(this,E[1]||"",!0),this.o=Ra(E[2]||""),this.g=Ra(E[3]||"",!0),jh(this,E[4]),this.l=Ra(E[5]||"",!0),al(this,E[6]||"",!0),this.m=Ra(E[7]||"")):(this.h=!1,this.i=new Ad(null,this.h))}function ol(g){return new sl(g)}function Uh(g,E,R){g.j=R?Ra(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function jh(g,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);g.s=E}else g.s=null}function al(g,E,R){E instanceof Ad?(g.i=E,function A1(g,E){E&&!g.j&&(Lo(g),g.i=null,g.g.forEach(function(R,W){var ge=W.toLowerCase();W!=ge&&(zh(this,W),D_(this,ge,R))},g)),g.j=E}(g.i,g.h)):(R||(E=vc(E,wd)),g.i=new Ad(E,g.h))}function yr(g,E,R){g.i.set(E,R)}function bd(g){return yr(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Ra(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function vc(g,E,R){return"string"==typeof g?(g=encodeURI(g).replace(E,b1),R&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function b1(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}sl.prototype.toString=function(){var g=[],E=this.j;E&&g.push(vc(E,x_,!0),":");var R=this.g;return(R||"file"==E)&&(g.push("//"),(E=this.o)&&g.push(vc(E,x_,!0),"@"),g.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(R=this.s)&&g.push(":",String(R))),(R=this.l)&&(this.g&&"/"!=R.charAt(0)&&g.push("/"),g.push(vc(R,"/"==R.charAt(0)?Mp:w1,!0))),(R=this.i.toString())&&g.push("?",R),(R=this.m)&&g.push("#",vc(R,yu)),g.join("")};var g,x_=/[#\/\?@]/g,w1=/[#\?:]/g,Mp=/[#\?]/g,wd=/[#\?@]/g,yu=/#/g;function Ad(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function Lo(g){g.g||(g.g=new Map,g.h=0,g.i&&function Ii(g,E){if(g){g=g.split("&");for(var R=0;R<g.length;R++){var W=g[R].indexOf("="),ge=null;if(0<=W){var Se=g[R].substring(0,W);ge=g[R].substring(W+1)}else Se=g[R];E(Se,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}(g.i,function(E,R){g.add(decodeURIComponent(E.replace(/\+/g," ")),R)}))}function zh(g,E){Lo(g),E=bu(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function an(g,E){return Lo(g),E=bu(g,E),g.g.has(E)}function D_(g,E,R){zh(g,E),0<R.length&&(g.i=null,g.g.set(bu(g,E),v(R)),g.h+=R.length)}function bu(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function $s(g,E,R,W,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),W(R)}catch{}}function E1(){this.g=new Sn}function I1(g,E,R){const W=R||"";try{ka(g,function(ge,Se){let Ze=ge;c(ge)&&(Ze=fn(ge)),E.push(W+Se+"="+encodeURIComponent(Ze))})}catch(ge){throw E.push(W+"type="+encodeURIComponent("_badmap")),ge}}function zl(g){this.l=g.Ub||null,this.j=g.eb||!1}function wu(g,E){hn.call(this),this.D=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Au(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function $l(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Hl(g)}function Hl(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function P_(g){let E="";return q(g,function(R,W){E+=W,E+=":",E+=R,E+="\r\n"}),E}function Cd(g,E,R){e:{for(W in R){var W=!1;break e}W=!0}W||(R=P_(R),"string"==typeof g?null!=R&&encodeURIComponent(String(R)):yr(g,E,R))}function Rr(g){hn.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ad.prototype).add=function(g,E){Lo(this),this.i=null,g=bu(this,g);var R=this.g.get(g);return R||this.g.set(g,R=[]),R.push(E),this.h+=1,this},n.forEach=function(g,E){Lo(this),this.g.forEach(function(R,W){R.forEach(function(ge){g.call(E,ge,W,this)},this)},this)},n.na=function(){Lo(this);const g=Array.from(this.g.values()),E=Array.from(this.g.keys()),R=[];for(let W=0;W<E.length;W++){const ge=g[W];for(let Se=0;Se<ge.length;Se++)R.push(E[W])}return R},n.V=function(g){Lo(this);let E=[];if("string"==typeof g)an(this,g)&&(E=E.concat(this.g.get(bu(this,g))));else{g=Array.from(this.g.values());for(let R=0;R<g.length;R++)E=E.concat(g[R])}return E},n.set=function(g,E){return Lo(this),this.i=null,an(this,g=bu(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g&&0<(g=this.V(g)).length?String(g[0]):E},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(var R=0;R<E.length;R++){var W=E[R];const Se=encodeURIComponent(String(W)),Ze=this.V(W);for(W=0;W<Ze.length;W++){var ge=Se;""!==Ze[W]&&(ge+="="+encodeURIComponent(String(Ze[W]))),g.push(ge)}}return this.i=g.join("&")},m(zl,Mt),zl.prototype.g=function(){return new wu(this.l,this.j)},zl.prototype.i=(g={},function(){return g}),m(wu,hn),(n=wu.prototype).open=function(g,E){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=E,this.readyState=1,Hl(this)},n.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(E.body=g),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$l(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Hl(this)),this.g&&(this.readyState=3,Hl(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Au(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?$l(this):Hl(this),3==this.readyState&&Au(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,$l(this))},n.Qa=function(g){this.g&&(this.response=g,$l(this))},n.ga=function(){this.g&&$l(this)},n.setRequestHeader=function(g,E){this.u.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var R=E.next();!R.done;)g.push((R=R.value)[0]+": "+R[1]),R=E.next();return g.join("\r\n")},Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),m(Rr,hn);var Ed=/^https?$/i,Id=["POST","PUT"];function $h(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.m=5,Td(g),Gl(g)}function Td(g){g.A||(g.A=!0,Dt(g,"complete"),Dt(g,"error"))}function Hh(g){if(g.h&&typeof o<"u"&&(!g.v[1]||4!=Na(g)||2!=g.Z()))if(g.u&&4==Na(g))qt(g.Ea,0,g);else if(Dt(g,"readystatechange"),4==Na(g)){g.h=!1;try{const Ze=g.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var R;if(!(R=E)){var W;if(W=0===Ze){var ge=String(g.D).match(vu)[1]||null;!ge&&a.self&&a.self.location&&(ge=a.self.location.protocol.slice(0,-1)),W=!Ed.test(ge?ge.toLowerCase():"")}R=W}if(R)Dt(g,"complete"),Dt(g,"success");else{g.m=6;try{var Se=2<Na(g)?g.g.statusText:""}catch{Se=""}g.l=Se+" ["+g.Z()+"]",Td(g)}}finally{Gl(g)}}}function Gl(g,E){if(g.g){kp(g);const R=g.g,W=g.v[0]?()=>{}:null;g.g=null,g.v=null,E||Dt(g,"ready");try{R.onreadystatechange=W}catch{}}}function kp(g){g.I&&(a.clearTimeout(g.I),g.I=null)}function Na(g){return g.g?g.g.readyState:0}function ql(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Cu(g,E,R){return R&&R.internalChannelParams&&R.internalChannelParams[g]||E}function Rp(g){this.Aa=0,this.i=[],this.j=new kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cu("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cu("baseRetryDelayMs",5e3,g),this.cb=Cu("retryDelaySeedMs",1e4,g),this.Wa=Cu("forwardChannelMaxRetries",2,g),this.wa=Cu("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Tp(g&&g.concurrentRequestLimit),this.Da=new E1,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function wc(g){if(w(g),3==g.G){var E=g.U++,R=ol(g.I);if(yr(R,"SID",g.K),yr(R,"RID",E),yr(R,"TYPE","terminate"),_e(g,R),(E=new No(g,g.j,E)).L=2,E.v=bd(ol(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!R&&a.Image&&((new Image).src=E.v,R=!0),R||(E.g=Ti(E.j,null),E.g.ea(E.v)),E.F=Date.now(),md(E)}xr(g)}function Sd(g){g.g&&(Ct(g),g.g.cancel(),g.g=null)}function w(g){Sd(g),g.u&&(a.clearTimeout(g.u),g.u=null),en(g),g.h.cancel(),g.s&&("number"==typeof g.s&&a.clearTimeout(g.s),g.s=null)}function B(g){if(!Sp(g.h)&&!g.s){g.s=!0;var E=g.Ga;ue||Ge(),he||(ue(),he=!0),be.add(E,g),g.B=0}}function se(g,E){var R;R=E?E.l:g.U++;const W=ol(g.I);yr(W,"SID",g.K),yr(W,"RID",R),yr(W,"AID",g.T),_e(g,W),g.m&&g.o&&Cd(W,g.m,g.o),R=new No(g,g.j,R,g.B+1),null===g.m&&(R.H=g.o),E&&(g.i=E.D.concat(g.i)),E=Ne(g,R,1e3),R.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),vi(g.h,R),_u(R,W,E)}function _e(g,E){g.H&&q(g.H,function(R,W){yr(E,W,R)}),g.l&&ka({},function(R,W){yr(E,W,R)})}function Ne(g,E,R){R=Math.min(g.i.length,R);var W=g.l?h(g.l.Na,g.l,g):null;e:{var ge=g.i;let Se=-1;for(;;){const Ze=["count="+R];-1==Se?0<R?(Se=ge[0].g,Ze.push("ofs="+Se)):Se=0:Ze.push("ofs="+Se);let lr=!0;for(let Si=0;Si<R;Si++){let jt=ge[Si].g;const Yr=ge[Si].map;if(jt-=Se,0>jt)Se=Math.max(0,ge[Si].g-100),lr=!1;else try{I1(Yr,Ze,"req"+jt+"_")}catch{W&&W(Yr)}}if(lr){W=Ze.join("&");break e}}}return g=g.i.splice(0,R),E.D=g,W}function je(g){if(!g.g&&!g.u){g.Y=1;var E=g.Fa;ue||Ge(),he||(ue(),he=!0),be.add(E,g),g.v=0}}function mt(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=zs(h(g.Fa,g),Kr(g,g.v)),g.v++,0))}function Ct(g){null!=g.A&&(a.clearTimeout(g.A),g.A=null)}function Jt(g){g.g=new No(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var E=ol(g.qa);yr(E,"RID","rpc"),yr(E,"SID",g.K),yr(E,"AID",g.T),yr(E,"CI",g.F?"0":"1"),!g.F&&g.ja&&yr(E,"TO",g.ja),yr(E,"TYPE","xmlhttp"),_e(g,E),g.m&&g.o&&Cd(E,g.m,g.o),g.L&&(g.g.I=g.L);var R=g.g;g=g.ia,R.L=1,R.v=bd(ol(E)),R.m=null,R.P=!0,gd(R,g)}function en(g){null!=g.C&&(a.clearTimeout(g.C),g.C=null)}function or(g,E){var R=null;if(g.g==E){en(g),Ct(g),g.g=null;var W=2}else{if(!xp(g.h,E))return;R=E.D,Dp(g.h,E),W=1}if(0!=g.G)if(E.o)if(1==W){R=E.m?E.m.length:0,E=Date.now()-E.F;var ge=g.B;Dt(W=Ro(),new ra(W,R)),B(g)}else je(g);else if(3==(ge=E.s)||0==ge&&0<E.X||!(1==W&&function Z(g,E){return!(vd(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=E.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=zs(h(g.Ga,g,E),Kr(g,g.B)),g.B++,0)))}(g,E)||2==W&&mt(g)))switch(R&&0<R.length&&(E=g.h,E.i=E.i.concat(R)),ge){case 1:Nr(g,5);break;case 4:Nr(g,10);break;case 3:Nr(g,6);break;default:Nr(g,2)}}function Kr(g,E){let R=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(R*=2),R*E}function Nr(g,E){if(g.j.info("Error code "+E),2==E){var R=h(g.fb,g),W=g.Xa;const ge=!W;W=new sl(W||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Uh(W,"https"),bd(W),ge?function C1(g,E){const R=new kr;if(a.Image){const W=new Image;W.onload=f($s,R,"TestLoadImage: loaded",!0,E,W),W.onerror=f($s,R,"TestLoadImage: error",!1,E,W),W.onabort=f($s,R,"TestLoadImage: abort",!1,E,W),W.ontimeout=f($s,R,"TestLoadImage: timeout",!1,E,W),a.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=g}else E(!1)}(W.toString(),R):function yc(g,E){new kr;const W=new AbortController,ge=setTimeout(()=>{W.abort(),$s(0,0,!1,E)},1e4);fetch(g,{signal:W.signal}).then(Se=>{clearTimeout(ge),$s(0,0,!!Se.ok,E)}).catch(()=>{clearTimeout(ge),$s(0,0,!1,E)})}(W.toString(),R)}else oi(2);g.G=0,g.l&&g.l.sa(E),xr(g),w(g)}function xr(g){if(g.G=0,g.ka=[],g.l){const E=Pp(g.h);(0!=E.length||0!=g.i.length)&&(y(g.ka,E),y(g.ka,g.i),g.h.i.length=0,v(g.i),g.i.length=0),g.l.ra()}}function Fi(g,E,R){var W=R instanceof sl?ol(R):new sl(R);if(""!=W.g)E&&(W.g=E+"."+W.g),jh(W,W.s);else{var ge=a.location;W=ge.protocol,E=E?E+"."+ge.hostname:ge.hostname,ge=+ge.port;var Se=new sl(null);W&&Uh(Se,W),E&&(Se.g=E),ge&&jh(Se,ge),R&&(Se.l=R),W=Se}return E=g.ya,(R=g.D)&&E&&yr(W,R,E),yr(W,"VER",g.la),_e(g,W),W}function Ti(g,E,R){if(E&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(E=new Rr(g.Ca&&!g.pa?new zl({eb:R}):g.pa)).Ha(g.J),E}function ds(){}function ao(){}function Or(g,E){hn.call(this),this.g=new Rp(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(g?g["X-WebChannel-Client-Profile"]=E.va:g={"X-WebChannel-Client-Profile":E.va}),this.g.S=g,(g=E&&E.Sb)&&!A(g)&&(this.g.m=g),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!A(E)&&(this.g.D=E,null!==(g=this.h)&&E in g&&E in(g=this.h)&&delete g[E]),this.j=new Oa(this)}function Np(g){Wt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const R in E){g=R;break e}g=void 0}(this.i=g)&&(g=this.i,E=null!==E&&g in E?E[g]:void 0),this.data=E}else this.data=g}function xd(){qn.call(this),this.status=1}function Oa(g){this.g=g}(n=Rr.prototype).Ha=function(g){this.J=g},n.ea=function(g,E,R,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sa.g(),this.v=function vr(g){return g.h||(g.h=g.i())}(this.o?this.o:sa),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(Se){return void $h(this,Se)}if(g=R||"",R=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ge in W)R.set(ge,W[ge]);else{if("function"!=typeof W.keys||"function"!=typeof W.get)throw Error("Unknown input type for opt_headers: "+String(W));for(const Se of W.keys())R.set(Se,W.get(Se))}W=Array.from(R.keys()).find(Se=>"content-type"==Se.toLowerCase()),ge=a.FormData&&g instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Id,E,void 0))||W||ge||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Se,Ze]of R)this.g.setRequestHeader(Se,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kp(this),this.u=!0,this.g.send(g),this.u=!1}catch(Se){$h(this,Se)}},n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Dt(this,"complete"),Dt(this,"abort"),Gl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gl(this,!0)),Rr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Hh(this):this.bb())},n.bb=function(){Hh(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Na(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var E=this.g.responseText;return g&&0==E.indexOf(g)&&(E=E.substring(g.length)),Lt(E)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Rp.prototype).la=8,n.G=1,n.connect=function(g,E,R,W){oi(0),this.W=g,this.H=E||{},R&&void 0!==W&&(this.H.OSID=R,this.H.OAID=W),this.F=this.X,this.I=Fi(this,null,this.W),B(this)},n.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ge=new No(this,this.j,g);let Se=this.o;if(this.S&&(Se?(Se=D(Se),F(Se,this.S)):Se=this.S),null!==this.m||this.O||(ge.H=Se,Se=null),this.P)e:{for(var E=0,R=0;R<this.i.length;R++){var W=this.i[R];if(void 0===(W="__data__"in W.map&&"string"==typeof(W=W.map.__data__)?W.length:void 0))break;if(4096<(E+=W)){E=R;break e}if(4096===E||R===this.i.length-1){E=R+1;break e}}E=1e3}else E=1e3;E=Ne(this,ge,E),yr(R=ol(this.I),"RID",g),yr(R,"CVER",22),this.D&&yr(R,"X-HTTP-Session-Id",this.D),_e(this,R),Se&&(this.O?E="headers="+encodeURIComponent(String(P_(Se)))+"&"+E:this.m&&Cd(R,this.m,Se)),vi(this.h,ge),this.Ua&&yr(R,"TYPE","init"),this.P?(yr(R,"$req",E),yr(R,"SID","null"),ge.T=!0,_u(ge,R,null)):_u(ge,R,E),this.G=2}}else 3==this.G&&(g?se(this,g):0==this.i.length||Sp(this.h)||se(this))},n.Fa=function(){if(this.u=null,Jt(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=zs(h(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oi(10),Sd(this),Jt(this))},n.Za=function(){null!=this.C&&(this.C=null,Sd(this),mt(this),oi(19))},n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),oi(2)):(this.j.info("Failed to ping google.com"),oi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=ds.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},ao.prototype.g=function(g,E){return new Or(g,E)},m(Or,hn),Or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Or.prototype.close=function(){wc(this.g)},Or.prototype.o=function(g){var E=this.g;if("string"==typeof g){var R={};R.__data__=g,g=R}else this.u&&((R={}).__data__=fn(g),g=R);E.i.push(new class{constructor(g,E){this.g=g,this.map=E}}(E.Ya++,g)),3==E.G&&B(E)},Or.prototype.N=function(){this.g.l=null,delete this.j,wc(this.g),delete this.g,Or.aa.N.call(this)},m(Np,Wt),m(xd,qn),m(Oa,ds),Oa.prototype.ua=function(){Dt(this.g,"a")},Oa.prototype.ta=function(g){Dt(this.g,new Np(g))},Oa.prototype.sa=function(g){Dt(this.g,new xd)},Oa.prototype.ra=function(){Dt(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,Or.prototype.send=Or.prototype.o,Or.prototype.open=Or.prototype.m,Or.prototype.close=Or.prototype.close,mj=ed.createWebChannelTransport=function(){return new ao},gj=ed.getStatEventTarget=function(){return Ro()},pj=ed.Event=so,JD=ed.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,y2=ed.ErrorCode=ia,Ma.COMPLETE="complete",fj=ed.EventType=Ma,si.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",hn.prototype.listen=hn.prototype.K,Cv=ed.WebChannel=si,ed.FetchXmlHttpFactory=zl,Rr.prototype.listenOnce=Rr.prototype.L,Rr.prototype.getLastError=Rr.prototype.Ka,Rr.prototype.getLastErrorCode=Rr.prototype.Ba,Rr.prototype.getStatus=Rr.prototype.Z,Rr.prototype.getResponseJson=Rr.prototype.Oa,Rr.prototype.getResponseText=Rr.prototype.oa,Rr.prototype.send=Rr.prototype.ea,Rr.prototype.setWithCredentials=Rr.prototype.Ha,hj=ed.XhrIo=Rr}).apply(typeof v2<"u"?v2:typeof self<"u"?self:typeof window<"u"?window:{});const _j="@firebase/firestore";class Ns{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ns.UNAUTHENTICATED=new Ns(null),Ns.GOOGLE_CREDENTIALS=new Ns("google-credentials-uid"),Ns.FIRST_PARTY=new Ns("first-party-uid"),Ns.MOCK_USER=new Ns("mock-user");let nm="10.14.0";const th=new Ax("@firebase/firestore");function rm(){return th.logLevel}function $e(n,...e){if(th.logLevel<=Kn.DEBUG){const t=e.map(eP);th.debug(`Firestore (${nm}): ${n}`,...t)}}function qi(n,...e){if(th.logLevel<=Kn.ERROR){const t=e.map(eP);th.error(`Firestore (${nm}): ${n}`,...t)}}function Ml(n,...e){if(th.logLevel<=Kn.WARN){const t=e.map(eP);th.warn(`Firestore (${nm}): ${n}`,...t)}}function eP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${nm}) INTERNAL ASSERTION FAILED: `+n;throw qi(e),new Error(e)}function wt(n,e){n||ft()}function ot(n,e){return n}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends jc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Os{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qme{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ns.UNAUTHENTICATED))}shutdown(){}}class Zme{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Jme{constructor(e){this.t=e,this.currentUser=Ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;wt(void 0===this.o);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Os,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,Q.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Os)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new vj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Ns(e)}}class e_e{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ns.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class t_e{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new e_e(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n_e{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){wt(void 0===this.o);const r=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.R=t.token,new yj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function r_e(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class bj{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=r_e(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function un(n,e){return n<e?-1:n>e?1:0}function im(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class di{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new He(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return di.fromMillis(Date.now())}static fromDate(e){return di.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new di(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new di(0,0))}static max(){return new kt(new di(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ev{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ev.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ev?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yn extends Ev{construct(e,t,r){return new Yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Yn(t)}static emptyPath(){return new Yn([])}}const i_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends Ev{construct(e,t,r){return new hi(e,t,r)}static isValidIdentifier(e){return i_e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new He(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new He(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new He(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new He(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(t)}static emptyPath(){return new hi([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(Yn.fromString(e))}static fromName(e){return new ut(Yn.fromString(e).popFirst(5))}static empty(){return new ut(Yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new Yn(e.slice()))}}function Cj(n){return new Xa(n.readTime,n.key,-1)}class Xa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xa(kt.min(),ut.empty(),-1)}static max(){return new Xa(kt.max(),ut.empty(),-1)}}function nP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ut.comparator(n.documentKey,e.documentKey),0!==t?t:un(n.largestBatchId,e.largestBatchId))}const Ej="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ij{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nh(n){return rP.apply(this,arguments)}function rP(){return rP=(0,Q.A)(function*(n){if(n.code!==xe.FAILED_PRECONDITION||n.message!==Ej)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),rP.apply(this,arguments)}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ye((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new ye((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function rh(n){return"IndexedDbTransactionError"===n.name}let Qa=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Tv(n){return null==n}function Sv(n){return 0===n&&1/n==-1/0}function Oj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ih(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Fj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Wr{constructor(e,t){this.comparator=e,this.root=t||Qs.EMPTY}insert(e,t){return new Wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(e){return new Wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new A2(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new A2(this.root,e,this.comparator,!1)}getReverseIterator(){return new A2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new A2(this.root,e,this.comparator,!0)}}class A2{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Qs.RED,this.left=i??Qs.EMPTY,this.right=s??Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Qs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Qs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1,Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Qs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mr{constructor(e){this.comparator=e,this.data=new Wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vj(this.data.getIterator())}getIteratorFrom(e){return new Vj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mr(this.comparator);return t.data=e,t}}class Vj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ca{constructor(e){this.fields=e,e.sort(hi.comparator)}static empty(){return new Ca([])}unionWith(e){let t=new Mr(hi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ca(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return im(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Bj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ri{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bj("Invalid base64 string: "+s):s}}(e);return new Ri(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ri(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ri.EMPTY_BYTE_STRING=new Ri("");const P_e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function td(n){if(wt(!!n),"string"==typeof n){let e=0;const t=P_e.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fi(n.seconds),nanos:fi(n.nanos)}}function fi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function nd(n){return"string"==typeof n?Ri.fromBase64String(n):Ri.fromUint8Array(n)}function C2(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function E2(n){const e=n.mapValue.fields.__previous_value__;return C2(e)?E2(e):e}function xv(n){const e=td(n.mapValue.fields.__local_write_time__.timestampValue);return new di(e.seconds,e.nanos)}class M_e{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ff{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ff("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ff&&e.projectId===this.projectId&&e.database===this.database}}const sh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?C2(n)?4:Hj(n)?9007199254740991:x2(n)?10:11:ft()}function Gc(n,e){if(n===e)return!0;const t=oh(n);if(t!==oh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xv(n).isEqual(xv(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=td(i.timestampValue),a=td(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,nd(n.bytesValue).isEqual(nd(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return fi(i.geoPointValue.latitude)===fi(s.geoPointValue.latitude)&&fi(i.geoPointValue.longitude)===fi(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return fi(i.integerValue)===fi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=fi(i.doubleValue),a=fi(s.doubleValue);return o===a?Sv(o)===Sv(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return im(n.arrayValue.values||[],e.arrayValue.values||[],Gc);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Oj(o)!==Oj(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Gc(o[l],a[l])))return!1;return!0}(n,e);default:return ft()}var s}function Dv(n,e){return void 0!==(n.values||[]).find(t=>Gc(t,e))}function ah(n,e){if(n===e)return 0;const t=oh(n),r=oh(e);if(t!==r)return un(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return un(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=fi(s.integerValue||s.doubleValue),l=fi(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Uj(n.timestampValue,e.timestampValue);case 4:return Uj(xv(n),xv(e));case 5:return un(n.stringValue,e.stringValue);case 6:return function(s,o){const a=nd(s),l=nd(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=un(a[c],l[c]);if(0!==u)return u}return un(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=un(fi(s.latitude),fi(o.latitude));return 0!==a?a:un(fi(s.longitude),fi(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jj(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,m=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,v=un((null===(c=f?.values)||void 0===c?void 0:c.length)||0,(null===(u=m?.values)||void 0===u?void 0:u.length)||0);return 0!==v?v:jj(f,m)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===sh.mapValue&&o===sh.mapValue)return 0;if(s===sh.mapValue)return 1;if(o===sh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=un(l[d],u[d]);if(0!==h)return h;const f=ah(a[l[d]],c[u[d]]);if(0!==f)return f}return un(l.length,u.length)}(n.mapValue,e.mapValue);default:throw ft()}}function Uj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return un(n,e);const t=td(n),r=td(e),i=un(t.seconds,r.seconds);return 0!==i?i:un(t.nanos,r.nanos)}function jj(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ah(t[i],r[i]);if(s)return s}return un(t.length,r.length)}function lm(n){return aP(n)}function aP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=td(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?nd(n.bytesValue).toBase64():"referenceValue"in n?ut.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=aP(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${aP(t.fields[o])}`;return i+"}"}(n.mapValue):ft()}function Vf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lP(n){return!!n&&"integerValue"in n}function Pv(n){return!!n&&"arrayValue"in n}function zj(n){return!!n&&"nullValue"in n}function $j(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function S2(n){return!!n&&"mapValue"in n}function x2(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Mv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ih(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Hj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Zs{constructor(e){this.value=e}static empty(){return new Zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!S2(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mv(t)}setAll(e){let t=hi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Mv(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());S2(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];S2(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ih(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zs(Mv(this.value))}}function Kj(n){const e=[];return ih(n.fields,(t,r)=>{const i=new hi([t]);if(S2(r)){const s=Kj(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ca(e)}class ri{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ri(e,0,kt.min(),kt.min(),kt.min(),Zs.empty(),0)}static newFoundDocument(e,t,r,i){return new ri(e,1,t,kt.min(),r,i,0)}static newNoDocument(e,t){return new ri(e,2,t,kt.min(),kt.min(),Zs.empty(),0)}static newUnknownDocument(e,t){return new ri(e,3,t,kt.min(),kt.min(),Zs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(kt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lh{constructor(e,t){this.position=e,this.inclusive=t}}function Yj(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?ut.comparator(ut.fromName(o.referenceValue),t.key):ah(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Xj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gc(n.position[t],e.position[t]))return!1;return!0}class kv{constructor(e,t="asc"){this.field=e,this.dir=t}}function N_e(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Qj{}class Xn extends Qj{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new O_e(e,t,r):"array-contains"===t?new V_e(e,r):"in"===t?new r9(e,r):"not-in"===t?new B_e(e,r):"array-contains-any"===t?new U_e(e,r):new Xn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new L_e(e,r):new F_e(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ah(t,this.value)):null!==t&&oh(this.value)===oh(t)&&this.matchesComparison(ah(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends Qj{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ir(e,t)}matches(e){return cm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cm(n){return"and"===n.op}function uP(n){return function Zj(n){for(const e of n.filters)if(e instanceof Ir)return!1;return!0}(n)&&cm(n)}function dP(n){if(n instanceof Xn)return n.field.canonicalString()+n.op.toString()+lm(n.value);if(uP(n))return n.filters.map(e=>dP(e)).join(",");{const e=n.filters.map(t=>dP(t)).join(",");return`${n.op}(${e})`}}function Jj(n,e){return n instanceof Xn?(r=n,(i=e)instanceof Xn&&r.op===i.op&&r.field.isEqual(i.field)&&Gc(r.value,i.value)):n instanceof Ir?function(r,i){return i instanceof Ir&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Jj(o,i.filters[a]),!0)}(n,e):void ft();var r,i}function t9(n){return n instanceof Xn?`${(t=n).field.canonicalString()} ${t.op} ${lm(t.value)}`:n instanceof Ir?function(t){return t.op.toString()+" {"+t.getFilters().map(t9).join(" ,")+"}"}(n):"Filter";var t}class O_e extends Xn{constructor(e,t,r){super(e,t,r),this.key=ut.fromName(r.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.matchesComparison(t)}}class L_e extends Xn{constructor(e,t){super(e,"in",t),this.keys=n9(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F_e extends Xn{constructor(e,t){super(e,"not-in",t),this.keys=n9(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function n9(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ut.fromName(r.referenceValue))}class V_e extends Xn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pv(t)&&Dv(t.arrayValue,this.value)}}class r9 extends Xn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dv(this.value.arrayValue,t)}}class B_e extends Xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dv(this.value.arrayValue,t)}}class U_e extends Xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dv(this.value.arrayValue,r))}}class j_e{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function hP(n,e=null,t=[],r=[],i=null,s=null,o=null){return new j_e(n,e,t,r,i,s,o)}function Bf(n){const e=ot(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dP(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Tv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lm(r)).join(",")),e.ue=t}return e.ue}function Rv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!N_e(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Jj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Xj(n.startAt,e.startAt)&&Xj(n.endAt,e.endAt)}function D2(n){return ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class rd{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function um(n){return new rd(n)}function a9(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fP(n){return null!==n.collectionGroup}function dm(n){const e=ot(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mr(hi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new kv(s,r))}),t.has(hi.keyField().canonicalString())||e.ce.push(new kv(hi.keyField(),r))}return e.ce}function Io(n){const e=ot(n);return e.le||(e.le=function c9(n,e){if("F"===n.limitType)return hP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new kv(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new lh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new lh(n.startAt.position,n.startAt.inclusive):null;return hP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,dm(n))),e.le}function pP(n,e){const t=n.filters.concat([e]);return new rd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function M2(n,e,t){return new rd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nv(n,e){return Rv(Io(n),Io(e))&&n.limitType===e.limitType}function u9(n){return`${Bf(Io(n))}|lt:${n.limitType}`}function hm(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>t9(i)).join(", ")}]`),Tv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>lm(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>lm(i)).join(",")),`Target(${r})`}(Io(n))}; limitType=${n.limitType})`}function Ov(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of dm(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=Yj(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,dm(r),i)||r.endAt&&!function(o,a,l){const c=Yj(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,dm(r),i)));var r,i}function h9(n){return(e,t)=>{let r=!1;for(const i of dm(n)){const s=z_e(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function z_e(n,e,t){const r=n.field.isKeyField()?ut.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?ah(l,c):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}class id{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ih(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Fj(this.inner)}size(){return this.innerSize}}const $_e=new Wr(ut.comparator);function Ea(){return $_e}const f9=new Wr(ut.comparator);function Lv(...n){let e=f9;for(const t of n)e=e.insert(t.key,t);return e}function p9(n){let e=f9;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qc(){return Fv()}function g9(){return Fv()}function Fv(){return new id(n=>n.toString(),(n,e)=>n.isEqual(e))}const H_e=new Wr(ut.comparator),G_e=new Mr(ut.comparator);function Pn(...n){let e=G_e;for(const t of n)e=e.add(t);return e}const q_e=new Mr(un);function mP(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sv(e)?"-0":e}}function m9(n){return{integerValue:""+n}}function _9(n,e){return function xj(n){return"number"==typeof n&&Number.isInteger(n)&&!Sv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?m9(e):mP(n,e)}class k2{constructor(){this._=void 0}}function W_e(n,e,t){return n instanceof fm?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&C2(s)&&(s=E2(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Uf?y9(n,e):n instanceof jf?b9(n,e):function(i,s){const o=v9(i,s),a=w9(o)+w9(i.Pe);return lP(o)&&lP(i.Pe)?m9(a):mP(i.serializer,a)}(n,e)}function K_e(n,e,t){return n instanceof Uf?y9(n,e):n instanceof jf?b9(n,e):t}function v9(n,e){return n instanceof pm?lP(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class fm extends k2{}class Uf extends k2{constructor(e){super(),this.elements=e}}function y9(n,e){const t=A9(e);for(const r of n.elements)t.some(i=>Gc(i,r))||t.push(r);return{arrayValue:{values:t}}}class jf extends k2{constructor(e){super(),this.elements=e}}function b9(n,e){let t=A9(e);for(const r of n.elements)t=t.filter(i=>!Gc(i,r));return{arrayValue:{values:t}}}class pm extends k2{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function w9(n){return fi(n.integerValue||n.doubleValue)}function A9(n){return Pv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class X_e{constructor(e,t){this.version=e,this.transformResults=t}}class pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pi}static exists(e){return new pi(void 0,e)}static updateTime(e){return new pi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function R2(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class N2{}function C9(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new mm(n.key,pi.none()):new gm(n.key,n.data,pi.none());{const t=n.data,r=Zs.empty();let i=new Mr(hi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new sd(n.key,r,new Ca(i.toArray()),pi.none())}}function Q_e(n,e,t){n instanceof gm?function(i,s,o){const a=i.value.clone(),l=T9(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof sd?function(i,s,o){if(!R2(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=T9(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(I9(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bv(n,e,t,r){return n instanceof gm?function(s,o,a,l){if(!R2(s.precondition,o))return a;const c=s.value.clone(),u=S9(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof sd?function(s,o,a,l){if(!R2(s.precondition,o))return a;const c=S9(s.fieldTransforms,l,o),u=o.data;return u.setAll(I9(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):(a=t,R2(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Z_e(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=v9(r.transform,i||null);null!=s&&(null===t&&(t=Zs.empty()),t.set(r.field,s))}return t||null}function E9(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&im(r,i,(s,o)=>function Y_e(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Uf&&i instanceof Uf||r instanceof jf&&i instanceof jf?im(r.elements,i.elements,Gc):r instanceof pm&&i instanceof pm?Gc(r.Pe,i.Pe):r instanceof fm&&i instanceof fm);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class gm extends N2{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sd extends N2{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function I9(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function T9(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,K_e(o,a,t[i]))}return r}function S9(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,W_e(s,o,e))}return r}class mm extends N2{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _P extends N2{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Q_e(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bv(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=g9();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=C9(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pn())}isEqual(e){return this.batchId===e.batchId&&im(this.mutations,e.mutations,(t,r)=>E9(t,r))&&im(this.baseMutations,e.baseMutations,(t,r)=>E9(t,r))}}class yP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=H_e;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yP(e,t,r,i)}}class bP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class J_e{constructor(e,t){this.count=e,this.unchangedNames=t}}var os,ir;function P9(n){if(void 0===n)return qi("GRPC error has no .code"),xe.UNKNOWN;switch(n){case os.OK:return xe.OK;case os.CANCELLED:return xe.CANCELLED;case os.UNKNOWN:return xe.UNKNOWN;case os.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case os.INTERNAL:return xe.INTERNAL;case os.UNAVAILABLE:return xe.UNAVAILABLE;case os.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case os.NOT_FOUND:return xe.NOT_FOUND;case os.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case os.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case os.ABORTED:return xe.ABORTED;case os.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case os.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case os.DATA_LOSS:return xe.DATA_LOSS;default:return ft()}}(ir=os||(os={}))[ir.OK=0]="OK",ir[ir.CANCELLED=1]="CANCELLED",ir[ir.UNKNOWN=2]="UNKNOWN",ir[ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ir[ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ir[ir.NOT_FOUND=5]="NOT_FOUND",ir[ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",ir[ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",ir[ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",ir[ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ir[ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ir[ir.ABORTED=10]="ABORTED",ir[ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",ir[ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",ir[ir.INTERNAL=13]="INTERNAL",ir[ir.UNAVAILABLE=14]="UNAVAILABLE",ir[ir.DATA_LOSS=15]="DATA_LOSS";const e0e=new Rf([4294967295,4294967295],0);function k9(n){const e=function M9(){return new TextEncoder}().encode(n),t=new dj;return t.update(e),new Uint8Array(t.digest())}function R9(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rf([t,r],0),new Rf([i,s],0)]}class wP{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Uv(`Invalid padding: ${t}`);if(r<0)throw new Uv(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Uv(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Uv(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Rf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Rf.fromNumber(r)));return 1===i.compare(e0e)&&(i=new Rf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=k9(e),[r,i]=R9(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new wP(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=k9(e),[r,i]=R9(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Uv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jv{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zv.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jv(kt.min(),i,new Wr(un),Ea(),Pn())}}class zv{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zv(r,t,Pn(),Pn(),Pn())}}class L2{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class N9{constructor(e,t){this.targetId=e,this.me=t}}class O9{constructor(e,t,r=Ri.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class L9{constructor(){this.fe=0,this.ge=V9(),this.pe=Ri.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pn(),t=Pn(),r=Pn();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new zv(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=V9()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class t0e{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ea(),this.qe=F9(),this.Qe=new Wr(un)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(D2(s))if(0===r){const o=new ut(s.path);this.Ue(t,o,ri.newNoDocument(o,kt.min()))}else wt(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=nd(r).toUint8Array()}catch(l){if(l instanceof Bj)return Ml("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new wP(o,i,s)}catch(l){return Ml(l instanceof Uv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&D2(a.target)){const l=new ut(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,ri.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Pn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new jv(e,t,this.Qe,this.ke,r);return this.ke=Ea(),this.qe=F9(),this.Qe=new Wr(un),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new L9,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Mr(un),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new L9),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function F9(){return new Wr(ut.comparator)}function V9(){return new Wr(ut.comparator)}const n0e={asc:"ASCENDING",desc:"DESCENDING"},r0e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i0e={and:"AND",or:"OR"};class s0e{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function AP(n,e){return n.useProto3Json||Tv(e)?e:{value:e}}function _m(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B9(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function o0e(n,e){return _m(n,e.toTimestamp())}function Wi(n){return wt(!!n),kt.fromTimestamp(function(t){const r=td(t);return new di(r.seconds,r.nanos)}(n))}function CP(n,e){return EP(n,e).canonicalString()}function EP(n,e){const t=(i=n,new Yn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function U9(n){const e=Yn.fromString(n);return wt(Q9(e)),e}function $v(n,e){return CP(n.databaseId,e.path)}function Wc(n,e){const t=U9(e);if(t.get(1)!==n.databaseId.projectId)throw new He(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ut($9(t))}function j9(n,e){return CP(n.databaseId,e)}function IP(n){return new Yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $9(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function H9(n,e,t){return{name:$v(n,e),fields:t.value.mapValue.fields}}function q9(n,e){return{documents:[j9(n,e.path)]}}function F2(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=j9(n,i);const s=function(c){if(0!==c.length)return X9(Ir.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:ch((h=u).field),direction:d0e(h.dir)};var h})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=AP(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function K9(n){let e=function z9(n){const e=U9(n);return 4===e.length?Yn.emptyPath():$9(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){const h=Y9(d);return h instanceof Ir&&uP(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(h=>{return new kv(vm((m=h).field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction));var m}));let a=null;t.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,Tv(h)?null:h}(t.limit));let l=null;var d;t.startAt&&(l=new lh((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new lh(d.values||[],!d.before)}(t.endAt)),function o9(n,e,t,r,i,s,o,a){return new rd(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",l,c)}function Y9(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vm(t.unaryFilter.field);return Xn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vm(t.unaryFilter.field);return Xn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vm(t.unaryFilter.field);return Xn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vm(t.unaryFilter.field);return Xn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(n):void 0!==n.fieldFilter?Xn.create(vm((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Ir.create(t.compositeFilter.filters.map(r=>Y9(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ft()}}(t.compositeFilter.op))}(n):ft();var t}function d0e(n){return n0e[n]}function h0e(n){return r0e[n]}function f0e(n){return i0e[n]}function ch(n){return{fieldPath:n.canonicalString()}}function vm(n){return hi.fromServerFormat(n.fieldPath)}function X9(n){return n instanceof Xn?function(t){if("=="===t.op){if($j(t.value))return{unaryFilter:{field:ch(t.field),op:"IS_NAN"}};if(zj(t.value))return{unaryFilter:{field:ch(t.field),op:"IS_NULL"}}}else if("!="===t.op){if($j(t.value))return{unaryFilter:{field:ch(t.field),op:"IS_NOT_NAN"}};if(zj(t.value))return{unaryFilter:{field:ch(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ch(t.field),op:h0e(t.op),value:t.value}}}(n):n instanceof Ir?function(t){const r=t.getFilters().map(i=>X9(i));return 1===r.length?r[0]:{compositeFilter:{op:f0e(t.op),filters:r}}}(n):ft()}function p0e(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Q9(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class od{constructor(e,t,r,i,s=kt.min(),o=kt.min(),a=Ri.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new od(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new od(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Z9{constructor(e){this.ct=e}}function SP(n){const e=K9({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?M2(e,e.limit,"L"):e}class Gf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(fi(e.integerValue));else if("doubleValue"in e){const r=fi(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Sv(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=td(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(nd(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Hj(e)?this.dt(t,Number.MAX_SAFE_INTEGER):x2(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ft()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(fi(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ut.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Gf.vt=new Gf;class C0e{constructor(){this.un=new RP}addToCollectionParentIndex(e,t){return this.un.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(Xa.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(Xa.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class RP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mr(Yn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mr(Yn.comparator)).toArray()}}new Uint8Array(0);class To{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new To(e,To.DEFAULT_COLLECTION_PERCENTILE,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}To.DEFAULT_COLLECTION_PERCENTILE=10,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,To.DEFAULT=new To(41943040,To.DEFAULT_COLLECTION_PERCENTILE,To.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),To.DISABLED=new To(-1,0,0);class Wf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wf(0)}static kn(){return new Wf(-1)}}class wz{constructor(){this.changes=new id(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class M0e{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tz{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Bv(r.mutation,i,Ca.empty(),di.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pn()){const i=qc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Lv();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=qc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ea();const o=Fv(),a=Fv();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof sd)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),Bv(u.mutation,c,u.mutation.getFieldMask(),di.now())):o.set(c.key,Ca.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new M0e(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Fv();let i=new Wr((o,a)=>o-a),s=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||Ca.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Pn()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=g9();u.forEach(h=>{if(!s.has(h)){const f=C9(t.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ye.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return ut.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ye.resolve(qc());let a=-1,l=s;return o.next(c=>ye.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?ye.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Pn())).next(u=>({batchId:a,changes:p9(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(r=>{let i=Lv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Lv();return this.indexManager.getCollectionParents(e,s).next(a=>ye.forEach(a,l=>{const c=(d=t,h=l.child(s),new rd(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,ri.newInvalidDocument(u)))});let a=Lv();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&Bv(u.mutation,c,Ca.empty(),di.now()),Ov(t,c)&&(a=a.insert(l,c))}),a})}}class k0e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ye.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Wi(i.createTime)}),ye.resolve();var i}getNamedQuery(e,t){return ye.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:SP(i.bundledQuery),readTime:Wi(i.readTime)}),ye.resolve();var i}}class R0e{constructor(){this.overlays=new Wr(ut.comparator),this.Ir=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qc();return ye.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=qc(),s=t.length+1,o=new ut(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Wr((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=qc(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=qc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return ye.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bP(t,r));let s=this.Ir.get(t);void 0===s&&(s=Pn(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class N0e{constructor(){this.sessionToken=Ri.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}class NP{constructor(){this.Tr=new Mr(Ls.Er),this.dr=new Mr(Ls.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Ls(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ls(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ut(new Yn([])),r=new Ls(t,e),i=new Ls(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ut(new Yn([])),r=new Ls(t,e),i=new Ls(t,e+1);let s=Pn();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ls(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ls{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ut.comparator(e.key,t.key)||un(e.wr,t.wr)}static Ar(e,t){return un(e.wr,t.wr)||ut.comparator(e.key,t.key)}}class O0e{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Mr(Ls.Er)}checkEmpty(e){return ye.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new vP(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ls(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ye.resolve(o)}lookupMutationBatch(e,t){return ye.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return ye.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ls(t,0),i=new Ls(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),ye.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mr(un);return t.forEach(i=>{const s=new Ls(i,0),o=new Ls(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),ye.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const o=new Ls(new ut(s),0);let a=new Mr(un);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),ye.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return ye.forEach(t.mutations,i=>{const s=new Ls(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Ls(t,0),i=this.br.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ye.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class L0e{constructor(e){this.Mr=e,this.docs=new Wr(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let r=Ea();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ri.newInvalidDocument(i))}),ye.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ea();const o=t.path,a=new ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||nP(Cj(u),r)<=0||(i.has(u.key)||Ov(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ye.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ft()}Or(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new F0e(this)}getSize(e){return ye.resolve(this.size)}}class F0e extends wz{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class V0e{constructor(e){this.persistence=e,this.Nr=new id(t=>Bf(t),Rv),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new NP,this.targetCount=0,this.kr=Wf.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),ye.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Wf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Kn(t),ye.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ye.waitFor(s).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ye.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.Br.containsKey(t))}}class OP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Qa(0),this.Kr=!1,this.Kr=!0,this.$r=new N0e,this.referenceDelegate=e(this),this.Ur=new V0e(this),this.indexManager=new C0e,this.remoteDocumentCache=new L0e(r=>this.referenceDelegate.Wr(r)),this.serializer=new Z9(t),this.Gr=new k0e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R0e,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new O0e(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new B0e(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return ye.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class B0e extends Ij{constructor(e){super(),this.currentSequenceNumber=e}}class G2{constructor(e){this.persistence=e,this.Jr=new NP,this.Yr=null}static Zr(e){return new G2(e)}get Xr(){if(this.Yr)return this.Yr;throw ft()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Xr,r=>{const i=ut.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,kt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ye.or([()=>ye.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class BP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Pn(),i=Pn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new BP(e,t.fromCache,r,i)}}class j0e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function MU(){return!function Ahe(){var n;const e=null===(n=Xw())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function Tj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(Xs())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new j0e;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(rm()<=Kn.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",hm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ye.resolve()):(rm()<=Kn.DEBUG&&$e("QueryEngine","Query:",hm(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rm()<=Kn.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",hm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Io(t))):ye.resolve())}Yi(e,t){if(a9(t))return ye.resolve(null);let r=Io(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=M2(t,null,"F"),r=Io(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pn(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,M2(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return a9(t)||i.isEqual(kt.min())?ye.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?ye.resolve(null):(rm()<=Kn.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hm(t)),this.rs(e,o,t,function Aj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=kt.fromTimestamp(1e9===r?new di(t+1,0):new di(t,r));return new Xa(i,ut.empty(),e)}(i,-1)).next(a=>a))})}ts(e,t){let r=new Mr(h9(e));return t.forEach((i,s)=>{Ov(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return rm()<=Kn.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",hm(t)),this.Ji.getDocumentsMatchingQuery(e,t,Xa.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class z0e{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Wr(un),this._s=new id(s=>Bf(s),Rv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Pz(n,e){return UP.apply(this,arguments)}function UP(){return UP=(0,Q.A)(function*(n,e){const t=ot(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Pn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}),UP.apply(this,arguments)}function Mz(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function G0e(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Em(n,e,t){return jP.apply(this,arguments)}function jP(){return jP=(0,Q.A)(function*(n,e,t){const r=ot(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!rh(o))throw o;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}),jP.apply(this,arguments)}function K2(n,e,t){const r=ot(n);let i=kt.min(),s=Pn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=ot(l),h=d._s.get(u);return void 0!==h?ye.resolve(d.os.get(h)):d.Ur.getTargetData(c,u)}(r,o,Io(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:kt.min(),t?s:Pn())).next(a=>(function Oz(n,e,t){let r=n.us.get(e)||kt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}(r,function d9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,Ts:s})))}class qP{constructor(){this.activeTargetIds=function gP(){return q_e}()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vz{constructor(){this.so=new qP,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class K0e{_o(e){}shutdown(){}}class Bz{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Q2=null;function KP(){return null===Q2?Q2=268435456+Math.round(2147483648*Math.random()):Q2++,"0x"+Q2.toString(16)}const Y0e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X0e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const So="WebChannelConnection";class Q0e extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=KP(),l=this.xo(t,r.toUriEncodedString());$e("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(u=>($e("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Ml("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+nm,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${Y0e[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=KP();return new Promise((o,a)=>{const l=new hj;l.setWithCredentials(!0),l.listenOnce(fj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case y2.NO_ERROR:const u=l.getResponseJson();$e(So,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case y2.TIMEOUT:$e(So,`RPC '${e}' ${s} timed out`),a(new He(xe.DEADLINE_EXCEEDED,"Request time out"));break;case y2.HTTP_ERROR:const d=l.getStatus();if($e(So,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const m=function(y){const b=y.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(b)>=0?b:xe.UNKNOWN}(f.status);a(new He(m,f.message))}else a(new He(xe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new He(xe.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{$e(So,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);$e(So,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=KP(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mj(),a=gj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");$e(So,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const m=new X0e({Io:y=>{f?$e(So,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||($e(So,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),$e(So,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},To:()=>d.close()}),v=(y,b,A)=>{y.listen(b,T=>{try{A(T)}catch(P){setTimeout(()=>{throw P},0)}})};return v(d,Cv.EventType.OPEN,()=>{f||($e(So,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),v(d,Cv.EventType.CLOSE,()=>{f||(f=!0,$e(So,`RPC '${e}' stream ${i} transport closed`),m.So())}),v(d,Cv.EventType.ERROR,y=>{f||(f=!0,Ml(So,`RPC '${e}' stream ${i} transport errored:`,y),m.So(new He(xe.UNAVAILABLE,"The operation could not be completed")))}),v(d,Cv.EventType.MESSAGE,y=>{var b;if(!f){const A=y.data[0];wt(!!A);const P=A.error||(null===(b=A[0])||void 0===b?void 0:b.error);if(P){$e(So,`RPC '${e}' stream ${i} received error:`,P);const V=P.status;let q=function(S){const F=os[S];if(void 0!==F)return P9(F)}(V),N=P.message;void 0===q&&(q=xe.INTERNAL,N="Unknown error status: "+V+" with message "+P.message),f=!0,m.So(new He(q,N)),d.close()}else $e(So,`RPC '${e}' stream ${i} received:`,A),m.bo(A)}}),v(a,pj.STAT_EVENT,y=>{y.stat===JD.PROXY?$e(So,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===JD.NOPROXY&&$e(So,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function Z2(){return typeof document<"u"?document:null}function Zv(n){return new s0e(n,!0)}class YP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class jz{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new YP(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,Q.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,Q.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,Q.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===xe.RESOURCE_EXHAUSTED?(qi(t.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===xe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new He(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,Q.A)(function*(){e.state=0,e.start()}))}I_(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z0e extends jz{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function l0e(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:ft(),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(wt(void 0===u||"string"==typeof u),Ri.fromBase64String(u||"")):(wt(void 0===u||u instanceof Buffer||u instanceof Uint8Array),Ri.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?xe.UNKNOWN:P9(c.code);return new He(u,c.message||"")}(o);t=new O9(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Wc(n,r.document.name),s=Wi(r.document.updateTime),o=r.document.createTime?Wi(r.document.createTime):kt.min(),a=new Zs({mapValue:{fields:r.document.fields}}),l=ri.newFoundDocument(i,s,o,a);t=new L2(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Wc(n,r.document),s=r.readTime?Wi(r.readTime):kt.min(),o=ri.newNoDocument(i,s);t=new L2([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Wc(n,r.document);t=new L2([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new J_e(i,s);t=new N9(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return kt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?kt.min():o.readTime?Wi(o.readTime):kt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=IP(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=D2(l)?{documents:q9(s,l)}:{query:F2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=B9(s,o.resumeToken);const c=AP(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(kt.min())>0){a.readTime=_m(s,o.snapshotVersion.toTimestamp());const c=AP(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function u0e(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=IP(this.serializer),t.removeTarget=e,this.a_(t)}}class J0e extends jz{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return wt(!!e.streamToken),this.lastStreamToken=e.streamToken,wt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function c0e(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(i,s){let o=Wi(i.updateTime?i.updateTime:s);return o.isEqual(kt.min())&&(o=Wi(s)),new X_e(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wi(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=IP(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function Hv(n,e){let t;if(e instanceof gm)t={update:H9(n,e.key,e.value)};else if(e instanceof mm)t={delete:$v(n,e.key)};else if(e instanceof sd)t={update:H9(n,e.key,e.data),updateMask:p0e(e.fieldMask)};else{if(!(e instanceof _P))return ft();t={verify:$v(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof fm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pm)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:o0e(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ft()),t;var s}(this.serializer,r))};this.a_(t)}}class eve extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new He(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,EP(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(xe.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,EP(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(xe.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tve{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qi(t),this.D_=!1):$e("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class nve{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,Q.A)(function*(){var l;fh(o)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,Q.A)(function*(u){const d=ot(u);d.L_.add(4),yield Im(d),d.q_.set("Unknown"),d.L_.delete(4),yield Jv(d)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.q_=new tve(r,i)}}function Jv(n){return XP.apply(this,arguments)}function XP(){return XP=(0,Q.A)(function*(n){if(fh(n))for(const e of n.B_)yield e(!0)}),XP.apply(this,arguments)}function Im(n){return QP.apply(this,arguments)}function QP(){return QP=(0,Q.A)(function*(n){for(const e of n.B_)yield e(!1)}),QP.apply(this,arguments)}function J2(n,e){const t=ot(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),eM(t)?JP(t):xm(t).r_()&&ZP(t,e))}function Tm(n,e){const t=ot(n),r=xm(t);t.N_.delete(e),r.r_()&&zz(t,e),0===t.N_.size&&(r.r_()?r.o_():fh(t)&&t.q_.set("Unknown"))}function ZP(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xm(n).A_(e)}function zz(n,e){n.Q_.xe(e),xm(n).R_(e)}function JP(n){n.Q_=new t0e({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),xm(n).start(),n.q_.v_()}function eM(n){return fh(n)&&!xm(n).n_()&&n.N_.size>0}function fh(n){return 0===ot(n).L_.size}function $z(n){n.Q_=void 0}function rve(n){return tM.apply(this,arguments)}function tM(){return tM=(0,Q.A)(function*(n){n.q_.set("Online")}),tM.apply(this,arguments)}function ive(n){return nM.apply(this,arguments)}function nM(){return nM=(0,Q.A)(function*(n){n.N_.forEach((e,t)=>{ZP(n,e)})}),nM.apply(this,arguments)}function sve(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,Q.A)(function*(n,e){$z(n),eM(n)?(n.q_.M_(e),JP(n)):n.q_.set("Unknown")}),rM.apply(this,arguments)}function ove(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,Q.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof O9&&2===e.state&&e.cause)try{yield(r=(0,Q.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield eA(n,r)}else if(e instanceof L2?n.Q_.Ke(e):e instanceof N9?n.Q_.He(e):n.Q_.We(e),!t.isEqual(kt.min()))try{const r=yield Mz(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(Ri.EMPTY_BYTE_STRING,u.snapshotVersion)),zz(s,l);const d=new od(u.target,l,c,u.sequenceNumber);ZP(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield eA(n,r)}var r}),iM.apply(this,arguments)}function eA(n,e,t){return sM.apply(this,arguments)}function sM(){return sM=(0,Q.A)(function*(n,e,t){if(!rh(e))throw e;n.L_.add(1),yield Im(n),n.q_.set("Offline"),t||(t=()=>Mz(n.localStore)),n.asyncQueue.enqueueRetryable((0,Q.A)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Jv(n)}))}),sM.apply(this,arguments)}function Hz(n,e){return e().catch(t=>eA(n,t,e))}function Sm(n){return oM.apply(this,arguments)}function oM(){return oM=(0,Q.A)(function*(n){const e=ot(n),t=ph(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ave(e);)try{const i=yield G0e(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,lve(e,i)}catch(i){yield eA(e,i)}Gz(e)&&qz(e)}),oM.apply(this,arguments)}function ave(n){return fh(n)&&n.O_.length<10}function lve(n,e){n.O_.push(e);const t=ph(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Gz(n){return fh(n)&&!ph(n).n_()&&n.O_.length>0}function qz(n){ph(n).start()}function cve(n){return aM.apply(this,arguments)}function aM(){return aM=(0,Q.A)(function*(n){ph(n).p_()}),aM.apply(this,arguments)}function uve(n){return lM.apply(this,arguments)}function lM(){return lM=(0,Q.A)(function*(n){const e=ph(n);for(const t of n.O_)e.m_(t.mutations)}),lM.apply(this,arguments)}function dve(n,e,t){return cM.apply(this,arguments)}function cM(){return cM=(0,Q.A)(function*(n,e,t){const r=n.O_.shift(),i=yP.from(r,e,t);yield Hz(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Sm(n)}),cM.apply(this,arguments)}function hve(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,Q.A)(function*(n,e){var t;e&&ph(n).V_&&(yield(t=(0,Q.A)(function*(i,s){if(function D9(n){switch(n){default:return ft();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}(a=s.code)&&a!==xe.ABORTED){const o=i.O_.shift();ph(i).s_(),yield Hz(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Sm(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),Gz(n)&&qz(n)}),uM.apply(this,arguments)}function Wz(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,Q.A)(function*(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=fh(t);t.L_.add(3),yield Im(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Jv(t)}),dM.apply(this,arguments)}function fM(){return fM=(0,Q.A)(function*(n,e){const t=ot(n);e?(t.L_.delete(2),yield Jv(t)):e||(t.L_.add(2),yield Im(t),t.q_.set("Unknown"))}),fM.apply(this,arguments)}function xm(n){return n.K_||(n.K_=function(t,r,i){const s=ot(t);return s.w_(),new Z0e(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:rve.bind(null,n),Ro:ive.bind(null,n),mo:sve.bind(null,n),d_:ove.bind(null,n)}),n.B_.push(function(){var e=(0,Q.A)(function*(t){t?(n.K_.s_(),eM(n)?JP(n):n.q_.set("Unknown")):(yield n.K_.stop(),$z(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function ph(n){return n.U_||(n.U_=function(t,r,i){const s=ot(t);return s.w_(),new J0e(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cve.bind(null,n),mo:hve.bind(null,n),f_:uve.bind(null,n),g_:dve.bind(null,n)}),n.B_.push(function(){var e=(0,Q.A)(function*(t){t?(n.U_.s_(),yield Sm(n)):(yield n.U_.stop(),n.O_.length>0&&($e("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class pM{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new pM(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(n,e){if(qi("AsyncQueue",`${e}: ${n}`),rh(n))return new He(xe.UNAVAILABLE,`${e}: ${n}`);throw n}class Pm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ut.comparator(t.key,r.key):(t,r)=>ut.comparator(t.key,r.key),this.keyedMap=Lv(),this.sortedSet=new Wr(this.comparator)}static emptySet(e){return new Pm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Kz{constructor(){this.W_=new Wr(ut.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ft():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Mm{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Mm(e,t,Pm.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class fve{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class pve{constructor(){this.queries=Yz(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=ot(t),s=i.queries;i.queries=Yz(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})}(this,new He(xe.ABORTED,"Firestore shutting down"))}}function Yz(){return new id(n=>u9(n),Nv)}function gM(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,Q.A)(function*(n,e){const t=ot(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new fve,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Dm(o,`Initialization of query '${hm(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&yM(t)}),mM.apply(this,arguments)}function _M(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,Q.A)(function*(n,e){const t=ot(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}),vM.apply(this,arguments)}function gve(n,e){const t=ot(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&yM(t)}function mve(n,e,t){const r=ot(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function yM(n){n.Y_.forEach(e=>{e.next()})}var bM,Xz;(Xz=bM||(bM={})).ea="default",Xz.Cache="cache";class wM{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Mm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Mm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bM.Cache}}class Jz{constructor(e){this.key=e}}class e${constructor(e){this.key=e}}class t${constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pn(),this.mutatedKeys=Pn(),this.Aa=h9(e),this.Ra=new Pm(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Kz,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=Ov(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),y=!0):this.ga(h,f)||(r.track({type:2,doc:f}),y=!0,(l&&this.Aa(f,l)>0||c&&this.Aa(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(l||c)&&(a=!0)),y&&(f?(o=o.add(f),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(f,m){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return v(f)-v(m)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],l=0===this.da.size&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new Mm(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Kz,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pn(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new e$(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Jz(r))}),t}ba(e){this.Ta=e.Ts,this.da=Pn();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Mm.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class yve{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bve{constructor(e){this.key=e,this.va=!1}}class wve{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new id(a=>u9(a),Nv),this.Ma=new Map,this.xa=new Set,this.Oa=new Wr(ut.comparator),this.Na=new Map,this.La=new NP,this.Ba={},this.ka=new Map,this.qa=Wf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Ave(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,Q.A)(function*(n,e,t=!0){const r=tA(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield n$(r,e,t,!0),i}),AM.apply(this,arguments)}function Cve(n,e){return CM.apply(this,arguments)}function CM(){return CM=(0,Q.A)(function*(n,e){const t=tA(n);yield n$(t,e,!0,!1)}),CM.apply(this,arguments)}function n$(n,e,t,r){return EM.apply(this,arguments)}function EM(){return EM=(0,Q.A)(function*(n,e,t,r){const i=yield function Cm(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,ye.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new od(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}(n.localStore,Io(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield function IM(n,e,t,r,i){return TM.apply(this,arguments)}(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&J2(n.remoteStore,i),a}),EM.apply(this,arguments)}function TM(){return TM=(0,Q.A)(function*(n,e,t,r,i){n.Ka=(d,h,f)=>{return(m=(0,Q.A)(function*(y,b,A,T){let P=b.view.ma(A);P.ns&&(P=yield K2(y.localStore,b.query,!1).then(({documents:D})=>b.view.ma(D,P)));const V=T&&T.targetChanges.get(b.targetId),q=T&&null!=T.targetMismatches.get(b.targetId),N=b.view.applyChanges(P,y.isPrimaryClient,V,q);return FM(y,b.targetId,N.wa),N.snapshot}),function v(y,b,A,T){return m.apply(this,arguments)})(n,d,h,f);var m};const s=yield K2(n.localStore,e,!0),o=new t$(e,s.Ts),a=o.ma(s.documents),l=zv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);FM(n,t,c.wa);const u=new yve(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),TM.apply(this,arguments)}function Eve(n,e,t){return SM.apply(this,arguments)}function SM(){return SM=(0,Q.A)(function*(n,e,t){const r=ot(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Nv(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Em(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Tm(r.remoteStore,i.targetId),km(r,i.targetId)}).catch(nh))):(km(r,i.targetId),yield Em(r.localStore,i.targetId,!0))}),SM.apply(this,arguments)}function Ive(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,Q.A)(function*(n,e){const t=ot(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Tm(t.remoteStore,r.targetId))}),xM.apply(this,arguments)}function DM(){return DM=(0,Q.A)(function*(n,e,t){const r=function KM(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xve.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dve.bind(null,e),e}(n);try{const i=yield function(o,a){const l=ot(o),c=di.now(),u=a.reduce((f,m)=>f.add(m.key),Pn());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Ea(),v=Pn();return l.cs.getEntries(f,u).next(y=>{m=y,m.forEach((b,A)=>{A.isValidDocument()||(v=v.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,m)).next(y=>{d=y;const b=[];for(const A of a){const T=Z_e(A,d.get(A.key).overlayedDocument);null!=T&&b.push(new sd(A.key,T,Kj(T.value.mapValue),pi.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,b,a)}).next(y=>{h=y;const b=y.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(f,y.batchId,b)})}).then(()=>({batchId:h.batchId,changes:p9(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Wr(un)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),yield ad(r,i.changes),yield Sm(r.remoteStore)}catch(i){const s=Dm(i,"Failed to persist write");t.reject(s)}}),DM.apply(this,arguments)}function r$(n,e){return PM.apply(this,arguments)}function PM(){return PM=(0,Q.A)(function*(n,e){const t=ot(n);try{const r=yield function H0e(n,e){const t=ot(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var v,y,b;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Ri.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),y=f,b=u,(0===(v=h).resumeToken.approximateByteSize()||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,f))});let l=Ea(),c=Pn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(function kz(n,e,t){let r=Pn(),i=Pn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ea();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(kt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$e("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(kt.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return ye.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?wt(o.va):i.removedDocuments.size>0&&(wt(o.va),o.va=!1))}),yield ad(t,r,e)}catch(r){yield nh(r)}}),PM.apply(this,arguments)}function i$(n,e,t){const r=ot(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ot(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.j_)h.Z_(a)&&(c=!0)}),c&&yM(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Sve(n,e,t){return MM.apply(this,arguments)}function MM(){return MM=(0,Q.A)(function*(n,e,t){const r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Wr(ut.comparator);o=o.insert(s,ri.newNoDocument(s,kt.min()));const a=Pn().add(s),l=new jv(kt.min(),new Map,new Wr(un),o,a);yield r$(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),VM(r)}else yield Em(r.localStore,e,!1).then(()=>km(r,e,t)).catch(nh)}),MM.apply(this,arguments)}function xve(n,e){return kM.apply(this,arguments)}function kM(){return kM=(0,Q.A)(function*(n,e){const t=ot(n),r=e.batch.batchId;try{const i=yield function $0e(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,h=d.keys();let f=ye.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(l,m)).next(v=>{const y=c.docVersions.get(m);wt(null!==y),v.version.compareTo(y)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);LM(t,r,null),OM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ad(t,i)}catch(i){yield nh(i)}}),kM.apply(this,arguments)}function Dve(n,e,t){return RM.apply(this,arguments)}function RM(){return RM=(0,Q.A)(function*(n,e,t){const r=ot(n);try{const i=yield function(o,a){const l=ot(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(wt(null!==d),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);LM(r,e,t),OM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ad(r,i)}catch(i){yield nh(i)}}),RM.apply(this,arguments)}function OM(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function LM(n,e,t){const r=ot(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||s$(n,r)})}function s$(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Tm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),VM(n))}function FM(n,e,t){for(const r of t)r instanceof Jz?(n.La.addReference(r.key,e),Mve(n,r)):r instanceof e$?($e("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||s$(n,r.key)):ft()}function Mve(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||($e("SyncEngine","New document in limbo: "+t),n.xa.add(r),VM(n))}function VM(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ut(Yn.fromString(e)),r=n.qa.next();n.Na.set(r,new bve(t)),n.Oa=n.Oa.insert(t,r),J2(n.remoteStore,new od(Io(um(t.path)),r,"TargetPurposeLimboResolution",Qa.oe))}}function ad(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,Q.A)(function*(n,e,t){const r=ot(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:null===(u=t?.targetChanges.get(l.targetId))||void 0===u?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=BP.Wi(l.targetId,c);s.push(d)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,Q.A)(function*(c,u){const d=ot(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ye.forEach(u,f=>ye.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>ye.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!rh(h))throw h;$e("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),y=m.withLastLimboFreeSnapshotVersion(m.snapshotVersion);d.os=d.os.insert(f,y)}}}),function l(c,u){return a.apply(this,arguments)})(r.localStore,s))}),BM.apply(this,arguments)}function kve(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,Q.A)(function*(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield Pz(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new He(xe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ad(t,r.hs)}var s}),UM.apply(this,arguments)}function Rve(n,e){const t=ot(n),r=t.Na.get(e);if(r&&r.va)return Pn().add(r.key);{let i=Pn();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function tA(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=r$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sve.bind(null,e),e.Ca.d_=gve.bind(null,e.eventManager),e.Ca.$a=mve.bind(null,e.eventManager),e}let Rm=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,Q.A)(function*(){r.serializer=Zv(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return function Dz(n,e,t,r){return new z0e(n,e,t,r)}(this.persistence,new xz,t.initialUser,this.serializer)}Ga(t){return new OP(G2.Zr,this.serializer)}Wa(t){return new Vz}terminate(){var t=this;return(0,Q.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})(),Nm=(()=>{class n{initialize(t,r){var i=this;return(0,Q.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>i$(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=kve.bind(null,i.syncEngine),yield function hM(n,e){return fM.apply(this,arguments)}(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new pve}createDatastore(t){const r=Zv(t.databaseInfo.databaseId),i=new Q0e(t.databaseInfo);return new eve(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>i$(this.syncEngine,r,0),l=Bz.D()?new Bz:new K0e,new nve(i,s,o,a,l);var i,s,o,a,l}createSyncEngine(t,r){return function(s,o,a,l,c,u,d){const h=new wve(s,o,a,l,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,Q.A)(function*(){var r,i,s;yield(s=(0,Q.A)(function*(a){const l=ot(a);$e("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield Im(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();class nA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class qve{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ns.UNAUTHENTICATED,this.clientId=bj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,Q.A)(function*(l){$e("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>($e("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Q.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Dm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function XM(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,Q.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Q.A)(function*(s){r.isEqual(s)||(yield Pz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QM.apply(this,arguments)}function u$(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,Q.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function JM(n){return ek.apply(this,arguments)}(n);$e("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Wz(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Wz(e.remoteStore,i)),n._onlineComponents=e}),ZM.apply(this,arguments)}function ek(){return ek=(0,Q.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield XM(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===xe.FAILED_PRECONDITION||i.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Ml("Error using user provided cache. Falling back to memory cache: "+e),yield XM(n,new Rm)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield XM(n,new Rm);var i;return n._offlineComponents}),ek.apply(this,arguments)}function rA(n){return tk.apply(this,arguments)}function tk(){return tk=(0,Q.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield u$(n,n._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield u$(n,new Nm))),n._onlineComponents}),tk.apply(this,arguments)}function Lm(n){return rk.apply(this,arguments)}function rk(){return rk=(0,Q.A)(function*(n){const e=yield rA(n),t=e.eventManager;return t.onListen=Ave.bind(null,e.syncEngine),t.onUnlisten=Eve.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Cve.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ive.bind(null,e.syncEngine),t}),rk.apply(this,arguments)}function m$(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const _$=new Map;function ik(n,e,t){if(!t)throw new He(xe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function v$(n){if(!ut.isDocumentKey(n))throw new He(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function y$(n){if(ut.isDocumentKey(n))throw new He(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ft()}function Gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iA(n);throw new He(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class w${constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new He(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new He(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function iye(n,e,t,r){if(!0===e&&!0===r)throw new He(xe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=m$(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new He(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ey{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w$({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new He(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w$(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Qme;switch(r.type){case"firstParty":return new t_e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,Q.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=_$.get(t);r&&($e("ComponentProvider","Removing Datastore"),_$.delete(t),r.terminate())}(this),Promise.resolve()}}class Js{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class Ki{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ki(this.firestore,e,this._key)}}class Kc extends Js{constructor(e,t,r){super(e,t,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ki(this.firestore,null,new ut(e))}withConverter(e){return new Kc(this.firestore,e,this._path)}}function oye(n,e,...t){if(n=ki(n),ik("collection","path",e),n instanceof ey){const r=Yn.fromString(e,...t);return y$(r),new Kc(n,null,r)}{if(!(n instanceof Ki||n instanceof Kc))throw new He(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yn.fromString(e,...t));return y$(r),new Kc(n.firestore,null,r)}}function A$(n,e,...t){if(n=ki(n),1===arguments.length&&(e=bj.newId()),ik("doc","path",e),n instanceof ey){const r=Yn.fromString(e,...t);return v$(r),new Ki(n,null,new ut(r))}{if(!(n instanceof Ki||n instanceof Kc))throw new He(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yn.fromString(e,...t));return v$(r),new Ki(n.firestore,n instanceof Kc?n.converter:null,new ut(r))}}class E${constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new YP(this,"async_queue_retry"),this.Vu=()=>{const r=Z2();r&&$e("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Z2();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Z2();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Os;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,Q.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!rh(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,qi("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=pM.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ft()}verifyOperationInProgress(){}wu(){var e=this;return(0,Q.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function sk(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Fr extends ey{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new E$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,Q.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new E$(t),e._firestoreClient=void 0,yield t}})()}}function lye(n,e){const r="string"==typeof n?n:e||"(default)",i=Px("object"==typeof n?n:Mx(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=SU("firestore");s&&function sye(n,e,t,r={}){var i;const s=(n=Gn(n,ey))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Ns.MOCK_USER;else{a=PU(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new He(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ns(c)}n._authCredentials=new Zme(new vj(a,l))}}(i,...s)}return i}function wi(n){if(n._terminated)throw new He(xe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||function I$(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new M_e(n._databaseId,l,n._persistenceKey,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,m$(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new qve(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}(n),n._firestoreClient}class Yf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yf(Ri.fromBase64String(e))}catch(t){throw new He(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yf(Ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new He(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fm{constructor(e){this._methodName=e}}class ak{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}}class sA{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const uye=/^__.*__$/;class dye{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sd(e,this.data,this.fieldMask,t,this.fieldTransforms):new gm(e,this.data,t,this.fieldTransforms)}}class S${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class oA{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new oA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cA(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(x$(this.Cu)&&uye.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hye{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zv(e)}Qu(e,t,r,i=!1){return new oA({Cu:e,methodName:t,qu:r,path:hi.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qf(n){const e=n._freezeSettings(),t=Zv(n._databaseId);return new hye(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aA(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);pk("Data must be an object, but it was:",o,r);const a=M$(r,o);let l,c;if(s.merge)l=new Ca(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=ry(e,d,t);if(!o.contains(h))throw new He(xe.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);R$(u,h)||u.push(h)}l=new Ca(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new dye(new Zs(a),l,c)}class ny extends Fm{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ny}}function Zf(n,e){if(k$(n=ki(n)))return pk("Unsupported field value:",e,n),M$(n,e);if(n instanceof Fm)return function(r,i){if(!x$(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Zf(a,i.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=ki(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return _9(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=di.fromDate(r);return{timestampValue:_m(i.serializer,s)}}if(r instanceof di){const s=new di(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_m(i.serializer,s)}}if(r instanceof ak)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yf)return{bytesValue:B9(i.serializer,r._byteString)};if(r instanceof Ki){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:CP(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sA)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return mP(a.serializer,l)})}}}}};var a;throw i.Bu(`Unsupported field value: ${iA(r)}`)}(n,e)}function M$(n,e){const t={};return Fj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ih(n,(r,i)=>{const s=Zf(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function k$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof di||n instanceof ak||n instanceof Yf||n instanceof Ki||n instanceof Fm||n instanceof sA)}function pk(n,e,t){if(!k$(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=iA(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function ry(n,e,t){if((e=ki(e))instanceof Xf)return e._internalPath;if("string"==typeof e)return lA(n,e);throw cA("Field path arguments must be of type string or ",n,!1,void 0,t)}const fye=new RegExp("[~\\*/\\[\\]]");function lA(n,e,t){if(e.search(fye)>=0)throw cA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xf(...e.split("."))._internalPath}catch{throw cA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cA(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new He(xe.INVALID_ARGUMENT,a+n+l)}function R$(n,e){return n.some(t=>t.isEqual(e))}class iy{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ki(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pye extends iy{data(){return super.data()}}function uA(n,e){return"string"==typeof e?lA(n,e):e instanceof Xf?e._internalPath:e._delegate._internalPath}function N$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new He(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gk{}class sy extends gk{}function gye(n,e,...t){let r=[];e instanceof gk&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Vm).length,a=s.filter(l=>l instanceof oy).length;if(o>1||o>0&&a>0)throw new He(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class oy extends sy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new oy(e,t,r)}_apply(e){const t=this._parse(e);return V$(e._query,t),new Js(e.firestore,e.converter,pP(e._query,t))}_parse(e){const t=Qf(e.firestore);return function(s,o,a,l,c,u,d){let h;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new He(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){F$(d,u);const f=[];for(const m of d)f.push(L$(l,s,m));h={arrayValue:{values:f}}}else h=L$(l,s,d)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||F$(d,u),h=function P$(n,e,t,r=!1){return Zf(t,n.Qu(r?4:3,e))}(a,"where",d,"in"===u||"not-in"===u);return Xn.create(c,u,h)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Vm extends gk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ir.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)V$(o,l),o=pP(o,l)}(e._query,t),new Js(e.firestore,e.converter,pP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mk extends sy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mk(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new He(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new He(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kv(s,o)}(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new rd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function mye(n,e="asc"){const t=e,r=uA("orderBy",n);return mk._create(r,t)}function L$(n,e,t){if("string"==typeof(t=ki(t))){if(""===t)throw new He(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fP(e)&&-1!==t.indexOf("/"))throw new He(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yn.fromString(t));if(!ut.isDocumentKey(r))throw new He(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vf(n,new ut(r))}if(t instanceof Ki)return Vf(n,t._key);throw new He(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iA(t)}.`)}function F$(n,e){if(!Array.isArray(n)||0===n.length)throw new He(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V$(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new He(xe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class U${convertValue(e,t="none"){switch(oh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ft()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ih(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>fi(o.doubleValue));return new sA(s)}convertGeoPoint(e){return new ak(fi(e.latitude),fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=E2(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xv(e));default:return null}}convertTimestamp(e){const t=td(e);return new di(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yn.fromString(e);wt(Q9(r));const i=new Ff(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(t)||qi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Jf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bm extends iy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(uA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gA extends Bm{data(e={}){return super.data(e)}}class Um{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gA(this._firestore,this._userDataWriter,r.key,r,new Jf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new gA(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new gA(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:yye(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yye(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}class gh extends U${constructor(e){super(),this.firestore=e}convertBytes(e){return new Yf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ki(this.firestore,null,t)}}function bye(n){n=Gn(n,Js);const e=Gn(n.firestore,Fr),t=wi(e),r=new gh(e);return N$(n._query),function g$(n,e,t={}){const r=new Os;return n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return function(s,o,a,l,c){const u=new nA({next:h=>{u.Za(),o.enqueueAndForget(()=>_M(s,d)),h.fromCache&&"server"===l.source?c.reject(new He(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new wM(a,u,{includeMetadataChanges:!0,_a:!0});return gM(s,d)}(yield Lm(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new Um(e,r,n,i))}function wye(n,e,t,...r){n=Gn(n,Ki);const i=Gn(n.firestore,Fr),s=Qf(i);let o;return o="string"==typeof(e=ki(e))||e instanceof Xf?function fk(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[ry(e,r,t)],l=[i];if(s.length%2!=0)throw new He(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(ry(e,s[h])),l.push(s[h+1]);const c=[],u=Zs.empty();for(let h=a.length-1;h>=0;--h)if(!R$(c,a[h])){const f=a[h];let m=l[h];m=ki(m);const v=o.Nu(f);if(m instanceof ny)c.push(f);else{const y=Zf(m,v);null!=y&&(c.push(f),u.set(f,y))}}const d=new Ca(c);return new S$(u,d,o.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function hk(n,e,t,r){const i=n.Qu(1,e,t);pk("Data must be an object, but it was:",i,r);const s=[],o=Zs.empty();ih(r,(l,c)=>{const u=lA(e,l,t);c=ki(c);const d=i.Nu(u);if(c instanceof ny)s.push(u);else{const h=Zf(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new Ca(s);return new S$(o,a,i.fieldTransforms)}(s,"updateDoc",n._key,e),ay(i,[o.toMutation(n._key,pi.exists(!0))])}function Aye(n){return ay(Gn(n.firestore,Fr),[new mm(n._key,pi.none())])}function Cye(n,e){const t=Gn(n.firestore,Fr),r=A$(n),i=function pA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return ay(t,[aA(Qf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pi.exists(!1))]).then(()=>r)}function ay(n,e){return function(r,i){const s=new Os;return r.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return function Tve(n,e,t){return DM.apply(this,arguments)}(yield function nk(n){return rA(n).then(e=>e.syncEngine)}(r),i,s)})),s.promise}(wi(n),e)}!function(e,t=!0){nm=av,xf(new Qd("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Fr(new Jme(r.getProvider("auth-internal")),new n_e(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new He(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ff(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ao(_j,"4.7.3",e),Ao(_j,"4.7.3","esm2017")}();var _A=function(){return _A=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},_A.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var Fye={includeMetadataChanges:!1};function bk(n,e){return void 0===e&&(e=Fye),new Ve(function(t){var r=function Eye(n,...e){var t,r,i;n=ki(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||sk(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(sk(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let l,c,u;if(n instanceof Ki)c=Gn(n.firestore,Fr),u=um(n._key.path),l={next:d=>{e[o]&&e[o](function _k(n,e,t){const r=t.docs.get(e._key),i=new gh(n);return new Bm(n,i,e._key,r,new Jf(t.hasPendingWrites,t.fromCache),e.converter)}(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=Gn(n,Js);c=Gn(d.firestore,Fr),u=d._query;const h=new gh(c);l={next:f=>{e[o]&&e[o](new Um(c,h,d,f))},error:e[o+1],complete:e[o+2]},N$(n._query)}return function(h,f,m,v){const y=new nA(v),b=new wM(f,y,m);return h.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return gM(yield Lm(h),b)})),()=>{y.Za(),h.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return _M(yield Lm(h),b)}))}}(wi(c),u,a,l)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Hye(n,e){return void 0===e&&(e={}),function $ye(n){return bk(n,{includeMetadataChanges:!0}).pipe(Xt(function(e){return e.docs}))}(n).pipe(Xt(function(t){return t.map(function(r){return function H$(n,e){var t;void 0===e&&(e={});var r=n.data(e);return n.exists()&&"object"==typeof r&&null!==r&&e.idField?_A(_A({},r),((t={})[e.idField]=n.id,t)):r}(r,e)})}))}class _h{constructor(e){return e}}const K$="firestore",Ck=new gt("angularfire2.firestore-instances");function Kye(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new _h(r)}}const Yye={provide:class qye{constructor(){return n2(K$)}},deps:[[new vo,Ck]]},Xye={provide:_h,useFactory:function Wye(n,e){const t=Fx(K$,n,e);return t&&new _h(t)},deps:[[new vo,Ck],Qg]};let Qye=(()=>{class n{constructor(){Ao("angularfire",t2.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Uo({type:n});static \u0275inj=mo({providers:[Xye,Yye]})}return n})();function Zye(n,...e){return{ngModule:Qye,providers:[{provide:Ck,useFactory:Kye(n),multi:!0,deps:[dr,Ys,Vx,Bx,[new vo,QD],[new vo,JU],...e]}]}}const ly=Co(Hye,!0),cy=Co(Cye,!0),Yc=Co(oye,!0),vA=Co(Aye,!0),ep=Co(A$,!0),Jye=Co(bye,!0),e1e=Co(lye,!0),yA=Co(mye,!0),bA=Co(gye,!0),Ek=Co(wye,!0);function wA(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const s=new Ps({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new B0)}});n.subscribe(s)})}let AA=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="giocatori"}getGiocatoriObservable(){const t=Yc(this.firestore,this.collectionName),r=bA(t,yA("numeroMaglia","asc"));return ly(r,{idField:"id"})}getGiocatori(){var t=this;return(0,Q.A)(function*(){return yield wA(t.getGiocatoriObservable())})()}addGiocatore(t){var r=this;return(0,Q.A)(function*(){const i=Yc(r.firestore,r.collectionName),s=r.normalizeGiocatore(t);yield cy(i,s)})()}updateGiocatore(t,r){var i=this;return(0,Q.A)(function*(){const s=ep(i.firestore,i.collectionName,t),o=i.normalizeGiocatore(r);yield Ek(s,o)})()}deleteGiocatore(t){var r=this;return(0,Q.A)(function*(){const i=ep(r.firestore,r.collectionName,t);yield vA(i)})()}addMultipleGiocatori(t){var r=this;return(0,Q.A)(function*(){const i=Yc(r.firestore,r.collectionName);for(const s of t){const o=r.normalizeGiocatore(s);yield cy(i,o)}})()}migrateFromLocalStorage(){var t=this;return(0,Q.A)(function*(){const r=localStorage.getItem("giocatori");if(r){const i=JSON.parse(r);yield t.addMultipleGiocatori(i),console.log(`Migrati ${i.length} giocatori da localStorage a Firestore`)}})()}normalizeGiocatore(t){return{...t,nome:t.nome?t.nome.toLowerCase():"",cognome:t.cognome?t.cognome.toLowerCase():""}}static{this.\u0275fac=function(r){return new(r||n)(bt(_h))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ld=(()=>{class n{constructor(t){this.giocatoriService=t,this.STORAGE_KEY="currentUser";const r=localStorage.getItem(this.STORAGE_KEY);this.currentUserSubject=new ja(r?JSON.parse(r):null),this.currentUser=this.currentUserSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}login(t){var r=this;return(0,Q.A)(function*(){const s=(yield r.giocatoriService.getGiocatori()).find(o=>o.codiceFiscale&&o.codiceFiscale.toUpperCase()===t.toUpperCase());return!!s&&(localStorage.setItem(r.STORAGE_KEY,JSON.stringify(s)),r.currentUserSubject.next(s),!0)})()}logout(){localStorage.removeItem(this.STORAGE_KEY),this.currentUserSubject.next(null)}isAuthenticated(){return null!==this.currentUserValue}hasEditPermission(){const t=this.currentUserValue;return!!t&&("Amministratore"===t.profilo||"Staff"===t.profilo)}isCurrentUser(t){const r=this.currentUserValue;return!(!r||!t)&&r.nome===t.nome&&r.cognome===t.cognome}static{this.\u0275fac=function(r){return new(r||n)(bt(AA))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Y$=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="partite",this.metadataCollectionName="partite-metadata"}getPartiteMetadataObservable(){const t=Yc(this.firestore,this.metadataCollectionName);return ly(t,{idField:"id"}).pipe(Xt(r=>{if(r&&r.length>0){const i=r[0];return{lastUpdate:i.lastUpdate?.toDate?i.lastUpdate.toDate():new Date(i.lastUpdate),season:i.season}}return{lastUpdate:null,season:""}}))}getPartiteObservable(){const t=Yc(this.firestore,this.collectionName),r=bA(t,yA("numeroGara","asc"));return ly(r,{idField:"id"})}getPartiteWithMetadataObservable(){return Dw([this.getPartiteObservable(),this.getPartiteMetadataObservable()]).pipe(Xt(([t,r])=>({partite:t,lastUpdate:r.lastUpdate,season:r.season})))}getPartite(){var t=this;return(0,Q.A)(function*(){return yield wA(t.getPartiteObservable())})()}addPartita(t){var r=this;return(0,Q.A)(function*(){const i=Yc(r.firestore,r.collectionName);yield cy(i,t)})()}updatePartita(t,r){var i=this;return(0,Q.A)(function*(){const s=ep(i.firestore,i.collectionName,t);yield Ek(s,r)})()}deletePartita(t){var r=this;return(0,Q.A)(function*(){const i=ep(r.firestore,r.collectionName,t);yield vA(i)})()}static{this.\u0275fac=function(r){return new(r||n)(bt(_h))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),X$=(()=>{class n{constructor(t){this.firestore=t,this.allenamentoCollection=Yc(this.firestore,"allenamenti")}getAllenamenti(){const t=bA(this.allenamentoCollection,yA("ordinamento","asc"));return ly(t,{idField:"id"})}addAllenamento(t){return cy(this.allenamentoCollection,t)}updateAllenamento(t,r){const i=ep(this.firestore,"allenamenti",t);return Ek(i,r)}deleteAllenamento(t){const r=ep(this.firestore,"allenamenti",t);return vA(r)}static{this.\u0275fac=function(r){return new(r||n)(bt(_h))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function t1e(n,e){1&n&&(x(0,"a",30),oe(1,"img",31),x(2,"div",32)(3,"h4",33),H(4,"Punto Volley Thunders 2025/2026"),M(),x(5,"small",34),oe(6,"i",35),H(7," Clicca per vedere la squadra "),M()()())}function n1e(n,e){1&n&&(x(0,"div"),oe(1,"img",36),x(2,"div",32)(3,"h4",33),H(4,"Punto Volley Thunders 2025/2026"),M()()())}function r1e(n,e){if(1&n){const t=Fn();x(0,"a",48),Ee("click",function(){rt(t);const i=Te().$implicit;return it(Te(2).openMaps(i.indirizzo))}),oe(1,"i",49),H(2),M()}if(2&n){const t=Te().$implicit;z(2),Hn("",t.indirizzo," ")}}function i1e(n,e){1&n&&(x(0,"small",42),oe(1,"i",50),H(2,"Da definire "),M())}function s1e(n,e){if(1&n&&(x(0,"div",39)(1,"div",40)(2,"div",41)(3,"small",42),H(4),M(),x(5,"p",43),H(6),M(),x(7,"div",44)(8,"small",42),oe(9,"i",45),H(10),M(),Be(11,r1e,3,1,"a",46),Be(12,i1e,3,0,"small",47),M()()()()),2&n){const t=e.$implicit,r=e.first,i=Te(2);rn("bg-warning",r)("bg-opacity-10",r)("bg-light",!r),z(4),Qe(i.formatData(t.data)),z(2),ic("",t.ospitante," vs ",t.ospite,""),z(4),Hn("",t.ora||"TBD"," "),z(1),ae("ngIf",t.indirizzo),z(1),ae("ngIf",!t.indirizzo)}}function o1e(n,e){if(1&n&&(x(0,"div",37),Be(1,s1e,13,12,"div",38),M()),2&n){const t=Te();z(1),ae("ngForOf",t.prossimiAppuntamenti)}}function a1e(n,e){1&n&&(x(0,"div",51),oe(1,"i",52),H(2," Nessuna partita in programma "),M())}function l1e(n,e){if(1&n&&(x(0,"div",54)(1,"div",55)(2,"div")(3,"small",42),H(4),M(),x(5,"p",33),H(6),M()(),x(7,"span",56),H(8),M()()()),2&n){const t=e.$implicit,r=Te(2);rn("border-success",r.isVittoria(t))("border-danger",!r.isVittoria(t)),z(4),Qe(r.formatDataBreve(t.data)),z(2),ic("",t.ospitante," vs ",t.ospite,""),z(1),rn("bg-success",r.isVittoria(t))("bg-danger",!r.isVittoria(t)),z(1),Hn(" ",t.risultato," ")}}function c1e(n,e){if(1&n&&(x(0,"div",37),Be(1,l1e,9,12,"div",53),M()),2&n){const t=Te();z(1),ae("ngForOf",t.ultimiRisultati)}}function u1e(n,e){1&n&&(x(0,"div",51),oe(1,"i",52),H(2," Nessun risultato disponibile "),M())}function d1e(n,e){if(1&n){const t=Fn();x(0,"div",59)(1,"div",60)(2,"h6",61),oe(3,"i",62),H(4),M(),x(5,"p",63),oe(6,"i",64),x(7,"strong"),H(8),M()(),x(9,"p",63),oe(10,"i",65),x(11,"strong"),H(12),M()(),x(13,"a",66),Ee("click",function(){const s=rt(t).$implicit;return it(Te(2).openMaps(s.indirizzo))}),oe(14,"i",49),H(15),M()()()}if(2&n){const t=e.$implicit;z(4),Hn("",t.giorno," "),z(4),ic("",t.orarioInizio," - ",t.orarioFine,""),z(4),Qe(t.nomePalestra),z(3),Hn("",t.indirizzo," ")}}function h1e(n,e){if(1&n&&(x(0,"div",57),Be(1,d1e,16,5,"div",58),M()),2&n){const t=Te();z(1),ae("ngForOf",t.allenamenti)}}function f1e(n,e){1&n&&(x(0,"div",67),oe(1,"i",68),H(2," Nessun allenamento configurato "),M())}let p1e=(()=>{class n{constructor(t,r,i){this.authService=t,this.calendarioService=r,this.allenamentiService=i,this.ultimiRisultati=[],this.prossimiAppuntamenti=[],this.allenamenti=[]}ngOnInit(){this.allenamentiService.getAllenamenti().subscribe(t=>{this.allenamenti=t}),this.calendarioService.getPartiteObservable().subscribe(t=>{const r=new Date;r.setHours(0,0,0,0);const i=t.filter(o=>{if(!o.data)return!1;const a=ks.parseDataPartita(o.data);return!!a&&(a.setHours(0,0,0,0),o.risultato&&a<r)}).sort((o,a)=>{const l=ks.parseDataPartita(o.data),c=ks.parseDataPartita(a.data);return l&&c?c.getTime()-l.getTime():0});this.ultimiRisultati=i.slice(0,3);const s=t.filter(o=>{if(!o.data)return!1;const a=ks.parseDataPartita(o.data);return!!a&&(a.setHours(0,0,0,0),a>=r&&!o.risultato)}).sort((o,a)=>{const l=ks.parseDataPartita(o.data),c=ks.parseDataPartita(a.data);return l&&c?l.getTime()-c.getTime():0});this.prossimiAppuntamenti=s.slice(0,3)})}encodeURIComponent(t){return encodeURIComponent(t)}isVittoria(t){if(!t.risultato)return!1;const[r,i]=t.risultato.split("-").map(o=>parseInt(o.trim()));return t.ospitante.toLowerCase().includes("thunders")?r>i:i>r}formatData(t){return ks.formatDateWithFullDay(ks.parseDataPartita(t)||t)}formatDataBreve(t){return ks.formatDate(ks.parseDataPartita(t)||t)}openMaps(t){ks.openMaps(t)}static{this.\u0275fac=function(r){return new(r||n)(Le(ld),Le(Y$),Le(X$))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-homepage"]],decls:48,vars:8,consts:[[1,"container-fluid","px-4","homepage-container","mb-5"],[1,"row","d-none","d-md-block","mb-4"],[1,"col-12","text-center"],[1,"title-wrapper"],[1,"homepage-title"],[1,"bi","bi-lightning-fill"],[1,"row","g-4"],[1,"col-12","col-lg-6","order-0"],[1,"card","shadow","rounded-4","overflow-hidden","h-100"],[1,"position-relative"],["routerLink","/squadra","class","text-decoration-none d-block",4,"ngIf"],[4,"ngIf"],[1,"col-12","col-lg-6","order-1","order-lg-3"],[1,"card","shadow","h-100"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"bi","bi-calendar-event","me-2"],[1,"card-body"],["class","d-flex flex-column gap-2",4,"ngIf"],["class","text-center text-muted py-4",4,"ngIf"],[1,"mt-3","text-center"],["routerLink","/calendario",1,"btn","btn-outline-primary","btn-sm"],[1,"bi","bi-calendar3","me-1"],[1,"col-12","col-lg-6","order-2"],[1,"bi","bi-graph-up","me-2"],[1,"bi","bi-calendar-check","me-1"],[1,"col-12","col-lg-6","order-3","order-lg-1"],[1,"bi","bi-calendar3","me-2"],["class","d-flex flex-column gap-3",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["routerLink","/squadra",1,"text-decoration-none","d-block"],["src","assets/images/thunders.JPG","alt","Punto Volley CR ASD Thunders",1,"img-fluid","w-100","team-image-enhanced","clickable-image"],[1,"position-absolute","bottom-0","start-0","end-0","bg-dark","bg-opacity-75","text-white","text-center","py-3"],[1,"mb-0","fw-bold"],[1,"opacity-75"],[1,"bi","bi-arrow-right-circle","me-1"],["src","assets/images/thunders.JPG","alt","Punto Volley CR ASD Thunders",1,"img-fluid","w-100","team-image-enhanced"],[1,"d-flex","flex-column","gap-2"],["class","p-3 rounded",3,"bg-warning","bg-opacity-10","bg-light",4,"ngFor","ngForOf"],[1,"p-3","rounded"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"text-muted"],[1,"mb-1","fw-bold"],[1,"d-flex","flex-column","gap-1"],[1,"bi","bi-clock","me-1"],["href","javascript:void(0)","class","text-primary text-decoration-none small",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],["href","javascript:void(0)",1,"text-primary","text-decoration-none","small",3,"click"],[1,"bi","bi-geo-alt-fill","me-1"],[1,"bi","bi-geo-alt","me-1"],[1,"text-center","text-muted","py-4"],[1,"bi","bi-calendar-x","fs-2","d-block","mb-2"],["class","p-3 border-start border-4 bg-light rounded",3,"border-success","border-danger",4,"ngFor","ngForOf"],[1,"p-3","border-start","border-4","bg-light","rounded"],[1,"d-flex","justify-content-between","align-items-center"],[1,"badge","fs-6"],[1,"d-flex","flex-column","gap-3"],["class","p-3 bg-light rounded",4,"ngFor","ngForOf"],[1,"p-3","bg-light","rounded"],[1,"mb-2"],[1,"text-primary","mb-1"],[1,"bi","bi-calendar-week","me-2"],[1,"mb-1"],[1,"bi","bi-clock-fill","me-2"],[1,"bi","bi-geo-alt-fill","me-2"],["href","javascript:void(0)",1,"text-primary","text-decoration-none","small","d-block",3,"click"],[1,"text-center","py-4","text-muted"],[1,"bi","bi-info-circle","me-2"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),H(5," PuntoVolley Thunders "),oe(6,"i",5),M()()()(),x(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),Be(11,t1e,8,0,"a",10),Be(12,n1e,5,0,"div",11),M()()(),x(13,"div",12)(14,"div",13)(15,"div",14)(16,"h5",15),oe(17,"i",16),H(18," Prossime Partite "),M()(),x(19,"div",17),Be(20,o1e,2,1,"div",18),Be(21,a1e,3,0,"div",19),x(22,"div",20)(23,"a",21),oe(24,"i",22),H(25," Vedi calendario completo "),M()()()()(),x(26,"div",23)(27,"div",13)(28,"div",14)(29,"h5",15),oe(30,"i",24),H(31," Ultimi Risultati "),M()(),x(32,"div",17),Be(33,c1e,2,1,"div",18),Be(34,u1e,3,0,"div",19),x(35,"div",20)(36,"a",21),oe(37,"i",25),H(38," Vedi tutti i risultati "),M()()()()(),x(39,"div",26)(40,"div",13)(41,"div",14)(42,"h5",15),oe(43,"i",27),H(44," Allenamenti "),M()(),x(45,"div",17),Be(46,h1e,2,1,"div",28),Be(47,f1e,3,0,"div",29),M()()()()()),2&r&&(z(11),ae("ngIf",i.authService.hasEditPermission()),z(1),ae("ngIf",!i.authService.hasEditPermission()),z(8),ae("ngIf",i.prossimiAppuntamenti.length>0),z(1),ae("ngIf",0===i.prossimiAppuntamenti.length),z(12),ae("ngIf",i.ultimiRisultati.length>0),z(1),ae("ngIf",0===i.ultimiRisultati.length),z(12),ae("ngIf",i.allenamenti.length>0),z(1),ae("ngIf",0===i.allenamenti.length))},dependencies:[Wd,Sl,Kg],styles:[".homepage-container[_ngcontent-%COMP%]{margin-top:.25rem}.title-wrapper[_ngcontent-%COMP%]{margin:0 auto;max-width:600px;padding:.5rem 2rem}.homepage-title[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 50%,#0d6efd 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;background-size:200% auto;font-weight:700;font-size:2rem;margin:0;letter-spacing:.5px;animation:_ngcontent-%COMP%_shine 3s linear infinite;filter:drop-shadow(0 2px 8px rgba(13,110,253,.4))}@keyframes _ngcontent-%COMP%_shine{to{background-position:200% center}}.homepage-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffc107;-webkit-text-fill-color:#ffc107;filter:drop-shadow(0 0 12px rgba(255,193,7,.8)) drop-shadow(0 0 20px rgba(255,193,7,.4));animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite;display:inline-block}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1) rotate(0)}50%{transform:scale(1.15) rotate(-10deg)}}.team-image-enhanced[_ngcontent-%COMP%]{object-fit:cover;height:400px;max-height:50vh;object-position:center;transition:transform .3s ease,filter .3s ease}.clickable-image[_ngcontent-%COMP%]:hover{transform:scale(1.02);filter:brightness(1.1);cursor:pointer}.maps-link[_ngcontent-%COMP%]{transition:all .3s ease}.maps-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026;background-color:var(--bs-primary)!important;background-opacity:.2!important}@media (max-width: 768px){.team-image-enhanced[_ngcontent-%COMP%]{height:300px;max-height:45vh}.maps-link[_ngcontent-%COMP%]:hover{transform:none}}@media (max-width: 480px){.team-image-enhanced[_ngcontent-%COMP%]{height:250px;max-height:40vh}.clickable-image[_ngcontent-%COMP%]:hover{transform:none}}"]})}}return n})(),Q$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Le(Lu),Le(Wa))}}static{this.\u0275dir=cn({type:n})}}return n})(),tp=(()=>{class n extends Q${static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ks(n)))(i||n)}}()}static{this.\u0275dir=cn({type:n,features:[Cr]})}}return n})();const Xc=new gt("NgValueAccessor"),m1e={provide:Xc,useExisting:zr(()=>Ik),multi:!0};let Ik=(()=>{class n extends tp{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ks(n)))(i||n)}}()}static{this.\u0275dir=cn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&Ee("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[ui([m1e]),Cr]})}}return n})();const _1e={provide:Xc,useExisting:zr(()=>Qc),multi:!0},y1e=new gt("CompositionEventMode");let Qc=(()=>{class n extends Q${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function v1e(){const n=qd()?qd().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Le(Lu),Le(Wa),Le(y1e,8))}}static{this.\u0275dir=cn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ee("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ui([_1e]),Cr]})}}return n})();function vh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Z$(n){return null!=n&&"number"==typeof n.length}const xo=new gt("NgValidators"),yh=new gt("NgAsyncValidators"),b1e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zc{static min(e){return function J$(n){return e=>{if(vh(e.value)||vh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function eH(n){return e=>{if(vh(e.value)||vh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function tH(n){return vh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function nH(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function rH(n){return vh(n.value)||b1e.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function iH(n){return e=>vh(e.value)||!Z$(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return sH(e)}static pattern(e){return function oH(n){if(!n)return CA;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(vh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return hH(e)}static composeAsync(e){return fH(e)}}function sH(n){return e=>Z$(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function CA(n){return null}function aH(n){return null!=n}function lH(n){return A0(n)?fs(n):n}function cH(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function uH(n,e){return e.map(t=>t(n))}function dH(n){return n.map(e=>function w1e(n){return!n.validate}(e)?e:t=>e.validate(t))}function hH(n){if(!n)return null;const e=n.filter(aH);return 0==e.length?null:function(t){return cH(uH(t,e))}}function Tk(n){return null!=n?hH(dH(n)):null}function fH(n){if(!n)return null;const e=n.filter(aH);return 0==e.length?null:function(t){return function g1e(...n){const e=MO(n),{args:t,keys:r}=_B(n),i=new Ve(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;go(t[u]).subscribe(Bn(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?vB(r,a):a),s.complete())}))}});return e?i.pipe(HS(e)):i}(uH(t,e).map(lH)).pipe(Xt(cH))}}function Sk(n){return null!=n?fH(dH(n)):null}function pH(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gH(n){return n._rawValidators}function mH(n){return n._rawAsyncValidators}function xk(n){return n?Array.isArray(n)?n:[n]:[]}function EA(n,e){return Array.isArray(n)?n.includes(e):n===e}function _H(n,e){const t=xk(e);return xk(n).forEach(i=>{EA(t,i)||t.push(i)}),t}function vH(n,e){return xk(e).filter(t=>!EA(n,t))}class yH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Tk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Sk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Xo extends yH{get formDirective(){return null}get path(){return null}}class bh extends yH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wh=(()=>{class n extends bH{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Le(bh,2))}}static{this.\u0275dir=cn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&rn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Cr]})}}return n})(),Dk=(()=>{class n extends bH{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Le(Xo,10))}}static{this.\u0275dir=cn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&rn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Cr]})}}return n})();const uy="VALID",TA="INVALID",jm="PENDING",dy="DISABLED";function kk(n){return(SA(n)?n.validators:n)||null}function Rk(n,e){return(SA(e)?e.asyncValidators:n)||null}function SA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function AH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new qe(1e3,"");if(!r[t])throw new qe(1001,"")}function CH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new qe(1002,"")})}class xA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===uy}get invalid(){return this.status===TA}get pending(){return this.status==jm}get disabled(){return this.status===dy}get enabled(){return this.status!==dy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_H(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_H(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vH(e,this._rawAsyncValidators))}hasValidator(e){return EA(this._rawValidators,e)}hasAsyncValidator(e){return EA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dy,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uy,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uy||this.status===jm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dy:uy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jm,this._hasOwnPendingAsyncValidator=!0;const t=lH(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ci,this.statusChanges=new ci}_calculateStatus(){return this._allControlsDisabled()?dy:this.errors?TA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jm)?jm:this._anyControlsHaveStatus(TA)?TA:uy}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){SA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function I1e(n){return Array.isArray(n)?Tk(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function T1e(n){return Array.isArray(n)?Sk(n):n||null}(this._rawAsyncValidators)}}class hy extends xA{constructor(e,t,r){super(kk(t),Rk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){CH(this,0,e),Object.keys(e).forEach(r=>{AH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class EH extends hy{}const np=new gt("CallSetDisabledState",{providedIn:"root",factory:()=>fy}),fy="always";function DA(n,e){return[...e.path,n]}function py(n,e,t=fy){Nk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function x1e(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&IH(n,e)})}(n,e),function P1e(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function D1e(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&IH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function S1e(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function PA(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),kA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function MA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Nk(n,e){const t=gH(n);null!==e.validator?n.setValidators(pH(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=mH(n);null!==e.asyncValidator?n.setAsyncValidators(pH(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();MA(e._rawValidators,i),MA(e._rawAsyncValidators,i)}function kA(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=gH(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=mH(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return MA(e._rawValidators,r),MA(e._rawAsyncValidators,r),t}function IH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Lk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Fk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Qc?t=s:function R1e(n){return Object.getPrototypeOf(n.constructor)===tp}(s)?r=s:i=s}),i||r||t||null}function xH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function DH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const my=class extends xA{constructor(e=null,t,r){super(kk(t),Rk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),SA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=DH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){DH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},V1e={provide:bh,useExisting:zr(()=>rp)},kH=(()=>Promise.resolve())();let rp=(()=>{class n extends bh{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new my,this._registered=!1,this.name="",this.update=new ci,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Fk(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Lk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){py(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){kH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Og(r);kH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?DA(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Le(Xo,9),Le(xo,10),Le(yh,10),Le(Xc,10),Le(dw,8),Le(np,8))}}static{this.\u0275dir=cn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ui([V1e]),Cr,Ha]})}}return n})(),Bk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=cn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const B1e={provide:Xc,useExisting:zr(()=>Uk),multi:!0};let Uk=(()=>{class n extends tp{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ks(n)))(i||n)}}()}static{this.\u0275dir=cn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Ee("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[ui([B1e]),Cr]})}}return n})(),RH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({})}}return n})();const jk=new gt("NgModelWithFormControlWarning"),H1e={provide:Xo,useExisting:zr(()=>_y)};let _y=(()=>{class n extends Xo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ci,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return py(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){PA(t.control||null,t,!1),function N1e(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function SH(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(PA(r||null,t),(n=>n instanceof my)(i)&&(py(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function TH(n,e){Nk(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function M1e(n,e){return kA(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Nk(this.form,this),this._oldForm&&kA(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(Le(xo,10),Le(yh,10),Le(np,8))}}static{this.\u0275dir=cn({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Ee("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ui([H1e]),Cr,Ha]})}}return n})();const W1e={provide:bh,useExisting:zr(()=>RA)};let RA=(()=>{class n extends bh{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new ci,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Fk(0,s)}ngOnChanges(t){this._added||this._setUpControl(),Lk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return DA(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Le(Xo,13),Le(xo,10),Le(yh,10),Le(Xc,10),Le(jk,8))}}static{this.\u0275dir=cn({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ui([W1e]),Cr,Ha]})}}return n})();const K1e={provide:Xc,useExisting:zr(()=>zm),multi:!0};function VH(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let zm=(()=>{class n extends tp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=VH(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Y1e(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ks(n)))(i||n)}}()}static{this.\u0275dir=cn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Ee("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ui([K1e]),Cr]})}}return n})(),NA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(VH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Le(Wa),Le(Lu),Le(zm,9))}}static{this.\u0275dir=cn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const X1e={provide:Xc,useExisting:zr(()=>Hk),multi:!0};function BH(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Hk=(()=>{class n extends tp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);i.push(c)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Q1e(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ks(n)))(i||n)}}()}static{this.\u0275dir=cn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Ee("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ui([X1e]),Cr]})}}return n})(),OA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(BH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(BH(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Le(Wa),Le(Lu),Le(Hk,9))}}static{this.\u0275dir=cn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();let ip=(()=>{class n{constructor(){this._validator=CA}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):CA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=cn({type:n,features:[Ha]})}}return n})();const ibe={provide:xo,useExisting:zr(()=>vy),multi:!0};let vy=(()=>{class n extends ip{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function UH(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>sH(t)}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ks(n)))(i||n)}}()}static{this.\u0275dir=cn({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Pi("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[ui([ibe]),Cr]})}}return n})(),KH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({imports:[RH]})}}return n})();class YH extends xA{constructor(e,t,r){super(kk(t),Rk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){CH(this,0,e),e.forEach((r,i)=>{AH(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function XH(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let QH=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return XH(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new hy(i,s)}record(t,r=null){const i=this._reduceControls(t);return new EH(i,r)}control(t,r,i){let s={};return this.useNonNullable?(XH(r)?s=r:(s.validators=r,s.asyncValidators=i),new my(t,{...s,nonNullable:!0})):new my(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new YH(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof my||t instanceof xA?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),obe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:np,useValue:t.callSetDisabledState??fy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({imports:[KH]})}}return n})(),abe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:np,useValue:t.callSetDisabledState??fy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({imports:[KH]})}}return n})();class kl{static{this.PROFILI_UTENTE={amministratore:{value:"amministratore",label:"Amministratore"},giocatore:{value:"giocatore",label:"Giocatore"},staff:{value:"staff",label:"Staff"}}}static{this.RUOLI={schiacciatore:{value:"schiacciatore",label:"Schiacciatore"},palleggiatore:{value:"palleggiatore",label:"Palleggiatore"},centrale:{value:"centrale",label:"Centrale"},libero:{value:"libero",label:"Libero"},opposto:{value:"opposto",label:"Opposto"},allenatore:{value:"allenatore",label:"Allenatore"},dirigente:{value:"dirigente",label:"Dirigente"}}}static{this.ADDETTO_DEFIBRILLATORE_THUNDERS={nome:"Emanuele",cognome:"Peroni",codiceFiscale:"PRNMNL97L08D972O",dataDiNascita:"1997-07-08",luogoNascita:"Genzano di Roma",residenza:"Via Napoli 55, Albano Laziale"}}static{this.TITOLO_PDF="SETTORE DI ATTIVIT\xc0 PALLAVOLO UISP LAZIO SUD EST"}static{this.PRIMO_SOTTOTITOLO="LISTA PARTECIPANTI ALLA GARA"}static{this.SECONDO_SOTTOTITOLO="DENOMINAZIONE DELLA SQUADRA"}static{this.NOME_SQUADRA="PUNTO VOLLEY CR ASD THUNDERS"}static{this.TITOLO_DEFIBRILLATORE="DA COMPILARE DA PARTE DELLA SOLA SQUADRA OSPITANTE"}static{this.SOTTOTITOLO_DEFIBRILLATORE="AUTOCERTIFICAZIONE DELL'ADDETTO ALL'UTILIZZO DEL DEFIBRILLATORE (ART. 45 E 46 DPR 28 DICEMBRE 2000 N. 445)"}static{this.TESTO_DICHIARAZIONE_DEFIBRILLATORE="CONSAPEVOLE della responsabilit\xe0 penale e civile derivante da dichiarazioni mendaci, DICHIARA che nella struttura sportiva ove si svolge la gara \xe8 presente un defibrillatore semiautomatico esterno conforme alla vigente normativa e che \xe8 presente una persona adeguatamente formata al suo utilizzo."}static{this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}function lbe(n,e){if(1&n&&(x(0,"option",40),H(1),M()),2&n){const t=e.$implicit;ae("value",t.label),z(1),Qe(t.label)}}function cbe(n,e){if(1&n&&(x(0,"option",40),H(1),M()),2&n){const t=e.$implicit;ae("value",t.label),z(1),Qe(t.label)}}function ube(n,e){if(1&n&&(x(0,"div",9)(1,"label",41),H(2,"Profilo *"),M(),x(3,"select",42)(4,"option",22),H(5,"Seleziona un profilo"),M(),Be(6,cbe,2,2,"option",23),M(),x(7,"div",12),H(8,"Il profilo \xe8 obbligatorio"),M()()),2&n){const t=Te();let r;z(3),rn("is-invalid",(null==(r=t.giocatoreForm.get("profilo"))?null:r.invalid)&&(null==(r=t.giocatoreForm.get("profilo"))?null:r.touched)),z(3),ae("ngForOf",t.profili)}}function dbe(n,e){1&n&&(x(0,"div",43),oe(1,"input",44),x(2,"label",45),H(3," Capitano "),M()())}let hbe=(()=>{class n{constructor(t,r){this.fb=t,this.authService=r,this.giocatore=null,this.isEditMode=!1,this.onSave=new ci,this.onClose=new ci,this.ruoli=[],this.profili=[]}ngOnInit(){this.ruoli=Object.values(kl.RUOLI),this.profili=Object.values(kl.PROFILI_UTENTE),this.giocatoreForm=this.fb.group({id:[null],nome:["",Zc.required],cognome:["",Zc.required],numeroMaglia:[""],dataDiNascita:["",Zc.required],ruolo:["",Zc.required],tesseraUisp:["",Zc.required],capitano:[!1],codiceFiscale:[""],profilo:["",Zc.required],email:["",[Zc.email]],tagliaDivisa:[""],scadenzaCertificatoMedico:[""]})}ngOnChanges(t){t.giocatore&&this.giocatoreForm&&(this.giocatore?this.giocatoreForm.patchValue(this.giocatore):this.giocatoreForm.reset())}salvaGiocatore(){if(this.giocatoreForm.valid){const t=this.giocatoreForm.value;t.tagliaDivisa&&(t.tagliaDivisa=t.tagliaDivisa.toUpperCase()),this.onSave.emit(t),this.giocatoreForm.reset({nome:"",cognome:"",numeroMaglia:"",dataDiNascita:"",ruolo:"",tesseraUisp:"",capitano:!1,codiceFiscale:"",profilo:"",email:"",tagliaDivisa:"",scadenzaCertificatoMedico:""})}}onCancel(){this.giocatoreForm.reset(),this.onClose.emit()}static{this.\u0275fac=function(r){return new(r||n)(Le(QH),Le(ld))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-dialog-giocatore"]],inputs:{giocatore:"giocatore",isEditMode:"isEditMode"},outputs:{onSave:"onSave",onClose:"onClose"},features:[Ha],decls:78,vars:20,consts:[["id","giocatoreModal","tabindex","-1","aria-labelledby","giocatoreModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","giocatoreModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-6"],["for","nome",1,"form-label"],["type","text","id","nome","formControlName","nome",1,"form-control"],[1,"invalid-feedback"],["for","cognome",1,"form-label"],["type","text","id","cognome","formControlName","cognome",1,"form-control"],["for","numeroMaglia",1,"form-label"],["type","number","id","numeroMaglia","formControlName","numeroMaglia",1,"form-control"],["for","dataDiNascita",1,"form-label"],["type","date","id","dataDiNascita","formControlName","dataDiNascita",1,"form-control"],[1,"col-12"],["for","ruolo",1,"form-label"],["id","ruolo","formControlName","ruolo",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngClass"],["for","tesseraUisp",1,"form-label"],["type","text","id","tesseraUisp","formControlName","tesseraUisp",1,"form-control"],["class","col-6",4,"ngIf"],["for","codiceFiscale",1,"form-label"],["type","text","id","codiceFiscale","formControlName","codiceFiscale","maxlength","16",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","esempio@email.it",1,"form-control"],["for","tagliaDivisa",1,"form-label"],["type","text","id","tagliaDivisa","formControlName","tagliaDivisa","placeholder","Es: M, L, XL",1,"form-control",2,"text-transform","uppercase"],["for","scadenzaCertificatoMedico",1,"form-label"],["type","date","id","scadenzaCertificatoMedico","formControlName","scadenzaCertificatoMedico",1,"form-control"],["class","form-check mb-3",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],["for","profilo",1,"form-label"],["id","profilo","formControlName","profilo",1,"form-select"],[1,"form-check","mb-3"],["type","checkbox","id","capitano","formControlName","capitano",1,"form-check-input"],["for","capitano",1,"form-check-label"]],template:function(r,i){if(1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),H(5),M(),oe(6,"button",5),M(),x(7,"div",6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"label",10),H(12,"Nome *"),M(),oe(13,"input",11),x(14,"div",12),H(15,"Il nome \xe8 obbligatorio"),M()(),x(16,"div",9)(17,"label",13),H(18,"Cognome *"),M(),oe(19,"input",14),x(20,"div",12),H(21,"Il cognome \xe8 obbligatorio"),M()()(),x(22,"div",8)(23,"div",9)(24,"label",15),H(25,"Numero Maglia"),M(),oe(26,"input",16),M(),x(27,"div",9)(28,"label",17),H(29,"Data di Nascita *"),M(),oe(30,"input",18),x(31,"div",12),H(32,"La data di nascita \xe8 obbligatoria"),M()()(),x(33,"div",8)(34,"div",19)(35,"label",20),H(36,"Ruolo *"),M(),x(37,"select",21)(38,"option",22),H(39,"Seleziona un ruolo"),M(),Be(40,lbe,2,2,"option",23),M(),x(41,"div",12),H(42,"Il ruolo \xe8 obbligatorio"),M()()(),x(43,"div",8)(44,"div",24)(45,"label",25),H(46,"Tessera UISP *"),M(),oe(47,"input",26),x(48,"div",12),H(49,"La tessera UISP \xe8 obbligatoria"),M()(),Be(50,ube,9,3,"div",27),M(),x(51,"div",8)(52,"div",19)(53,"label",28),H(54,"Codice Fiscale"),M(),oe(55,"input",29),M()(),x(56,"div",8)(57,"div",19)(58,"label",30),H(59,"Email"),M(),oe(60,"input",31),x(61,"div",12),H(62,"Inserisci un indirizzo email valido"),M()()(),x(63,"div",8)(64,"div",9)(65,"label",32),H(66,"Taglia Divisa"),M(),oe(67,"input",33),M(),x(68,"div",9)(69,"label",34),H(70,"Scadenza Certificato Medico"),M(),oe(71,"input",35),M()(),Be(72,dbe,4,0,"div",36),M()(),x(73,"div",37)(74,"button",38),Ee("click",function(){return i.onCancel()}),H(75,"Annulla"),M(),x(76,"button",39),Ee("click",function(){return i.salvaGiocatore()}),H(77),M()()()()()),2&r){let s,o,a,l,c,u;z(5),Qe(i.isEditMode?"Modifica Giocatore":"Aggiungi Giocatore"),z(3),ae("formGroup",i.giocatoreForm),z(5),rn("is-invalid",(null==(s=i.giocatoreForm.get("nome"))?null:s.invalid)&&(null==(s=i.giocatoreForm.get("nome"))?null:s.touched)),z(6),rn("is-invalid",(null==(o=i.giocatoreForm.get("cognome"))?null:o.invalid)&&(null==(o=i.giocatoreForm.get("cognome"))?null:o.touched)),z(11),rn("is-invalid",(null==(a=i.giocatoreForm.get("dataDiNascita"))?null:a.invalid)&&(null==(a=i.giocatoreForm.get("dataDiNascita"))?null:a.touched)),z(7),rn("is-invalid",(null==(l=i.giocatoreForm.get("ruolo"))?null:l.invalid)&&(null==(l=i.giocatoreForm.get("ruolo"))?null:l.touched)),z(3),ae("ngForOf",i.ruoli),z(4),ae("ngClass",i.authService.hasEditPermission()?"col-6":"col-12"),z(3),rn("is-invalid",(null==(c=i.giocatoreForm.get("tesseraUisp"))?null:c.invalid)&&(null==(c=i.giocatoreForm.get("tesseraUisp"))?null:c.touched)),z(3),ae("ngIf",i.authService.hasEditPermission()),z(10),rn("is-invalid",(null==(u=i.giocatoreForm.get("email"))?null:u.invalid)&&(null==(u=i.giocatoreForm.get("email"))?null:u.touched)),z(12),ae("ngIf",i.authService.hasEditPermission()),z(4),ae("disabled",i.giocatoreForm.invalid),z(1),Hn(" ",i.isEditMode?"Salva Modifiche":"Aggiungi"," ")}},dependencies:[Fg,Wd,Sl,Bk,NA,OA,Qc,Uk,Ik,zm,wh,Dk,vy,_y,RA]})}}return n})(),qk=(()=>{class n{transform(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=jo({name:"capitalize",type:n,pure:!0})}}return n})();function fbe(n,e){if(1&n&&(x(0,"span",51),oe(1,"i",52),H(2),M()),2&n){const t=Te();z(2),Hn("",t.numeroGiocatori," giocatori ")}}function pbe(n,e){if(1&n&&(x(0,"div",53)(1,"span",54),H(2,"Totale giocatori"),M(),x(3,"span",55),H(4),M()()),2&n){const t=Te();z(4),Qe(t.numeroGiocatori)}}function gbe(n,e){if(1&n&&(x(0,"div",53)(1,"span",54),H(2,"Et\xe0 media"),M(),x(3,"span",55),H(4),M()()),2&n){const t=Te();z(4),Hn("",t.etaMedia," anni")}}function mbe(n,e){if(1&n&&(x(0,"div",53)(1,"span",54),H(2,"Capitano"),M(),x(3,"span",55),H(4),M()()),2&n){const t=Te();z(4),Qe(t.nomeCapitano)}}function _be(n,e){if(1&n&&(x(0,"span",63),H(1),ei(2,"date"),M()),2&n){const t=Te().$implicit;ae("ngClass",Te().getCertificatoClass(t.scadenzaCertificatoMedico)),z(1),Hn(" ",va(2,2,t.scadenzaCertificatoMedico,"dd/MM/yyyy")," ")}}function vbe(n,e){1&n&&(x(0,"span"),H(1,"-"),M())}function ybe(n,e){if(1&n){const t=Fn();x(0,"tr")(1,"td")(2,"span",56),H(3),M()(),x(4,"td"),H(5),ei(6,"capitalize"),M(),x(7,"td"),H(8),ei(9,"capitalize"),M(),x(10,"td"),H(11),ei(12,"date"),M(),x(13,"td"),H(14),M(),x(15,"td"),H(16),M(),x(17,"td"),H(18),M(),x(19,"td"),H(20),M(),x(21,"td"),H(22),M(),x(23,"td"),H(24),M(),x(25,"td"),Be(26,_be,3,5,"span",57),Be(27,vbe,2,0,"span",45),M(),x(28,"td",58)(29,"button",59),Ee("click",function(){const s=rt(t).$implicit;return it(Te().openDialog(s))}),oe(30,"i",60),M(),x(31,"button",61),Ee("click",function(){const s=rt(t).$implicit;return it(Te().eliminaGiocatore(s))}),oe(32,"i",62),M()()()}if(2&n){const t=e.$implicit;z(3),Qe(t.numeroMaglia||"-"),z(2),Qe(Cl(6,12,t.cognome)),z(3),Qe(Cl(9,14,t.nome)),z(3),Qe(va(12,16,t.dataDiNascita,"dd/MM/yyyy")),z(3),Qe(t.ruolo),z(2),Qe(t.tesseraUisp),z(2),Qe(t.codiceFiscale||"-"),z(2),Qe(t.profilo),z(2),Qe(t.email||"-"),z(2),Qe(t.tagliaDivisa||"-"),z(2),ae("ngIf",t.scadenzaCertificatoMedico),z(1),ae("ngIf",!t.scadenzaCertificatoMedico)}}function bbe(n,e){if(1&n&&(x(0,"tr")(1,"td",64),oe(2,"i",65),H(3),M()()),2&n){const t=Te();z(3),Hn(" ",0===t.giocatori.length?"Nessun giocatore presente":"Nessun risultato trovato"," ")}}function wbe(n,e){1&n&&(x(0,"div",66),H(1," Nessun giocatore presente "),M())}function Abe(n,e){1&n&&(x(0,"span",56),H(1,"K"),M())}function Cbe(n,e){if(1&n&&(x(0,"span",81),H(1),ei(2,"date"),M()),2&n){const t=Te().$implicit;ae("ngClass",Te().getCertificatoClass(t.scadenzaCertificatoMedico)),z(1),Hn(" ",va(2,2,t.scadenzaCertificatoMedico,"dd/MM/yyyy")," ")}}function Ebe(n,e){1&n&&(x(0,"span",55),H(1,"-"),M())}function Ibe(n,e){if(1&n){const t=Fn();x(0,"div",67)(1,"h2",68)(2,"button",69)(3,"span",70),H(4),M(),x(5,"span",71),H(6),ei(7,"capitalize"),ei(8,"capitalize"),M(),Be(9,Abe,2,0,"span",72),M()(),x(10,"div",73)(11,"div",74)(12,"div",75)(13,"div",53)(14,"span",54),H(15,"Data di Nascita"),M(),x(16,"span",55),H(17),ei(18,"date"),M()(),x(19,"div",53)(20,"span",54),H(21,"Ruolo"),M(),x(22,"span",55),H(23),M()(),x(24,"div",53)(25,"span",54),H(26,"Tessera UISP"),M(),x(27,"span",55),H(28),M()(),x(29,"div",53)(30,"span",54),H(31,"Codice Fiscale"),M(),x(32,"span",55),H(33),M()(),x(34,"div",53)(35,"span",54),H(36,"Profilo"),M(),x(37,"span",55),H(38),M()(),x(39,"div",53)(40,"span",54),H(41,"Email"),M(),x(42,"span",55),H(43),M()(),x(44,"div",53)(45,"span",54),H(46,"Taglia Divisa"),M(),x(47,"span",55),H(48),M()(),x(49,"div",53)(50,"span",54),H(51,"Certificato Medico"),M(),Be(52,Cbe,3,5,"span",76),Be(53,Ebe,2,0,"span",77),M()(),x(54,"div",78)(55,"button",79),Ee("click",function(){const s=rt(t).$implicit;return it(Te().openDialog(s))}),oe(56,"i",60),H(57," Modifica "),M(),x(58,"button",80),Ee("click",function(){const s=rt(t).$implicit;return it(Te().eliminaGiocatore(s))}),oe(59,"i",62),H(60," Elimina "),M()()()()()}if(2&n){const t=e.$implicit,r=e.index;z(1),Pi("id","headingGiocatore"+r),z(1),Pi("data-bs-target","#collapseGiocatore"+r)("aria-controls","collapseGiocatore"+r),z(2),Qe(t.numeroMaglia||"-"),z(2),ic("",Cl(7,18,t.cognome)," ",Cl(8,20,t.nome),""),z(3),ae("ngIf",t.capitano),z(1),Pi("id","collapseGiocatore"+r)("aria-labelledby","headingGiocatore"+r),z(7),Qe(va(18,22,t.dataDiNascita,"dd/MM/yyyy")),z(6),Qe(t.ruolo),z(5),Qe(t.tesseraUisp),z(5),Qe(t.codiceFiscale||"-"),z(5),Qe(t.profilo),z(5),Qe(t.email||"-"),z(5),Qe(t.tagliaDivisa||"-"),z(4),ae("ngIf",t.scadenzaCertificatoMedico),z(1),ae("ngIf",!t.scadenzaCertificatoMedico)}}const cc=function(n,e,t){return{"bi-arrow-down":n,"bi-arrow-up":e,"bi-arrow-down-up":t}};let Tbe=(()=>{class n{constructor(t){this.giocatoriService=t,this.giocatori=[],this.filteredGiocatori=[],this.selectedGiocatore=null,this.isEditMode=!1,this.filters={numeroMaglia:"",cognome:"",nome:"",dataDiNascita:"",ruolo:"",tesseraUisp:"",codiceFiscale:"",profilo:"",email:"",tagliaDivisa:"",scadenzaCertificatoMedico:""},this.sortColumn="cognome",this.sortDirection="asc"}ngOnInit(){this.giocatoriSubscription=this.giocatoriService.getGiocatoriObservable().subscribe(t=>{this.giocatori=t,this.applyFilters()})}ngOnDestroy(){this.giocatoriSubscription&&this.giocatoriSubscription.unsubscribe()}get giocatoriOrdinati(){return this.filteredGiocatori}applyFilters(){let t=[...this.giocatori];Object.keys(this.filters).forEach(r=>{const i=this.filters[r].toLowerCase().trim();i&&(t=t.filter(s=>{let o=s[r];if("dataDiNascita"===r&&o){const a=new Date(o);o=`${a.getDate().toString().padStart(2,"0")}/${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getFullYear()}`}return o?.toString().toLowerCase().includes(i)}))}),t.sort((r,i)=>{let s=r[this.sortColumn],o=i[this.sortColumn];return"dataDiNascita"===this.sortColumn||"scadenzaCertificatoMedico"===this.sortColumn?(s=s?new Date(s).getTime():0,o=o?new Date(o).getTime():0):"numeroMaglia"===this.sortColumn?(s=parseInt(s)||0,o=parseInt(o)||0):(s=s?.toString().toLowerCase()||"",o=o?.toString().toLowerCase()||""),s<o?"asc"===this.sortDirection?-1:1:s>o?"asc"===this.sortDirection?1:-1:0}),this.filteredGiocatori=t}onFilterChange(){this.applyFilters()}sortBy(t){this.sortColumn===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=t,this.sortDirection="asc"),this.applyFilters()}clearFilters(){this.filters={numeroMaglia:"",cognome:"",nome:"",dataDiNascita:"",ruolo:"",tesseraUisp:"",codiceFiscale:"",profilo:"",email:"",tagliaDivisa:"",scadenzaCertificatoMedico:""},this.applyFilters()}get numeroGiocatori(){return this.giocatori.filter(t=>{const r=(t.ruolo||"").toLowerCase();return!r.includes("allenatore")&&!r.includes("dirigente")}).length}get etaMedia(){const t=this.giocatori.filter(i=>{const s=(i.ruolo||"").toLowerCase();return i.dataDiNascita&&!s.includes("allenatore")&&!s.includes("dirigente")});if(0===t.length)return 0;const r=t.reduce((i,s)=>{const o=new Date(s.dataDiNascita),a=new Date;let l=a.getFullYear()-o.getFullYear();const c=a.getMonth()-o.getMonth();return(c<0||0===c&&a.getDate()<o.getDate())&&l--,i+l},0);return Math.round(r/t.length)}get nomeCapitano(){const t=this.giocatori.find(o=>!0===o.capitano);if(!t)return"";const r=o=>o?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():"";return`${r(t.nome||"")} ${r(t.cognome||"")}`.trim()}getCertificatoClass(t){if(!t)return"";const r=new Date,s=new Date(t).getTime()-r.getTime(),o=Math.ceil(s/864e5);return o>30?"badge bg-success":o>14?"badge bg-warning text-dark":"badge bg-danger"}openDialog(t){void 0!==t?(this.selectedGiocatore={...t},this.isEditMode=!0):(this.selectedGiocatore=null,this.isEditMode=!1)}handleSave(t){var r=this;return(0,Q.A)(function*(){try{if(r.isEditMode&&r.selectedGiocatore){const i=r.selectedGiocatore.id,{id:s,...o}=t;yield r.giocatoriService.updateGiocatore(i,o)}else yield r.giocatoriService.addGiocatore(t);r.closeModal(),r.handleClose()}catch(i){console.error("Errore nel salvataggio del giocatore:",i),alert("Errore nel salvataggio. Riprova.")}})()}handleClose(){this.selectedGiocatore=null,this.isEditMode=!1}eliminaGiocatore(t){var r=this;return(0,Q.A)(function*(){if(confirm("Sei sicuro di voler eliminare questo giocatore?"))try{const i=t.id;yield r.giocatoriService.deleteGiocatore(i)}catch(i){console.error("Errore nell'eliminazione del giocatore:",i),alert("Errore nell'eliminazione. Riprova.")}})()}closeModal(){const t=document.getElementById("giocatoreModal");if(t){const r=bootstrap.Modal.getInstance(t);r&&r.hide()}}handleFileUpload(t){var r=this;const i=t.target.files[0];if(!i)return;if(!i.name.endsWith(".json"))return alert("Seleziona un file JSON valido."),void(t.target.value="");const s=new FileReader;s.onload=function(){var o=(0,Q.A)(function*(a){try{const l=JSON.parse(a.target.result);if(!Array.isArray(l))return alert("Il file JSON deve contenere un array di giocatori."),void(t.target.value="");const c=yield r.giocatoriService.getGiocatori(),u=[];let d=0;if(l.forEach(h=>{const f=(h.nome||"").toLowerCase(),m=(h.cognome||"").toLowerCase();c.some(y=>y.nome.toLowerCase()===f&&y.cognome.toLowerCase()===m)?d++:u.push({...h,nome:f,cognome:m,capitano:h.capitano||!1})}),u.length>0)try{yield r.giocatoriService.addMultipleGiocatori(u);let h=`${u.length} giocatori caricati con successo!`;d>0&&(h+=`\n${d} giocatori gi\xe0 presenti sono stati ignorati.`),alert(h)}catch(h){console.error("Errore nel caricamento dei giocatori:",h),alert("Errore nel caricamento. Riprova.")}else d>0?alert(`Nessun giocatore caricato.\n${d} giocatori erano gi\xe0 presenti.`):alert("Nessun giocatore valido trovato nel file");t.target.value=""}catch(l){console.error("Errore nel parsing del file JSON:",l),alert("Errore nel parsing del file JSON. Assicurati che il formato sia corretto."),t.target.value=""}});return function(a){return o.apply(this,arguments)}}(),s.readAsText(i)}exportToJSON(){if(0===this.giocatori.length)return void alert("Nessun giocatore da esportare.");const t=this.giocatori.map(l=>{const{id:c,...u}=l;return u}),r=JSON.stringify(t,null,2),i=new Blob([r],{type:"application/json"}),s=window.URL.createObjectURL(i),o=document.createElement("a");o.href=s;const a=(new Date).toISOString().split("T")[0];o.download=`giocatori_${a}.json`,o.click(),window.URL.revokeObjectURL(s)}static{this.\u0275fac=function(r){return new(r||n)(Le(AA))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-giocatori"]],decls:142,vars:76,consts:[[1,"container-fluid","px-3","py-4","custom-spacing"],[1,"desktop-header","d-none","d-md-block","mb-3"],[1,"desktop-header-card"],[1,"desktop-header-content"],[1,"header-left"],[1,"header-icon"],[1,"bi","bi-people-fill"],[1,"header-text"],[1,"header-title"],[1,"header-meta"],["class","meta-item",4,"ngIf"],[1,"header-actions"],["type","file","accept",".json",1,"file-input-hidden",3,"change"],["fileInput",""],["title","Importa giocatori da JSON",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-upload","me-1"],["title","Esporta giocatori in JSON",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-download","me-1"],["data-bs-toggle","modal","data-bs-target","#giocatoreModal",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-1"],[1,"mobile-header","d-md-none","mb-3"],[1,"mobile-header-card"],[1,"mobile-header-title"],[1,"bi","bi-people-fill","me-2"],[1,"title-text"],[1,"mobile-header-info"],["class","info-item",4,"ngIf"],[1,"mobile-header-actions"],["title","Importa giocatori da JSON",1,"btn","btn-sm","btn-header-action",3,"click"],["title","Esporta giocatori in JSON",1,"btn","btn-sm","btn-header-action",3,"click"],["data-bs-toggle","modal","data-bs-target","#giocatoreModal",1,"btn","btn-sm","btn-header-action",3,"click"],[1,"table-container","d-none","d-md-block"],[1,"table-wrapper"],[1,"table","table-hover","modern-table"],[1,"table-header","sticky-header"],[1,"sortable",3,"click"],[1,"th-content"],[1,"bi",3,"ngClass"],[1,"actions-column"],["title","Pulisci filtri",1,"btn","btn-sm","btn-link","text-white",3,"click"],[1,"bi","bi-x-circle"],[1,"filter-row"],["type","text","placeholder","Filtra...",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],["type","text","placeholder","gg/mm/aaaa",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-md-none"],["class","text-center text-muted py-4",4,"ngIf"],["id","giocatoriAccordion",1,"accordion"],["class","accordion-item",4,"ngFor","ngForOf"],[3,"giocatore","isEditMode","onSave","onClose"],[1,"meta-item"],[1,"bi","bi-person-badge","me-1"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"badge","bg-primary"],[3,"ngClass",4,"ngIf"],[1,"actions-cell"],["data-bs-toggle","modal","data-bs-target","#giocatoreModal","title","Modifica",1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"bi","bi-pencil"],["title","Elimina",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[3,"ngClass"],["colspan","12",1,"text-center","text-muted","py-4"],[1,"bi","bi-inbox","fs-1","d-block","mb-2"],[1,"text-center","text-muted","py-4"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed"],[1,"badge","bg-primary","me-2","numero-maglia-badge"],[1,"flex-grow-1"],["class","badge bg-primary",4,"ngIf"],["data-bs-parent","#giocatoriAccordion",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"player-info-grid"],["class","info-value",3,"ngClass",4,"ngIf"],["class","info-value",4,"ngIf"],[1,"mt-3","d-flex","flex-wrap","gap-2","justify-content-end"],["data-bs-toggle","modal","data-bs-target","#giocatoreModal",1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"info-value",3,"ngClass"]],template:function(r,i){if(1&r){const s=Fn();x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),oe(6,"i",6),M(),x(7,"div",7)(8,"h3",8),H(9,"Giocatori"),M(),x(10,"div",9),Be(11,fbe,3,1,"span",10),M()()(),x(12,"div",11)(13,"input",12,13),Ee("change",function(a){return i.handleFileUpload(a)}),M(),x(15,"button",14),Ee("click",function(){return rt(s),it(IT(14).click())}),oe(16,"i",15),H(17,"Importa "),M(),x(18,"button",16),Ee("click",function(){return i.exportToJSON()}),oe(19,"i",17),H(20,"Esporta "),M(),x(21,"button",18),Ee("click",function(){return i.openDialog()}),oe(22,"i",19),H(23,"Aggiungi "),M()()()()(),x(24,"div",20)(25,"div",21)(26,"div",22),oe(27,"i",23),x(28,"span",24),H(29,"Giocatori"),M()(),x(30,"div",25),Be(31,pbe,5,1,"div",26),Be(32,gbe,5,1,"div",26),Be(33,mbe,5,1,"div",26),M(),x(34,"div",27)(35,"button",28),Ee("click",function(){return rt(s),it(IT(14).click())}),oe(36,"i",15),H(37,"Importa "),M(),x(38,"button",29),Ee("click",function(){return i.exportToJSON()}),oe(39,"i",17),H(40,"Esporta "),M(),x(41,"button",30),Ee("click",function(){return i.openDialog()}),oe(42,"i",19),H(43,"Aggiungi "),M()()()(),x(44,"div",31)(45,"div",32)(46,"table",33)(47,"thead",34)(48,"tr")(49,"th",35),Ee("click",function(){return i.sortBy("numeroMaglia")}),x(50,"div",36)(51,"span"),H(52,"N. Maglia"),M(),oe(53,"i",37),M()(),x(54,"th",35),Ee("click",function(){return i.sortBy("cognome")}),x(55,"div",36)(56,"span"),H(57,"Cognome"),M(),oe(58,"i",37),M()(),x(59,"th",35),Ee("click",function(){return i.sortBy("nome")}),x(60,"div",36)(61,"span"),H(62,"Nome"),M(),oe(63,"i",37),M()(),x(64,"th",35),Ee("click",function(){return i.sortBy("dataDiNascita")}),x(65,"div",36)(66,"span"),H(67,"Data di Nascita"),M(),oe(68,"i",37),M()(),x(69,"th",35),Ee("click",function(){return i.sortBy("ruolo")}),x(70,"div",36)(71,"span"),H(72,"Ruolo"),M(),oe(73,"i",37),M()(),x(74,"th",35),Ee("click",function(){return i.sortBy("tesseraUisp")}),x(75,"div",36)(76,"span"),H(77,"Tessera UISP"),M(),oe(78,"i",37),M()(),x(79,"th",35),Ee("click",function(){return i.sortBy("codiceFiscale")}),x(80,"div",36)(81,"span"),H(82,"Codice Fiscale"),M(),oe(83,"i",37),M()(),x(84,"th",35),Ee("click",function(){return i.sortBy("profilo")}),x(85,"div",36)(86,"span"),H(87,"Profilo"),M(),oe(88,"i",37),M()(),x(89,"th",35),Ee("click",function(){return i.sortBy("email")}),x(90,"div",36)(91,"span"),H(92,"Email"),M(),oe(93,"i",37),M()(),x(94,"th",35),Ee("click",function(){return i.sortBy("tagliaDivisa")}),x(95,"div",36)(96,"span"),H(97,"Taglia Divisa"),M(),oe(98,"i",37),M()(),x(99,"th",35),Ee("click",function(){return i.sortBy("scadenzaCertificatoMedico")}),x(100,"div",36)(101,"span"),H(102,"Scadenza Cert. Medico"),M(),oe(103,"i",37),M()(),x(104,"th",38)(105,"div",36)(106,"span"),H(107,"Azioni"),M(),x(108,"button",39),Ee("click",function(){return i.clearFilters()}),oe(109,"i",40),M()()()(),x(110,"tr",41)(111,"th")(112,"input",42),Ee("ngModelChange",function(a){return i.filters.numeroMaglia=a})("input",function(){return i.onFilterChange()}),M()(),x(113,"th")(114,"input",42),Ee("ngModelChange",function(a){return i.filters.cognome=a})("input",function(){return i.onFilterChange()}),M()(),x(115,"th")(116,"input",42),Ee("ngModelChange",function(a){return i.filters.nome=a})("input",function(){return i.onFilterChange()}),M()(),x(117,"th")(118,"input",43),Ee("ngModelChange",function(a){return i.filters.dataDiNascita=a})("input",function(){return i.onFilterChange()}),M()(),x(119,"th")(120,"input",42),Ee("ngModelChange",function(a){return i.filters.ruolo=a})("input",function(){return i.onFilterChange()}),M()(),x(121,"th")(122,"input",42),Ee("ngModelChange",function(a){return i.filters.tesseraUisp=a})("input",function(){return i.onFilterChange()}),M()(),x(123,"th")(124,"input",42),Ee("ngModelChange",function(a){return i.filters.codiceFiscale=a})("input",function(){return i.onFilterChange()}),M()(),x(125,"th")(126,"input",42),Ee("ngModelChange",function(a){return i.filters.profilo=a})("input",function(){return i.onFilterChange()}),M()(),x(127,"th")(128,"input",42),Ee("ngModelChange",function(a){return i.filters.email=a})("input",function(){return i.onFilterChange()}),M()(),x(129,"th")(130,"input",42),Ee("ngModelChange",function(a){return i.filters.tagliaDivisa=a})("input",function(){return i.onFilterChange()}),M()(),x(131,"th")(132,"input",43),Ee("ngModelChange",function(a){return i.filters.scadenzaCertificatoMedico=a})("input",function(){return i.onFilterChange()}),M()(),oe(133,"th"),M()(),x(134,"tbody"),Be(135,ybe,33,19,"tr",44),Be(136,bbe,4,1,"tr",45),M()()()(),x(137,"div",46),Be(138,wbe,2,0,"div",47),x(139,"div",48),Be(140,Ibe,61,25,"div",49),M()()(),x(141,"app-dialog-giocatore",50),Ee("onSave",function(a){return i.handleSave(a)})("onClose",function(){return i.handleClose()}),M()}2&r&&(z(11),ae("ngIf",i.giocatori.length),z(20),ae("ngIf",i.giocatori.length),z(1),ae("ngIf",i.giocatori.length&&i.etaMedia>0),z(1),ae("ngIf",i.nomeCapitano),z(20),ae("ngClass",Jr(32,cc,"numeroMaglia"===i.sortColumn&&"asc"===i.sortDirection,"numeroMaglia"===i.sortColumn&&"desc"===i.sortDirection,"numeroMaglia"!==i.sortColumn)),z(5),ae("ngClass",Jr(36,cc,"cognome"===i.sortColumn&&"asc"===i.sortDirection,"cognome"===i.sortColumn&&"desc"===i.sortDirection,"cognome"!==i.sortColumn)),z(5),ae("ngClass",Jr(40,cc,"nome"===i.sortColumn&&"asc"===i.sortDirection,"nome"===i.sortColumn&&"desc"===i.sortDirection,"nome"!==i.sortColumn)),z(5),ae("ngClass",Jr(44,cc,"dataDiNascita"===i.sortColumn&&"asc"===i.sortDirection,"dataDiNascita"===i.sortColumn&&"desc"===i.sortDirection,"dataDiNascita"!==i.sortColumn)),z(5),ae("ngClass",Jr(48,cc,"ruolo"===i.sortColumn&&"asc"===i.sortDirection,"ruolo"===i.sortColumn&&"desc"===i.sortDirection,"ruolo"!==i.sortColumn)),z(5),ae("ngClass",Jr(52,cc,"tesseraUisp"===i.sortColumn&&"asc"===i.sortDirection,"tesseraUisp"===i.sortColumn&&"desc"===i.sortDirection,"tesseraUisp"!==i.sortColumn)),z(5),ae("ngClass",Jr(56,cc,"codiceFiscale"===i.sortColumn&&"asc"===i.sortDirection,"codiceFiscale"===i.sortColumn&&"desc"===i.sortDirection,"codiceFiscale"!==i.sortColumn)),z(5),ae("ngClass",Jr(60,cc,"profilo"===i.sortColumn&&"asc"===i.sortDirection,"profilo"===i.sortColumn&&"desc"===i.sortDirection,"profilo"!==i.sortColumn)),z(5),ae("ngClass",Jr(64,cc,"email"===i.sortColumn&&"asc"===i.sortDirection,"email"===i.sortColumn&&"desc"===i.sortDirection,"email"!==i.sortColumn)),z(5),ae("ngClass",Jr(68,cc,"tagliaDivisa"===i.sortColumn&&"asc"===i.sortDirection,"tagliaDivisa"===i.sortColumn&&"desc"===i.sortDirection,"tagliaDivisa"!==i.sortColumn)),z(5),ae("ngClass",Jr(72,cc,"scadenzaCertificatoMedico"===i.sortColumn&&"asc"===i.sortDirection,"scadenzaCertificatoMedico"===i.sortColumn&&"desc"===i.sortDirection,"scadenzaCertificatoMedico"!==i.sortColumn)),z(9),ae("ngModel",i.filters.numeroMaglia),z(2),ae("ngModel",i.filters.cognome),z(2),ae("ngModel",i.filters.nome),z(2),ae("ngModel",i.filters.dataDiNascita),z(2),ae("ngModel",i.filters.ruolo),z(2),ae("ngModel",i.filters.tesseraUisp),z(2),ae("ngModel",i.filters.codiceFiscale),z(2),ae("ngModel",i.filters.profilo),z(2),ae("ngModel",i.filters.email),z(2),ae("ngModel",i.filters.tagliaDivisa),z(2),ae("ngModel",i.filters.scadenzaCertificatoMedico),z(3),ae("ngForOf",i.giocatoriOrdinati),z(1),ae("ngIf",0===i.filteredGiocatori.length),z(2),ae("ngIf",0===i.giocatori.length),z(2),ae("ngForOf",i.giocatoriOrdinati),z(1),ae("giocatore",i.selectedGiocatore)("isEditMode",i.isEditMode))},dependencies:[Fg,Wd,Sl,Qc,wh,rp,hbe,L0,qk],styles:[".file-input-hidden[_ngcontent-%COMP%]{display:none}.custom-spacing[_ngcontent-%COMP%]{margin-top:-20px}.numero-maglia-badge[_ngcontent-%COMP%]{min-width:40px;text-align:center}.desktop-header[_ngcontent-%COMP%]{margin-bottom:1rem}.desktop-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1.5rem 2rem;box-shadow:0 4px 12px #0d6efd33;color:#fff}.desktop-header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1.5rem}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.header-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:rgba(255,255,255,.15);border-radius:12px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.header-text[_ngcontent-%COMP%]{flex:1}.header-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;letter-spacing:-.5px}.header-meta[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-top:.5rem;flex-wrap:wrap}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.9rem;opacity:.95;font-weight:500}.meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.8}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;border-radius:8px;white-space:nowrap}@media (max-width: 1200px){.desktop-header-card[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.header-icon[_ngcontent-%COMP%]{width:48px;height:48px}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .header-title[_ngcontent-%COMP%]{font-size:1.5rem}.header-meta[_ngcontent-%COMP%]{gap:1rem}.meta-item[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 992px){.desktop-header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}}.mobile-header[_ngcontent-%COMP%]{padding:0}.mobile-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1rem;box-shadow:0 4px 8px #00000026;color:#fff}.mobile-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;font-weight:700;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid rgba(255,255,255,.2)}.mobile-header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.title-text[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.5px}.mobile-header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem .5rem;background:rgba(255,255,255,.1);border-radius:6px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.info-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;opacity:.9;font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}.mobile-header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.75rem;padding-top:.75rem;border-top:1px solid rgba(255,255,255,.2);flex-wrap:wrap}.mobile-header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;min-width:-moz-fit-content;min-width:fit-content;font-weight:500}.btn-header-action[_ngcontent-%COMP%]{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.2);color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .2s}.btn-header-action[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.25);border-color:#ffffff4d;color:#fff;transform:translateY(-1px)}.btn-header-action[_ngcontent-%COMP%]:active{background:rgba(255,255,255,.2);transform:translateY(0)}@media (max-width: 400px){.mobile-header-card[_ngcontent-%COMP%]{padding:.75rem}.mobile-header-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.5rem;padding-bottom:.5rem}.mobile-header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.info-item[_ngcontent-%COMP%]{padding:.35rem .4rem}.info-label[_ngcontent-%COMP%]{font-size:.7rem}.info-value[_ngcontent-%COMP%]{font-size:.85rem}}.table-container[_ngcontent-%COMP%]{background:white;border-radius:8px;box-shadow:0 1px 3px #00000014;overflow:hidden;margin-bottom:2rem}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;max-height:calc(100vh - 200px)}.modern-table[_ngcontent-%COMP%]{margin-bottom:0;font-size:.9rem}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}.table-header[_ngcontent-%COMP%]{background-color:#cfe2ff;color:#084298}.table-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#cfe2ff!important}.table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:.75rem;font-weight:600;white-space:nowrap;background-color:#cfe2ff!important}.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s}.sortable[_ngcontent-%COMP%]:hover{background-color:#0842981a}.th-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem}.th-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7}.filter-row[_ngcontent-%COMP%]{background-color:#cfe2ff}.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem;background-color:#cfe2ff;border-top:none}.filter-input[_ngcontent-%COMP%]{font-size:.85rem;border:1px solid #dee2e6;border-radius:4px;padding:.375rem .5rem}.filter-input[_ngcontent-%COMP%]:focus{border-color:#6ea8fe;box-shadow:0 0 0 .2rem #6ea8fe40}.table-header[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#084298;opacity:.8}.table-header[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#052c65;opacity:1}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .15s;border-bottom:1px solid #f8f9fa}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#0d6efd0a}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:middle}.actions-column[_ngcontent-%COMP%]{min-width:120px;text-align:center}.actions-cell[_ngcontent-%COMP%]{white-space:nowrap;text-align:center}.actions-cell[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.actions-cell[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.modern-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.35rem .65rem;font-weight:500}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.375rem}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:last-child{margin-right:0}.mobile-toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem}.mobile-toolbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 400px){.modern-table[_ngcontent-%COMP%]{font-size:.85rem}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{display:none}}.player-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem 1rem}.player-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:.5rem;background-color:#f8f9fa;border-radius:6px}.player-info-grid[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;font-size:.75rem;text-transform:uppercase;margin-bottom:.25rem}.player-info-grid[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-weight:500;color:#212529;font-size:.9rem}.accordion-button[_ngcontent-%COMP%]:after{display:none}"]})}}return n})();function Tr(n){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(n)}var Sr=Uint8Array,Qo=Uint16Array,yy=Int32Array,$m=new Sr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hm=new Sr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),by=new Sr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),JH=function(n,e){for(var t=new Qo(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];var i=new yy(t[30]);for(r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},eG=JH($m,2),LA=eG.r;eG.b[28]=258,LA[258]=28;for(var Kk=JH(Hm,0).r,wy=new Qo(32768),ii=0;ii<32768;++ii){var Ah=(43690&ii)>>1|(21845&ii)<<1;wy[ii]=((65280&(Ah=(61680&(Ah=(52428&Ah)>>2|(13107&Ah)<<2))>>4|(3855&Ah)<<4))>>8|(255&Ah)<<8)>>1}var Jc=function(n,e,t){for(var r=n.length,i=0,s=new Qo(e);i<r;++i)n[i]&&++s[n[i]-1];var a,o=new Qo(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;if(t){a=new Qo(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],d=o[n[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[wy[d]>>l]=c}else for(a=new Qo(r),i=0;i<r;++i)n[i]&&(a[i]=wy[o[n[i]-1]++]>>15-n[i]);return a},Ch=new Sr(288);for(ii=0;ii<144;++ii)Ch[ii]=8;for(ii=144;ii<256;++ii)Ch[ii]=9;for(ii=256;ii<280;++ii)Ch[ii]=7;for(ii=280;ii<288;++ii)Ch[ii]=8;var Ay=new Sr(32);for(ii=0;ii<32;++ii)Ay[ii]=5;var rG=Jc(Ch,9,0),sG=Jc(Ay,5,0),Cy=function(n){return(n+7)/8|0},eu=function(n,e,t){var r=e/8|0;n[r]|=t<<=7&e,n[r+1]|=t>>8},Gm=function(n,e,t){var r=e/8|0;n[r]|=t<<=7&e,n[r+1]|=t>>8,n[r+2]|=t>>16},UA=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:Zk,l:0};if(1==i){var o=new Sr(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(V,q){return V.f-q.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var f=new Qo(h+1),m=jA(t[u-1],f,0);if(m>e){r=0;var v=0,y=m-e,b=1<<y;for(s.sort(function(q,N){return f[N.s]-f[q.s]||q.f-N.f});r<i;++r){var A=s[r].s;if(!(f[A]>e))break;v+=b-(1<<m-f[A]),f[A]=e}for(v>>=y;v>0;){var T=s[r].s;f[T]<e?v-=1<<e-f[T]++-1:++r}for(;r>=0&&v;--r){var P=s[r].s;f[P]==e&&(--f[P],++v)}m=e}return{t:new Sr(f),l:m}},jA=function(n,e,t){return-1==n.s?Math.max(jA(n.l,e,t+1),jA(n.r,e,t+1)):e[n.s]=t},Yk=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Qo(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},qm=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Xk=function(n,e,t){var r=t.length,i=Cy(e+2);n[i]=255&r,n[i+1]=r>>8,n[i+2]=255^n[i],n[i+3]=255^n[i+1];for(var s=0;s<r;++s)n[i+s+4]=t[s];return 8*(i+4+r)},Qk=function(n,e,t,r,i,s,o,a,l,c,u){eu(e,u++,t),++i[256];for(var d=UA(i,15),h=d.t,f=d.l,m=UA(s,15),v=m.t,y=m.l,b=Yk(h),A=b.c,T=b.n,P=Yk(v),V=P.c,q=P.n,N=new Qo(19),D=0;D<A.length;++D)++N[31&A[D]];for(D=0;D<V.length;++D)++N[31&V[D]];for(var S=UA(N,7),F=S.t,I=S.l,O=19;O>4&&!F[by[O-1]];--O);var le,ue,he,be,L=c+5<<3,te=qm(i,Ch)+qm(s,Ay)+o,me=qm(i,h)+qm(s,v)+o+14+3*O+qm(N,F)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&L<=te&&L<=me)return Xk(e,u,n.subarray(l,l+c));if(eu(e,u,1+(me<te)),u+=2,me<te){le=Jc(h,f,0),ue=h,he=Jc(v,y,0),be=v;var Ge=Jc(F,I,0);for(eu(e,u,T-257),eu(e,u+5,q-1),eu(e,u+10,O-4),u+=14,D=0;D<O;++D)eu(e,u+3*D,F[by[D]]);u+=3*O;for(var Pe=[A,V],j=0;j<2;++j){var Y=Pe[j];for(D=0;D<Y.length;++D)eu(e,u,Ge[ne=31&Y[D]]),u+=F[ne],ne>15&&(eu(e,u,Y[D]>>5&127),u+=Y[D]>>12)}}else le=rG,ue=Ch,he=sG,be=Ay;for(D=0;D<a;++D){var ie=r[D];if(ie>255){var ne;Gm(e,u,le[257+(ne=ie>>18&31)]),u+=ue[ne+257],ne>7&&(eu(e,u,ie>>23&31),u+=$m[ne]);var de=31&ie;Gm(e,u,he[de]),u+=be[de],de>3&&(Gm(e,u,ie>>5&8191),u+=Hm[de])}else Gm(e,u,le[ie]),u+=ue[ie]}return Gm(e,u,le[256]),u+ue[256]},lG=new yy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Zk=new Sr(0),cG=function(n,e,t,r,i,s){var o=s.z||n.length,a=new Sr(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,u=7&(s.r||0);if(e){u&&(l[0]=s.r>>3);for(var d=lG[e-1],h=d>>13,f=8191&d,m=(1<<t)-1,v=s.p||new Qo(32768),y=s.h||new Qo(m+1),b=Math.ceil(t/3),A=2*b,T=function(De){return(n[De]^n[De+1]<<b^n[De+2]<<A)&m},P=new yy(25e3),V=new Qo(288),q=new Qo(32),N=0,D=0,S=s.i||0,F=0,I=s.w||0,O=0;S+2<o;++S){var L=T(S),te=32767&S,me=y[L];if(v[te]=me,y[L]=te,I<=S){var le=o-S;if((N>7e3||F>24576)&&(le>423||!c)){u=Qk(n,l,0,P,V,q,D,F,O,S-O,u),F=N=D=0,O=S;for(var ue=0;ue<286;++ue)V[ue]=0;for(ue=0;ue<30;++ue)q[ue]=0}var he=2,be=0,Ge=f,Pe=te-me&32767;if(le>2&&L==T(S-Pe))for(var j=Math.min(h,le)-1,Y=Math.min(32767,S),ne=Math.min(258,le);Pe<=Y&&--Ge&&te!=me;){if(n[S+he]==n[S+he-Pe]){for(var ie=0;ie<ne&&n[S+ie]==n[S+ie-Pe];++ie);if(ie>he){if(he=ie,be=Pe,ie>j)break;var de=Math.min(Pe,ie-2),fe=0;for(ue=0;ue<de;++ue){var Ce=S-Pe+ue&32767,ke=Ce-v[Ce]&32767;ke>fe&&(fe=ke,me=Ce)}}}Pe+=(te=me)-(me=v[te])&32767}if(be){P[F++]=268435456|LA[he]<<18|Kk[be];var Me=31&LA[he],Je=31&Kk[be];D+=$m[Me]+Hm[Je],++V[257+Me],++q[Je],I=S+he,++N}else P[F++]=n[S],++V[n[S]]}}for(S=Math.max(S,I);S<o;++S)P[F++]=n[S],++V[n[S]];u=Qk(n,l,c,P,V,q,D,F,O,S-O,u),c||(s.r=7&u|l[u/8|0]<<3,u-=7,s.h=y,s.p=v,s.i=S,s.w=I)}else{for(S=s.w||0;S<o+c;S+=65535){var et=S+65535;et>=o&&(l[u/8|0]=c,et=o),u=Xk(l,u+1,n.subarray(S,et))}s.i=o}return function(n,e,t){return(null==e||e<0)&&(e=0),(null==t||t>n.length)&&(t=n.length),new Sr(n.subarray(e,t))}(a,0,r+Cy(u)+i)},Jk=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=0|t.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}n=r,e=i},d:function(){return(255&(n%=65521))<<24|(65280&n)<<8|(255&(e%=65521))<<8|e>>8}}},$A=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Sr(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return cG(n,null==e.level?6:e.level,null==e.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):20:12+e.mem,t,r,i)},gi=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},_G=function(n,e){var t=e.level,r=0==t?0:t<6?1:9==t?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Jk();i.p(e.dictionary),gi(n,2,i.d())}};function Iy(n,e){e||(e={});var t=Jk();t.p(n);var r=$A(n,e,e.dictionary?6:2,4);return _G(r,e),gi(r,r.length-4,t.d()),r}var aR=typeof TextDecoder<"u"&&new TextDecoder;try{aR.decode(Zk,{stream:!0})}catch{}function IG(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function TG(n,e){return function Ube(n){if(Array.isArray(n))return n}(n)||function jbe(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(n,e)||function zbe(n,e){if(n){if("string"==typeof n)return IG(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?IG(n,e):void 0}}(n,e)||function $be(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SG(n,e="utf8"){return new TextDecoder(e).decode(n)}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;const Hbe=new TextEncoder,Wbe=(()=>{const n=new Uint8Array(4);return!((new Uint32Array(n.buffer)[0]=1)&n[0])})(),lR={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Sy{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=8192,t={}){let r=!1;"number"==typeof e?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof Sy)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),this.lastWrittenByte=r?s:0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=2*(this.offset+e),i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=lR[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===Wbe&&"uint8"!==t&&"int8"!==t){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new lR[t](a.buffer);return this.offset+=r,l.reverse(),l}const o=new lR[t](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return SG(this.readBytes(e))}decodeText(e=1,t="utf8"){return SG(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function Gbe(n){return Hbe.encode(n)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Km(n){let e=n.length;for(;--e>=0;)n[e]=0}const fR=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),XA=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),twe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),OG=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cd=new Array(576);Km(cd);const Py=new Array(60);Km(Py);const My=new Array(512);Km(My);const ky=new Array(256);Km(ky);const pR=new Array(29);Km(pR);const QA=new Array(30);function gR(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}let LG,FG,VG;function mR(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}Km(QA);const BG=n=>n<256?My[n]:My[256+(n>>>7)],Ry=(n,e)=>{n.pending_buf[n.pending++]=255&e,n.pending_buf[n.pending++]=e>>>8&255},Ia=(n,e,t)=>{n.bi_valid>16-t?(n.bi_buf|=e<<n.bi_valid&65535,Ry(n,n.bi_buf),n.bi_buf=e>>16-n.bi_valid,n.bi_valid+=t-16):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},tu=(n,e,t)=>{Ia(n,t[2*e],t[2*e+1])},UG=(n,e)=>{let t=0;do{t|=1&n,n>>>=1,t<<=1}while(--e>0);return t>>>1},jG=(n,e,t)=>{const r=new Array(16);let s,o,i=0;for(s=1;s<=15;s++)i=i+t[s-1]<<1,r[s]=i;for(o=0;o<=e;o++){let a=n[2*o+1];0!==a&&(n[2*o]=UG(r[a]++,a))}},zG=n=>{let e;for(e=0;e<286;e++)n.dyn_ltree[2*e]=0;for(e=0;e<30;e++)n.dyn_dtree[2*e]=0;for(e=0;e<19;e++)n.bl_tree[2*e]=0;n.dyn_ltree[512]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},$G=n=>{n.bi_valid>8?Ry(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},HG=(n,e,t,r)=>{const i=2*e,s=2*t;return n[i]<n[s]||n[i]===n[s]&&r[e]<=r[t]},_R=(n,e,t)=>{const r=n.heap[t];let i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&HG(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!HG(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},GG=(n,e,t)=>{let r,i,o,a,s=0;if(0!==n.sym_next)do{r=255&n.pending_buf[n.sym_buf+s++],r+=(255&n.pending_buf[n.sym_buf+s++])<<8,i=n.pending_buf[n.sym_buf+s++],0===r?tu(n,i,e):(o=ky[i],tu(n,o+256+1,e),a=fR[o],0!==a&&(i-=pR[o],Ia(n,i,a)),r--,o=BG(r),tu(n,o,t),a=XA[o],0!==a&&(r-=QA[o],Ia(n,r,a)))}while(s<n.sym_next);tu(n,256,e)},vR=(n,e)=>{const t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,c,l=-1;for(n.heap_len=0,n.heap_max=573,o=0;o<s;o++)0!==t[2*o]?(n.heap[++n.heap_len]=l=o,n.depth[o]=0):t[2*o+1]=0;for(;n.heap_len<2;)c=n.heap[++n.heap_len]=l<2?++l:0,t[2*c]=1,n.depth[c]=0,n.opt_len--,i&&(n.static_len-=r[2*c+1]);for(e.max_code=l,o=n.heap_len>>1;o>=1;o--)_R(n,t,o);c=s;do{o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],_R(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=a,t[2*c]=t[2*o]+t[2*a],n.depth[c]=(n.depth[o]>=n.depth[a]?n.depth[o]:n.depth[a])+1,t[2*o+1]=t[2*a+1]=c,n.heap[1]=c++,_R(n,t,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],((n,e)=>{const t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,u,d,h,f,m,v=0;for(h=0;h<=15;h++)n.bl_count[h]=0;for(t[2*n.heap[n.heap_max]+1]=0,c=n.heap_max+1;c<573;c++)u=n.heap[c],h=t[2*t[2*u+1]+1]+1,h>l&&(h=l,v++),t[2*u+1]=h,!(u>r)&&(n.bl_count[h]++,f=0,u>=a&&(f=o[u-a]),m=t[2*u],n.opt_len+=m*(h+f),s&&(n.static_len+=m*(i[2*u+1]+f)));if(0!==v){do{for(h=l-1;0===n.bl_count[h];)h--;n.bl_count[h]--,n.bl_count[h+1]+=2,n.bl_count[l]--,v-=2}while(v>0);for(h=l;0!==h;h--)for(u=n.bl_count[h];0!==u;)d=n.heap[--c],!(d>r)&&(t[2*d+1]!==h&&(n.opt_len+=(h-t[2*d+1])*t[2*d],t[2*d+1]=h),u--)}})(n,e),jG(t,l,n.bl_count)},qG=(n,e,t)=>{let r,s,i=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),e[2*(t+1)+1]=65535,r=0;r<=t;r++)s=o,o=e[2*(r+1)+1],!(++a<l&&s===o)&&(a<c?n.bl_tree[2*s]+=a:0!==s?(s!==i&&n.bl_tree[2*s]++,n.bl_tree[32]++):a<=10?n.bl_tree[34]++:n.bl_tree[36]++,a=0,i=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},WG=(n,e,t)=>{let r,s,i=-1,o=e[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=t;r++)if(s=o,o=e[2*(r+1)+1],!(++a<l&&s===o)){if(a<c)do{tu(n,s,n.bl_tree)}while(0!=--a);else 0!==s?(s!==i&&(tu(n,s,n.bl_tree),a--),tu(n,16,n.bl_tree),Ia(n,a-3,2)):a<=10?(tu(n,17,n.bl_tree),Ia(n,a-3,3)):(tu(n,18,n.bl_tree),Ia(n,a-11,7));a=0,i=s,0===o?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}};let KG=!1;const YG=(n,e,t,r)=>{Ia(n,0+(r?1:0),3),$G(n),Ry(n,t),Ry(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t};var vwe={_tr_init:n=>{KG||((()=>{let n,e,t,r,i;const s=new Array(16);for(t=0,r=0;r<28;r++)for(pR[r]=t,n=0;n<1<<fR[r];n++)ky[t++]=r;for(ky[t-1]=r,i=0,r=0;r<16;r++)for(QA[r]=i,n=0;n<1<<XA[r];n++)My[i++]=r;for(i>>=7;r<30;r++)for(QA[r]=i<<7,n=0;n<1<<XA[r]-7;n++)My[256+i++]=r;for(e=0;e<=15;e++)s[e]=0;for(n=0;n<=143;)cd[2*n+1]=8,n++,s[8]++;for(;n<=255;)cd[2*n+1]=9,n++,s[9]++;for(;n<=279;)cd[2*n+1]=7,n++,s[7]++;for(;n<=287;)cd[2*n+1]=8,n++,s[8]++;for(jG(cd,287,s),n=0;n<30;n++)Py[2*n+1]=5,Py[2*n]=UG(n,5);LG=new gR(cd,fR,257,286,15),FG=new gR(Py,XA,0,30,15),VG=new gR(new Array(0),twe,0,19,7)})(),KG=!0),n.l_desc=new mR(n.dyn_ltree,LG),n.d_desc=new mR(n.dyn_dtree,FG),n.bl_desc=new mR(n.bl_tree,VG),n.bi_buf=0,n.bi_valid=0,zG(n)},_tr_stored_block:YG,_tr_flush_block:(n,e,t,r)=>{let i,s,o=0;n.level>0?(2===n.strm.data_type&&(n.strm.data_type=(n=>{let t,e=4093624447;for(t=0;t<=31;t++,e>>>=1)if(1&e&&0!==n.dyn_ltree[2*t])return 0;if(0!==n.dyn_ltree[18]||0!==n.dyn_ltree[20]||0!==n.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==n.dyn_ltree[2*t])return 1;return 0})(n)),vR(n,n.l_desc),vR(n,n.d_desc),o=(n=>{let e;for(qG(n,n.dyn_ltree,n.l_desc.max_code),qG(n,n.dyn_dtree,n.d_desc.max_code),vR(n,n.bl_desc),e=18;e>=3&&0===n.bl_tree[2*OG[e]+1];e--);return n.opt_len+=3*(e+1)+5+5+4,e})(n),i=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=i&&(i=s)):i=s=t+5,t+4<=i&&-1!==e?YG(n,e,t,r):4===n.strategy||s===i?(Ia(n,2+(r?1:0),3),GG(n,cd,Py)):(Ia(n,4+(r?1:0),3),((n,e,t,r)=>{let i;for(Ia(n,e-257,5),Ia(n,t-1,5),Ia(n,r-4,4),i=0;i<r;i++)Ia(n,n.bl_tree[2*OG[i]+1],3);WG(n,n.dyn_ltree,e-1),WG(n,n.dyn_dtree,t-1)})(n,n.l_desc.max_code+1,n.d_desc.max_code+1,o+1),GG(n,n.dyn_ltree,n.dyn_dtree)),zG(n),r&&$G(n)},_tr_tally:(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,0===e?n.dyn_ltree[2*t]++:(n.matches++,e--,n.dyn_ltree[2*(ky[t]+256+1)]++,n.dyn_dtree[2*BG(e)]++),n.sym_next===n.sym_end),_tr_align:n=>{Ia(n,2,3),tu(n,256,cd),(n=>{16===n.bi_valid?(Ry(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(n)}},Ny=(n,e,t,r)=>{let i=65535&n|0,s=n>>>16&65535|0,o=0;for(;0!==t;){o=t>2e3?2e3:t,t-=o;do{i=i+e[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};const bwe=new Uint32Array((()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e})());var Fs=(n,e,t,r)=>{const i=bwe,s=r+t;n^=-1;for(let o=r;o<s;o++)n=n>>>8^i[255&(n^e[o])];return-1^n},op={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ap={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:wwe,_tr_stored_block:yR,_tr_flush_block:Awe,_tr_tally:Th,_tr_align:Cwe}=vwe,{Z_NO_FLUSH:Sh,Z_PARTIAL_FLUSH:Ewe,Z_FULL_FLUSH:Iwe,Z_FINISH:Nl,Z_BLOCK:XG,Z_OK:to,Z_STREAM_END:QG,Z_STREAM_ERROR:nu,Z_DATA_ERROR:Twe,Z_BUF_ERROR:bR,Z_DEFAULT_COMPRESSION:Swe,Z_FILTERED:xwe,Z_HUFFMAN_ONLY:ZA,Z_RLE:Dwe,Z_FIXED:Pwe,Z_DEFAULT_STRATEGY:Mwe,Z_UNKNOWN:kwe,Z_DEFLATED:JA}=ap,ru=262,up=(n,e)=>(n.msg=op[e],e),ZG=n=>2*n-(n>4?9:0),Dh=n=>{let e=n.length;for(;--e>=0;)n[e]=0},$we=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do{t=n.head[--r],n.head[r]=t>=i?t-i:0}while(--e);e=i,r=e;do{t=n.prev[--r],n.prev[r]=t>=i?t-i:0}while(--e)};let Ph=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask;const Za=n=>{const e=n.state;let t=e.pending;t>n.avail_out&&(t=n.avail_out),0!==t&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,0===e.pending&&(e.pending_out=0))},Ja=(n,e)=>{Awe(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,Za(n.strm)},pr=(n,e)=>{n.pending_buf[n.pending++]=e},Ly=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=255&e},SR=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),0===i?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),1===n.state.wrap?n.adler=Ny(n.adler,e,i,t):2===n.state.wrap&&(n.adler=Fs(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},JG=(n,e)=>{let i,s,t=n.max_chain_length,r=n.strstart,o=n.prev_length,a=n.nice_match;const l=n.strstart>n.w_size-ru?n.strstart-(n.w_size-ru):0,c=n.window,u=n.w_mask,d=n.prev,h=n.strstart+258;let f=c[r+o-1],m=c[r+o];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do{if(i=e,c[i+o]===m&&c[i+o-1]===f&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<h);if(s=258-(h-r),r=h-258,s>o){if(n.match_start=e,o=s,s>=a)break;f=c[r+o-1],m=c[r+o]}}}while((e=d[e&u])>l&&0!=--t);return o<=n.lookahead?o:n.lookahead},Jm=n=>{const e=n.w_size;let t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-ru)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),$we(n),r+=e),0===n.strm.avail_in)break;if(t=SR(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=3)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=Ph(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=Ph(n,n.ins_h,n.window[i+3-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<3)););}while(n.lookahead<ru&&0!==n.strm.avail_in)},eq=(n,e)=>{let r,i,s,t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,o=0,a=n.strm.avail_in;do{if(r=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>s&&(r=s),r<t&&(0===r&&e!==Nl||e===Sh||r!==i+n.strm.avail_in)))break;o=e===Nl&&r===i+n.strm.avail_in?1:0,yR(n,0,0,o),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,Za(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(SR(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(0===o);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),o?4:e!==Sh&&e!==Nl&&0===n.strm.avail_in&&n.strstart===n.block_start?2:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(SR(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,t=s>n.w_size?n.w_size:s,i=n.strstart-n.block_start,(i>=t||(i||e===Nl)&&e!==Sh&&0===n.strm.avail_in&&i<=s)&&(r=i>s?s:i,o=e===Nl&&0===n.strm.avail_in&&r===i?1:0,yR(n,n.block_start,r,o),n.block_start+=r,Za(n.strm)),o?3:1)},xR=(n,e)=>{let t,r;for(;;){if(n.lookahead<ru){if(Jm(n),n.lookahead<ru&&e===Sh)return 1;if(0===n.lookahead)break}if(t=0,n.lookahead>=3&&(n.ins_h=Ph(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),0!==t&&n.strstart-t<=n.w_size-ru&&(n.match_length=JG(n,t)),n.match_length>=3)if(r=Th(n,n.strstart-n.match_start,n.match_length-3),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=3){n.match_length--;do{n.strstart++,n.ins_h=Ph(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart}while(0!=--n.match_length);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Ph(n,n.ins_h,n.window[n.strstart+1]);else r=Th(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(Ja(n,!1),0===n.strm.avail_out))return 1}return n.insert=n.strstart<2?n.strstart:2,e===Nl?(Ja(n,!0),0===n.strm.avail_out?3:4):n.sym_next&&(Ja(n,!1),0===n.strm.avail_out)?1:2},e_=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<ru){if(Jm(n),n.lookahead<ru&&e===Sh)return 1;if(0===n.lookahead)break}if(t=0,n.lookahead>=3&&(n.ins_h=Ph(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=2,0!==t&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-ru&&(n.match_length=JG(n,t),n.match_length<=5&&(n.strategy===xwe||3===n.match_length&&n.strstart-n.match_start>4096)&&(n.match_length=2)),n.prev_length>=3&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-3,r=Th(n,n.strstart-1-n.prev_match,n.prev_length-3),n.lookahead-=n.prev_length-1,n.prev_length-=2;do{++n.strstart<=i&&(n.ins_h=Ph(n,n.ins_h,n.window[n.strstart+3-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart)}while(0!=--n.prev_length);if(n.match_available=0,n.match_length=2,n.strstart++,r&&(Ja(n,!1),0===n.strm.avail_out))return 1}else if(n.match_available){if(r=Th(n,0,n.window[n.strstart-1]),r&&Ja(n,!1),n.strstart++,n.lookahead--,0===n.strm.avail_out)return 1}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Th(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<2?n.strstart:2,e===Nl?(Ja(n,!0),0===n.strm.avail_out?3:4):n.sym_next&&(Ja(n,!1),0===n.strm.avail_out)?1:2};function iu(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}const Fy=[new iu(0,0,0,0,eq),new iu(4,4,8,4,xR),new iu(4,5,16,8,xR),new iu(4,6,32,32,xR),new iu(4,4,16,16,e_),new iu(8,16,32,32,e_),new iu(8,16,128,128,e_),new iu(8,32,128,256,e_),new iu(32,128,258,1024,e_),new iu(32,258,258,4096,e_)];function Wwe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=JA,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Dh(this.dyn_ltree),Dh(this.dyn_dtree),Dh(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Dh(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Dh(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Vy=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},tq=n=>{if(Vy(n))return up(n,nu);n.total_in=n.total_out=0,n.data_type=kwe;const e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,n.adler=2===e.wrap?0:1,e.last_flush=-2,wwe(e),to},nq=n=>{const e=tq(n);return e===to&&(n=>{n.window_size=2*n.w_size,Dh(n.head),n.max_lazy_match=Fy[n.level].max_lazy,n.good_match=Fy[n.level].good_length,n.nice_match=Fy[n.level].nice_length,n.max_chain_length=Fy[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0})(n.state),e},rq=(n,e,t,r,i,s)=>{if(!n)return nu;let o=1;if(e===Swe&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||t!==JA||r<8||r>15||e<0||e>9||s<0||s>Pwe||8===r&&1!==o)return up(n,nu);8===r&&(r=9);const a=new Wwe;return n.state=a,a.strm=n,a.status=42,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=s,a.method=t,nq(n)};var By={deflateInit:(n,e)=>rq(n,e,JA,15,8,Mwe),deflateInit2:rq,deflateReset:nq,deflateResetKeep:tq,deflateSetHeader:(n,e)=>Vy(n)||2!==n.state.wrap?nu:(n.state.gzhead=e,to),deflate:(n,e)=>{if(Vy(n)||e>XG||e<0)return n?up(n,nu):nu;const t=n.state;if(!n.output||0!==n.avail_in&&!n.input||666===t.status&&e!==Nl)return up(n,0===n.avail_out?bR:nu);const r=t.last_flush;if(t.last_flush=e,0!==t.pending){if(Za(n),0===n.avail_out)return t.last_flush=-1,to}else if(0===n.avail_in&&ZG(e)<=ZG(r)&&e!==Nl)return up(n,bR);if(666===t.status&&0!==n.avail_in)return up(n,bR);if(42===t.status&&0===t.wrap&&(t.status=113),42===t.status){let i=JA+(t.w_bits-8<<4)<<8,s=-1;if(s=t.strategy>=ZA||t.level<2?0:t.level<6?1:6===t.level?2:3,i|=s<<6,0!==t.strstart&&(i|=32),i+=31-i%31,Ly(t,i),0!==t.strstart&&(Ly(t,n.adler>>>16),Ly(t,65535&n.adler)),n.adler=1,t.status=113,Za(n),0!==t.pending)return t.last_flush=-1,to}if(57===t.status)if(n.adler=0,pr(t,31),pr(t,139),pr(t,8),t.gzhead)pr(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),pr(t,255&t.gzhead.time),pr(t,t.gzhead.time>>8&255),pr(t,t.gzhead.time>>16&255),pr(t,t.gzhead.time>>24&255),pr(t,9===t.level?2:t.strategy>=ZA||t.level<2?4:0),pr(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(pr(t,255&t.gzhead.extra.length),pr(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Fs(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(pr(t,0),pr(t,0),pr(t,0),pr(t,0),pr(t,0),pr(t,9===t.level?2:t.strategy>=ZA||t.level<2?4:0),pr(t,3),t.status=113,Za(n),0!==t.pending)return t.last_flush=-1,to;if(69===t.status){if(t.gzhead.extra){let i=t.pending,s=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Fs(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,Za(n),0!==t.pending)return t.last_flush=-1,to;i=0,s-=a}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>i&&(n.adler=Fs(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=73}if(73===t.status){if(t.gzhead.name){let s,i=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Fs(n.adler,t.pending_buf,t.pending-i,i)),Za(n),0!==t.pending)return t.last_flush=-1,to;i=0}s=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,pr(t,s)}while(0!==s);t.gzhead.hcrc&&t.pending>i&&(n.adler=Fs(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=91}if(91===t.status){if(t.gzhead.comment){let s,i=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Fs(n.adler,t.pending_buf,t.pending-i,i)),Za(n),0!==t.pending)return t.last_flush=-1,to;i=0}s=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,pr(t,s)}while(0!==s);t.gzhead.hcrc&&t.pending>i&&(n.adler=Fs(n.adler,t.pending_buf,t.pending-i,i))}t.status=103}if(103===t.status){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Za(n),0!==t.pending))return t.last_flush=-1,to;pr(t,255&n.adler),pr(t,n.adler>>8&255),n.adler=0}if(t.status=113,Za(n),0!==t.pending)return t.last_flush=-1,to}if(0!==n.avail_in||0!==t.lookahead||e!==Sh&&666!==t.status){let i=0===t.level?eq(t,e):t.strategy===ZA?((n,e)=>{let t;for(;;){if(0===n.lookahead&&(Jm(n),0===n.lookahead)){if(e===Sh)return 1;break}if(n.match_length=0,t=Th(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(Ja(n,!1),0===n.strm.avail_out))return 1}return n.insert=0,e===Nl?(Ja(n,!0),0===n.strm.avail_out?3:4):n.sym_next&&(Ja(n,!1),0===n.strm.avail_out)?1:2})(t,e):t.strategy===Dwe?((n,e)=>{let t,r,i,s;const o=n.window;for(;;){if(n.lookahead<=258){if(Jm(n),n.lookahead<=258&&e===Sh)return 1;if(0===n.lookahead)break}if(n.match_length=0,n.lookahead>=3&&n.strstart>0&&(i=n.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=n.strstart+258;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);n.match_length=258-(s-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=3?(t=Th(n,1,n.match_length-3),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Th(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(Ja(n,!1),0===n.strm.avail_out))return 1}return n.insert=0,e===Nl?(Ja(n,!0),0===n.strm.avail_out?3:4):n.sym_next&&(Ja(n,!1),0===n.strm.avail_out)?1:2})(t,e):Fy[t.level].func(t,e);if((3===i||4===i)&&(t.status=666),1===i||3===i)return 0===n.avail_out&&(t.last_flush=-1),to;if(2===i&&(e===Ewe?Cwe(t):e!==XG&&(yR(t,0,0,!1),e===Iwe&&(Dh(t.head),0===t.lookahead&&(t.strstart=0,t.block_start=0,t.insert=0))),Za(n),0===n.avail_out))return t.last_flush=-1,to}return e!==Nl?to:t.wrap<=0?QG:(2===t.wrap?(pr(t,255&n.adler),pr(t,n.adler>>8&255),pr(t,n.adler>>16&255),pr(t,n.adler>>24&255),pr(t,255&n.total_in),pr(t,n.total_in>>8&255),pr(t,n.total_in>>16&255),pr(t,n.total_in>>24&255)):(Ly(t,n.adler>>>16),Ly(t,65535&n.adler)),Za(n),t.wrap>0&&(t.wrap=-t.wrap),0!==t.pending?to:QG)},deflateEnd:n=>{if(Vy(n))return nu;const e=n.state.status;return n.state=null,113===e?up(n,Twe):to},deflateSetDictionary:(n,e)=>{let t=e.length;if(Vy(n))return nu;const r=n.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return nu;if(1===i&&(n.adler=Ny(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){0===i&&(Dh(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(e.subarray(t-r.w_size,t),0),e=l,t=r.w_size}const s=n.avail_in,o=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,Jm(r);r.lookahead>=3;){let l=r.strstart,c=r.lookahead-2;do{r.ins_h=Ph(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--c);r.strstart=l,r.lookahead=2,Jm(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,n.next_in=o,n.input=a,n.avail_in=s,r.wrap=i,to},deflateInfo:"pako deflate (from Nodeca project)"};const l2e=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var eC={assign:function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(const r in t)l2e(t,r)&&(n[r]=t[r])}}return n},flattenChunks:n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,s=n.length;r<s;r++){let o=n[r];t.set(o,i),i+=o.length}return t}};let iq=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{iq=!1}const Uy=new Uint8Array(256);for(let n=0;n<256;n++)Uy[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Uy[254]=Uy[254]=1;var jy={string2buf:n=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(n);let e,t,r,i,s,o=n.length,a=0;for(i=0;i<o;i++)t=n.charCodeAt(i),55296==(64512&t)&&i+1<o&&(r=n.charCodeAt(i+1),56320==(64512&r)&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)t=n.charCodeAt(i),55296==(64512&t)&&i+1<o&&(r=n.charCodeAt(i+1),56320==(64512&r)&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|63&t):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|63&t):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|63&t);return e},buf2string:(n,e)=>{const t=e||n.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(n.subarray(0,e));let r,i;const s=new Array(2*t);for(i=0,r=0;r<t;){let o=n[r++];if(o<128){s[i++]=o;continue}let a=Uy[o];if(a>4)s[i++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&r<t;)o=o<<6|63&n[r++],a--;a>1?s[i++]=65533:o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|1023&o)}}return((n,e)=>{if(e<65534&&n.subarray&&iq)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t})(s,i)},utf8border:(n,e)=>{(e=e||n.length)>n.length&&(e=n.length);let t=e-1;for(;t>=0&&128==(192&n[t]);)t--;return t<0||0===t?e:t+Uy[n[t]]>e?t:e}},sq=function g2e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const oq=Object.prototype.toString,{Z_NO_FLUSH:m2e,Z_SYNC_FLUSH:_2e,Z_FULL_FLUSH:v2e,Z_FINISH:y2e,Z_OK:tC,Z_STREAM_END:b2e,Z_DEFAULT_COMPRESSION:w2e,Z_DEFAULT_STRATEGY:A2e,Z_DEFLATED:C2e}=ap;function zy(n){this.options=eC.assign({level:w2e,method:C2e,chunkSize:16384,windowBits:15,memLevel:8,strategy:A2e},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sq,this.strm.avail_out=0;let t=By.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==tC)throw new Error(op[t]);if(e.header&&By.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(r="string"==typeof e.dictionary?jy.string2buf(e.dictionary):"[object ArrayBuffer]"===oq.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,t=By.deflateSetDictionary(this.strm,r),t!==tC)throw new Error(op[t]);this._dict_set=!0}}function DR(n,e){const t=new zy(e);if(t.push(n,!0),t.err)throw t.msg||op[t.err];return t.result}zy.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?y2e:m2e,t.input="string"==typeof n?jy.string2buf(n):"[object ArrayBuffer]"===oq.call(n)?new Uint8Array(n):n,t.next_in=0,t.avail_in=t.input.length;;)if(0===t.avail_out&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(s===_2e||s===v2e)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(i=By.deflate(t,s),i===b2e)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=By.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===tC;if(0!==t.avail_out){if(s>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(0===t.avail_in)break}else this.onData(t.output)}return!0},zy.prototype.onData=function(n){this.chunks.push(n)},zy.prototype.onEnd=function(n){n===tC&&(this.result=eC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};var M2e={Deflate:zy,deflate:DR,deflateRaw:function E2e(n,e){return(e=e||{}).raw=!0,DR(n,e)},gzip:function I2e(n,e){return(e=e||{}).gzip=!0,DR(n,e)},constants:ap};const nC=16209;var R2e=function(e,t){let r,i,s,o,a,l,c,u,d,h,f,m,v,y,b,A,T,P,V,q,N,D,S,F;const I=e.state;r=e.next_in,S=e.input,i=r+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=I.dmax,c=I.wsize,u=I.whave,d=I.wnext,h=I.window,f=I.hold,m=I.bits,v=I.lencode,y=I.distcode,b=(1<<I.lenbits)-1,A=(1<<I.distbits)-1;e:do{m<15&&(f+=S[r++]<<m,m+=8,f+=S[r++]<<m,m+=8),T=v[f&b];t:for(;;){if(P=T>>>24,f>>>=P,m-=P,P=T>>>16&255,0===P)F[s++]=65535&T;else{if(!(16&P)){if(64&P){if(32&P){I.mode=16191;break e}e.msg="invalid literal/length code",I.mode=nC;break e}T=v[(65535&T)+(f&(1<<P)-1)];continue t}for(V=65535&T,P&=15,P&&(m<P&&(f+=S[r++]<<m,m+=8),V+=f&(1<<P)-1,f>>>=P,m-=P),m<15&&(f+=S[r++]<<m,m+=8,f+=S[r++]<<m,m+=8),T=y[f&A];;){if(P=T>>>24,f>>>=P,m-=P,P=T>>>16&255,16&P){if(q=65535&T,P&=15,m<P&&(f+=S[r++]<<m,m+=8,m<P&&(f+=S[r++]<<m,m+=8)),q+=f&(1<<P)-1,q>l){e.msg="invalid distance too far back",I.mode=nC;break e}if(f>>>=P,m-=P,P=s-o,q>P){if(P=q-P,P>u&&I.sane){e.msg="invalid distance too far back",I.mode=nC;break e}if(N=0,D=h,0===d){if(N+=c-P,P<V){V-=P;do{F[s++]=h[N++]}while(--P);N=s-q,D=F}}else if(d<P){if(N+=c+d-P,P-=d,P<V){V-=P;do{F[s++]=h[N++]}while(--P);if(N=0,d<V){P=d,V-=P;do{F[s++]=h[N++]}while(--P);N=s-q,D=F}}}else if(N+=d-P,P<V){V-=P;do{F[s++]=h[N++]}while(--P);N=s-q,D=F}for(;V>2;)F[s++]=D[N++],F[s++]=D[N++],F[s++]=D[N++],V-=3;V&&(F[s++]=D[N++],V>1&&(F[s++]=D[N++]))}else{N=s-q;do{F[s++]=F[N++],F[s++]=F[N++],F[s++]=F[N++],V-=3}while(V>2);V&&(F[s++]=F[N++],V>1&&(F[s++]=F[N++]))}break}if(64&P){e.msg="invalid distance code",I.mode=nC;break e}T=y[(65535&T)+(f&(1<<P)-1)]}}break}}while(r<i&&s<a);V=m>>3,r-=V,m-=V<<3,f&=(1<<m)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=s<a?a-s+257:257-(s-a),I.hold=f,I.bits=m};const N2e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),O2e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),L2e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),F2e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $y=(n,e,t,r,i,s,o,a)=>{const l=a.bits;let T,P,V,q,N,S,c=0,u=0,d=0,h=0,f=0,m=0,v=0,y=0,b=0,A=0,D=null;const F=new Uint16Array(16),I=new Uint16Array(16);let L,te,me,O=null;for(c=0;c<=15;c++)F[c]=0;for(u=0;u<r;u++)F[e[t+u]]++;for(f=l,h=15;h>=1&&0===F[h];h--);if(f>h&&(f=h),0===h)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(d=1;d<h&&0===F[d];d++);for(f<d&&(f=d),y=1,c=1;c<=15;c++)if(y<<=1,y-=F[c],y<0)return-1;if(y>0&&(0===n||1!==h))return-1;for(I[1]=0,c=1;c<15;c++)I[c+1]=I[c]+F[c];for(u=0;u<r;u++)0!==e[t+u]&&(o[I[e[t+u]]++]=u);if(0===n?(D=O=o,S=20):1===n?(D=N2e,O=O2e,S=257):(D=L2e,O=F2e,S=0),A=0,u=0,c=d,N=s,m=f,v=0,V=-1,b=1<<f,q=b-1,1===n&&b>852||2===n&&b>592)return 1;for(;;){L=c-v,o[u]+1<S?(te=0,me=o[u]):o[u]>=S?(te=O[o[u]-S],me=D[o[u]-S]):(te=96,me=0),T=1<<c-v,P=1<<m,d=P;do{P-=T,i[N+(A>>v)+P]=L<<24|te<<16|me|0}while(0!==P);for(T=1<<c-1;A&T;)T>>=1;if(0!==T?(A&=T-1,A+=T):A=0,u++,0==--F[c]){if(c===h)break;c=e[t+o[u]]}if(c>f&&(A&q)!==V){for(0===v&&(v=f),N+=d,m=c-v,y=1<<m;m+v<h&&(y-=F[m+v],!(y<=0));)m++,y<<=1;if(b+=1<<m,1===n&&b>852||2===n&&b>592)return 1;V=A&q,i[V]=f<<24|m<<16|N-s|0}}return 0!==A&&(i[N+A]=c-v<<24|64<<16|0),a.bits=f,0};const{Z_FINISH:fq,Z_BLOCK:B2e,Z_TREES:rC,Z_OK:dp,Z_STREAM_END:U2e,Z_NEED_DICT:j2e,Z_STREAM_ERROR:Ol,Z_DATA_ERROR:pq,Z_MEM_ERROR:gq,Z_BUF_ERROR:z2e,Z_DEFLATED:mq}=ap,iC=16180,sC=16190,ud=16191,oC=16199,aC=16200,mi=16209,Uq=n=>(n>>>24&255)+(n>>>8&65280)+((65280&n)<<8)+((255&n)<<24);function q2e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const hp=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<iC||e.mode>16211?1:0},jq=n=>{if(hp(n))return Ol;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=1&e.wrap),e.mode=iC,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,dp},zq=n=>{if(hp(n))return Ol;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,jq(n)},$q=(n,e)=>{let t;if(hp(n))return Ol;const r=n.state;return e<0?(t=0,e=-e):(t=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Ol:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,zq(n))},Hq=(n,e)=>{if(!n)return Ol;const t=new q2e;n.state=t,t.strm=n,t.window=null,t.mode=iC;const r=$q(n,e);return r!==dp&&(n.state=null),r};let NR,OR,Gq=!0;const K2e=n=>{if(Gq){NR=new Int32Array(512),OR=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for($y(1,n.lens,0,288,NR,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;$y(2,n.lens,0,32,OR,0,n.work,{bits:5}),Gq=!1}n.lencode=NR,n.lenbits=9,n.distcode=OR,n.distbits=5},qq=(n,e,t,r)=>{let i;const s=n.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(t-r,t-r+i),s.wnext),(r-=i)?(s.window.set(e.subarray(t-r,t),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var dd={inflateReset:zq,inflateReset2:$q,inflateResetKeep:jq,inflateInit:n=>Hq(n,15),inflateInit2:Hq,inflate:(n,e)=>{let t,r,i,s,o,a,l,c,u,d,h,f,m,v,b,A,T,P,V,q,N,D,y=0;const S=new Uint8Array(4);let F,I;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(hp(n)||!n.output||!n.input&&0!==n.avail_in)return Ol;t=n.state,t.mode===ud&&(t.mode=16192),o=n.next_out,i=n.output,l=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,c=t.hold,u=t.bits,d=a,h=l,D=dp;e:for(;;)switch(t.mode){case iC:if(0===t.wrap){t.mode=16192;break}for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(2&t.wrap&&35615===c){0===t.wbits&&(t.wbits=15),t.check=0,S[0]=255&c,S[1]=c>>>8&255,t.check=Fs(t.check,S,2,0),c=0,u=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&c)<<8)+(c>>8))%31){n.msg="incorrect header check",t.mode=mi;break}if((15&c)!==mq){n.msg="unknown compression method",t.mode=mi;break}if(c>>>=4,u-=4,N=8+(15&c),0===t.wbits&&(t.wbits=N),N>15||N>t.wbits){n.msg="invalid window size",t.mode=mi;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=512&c?16189:ud,c=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(t.flags=c,(255&t.flags)!==mq){n.msg="unknown compression method",t.mode=mi;break}if(57344&t.flags){n.msg="unknown header flags set",t.mode=mi;break}t.head&&(t.head.text=c>>8&1),512&t.flags&&4&t.wrap&&(S[0]=255&c,S[1]=c>>>8&255,t.check=Fs(t.check,S,2,0)),c=0,u=0,t.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}t.head&&(t.head.time=c),512&t.flags&&4&t.wrap&&(S[0]=255&c,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,t.check=Fs(t.check,S,4,0)),c=0,u=0,t.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}t.head&&(t.head.xflags=255&c,t.head.os=c>>8),512&t.flags&&4&t.wrap&&(S[0]=255&c,S[1]=c>>>8&255,t.check=Fs(t.check,S,2,0)),c=0,u=0,t.mode=16184;case 16184:if(1024&t.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}t.length=c,t.head&&(t.head.extra_len=c),512&t.flags&&4&t.wrap&&(S[0]=255&c,S[1]=c>>>8&255,t.check=Fs(t.check,S,2,0)),c=0,u=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(f=t.length,f>a&&(f=a),f&&(t.head&&(N=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(s,s+f),N)),512&t.flags&&4&t.wrap&&(t.check=Fs(t.check,r,f,s)),a-=f,s+=f,t.length-=f),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(0===a)break e;f=0;do{N=r[s+f++],t.head&&N&&t.length<65536&&(t.head.name+=String.fromCharCode(N))}while(N&&f<a);if(512&t.flags&&4&t.wrap&&(t.check=Fs(t.check,r,f,s)),a-=f,s+=f,N)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(0===a)break e;f=0;do{N=r[s+f++],t.head&&N&&t.length<65536&&(t.head.comment+=String.fromCharCode(N))}while(N&&f<a);if(512&t.flags&&4&t.wrap&&(t.check=Fs(t.check,r,f,s)),a-=f,s+=f,N)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(4&t.wrap&&c!==(65535&t.check)){n.msg="header crc mismatch",t.mode=mi;break}c=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=ud;break;case 16189:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.adler=t.check=Uq(c),c=0,u=0,t.mode=sC;case sC:if(0===t.havedict)return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,j2e;n.adler=t.check=1,t.mode=ud;case ud:if(e===B2e||e===rC)break e;case 16192:if(t.last){c>>>=7&u,u-=7&u,t.mode=16206;break}for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}switch(t.last=1&c,c>>>=1,u-=1,3&c){case 0:t.mode=16193;break;case 1:if(K2e(t),t.mode=oC,e===rC){c>>>=2,u-=2;break e}break;case 2:t.mode=16196;break;case 3:n.msg="invalid block type",t.mode=mi}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){n.msg="invalid stored block lengths",t.mode=mi;break}if(t.length=65535&c,c=0,u=0,t.mode=16194,e===rC)break e;case 16194:t.mode=16195;case 16195:if(f=t.length,f){if(f>a&&(f=a),f>l&&(f=l),0===f)break e;i.set(r.subarray(s,s+f),o),a-=f,s+=f,l-=f,o+=f,t.length-=f;break}t.mode=ud;break;case 16196:for(;u<14;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(t.nlen=257+(31&c),c>>>=5,u-=5,t.ndist=1+(31&c),c>>>=5,u-=5,t.ncode=4+(15&c),c>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=mi;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}t.lens[O[t.have++]]=7&c,c>>>=3,u-=3}for(;t.have<19;)t.lens[O[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,F={bits:t.lenbits},D=$y(0,t.lens,0,19,t.lencode,0,t.work,F),t.lenbits=F.bits,D){n.msg="invalid code lengths set",t.mode=mi;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;y=t.lencode[c&(1<<t.lenbits)-1],b=y>>>24,A=y>>>16&255,T=65535&y,!(b<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(T<16)c>>>=b,u-=b,t.lens[t.have++]=T;else{if(16===T){for(I=b+2;u<I;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=b,u-=b,0===t.have){n.msg="invalid bit length repeat",t.mode=mi;break}N=t.lens[t.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===T){for(I=b+3;u<I;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=b,u-=b,N=0,f=3+(7&c),c>>>=3,u-=3}else{for(I=b+7;u<I;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=b,u-=b,N=0,f=11+(127&c),c>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=mi;break}for(;f--;)t.lens[t.have++]=N}}if(t.mode===mi)break;if(0===t.lens[256]){n.msg="invalid code -- missing end-of-block",t.mode=mi;break}if(t.lenbits=9,F={bits:t.lenbits},D=$y(1,t.lens,0,t.nlen,t.lencode,0,t.work,F),t.lenbits=F.bits,D){n.msg="invalid literal/lengths set",t.mode=mi;break}if(t.distbits=6,t.distcode=t.distdyn,F={bits:t.distbits},D=$y(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,F),t.distbits=F.bits,D){n.msg="invalid distances set",t.mode=mi;break}if(t.mode=oC,e===rC)break e;case oC:t.mode=aC;case aC:if(a>=6&&l>=258){n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,R2e(n,h),o=n.next_out,i=n.output,l=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,c=t.hold,u=t.bits,t.mode===ud&&(t.back=-1);break}for(t.back=0;y=t.lencode[c&(1<<t.lenbits)-1],b=y>>>24,A=y>>>16&255,T=65535&y,!(b<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(A&&!(240&A)){for(P=b,V=A,q=T;y=t.lencode[q+((c&(1<<P+V)-1)>>P)],b=y>>>24,A=y>>>16&255,T=65535&y,!(P+b<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=P,u-=P,t.back+=P}if(c>>>=b,u-=b,t.back+=b,t.length=T,0===A){t.mode=16205;break}if(32&A){t.back=-1,t.mode=ud;break}if(64&A){n.msg="invalid literal/length code",t.mode=mi;break}t.extra=15&A,t.mode=16201;case 16201:if(t.extra){for(I=t.extra;u<I;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;y=t.distcode[c&(1<<t.distbits)-1],b=y>>>24,A=y>>>16&255,T=65535&y,!(b<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(!(240&A)){for(P=b,V=A,q=T;y=t.distcode[q+((c&(1<<P+V)-1)>>P)],b=y>>>24,A=y>>>16&255,T=65535&y,!(P+b<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=P,u-=P,t.back+=P}if(c>>>=b,u-=b,t.back+=b,64&A){n.msg="invalid distance code",t.mode=mi;break}t.offset=T,t.extra=15&A,t.mode=16203;case 16203:if(t.extra){for(I=t.extra;u<I;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=mi;break}t.mode=16204;case 16204:if(0===l)break e;if(f=h-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=mi;break}f>t.wnext?(f-=t.wnext,m=t.wsize-f):m=t.wnext-f,f>t.length&&(f=t.length),v=t.window}else v=i,m=o-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do{i[o++]=v[m++]}while(--f);0===t.length&&(t.mode=aC);break;case 16205:if(0===l)break e;i[o++]=t.length,l--,t.mode=aC;break;case 16206:if(t.wrap){for(;u<32;){if(0===a)break e;a--,c|=r[s++]<<u,u+=8}if(h-=l,n.total_out+=h,t.total+=h,4&t.wrap&&h&&(n.adler=t.check=t.flags?Fs(t.check,i,h,o-h):Ny(t.check,i,h,o-h)),h=l,4&t.wrap&&(t.flags?c:Uq(c))!==t.check){n.msg="incorrect data check",t.mode=mi;break}c=0,u=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(4&t.wrap&&c!==(4294967295&t.total)){n.msg="incorrect length check",t.mode=mi;break}c=0,u=0}t.mode=16208;case 16208:D=U2e;break e;case mi:D=pq;break e;case 16210:return gq;default:return Ol}return n.next_out=o,n.avail_out=l,n.next_in=s,n.avail_in=a,t.hold=c,t.bits=u,(t.wsize||h!==n.avail_out&&t.mode<mi&&(t.mode<16206||e!==fq))&&qq(n,n.output,n.next_out,h-n.avail_out),d-=n.avail_in,h-=n.avail_out,n.total_in+=d,n.total_out+=h,t.total+=h,4&t.wrap&&h&&(n.adler=t.check=t.flags?Fs(t.check,i,h,n.next_out-h):Ny(t.check,i,h,n.next_out-h)),n.data_type=t.bits+(t.last?64:0)+(t.mode===ud?128:0)+(t.mode===oC||16194===t.mode?256:0),(0===d&&0===h||e===fq)&&D===dp&&(D=z2e),D},inflateEnd:n=>{if(hp(n))return Ol;let e=n.state;return e.window&&(e.window=null),n.state=null,dp},inflateGetHeader:(n,e)=>{if(hp(n))return Ol;const t=n.state;return 2&t.wrap?(t.head=e,e.done=!1,dp):Ol},inflateSetDictionary:(n,e)=>{const t=e.length;let r,i,s;return hp(n)||(r=n.state,0!==r.wrap&&r.mode!==sC)?Ol:r.mode===sC&&(i=1,i=Ny(i,e,t,0),i!==r.check)?pq:(s=qq(n,e,t,t),s?(r.mode=16210,gq):(r.havedict=1,dp))},inflateInfo:"pako inflate (from Nodeca project)"},uAe=function cAe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Wq=Object.prototype.toString,{Z_NO_FLUSH:dAe,Z_FINISH:hAe,Z_OK:Hy,Z_STREAM_END:LR,Z_NEED_DICT:FR,Z_STREAM_ERROR:fAe,Z_DATA_ERROR:Kq,Z_MEM_ERROR:pAe}=ap;function Gy(n){this.options=eC.assign({chunkSize:65536,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sq,this.strm.avail_out=0;let t=dd.inflateInit2(this.strm,e.windowBits);if(t!==Hy)throw new Error(op[t]);if(this.header=new uAe,dd.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=jy.string2buf(e.dictionary):"[object ArrayBuffer]"===Wq.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=dd.inflateSetDictionary(this.strm,e.dictionary),t!==Hy)))throw new Error(op[t])}function VR(n,e){const t=new Gy(e);if(t.push(n),t.err)throw t.msg||op[t.err];return t.result}Gy.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?hAe:dAe,t.input="[object ArrayBuffer]"===Wq.call(n)?new Uint8Array(n):n,t.next_in=0,t.avail_in=t.input.length;;){for(0===t.avail_out&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),s=dd.inflate(t,o),s===FR&&i&&(s=dd.inflateSetDictionary(t,i),s===Hy?s=dd.inflate(t,o):s===Kq&&(s=FR));t.avail_in>0&&s===LR&&t.state.wrap>0&&0!==n[t.next_in];)dd.inflateReset(t),s=dd.inflate(t,o);switch(s){case fAe:case Kq:case FR:case pAe:return this.onEnd(s),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(0===t.avail_out||s===LR))if("string"===this.options.to){let l=jy.utf8border(t.output,t.next_out),c=t.next_out-l,u=jy.buf2string(t.output,l);t.next_out=c,t.avail_out=r-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(s!==Hy||0!==a){if(s===LR)return s=dd.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===t.avail_in)break}}return!0},Gy.prototype.onData=function(n){this.chunks.push(n)},Gy.prototype.onEnd=function(n){n===Hy&&(this.result="string"===this.options.to?this.chunks.join(""):eC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};var wAe={Inflate:Gy,inflate:VR,inflateRaw:function gAe(n,e){return(e=e||{}).raw=!0,VR(n,e)},ungzip:VR,constants:ap};const{Inflate:TAe,inflate:SAe}=wAe;var BR=TAe,Xq=SAe;const Qq=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;Qq[n]=e}const Zq=4294967295;function eW(n,e,t){const r=n.readUint32(),i=function Jq(n,e){return(function LAe(n,e,t){let r=n;for(let i=0;i<t;i++)r=Qq[255&(r^e[i])]^r>>>8;return r}(Zq,n,e)^Zq)>>>0}(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function tW(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function nW(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function rW(n,e,t,r){let i=0;if(0===t.length)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function iW(n,e,t,r,i){let s=0;if(0===t.length){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=n[s]+(t[s]>>1)&255;for(;s<r;s++)e[s]=n[s]+(e[s-i]+t[s]>>1)&255}}function sW(n,e,t,r,i){let s=0;if(0===t.length){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=n[s]+t[s]&255;for(;s<r;s++)e[s]=n[s]+FAe(e[s-i],t[s],t[s-i])&255}}function FAe(n,e,t){const r=n+e-t,i=Math.abs(r-n),s=Math.abs(r-e),o=Math.abs(r-t);return i<=s&&i<=o?n:s<=o?e:t}function VAe(n,e,t,r,i,s){switch(n){case 0:tW(e,t,i);break;case 1:nW(e,t,i,s);break;case 2:rW(e,t,r,i);break;case 3:iW(e,t,r,i,s);break;case 4:sW(e,t,r,i,s);break;default:throw new Error(`Unsupported filter: ${n}`)}}const BAe=new Uint16Array([255]),UAe=255===new Uint8Array(BAe.buffer)[0];function zAe(n){return(255&n)<<8|n>>8&255}const $Ae=new Uint16Array([255]),HAe=255===new Uint8Array($Ae.buffer)[0],GAe=new Uint8Array(0);function oW(n){const{data:e,width:t,height:r,channels:i,depth:s}=n,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*t),l=new Uint8Array(r*a);let d,h,c=GAe,u=0;for(let f=0;f<r;f++){switch(d=e.subarray(u+1,u+1+a),h=l.subarray(f*a,(f+1)*a),e[u]){case 0:tW(d,h,a);break;case 1:nW(d,h,a,o);break;case 2:rW(d,h,c,a);break;case 3:iW(d,h,c,a,o);break;case 4:sW(d,h,c,a,o);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}c=h,u+=a+1}if(16===s){const f=new Uint16Array(l.buffer);if(HAe)for(let m=0;m<f.length;m++)f[m]=qAe(f[m]);return f}return l}function qAe(n){return(255&n)<<8|n>>8&255}const qy=Uint8Array.of(137,80,78,71,13,10,26,10);function aW(n){if(!function KAe(n){if(n.length<qy.length)return!1;for(let e=0;e<qy.length;e++)if(n[e]!==qy[e])return!1;return!0}(n.readBytes(qy.length)))throw new Error("wrong PNG signature")}const cW=0,uW=new TextDecoder("latin1");function dW(n){if(function hW(n){if(!YAe.test(n))throw new Error("invalid latin1 text")}(n),0===n.length||n.length>79)throw new Error("keyword length must be between 1 and 79")}const YAe=/^[\u0000-\u00FF]*$/;function fW(n){for(n.mark();n.readByte()!==cW;);const e=n.offset;n.reset();const t=uW.decode(n.readBytes(e-n.offset-1));return n.skip(1),dW(t),t}class JAe extends Sy{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new BR,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=-1,this._filterMethod=-1,this._interlaceMethod=-1,this._colorType=-1,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(aW(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(aW(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case"tEXt":!function XAe(n,e,t){const r=fW(e);n[r]=function ZAe(n,e){return uW.decode(n.readBytes(e))}(e,t-r.length-1)}(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?eW(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?eW(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function eCe(n){if(1!==n&&2!==n&&4!==n&&8!==n&&16!==n)throw new Error(`invalid bit depth: ${n}`);return n}(this.readUint8());const t=this.readUint8();let r;switch(this._colorType=t,t){case 0:case 3:r=1;break;case 2:r=3;break;case 4:r=2;break;case 6:r=4;break;default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),0!==this._compressionMethod)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!=0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){if(this._writingDataChunks=!0,this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case 0:case 2:if(e%2!=0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case 3:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=fW(this),r=this.readUint8();if(0!==r)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:Xq(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=oW({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===r.xOffset&&0===r.yOffset&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case 0:break;case 1:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const o=(i*e.width+s)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[o+a]=0}break;case 2:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,i=(s,o)=>({index:((s+t.yOffset)*this._png.width+t.xOffset+o)*this._png.channels,frameIndex:(s*t.width+o)*this._png.channels});switch(t.blendOp){case 0:for(let s=0;s<t.height;s++)for(let o=0;o<t.width;o++){const{index:a,frameIndex:l}=i(s,o);for(let c=0;c<this._png.channels;c++)e.data[a+c]=t.data[l+c]}break;case 1:for(let s=0;s<t.height;s++)for(let o=0;o<t.width;o++){const{index:a,frameIndex:l}=i(s,o);for(let c=0;c<this._png.channels;c++){const u=t.data[l+this._png.channels-1]/r,h=Math.floor(u*(c%(this._png.channels-1)==0?1:t.data[l+c])+(1-u)*e.data[a+c]);e.data[a+c]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(0!==this._filterMethod)throw new Error(`Filter method ${this._filterMethod} not supported`);if(0===this._interlaceMethod)this._png.data=oW({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(1!==this._interlaceMethod)throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._png.data=function jAe(n){const{data:e,width:t,height:r,channels:i,depth:s}=n,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*t*a);let c=0;for(let u=0;u<7;u++){const d=o[u],h=Math.ceil((t-d.x)/d.xStep),f=Math.ceil((r-d.y)/d.yStep);if(h<=0||f<=0)continue;const m=h*a,v=new Uint8Array(m);for(let y=0;y<f;y++){const b=e[c++],A=e.subarray(c,c+m);c+=m;const T=new Uint8Array(m);VAe(b,A,T,v,m,a),v.set(T);for(let P=0;P<h;P++){const V=d.x+P*d.xStep,q=d.y+y*d.yStep;if(!(V>=t||q>=r))for(let N=0;N<a;N++)l[(q*t+V)*a+N]=T[P*a+N]}}}if(16===s){const u=new Uint16Array(l.buffer);if(UAe)for(let d=0;d<u.length;d++)u[d]=zAe(u[d]);return u}return l}({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:0,blendOp:0,data:e}),this._inflator=new BR,this._writingDataChunks=!1}}var dn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function zR(){dn.console&&"function"==typeof dn.console.log&&dn.console.log.apply(dn.console,arguments)}var Vr={log:zR,warn:function(n){dn.console&&("function"==typeof dn.console.warn?dn.console.warn.apply(dn.console,arguments):zR.call(null,arguments))},error:function(n){dn.console&&("function"==typeof dn.console.error?dn.console.error.apply(dn.console,arguments):zR(n))}};function $R(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){fp(r.response,e,t)},r.onerror=function(){Vr.error("could not download file")},r.send()}function gW(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function uC(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var fp=dn.saveAs||("object"!==(typeof window>"u"?"undefined":Tr(window))||window!==dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=dn.URL||dn.webkitURL,i=document.createElement("a");i.download=e=e||n.name||"download",i.rel="noopener","string"==typeof n?(i.href=n,i.origin!==location.origin?gW(i.href)?$R(n,e,t):uC(i,i.target="_blank"):uC(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){uC(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download","string"==typeof n)if(gW(n))$R(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){uC(r)})}else navigator.msSaveOrOpenBlob((i=n,void 0===(s=t)?s={autoBom:!1}:"object"!==Tr(s)&&(Vr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i),e);var i,s}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof n)return $R(n,e,t);var i="application/octet-stream"===n.type,s=/constructor/i.test(dn.HTMLElement)||dn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&"object"===(typeof FileReader>"u"?"undefined":Tr(FileReader))){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(n)}else{var l=dn.URL||dn.webkitURL,c=l.createObjectURL(n);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function mW(n){var e;n=n||"",this.ok=!1,"#"==n.charAt(0)&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var s=t[r].process,o=t[r].re.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==l.length&&(l="0"+l),1==c.length&&(c="0"+c),"#"+a+l+c}}var dC=dn.atob.bind(dn),_W=dn.btoa.bind(dn);function HR(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Do(t,r,i,s,e[0],7,-680876936),s=Do(s,t,r,i,e[1],12,-389564586),i=Do(i,s,t,r,e[2],17,606105819),r=Do(r,i,s,t,e[3],22,-1044525330),t=Do(t,r,i,s,e[4],7,-176418897),s=Do(s,t,r,i,e[5],12,1200080426),i=Do(i,s,t,r,e[6],17,-1473231341),r=Do(r,i,s,t,e[7],22,-45705983),t=Do(t,r,i,s,e[8],7,1770035416),s=Do(s,t,r,i,e[9],12,-1958414417),i=Do(i,s,t,r,e[10],17,-42063),r=Do(r,i,s,t,e[11],22,-1990404162),t=Do(t,r,i,s,e[12],7,1804603682),s=Do(s,t,r,i,e[13],12,-40341101),i=Do(i,s,t,r,e[14],17,-1502002290),t=Po(t,r=Do(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Po(s,t,r,i,e[6],9,-1069501632),i=Po(i,s,t,r,e[11],14,643717713),r=Po(r,i,s,t,e[0],20,-373897302),t=Po(t,r,i,s,e[5],5,-701558691),s=Po(s,t,r,i,e[10],9,38016083),i=Po(i,s,t,r,e[15],14,-660478335),r=Po(r,i,s,t,e[4],20,-405537848),t=Po(t,r,i,s,e[9],5,568446438),s=Po(s,t,r,i,e[14],9,-1019803690),i=Po(i,s,t,r,e[3],14,-187363961),r=Po(r,i,s,t,e[8],20,1163531501),t=Po(t,r,i,s,e[13],5,-1444681467),s=Po(s,t,r,i,e[2],9,-51403784),i=Po(i,s,t,r,e[7],14,1735328473),t=Mo(t,r=Po(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Mo(s,t,r,i,e[8],11,-2022574463),i=Mo(i,s,t,r,e[11],16,1839030562),r=Mo(r,i,s,t,e[14],23,-35309556),t=Mo(t,r,i,s,e[1],4,-1530992060),s=Mo(s,t,r,i,e[4],11,1272893353),i=Mo(i,s,t,r,e[7],16,-155497632),r=Mo(r,i,s,t,e[10],23,-1094730640),t=Mo(t,r,i,s,e[13],4,681279174),s=Mo(s,t,r,i,e[0],11,-358537222),i=Mo(i,s,t,r,e[3],16,-722521979),r=Mo(r,i,s,t,e[6],23,76029189),t=Mo(t,r,i,s,e[9],4,-640364487),s=Mo(s,t,r,i,e[12],11,-421815835),i=Mo(i,s,t,r,e[15],16,530742520),t=ko(t,r=Mo(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=ko(s,t,r,i,e[7],10,1126891415),i=ko(i,s,t,r,e[14],15,-1416354905),r=ko(r,i,s,t,e[5],21,-57434055),t=ko(t,r,i,s,e[12],6,1700485571),s=ko(s,t,r,i,e[3],10,-1894986606),i=ko(i,s,t,r,e[10],15,-1051523),r=ko(r,i,s,t,e[1],21,-2054922799),t=ko(t,r,i,s,e[8],6,1873313359),s=ko(s,t,r,i,e[15],10,-30611744),i=ko(i,s,t,r,e[6],15,-1560198380),r=ko(r,i,s,t,e[13],21,1309151649),t=ko(t,r,i,s,e[4],6,-145523070),s=ko(s,t,r,i,e[11],10,-1120210379),i=ko(i,s,t,r,e[2],15,718787259),r=ko(r,i,s,t,e[9],21,-343485551),n[0]=kh(t,n[0]),n[1]=kh(r,n[1]),n[2]=kh(i,n[2]),n[3]=kh(s,n[3])}function hC(n,e,t,r,i,s){return e=kh(kh(e,n),kh(r,s)),kh(e<<i|e>>>32-i,t)}function Do(n,e,t,r,i,s,o){return hC(e&t|~e&r,n,e,i,s,o)}function Po(n,e,t,r,i,s,o){return hC(e&r|t&~r,n,e,i,s,o)}function Mo(n,e,t,r,i,s,o){return hC(e^t^r,n,e,i,s,o)}function ko(n,e,t,r,i,s,o){return hC(t^(e|~r),n,e,i,s,o)}function vW(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)HR(r,lCe(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(HR(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,HR(r,i),r}function lCe(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var yW="0123456789abcdef".split("");function cCe(n){for(var e="",t=0;t<4;t++)e+=yW[n>>8*t+4&15]+yW[n>>8*t&15];return e}function uCe(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function GR(n){return vW(n).map(uCe).join("")}var dCe="5d41402abc4b2a76b9719d911017c592"!=function(n){for(var e=0;e<n.length;e++)n[e]=cCe(n[e]);return n.join("")}(vW("hello"));function kh(n,e){if(dCe){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function qR(n,e){var t,r,i;if(n!==t){for(var o=(i=n,new Array(1+(256/n.length|0)+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}t=n,r=a}else a=r;var d=e.length,h=0,f=0,m="";for(l=0;l<d;l++)f=(f+(u=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=u,o=a[(a[h]+a[f])%256],m+=String.fromCharCode(e.charCodeAt(l)^o);return m}var bW={print:4,modify:8,copy:16,"annot-forms":32};function r_(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(void 0!==bW.perm)throw new Error("Invalid permission: "+a);i+=bW[a]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=GR(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qR(this.encryptionKey,this.padding)}function i_(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function wW(n){if("object"!==Tr(n))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,"string"!=typeof t||"function"!=typeof r||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],0===Object.keys(e[r]).length&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){dn.console&&Vr.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function fC(n){if(!(this instanceof fC))return new fC(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function AW(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function pp(n,e,t,r,i){if(!(this instanceof pp))return new pp(n,e,t,r,i);this.type="axial"===n?2:3,this.coords=e,this.colors=t,AW.call(this,r,i)}function s_(n,e,t,r,i){if(!(this instanceof s_))return new s_(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,AW.call(this,r,i)}function Nt(n){var e,t="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;"object"===Tr(n=n||{})&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,null!==(u=n.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a="number"==typeof n.userUnit?Math.abs(n.userUnit):1,void 0!==n.precision&&(e=n.precision),void 0!==n.floatPrecision&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),o=n.filters||(!0===s?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=wW;var m="1.3",v=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(w){m=w};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var b=f.__private__.getPageFormat=function(w){return y[w]};i=i||"a4";var A="compat",T="advanced",P=A;function V(){this.saveGraphicsState(),re(new Bt(qt,0,0,-qt,0,wc()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),c="n",P=T}function q(){this.restoreGraphicsState(),c="S",P=A}var N=f.__private__.combineFontStyleAndFontWeight=function(w,B){if("bold"==w&&"normal"==B||"bold"==w&&400==B||"normal"==w&&"italic"==B||"bold"==w&&"italic"==B)throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(w=400==B||"normal"===B?"italic"===w?"italic":"normal":700!=B&&"bold"!==B||"normal"!==w?(700==B?"bold":B)+""+w:"bold"),w};f.advancedAPI=function(w){var B=P===A;return B&&V.call(this),"function"!=typeof w||(w(this),B&&q.call(this)),this},f.compatAPI=function(w){var B=P===T;return B&&q.call(this),"function"!=typeof w||(w(this),B&&V.call(this)),this},f.isAdvancedAPI=function(){return P===T};var D,S=function(w){if(P!==T)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=f.roundToPrecision=f.__private__.roundToPrecision=function(w,B){var Z=e||B;if(isNaN(w)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(Z).replace(/0+$/,"")};D=f.hpf=f.__private__.hpf="number"==typeof l?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return F(w,l)}:"smart"===l?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return F(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return F(w,16)};var I=f.f2=f.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return F(w,2)},O=f.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return F(w,3)},L=f.scale=f.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return P===A?w*qt:P===T?w:void 0},te=function(w){return L((B=w,P===A?wc()-B:P===T?B:void 0));var B};f.__private__.setPrecision=f.setPrecision=function(w){"number"==typeof parseInt(w,10)&&(e=parseInt(w,10))};var me,le="00000000000000000000000000000000",ue=f.__private__.getFileId=function(){return le},he=f.__private__.setFileId=function(w){return le=void 0!==w&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(Ii=new r_(u.userPermissions,u.userPassword,u.ownerPassword,le)),le};f.setFileId=function(w){return he(w),this},f.getFileId=function(){return ue()};var be=f.__private__.convertDateToPDFDate=function(w){var B=w.getTimezoneOffset(),Z=B<0?"+":"-",se=Math.floor(Math.abs(B/60)),_e=Math.abs(B%60),Ne=[Z,ne(se),"'",ne(_e),"'"].join("");return["D:",w.getFullYear(),ne(w.getMonth()+1),ne(w.getDate()),ne(w.getHours()),ne(w.getMinutes()),ne(w.getSeconds()),Ne].join("")},Ge=f.__private__.convertPDFDateToDate=function(w){var B=parseInt(w.substr(2,4),10),Z=parseInt(w.substr(6,2),10)-1,se=parseInt(w.substr(8,2),10),_e=parseInt(w.substr(10,2),10),Ne=parseInt(w.substr(12,2),10),je=parseInt(w.substr(14,2),10);return new Date(B,Z,se,_e,Ne,je,0)},Pe=f.__private__.setCreationDate=function(w){var B;if(void 0===w&&(w=new Date),w instanceof Date)B=be(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=w}return me=B},j=f.__private__.getCreationDate=function(w){var B=me;return"jsDate"===w&&(B=Ge(me)),B};f.setCreationDate=function(w){return Pe(w),this},f.getCreationDate=function(w){return j(w)};var Y,ne=f.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},ie=f.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},de=0,fe=[],Ce=[],Ie=0,ke=[],Me=[],Je=!1,et=Ce;f.__private__.setCustomOutputDestination=function(w){Je=!0,et=w};var De=function(w){Je||(et=w)};f.__private__.resetCustomOutputDestination=function(){Je=!1,et=Ce};var re=f.__private__.out=function(w){return w=w.toString(),Ie+=w.length+1,et.push(w),et},Mn=f.__private__.write=function(w){return re(1===arguments.length?w.toString():Array.prototype.join.call(arguments," "))},sn=f.__private__.getArrayBuffer=function(w){for(var B=w.length,Z=new ArrayBuffer(B),se=new Uint8Array(Z);B--;)se[B]=w.charCodeAt(B);return Z},Vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Vt};var Ke=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(w){return Ke=P===T?w/qt:w,this};var Tt,at=f.__private__.getFontSize=f.getFontSize=function(){return P===A?Ke:Ke*qt},on=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(w){return on=w,this},f.__private__.getR2L=f.getR2L=function(){return on};var Rt,Rn=f.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))Tt=w;else if(isNaN(w)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');Tt=w}else Tt=parseInt(w,10)};f.__private__.getZoomMode=function(){return Tt};var Ht,Zt=f.__private__.setPageMode=function(w){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Rt=w};f.__private__.getPageMode=function(){return Rt};var hn=f.__private__.setLayoutMode=function(w){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Ht=w};f.__private__.getLayoutMode=function(){return Ht},f.__private__.setDisplayMode=f.setDisplayMode=function(w,B,Z){return Rn(w),hn(B),Zt(Z),this};var Dt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(w){if(-1===Object.keys(Dt).indexOf(w))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Dt[w]},f.__private__.getDocumentProperties=function(){return Dt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(w){for(var B in Dt)Dt.hasOwnProperty(B)&&w[B]&&(Dt[B]=w[B]);return this},f.__private__.setDocumentProperty=function(w,B){if(-1===Object.keys(Dt).indexOf(w))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Dt[w]=B};var It,qt,Pt,mr,Vn,Xe={},Ot={},fn=[],Lt={},Sn={},Mt={},vr={},si=null,er=0,Wt=[],qn=new wW(f),so=n.hotfixes||[],Li={},Ro={},js=[],Bt=function w(B,Z,se,_e,Ne,je){if(!(this instanceof w))return new w(B,Z,se,_e,Ne,je);isNaN(B)&&(B=1),isNaN(Z)&&(Z=0),isNaN(se)&&(se=0),isNaN(_e)&&(_e=1),isNaN(Ne)&&(Ne=0),isNaN(je)&&(je=0),this._matrix=[B,Z,se,_e,Ne,je]};Object.defineProperty(Bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Bt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Bt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(w)},Bt.prototype.multiply=function(w){return new Bt(w.sx*this.sx+w.shy*this.shx,w.sx*this.shy+w.shy*this.sy,w.shx*this.sx+w.sy*this.shx,w.shx*this.shy+w.sy*this.sy,w.tx*this.sx+w.ty*this.shx+this.tx,w.tx*this.shy+w.ty*this.sy+this.ty)},Bt.prototype.decompose=function(){var w=this.sx,B=this.shy,Z=this.shx,se=this.sy,_e=this.tx,Ne=this.ty,je=Math.sqrt(w*w+B*B),mt=(w/=je)*Z+(B/=je)*se;Z-=w*mt,se-=B*mt;var Ct=Math.sqrt(Z*Z+se*se);return mt/=Ct,w*(se/=Ct)<B*(Z/=Ct)&&(w=-w,B=-B,mt=-mt,je=-je),{scale:new Bt(je,0,0,Ct,0,0),translate:new Bt(1,0,0,1,_e,Ne),rotate:new Bt(w,B,-B,w,0,0),skew:new Bt(1,0,mt,1,0,0)}},Bt.prototype.toString=function(w){return this.join(" ")},Bt.prototype.inversed=function(){var w=this.sx,B=this.shy,Z=this.shx,se=this.sy,_e=this.tx,Ne=this.ty,je=1/(w*se-B*Z),mt=se*je,Ct=-B*je,Jt=-Z*je,en=w*je;return new Bt(mt,Ct,Jt,en,-mt*_e-Jt*Ne,-Ct*_e-en*Ne)},Bt.prototype.applyToPoint=function(w){return new Id(w.x*this.sx+w.y*this.shx+this.tx,w.x*this.shy+w.y*this.sy+this.ty)},Bt.prototype.applyToRectangle=function(w){var B=this.applyToPoint(w),Z=this.applyToPoint(new Id(w.x+w.w,w.y+w.h));return new $h(B.x,B.y,Z.x-B.x,Z.y-B.y)},Bt.prototype.clone=function(){return new Bt(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},f.Matrix=Bt;var Ul=f.matrixMult=function(w,B){return B.multiply(w)},oi=new Bt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=oi;var ra=function(w,B){if(!Sn[w]){var Z=(B instanceof pp?"Sh":"P")+(Object.keys(Lt).length+1).toString(10);B.id=Z,Sn[w]=Z,Lt[Z]=B,qn.publish("addPattern",B)}};f.ShadingPattern=pp,f.TilingPattern=s_,f.addShadingPattern=function(w,B){return S("addShadingPattern()"),ra(w,B),this},f.beginTilingPattern=function(w){S("beginTilingPattern()"),Hh(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},f.endTilingPattern=function(w,B){S("endTilingPattern()"),B.stream=Me[Y].join("\n"),ra(w,B),qn.publish("endTilingPattern",B),js.pop().restore()};var zs,kr=f.__private__.newObject=function(){var w=us();return bs(w,!0),w},us=f.__private__.newObjectDeferred=function(){return de++,fe[de]=function(){return Ie},de},bs=function(w,B){return B="boolean"==typeof B&&B,fe[w]=Ie,B&&re(w+" 0 obj"),w},Pa=f.__private__.newAdditionalObject=function(){var w={objId:us(),content:""};return ke.push(w),w},pu=us(),rl=us(),ia=f.__private__.decodeColorString=function(w){var B=w.split(" ");if(2!==B.length||"g"!==B[1]&&"G"!==B[1])5!==B.length||"k"!==B[4]&&"K"!==B[4]||(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var Z=parseFloat(B[0]);B=[Z,Z,Z,"r"]}for(var se="#",_e=0;_e<3;_e++)se+=("0"+Math.floor(255*parseFloat(B[_e])).toString(16)).slice(-2);return se},Ma=f.__private__.encodeColorString=function(w){var B;"string"==typeof w&&(w={ch1:w});var Z=w.ch1,se=w.ch2,_e=w.ch3,Ne=w.ch4,je="draw"===w.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof Z&&"#"!==Z.charAt(0)){var mt=new mW(Z);if(mt.ok)Z=mt.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if("string"==typeof Z&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),"string"==typeof Z&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var Ct=parseInt(Z.substr(1),16);Z=Ct>>16&255,se=Ct>>8&255,_e=255&Ct}if(void 0===se||void 0===Ne&&Z===se&&se===_e)B="string"==typeof Z?Z+" "+je[0]:2===w.precision?I(Z/255)+" "+je[0]:O(Z/255)+" "+je[0];else if(void 0===Ne||"object"===Tr(Ne)){if(Ne&&!isNaN(Ne.a)&&0===Ne.a)return["1.","1.","1.",je[1]].join(" ");B="string"==typeof Z?[Z,se,_e,je[1]].join(" "):2===w.precision?[I(Z/255),I(se/255),I(_e/255),je[1]].join(" "):[O(Z/255),O(se/255),O(_e/255),je[1]].join(" ")}else B="string"==typeof Z?[Z,se,_e,Ne,je[2]].join(" "):2===w.precision?[I(Z),I(se),I(_e),I(Ne),je[2]].join(" "):[O(Z),O(se),O(_e),O(Ne),je[2]].join(" ");return B},sa=f.__private__.getFilters=function(){return o},oo=f.__private__.putStream=function(w){var B=(w=w||{}).data||"",Z=w.filters||sa(),se=w.alreadyAppliedFilters||[],_e=w.addLength1||!1,Ne=B.length,je=w.objectId,mt=function(Fi){return Fi};if(null!==u&&void 0===je)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(mt=Ii.encryptor(je,0));var Ct={};!0===Z&&(Z=["FlateEncode"]);var Jt=w.additionalKeyValues||[],en=(Ct=void 0!==Nt.API.processDataByFilters?Nt.API.processDataByFilters(B,Z):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(0!==Ct.data.length&&(Jt.push({key:"Length",value:Ct.data.length}),!0===_e&&Jt.push({key:"Length1",value:Ne})),0!=en.length)if(en.split("/").length-1==1)Jt.push({key:"Filter",value:en});else{Jt.push({key:"Filter",value:"["+en+"]"});for(var or=0;or<Jt.length;or+=1)if("DecodeParms"===Jt[or].key){for(var Kr=[],Nr=0;Nr<Ct.reverseChain.split("/").length-1;Nr+=1)Kr.push("null");Kr.push(Jt[or].value),Jt[or].value="["+Kr.join(" ")+"]"}}re("<<");for(var xr=0;xr<Jt.length;xr++)re("/"+Jt[xr].key+" "+Jt[xr].value);re(">>"),0!==Ct.data.length&&(re("stream"),re(mt(Ct.data)),re("endstream"))},No=f.__private__.putPage=function(w){var B=w.number,Z=w.data,se=w.objId,_e=w.contentsObjId;bs(se,!0),re("<</Type /Page"),re("/Parent "+w.rootDictionaryObjId+" 0 R"),re("/Resources "+w.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(D(w.mediaBox.bottomLeftX))+" "+parseFloat(D(w.mediaBox.bottomLeftY))+" "+D(w.mediaBox.topRightX)+" "+D(w.mediaBox.topRightY)+"]"),null!==w.cropBox&&re("/CropBox ["+D(w.cropBox.bottomLeftX)+" "+D(w.cropBox.bottomLeftY)+" "+D(w.cropBox.topRightX)+" "+D(w.cropBox.topRightY)+"]"),null!==w.bleedBox&&re("/BleedBox ["+D(w.bleedBox.bottomLeftX)+" "+D(w.bleedBox.bottomLeftY)+" "+D(w.bleedBox.topRightX)+" "+D(w.bleedBox.topRightY)+"]"),null!==w.trimBox&&re("/TrimBox ["+D(w.trimBox.bottomLeftX)+" "+D(w.trimBox.bottomLeftY)+" "+D(w.trimBox.topRightX)+" "+D(w.trimBox.topRightY)+"]"),null!==w.artBox&&re("/ArtBox ["+D(w.artBox.bottomLeftX)+" "+D(w.artBox.bottomLeftY)+" "+D(w.artBox.topRightX)+" "+D(w.artBox.topRightY)+"]"),"number"==typeof w.userUnit&&1!==w.userUnit&&re("/UserUnit "+w.userUnit),qn.publish("putPage",{objId:se,pageContext:Wt[B],pageNumber:B,page:Z}),re("/Contents "+_e+" 0 R"),re(">>"),re("endobj");var Ne=Z.join("\n");return P===T&&(Ne+="\nQ"),bs(_e,!0),oo({data:Ne,filters:sa(),objectId:_e}),re("endobj"),se},il=f.__private__.putPages=function(){var w,B,Z=[];for(w=1;w<=er;w++)Wt[w].objId=us(),Wt[w].contentsObjId=us();for(w=1;w<=er;w++)Z.push(No({number:w,data:Me[w],objId:Wt[w].objId,contentsObjId:Wt[w].contentsObjId,mediaBox:Wt[w].mediaBox,cropBox:Wt[w].cropBox,bleedBox:Wt[w].bleedBox,trimBox:Wt[w].trimBox,artBox:Wt[w].artBox,userUnit:Wt[w].userUnit,rootDictionaryObjId:pu,resourceDictionaryObjId:rl}));bs(pu,!0),re("<</Type /Pages");var se="/Kids [";for(B=0;B<er;B++)se+=Z[B]+" 0 R ";re(se+"]"),re("/Count "+er),re(">>"),re("endobj"),qn.publish("postPutPages")},gu=function(w){qn.publish("putFont",{font:w,out:re,newObject:kr,putStream:oo}),!0!==w.isAlreadyPutted&&(w.objectNumber=kr(),re("<<"),re("/Type /Font"),re("/BaseFont /"+i_(w.postScriptName)),re("/Subtype /Type1"),"string"==typeof w.encoding&&re("/Encoding /"+w.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},mu=function(w){w.objectNumber=kr();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[D(w.x),D(w.y),D(w.x+w.width),D(w.y+w.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var Z=w.pages[1].join("\n");oo({data:Z,additionalKeyValues:B,objectId:w.objectNumber}),re("endobj")},_u=function(w,B){B||(B=21);var Z=kr(),se=function(je,mt){var Ct,Jt=[],en=1/(mt-1);for(Ct=0;Ct<1;Ct+=en)Jt.push(Ct);Jt.push(1),0!=je[0].offset&&je.unshift({offset:0,color:je[0].color}),1!=je[je.length-1].offset&&je.push({offset:1,color:je[je.length-1].color});for(var Nr="",xr=0,Fi=0;Fi<Jt.length;Fi++){for(Ct=Jt[Fi];Ct>je[xr+1].offset;)xr++;var Ti=je[xr].offset,ds=(Ct-Ti)/(je[xr+1].offset-Ti),ao=je[xr].color,Or=je[xr+1].color;Nr+=ie(Math.round((1-ds)*ao[0]+ds*Or[0]).toString(16))+ie(Math.round((1-ds)*ao[1]+ds*Or[1]).toString(16))+ie(Math.round((1-ds)*ao[2]+ds*Or[2]).toString(16))}return Nr.trim()}(w.colors,B),_e=[];_e.push({key:"FunctionType",value:"0"}),_e.push({key:"Domain",value:"[0.0 1.0]"}),_e.push({key:"Size",value:"["+B+"]"}),_e.push({key:"BitsPerSample",value:"8"}),_e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oo({data:se,additionalKeyValues:_e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),re("endobj"),w.objectNumber=kr(),re("<< /ShadingType "+w.type),re("/ColorSpace /DeviceRGB");var Ne="/Coords ["+D(parseFloat(w.coords[0]))+" "+D(parseFloat(w.coords[1]))+" ";Ne+=2===w.type?D(parseFloat(w.coords[2]))+" "+D(parseFloat(w.coords[3])):D(parseFloat(w.coords[2]))+" "+D(parseFloat(w.coords[3]))+" "+D(parseFloat(w.coords[4]))+" "+D(parseFloat(w.coords[5])),re(Ne+="]"),w.matrix&&re("/Matrix ["+w.matrix.toString()+"]"),re("/Function "+Z+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},gd=function(w,B){var Z=us(),se=kr();B.push({resourcesOid:Z,objectOid:se}),w.objectNumber=se;var _e=[];_e.push({key:"Type",value:"/Pattern"}),_e.push({key:"PatternType",value:"1"}),_e.push({key:"PaintType",value:"1"}),_e.push({key:"TilingType",value:"1"}),_e.push({key:"BBox",value:"["+w.boundingBox.map(D).join(" ")+"]"}),_e.push({key:"XStep",value:D(w.xStep)}),_e.push({key:"YStep",value:D(w.yStep)}),_e.push({key:"Resources",value:Z+" 0 R"}),w.matrix&&_e.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),oo({data:w.stream,additionalKeyValues:_e,objectId:w.objectNumber}),re("endobj")},T_=function(w){for(var B in w.objectNumber=kr(),re("<<"),w)switch(B){case"opacity":re("/ca "+I(w[B]));break;case"stroke-opacity":re("/CA "+I(w[B]))}re(">>"),re("endobj")},Ep=function(w){bs(w.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var B in re("/Font <<"),Xe)Xe.hasOwnProperty(B)&&(!1===d||!0===d&&h.hasOwnProperty(B))&&re("/"+B+" "+Xe[B].objectNumber+" 0 R");re(">>")}(),function(){if(Object.keys(Lt).length>0){for(var B in re("/Shading <<"),Lt)Lt.hasOwnProperty(B)&&Lt[B]instanceof pp&&Lt[B].objectNumber>=0&&re("/"+B+" "+Lt[B].objectNumber+" 0 R");qn.publish("putShadingPatternDict"),re(">>")}}(),function(B){if(Object.keys(Lt).length>0){for(var Z in re("/Pattern <<"),Lt)Lt.hasOwnProperty(Z)&&Lt[Z]instanceof f.TilingPattern&&Lt[Z].objectNumber>=0&&Lt[Z].objectNumber<B&&re("/"+Z+" "+Lt[Z].objectNumber+" 0 R");qn.publish("putTilingPatternDict"),re(">>")}}(w.objectOid),function(){if(Object.keys(Mt).length>0){var B;for(B in re("/ExtGState <<"),Mt)Mt.hasOwnProperty(B)&&Mt[B].objectNumber>=0&&re("/"+B+" "+Mt[B].objectNumber+" 0 R");qn.publish("putGStateDict"),re(">>")}}(),function(){for(var B in re("/XObject <<"),Li)Li.hasOwnProperty(B)&&Li[B].objectNumber>=0&&re("/"+B+" "+Li[B].objectNumber+" 0 R");qn.publish("putXobjectDict"),re(">>")}(),re(">>"),re("endobj")},md=function(w){Ot[w.fontName]=Ot[w.fontName]||{},Ot[w.fontName][w.fontStyle]=w.id},Ip=function(w,B,Z,se,_e){var Ne={id:"F"+(Object.keys(Xe).length+1).toString(10),postScriptName:w,fontName:B,fontStyle:Z,encoding:se,isStandardFont:_e||!1,metadata:{}};return qn.publish("addFont",{font:Ne,instance:this}),Xe[Ne.id]=Ne,md(Ne),Ne.id},Oo=f.__private__.pdfEscape=f.pdfEscape=function(w,B){return function(Z,se){var _e,Ne,je,mt,Ct,Jt,en,or,Kr;if(je=(se=se||{}).sourceEncoding||"Unicode",Ct=se.outputEncoding,(se.autoencode||Ct)&&Xe[It].metadata&&Xe[It].metadata[je]&&Xe[It].metadata[je].encoding&&(mt=Xe[It].metadata[je].encoding,!Ct&&Xe[It].encoding&&(Ct=Xe[It].encoding),!Ct&&mt.codePages&&(Ct=mt.codePages[0]),"string"==typeof Ct&&(Ct=mt[Ct]),Ct)){for(en=!1,Jt=[],_e=0,Ne=Z.length;_e<Ne;_e++)(or=Ct[Z.charCodeAt(_e)])?Jt.push(String.fromCharCode(or)):Jt.push(Z[_e]),Jt[_e].charCodeAt(0)>>8&&(en=!0);Z=Jt.join("")}for(_e=Z.length;void 0===en&&0!==_e;)Z.charCodeAt(_e-1)>>8&&(en=!0),_e--;if(!en)return Z;for(Jt=se.noBOM?[]:[254,255],_e=0,Ne=Z.length;_e<Ne;_e++){if((Kr=(or=Z.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(Kr),Jt.push(or-(Kr<<8))}return String.fromCharCode.apply(void 0,Jt)}(w,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mc=f.__private__.beginPage=function(w){Me[++er]=[],Wt[er]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},S_(er),De(Me[Y])},jl=function(w,B){var Z,se,_e;switch(t=B||t,"string"==typeof w&&(Z=b(w.toLowerCase()),Array.isArray(Z)&&(se=Z[0],_e=Z[1])),Array.isArray(w)&&(se=w[0]*qt,_e=w[1]*qt),isNaN(se)&&(se=i[0],_e=i[1]),(se>14400||_e>14400)&&(Vr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),_e=Math.min(14400,_e)),i=[se,_e],t.substr(0,1)){case"l":_e>se&&(i=[_e,se]);break;case"p":se>_e&&(i=[_e,se])}mc(i),D_(zh),re(zl),0!==Cd&&re(Cd+" J"),0!==Rr&&re(Rr+" j"),qn.publish("addPage",{pageNumber:er})},_d=function(w){w>0&&w<=er&&(Me.splice(w,1),Wt.splice(w,1),er--,Y>er&&(Y=er),this.setPage(Y))},S_=function(w){w>0&&w<=er&&(Y=w)},Tp=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Me.length-1},Sp=function(w,B,Z){var se,_e=void 0;return Z=Z||{},B=void 0!==B?B:Xe[It].fontStyle,se=(w=void 0!==w?w:Xe[It].fontName).toLowerCase(),void 0!==Ot[se]&&void 0!==Ot[se][B]?_e=Ot[se][B]:void 0!==Ot[w]&&void 0!==Ot[w][B]?_e=Ot[w][B]:!1===Z.disableWarning&&Vr.warn("Unable to look up font label for font '"+w+"', '"+B+"'. Refer to getFontList() for available fonts."),_e||Z.noFallback||null==(_e=Ot.times[B])&&(_e=Ot.times.normal),_e},vd=f.__private__.putInfo=function(){var w=kr(),B=function(se){return se};for(var Z in null!==u&&(B=Ii.encryptor(w,0)),re("<<"),re("/Producer ("+Oo(B("jsPDF "+Nt.version))+")"),Dt)Dt.hasOwnProperty(Z)&&Dt[Z]&&re("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+Oo(B(Dt[Z]))+")");re("/CreationDate ("+Oo(B(me))+")"),re(">>"),re("endobj")},xp=f.__private__.putCatalog=function(w){var B=(w=w||{}).rootDictionaryObjId||pu;switch(kr(),re("<<"),re("/Type /Catalog"),re("/Pages "+B+" 0 R"),Tt||(Tt="fullwidth"),Tt){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+Tt;"%"===Z.substr(Z.length-1)&&(Tt=parseInt(Tt)/100),"number"==typeof Tt&&re("/OpenAction [3 0 R /XYZ null null "+I(Tt)+"]")}switch(Ht||(Ht="continuous"),Ht){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Rt&&re("/PageMode /"+Rt),qn.publish("putCatalog"),re(">>"),re("endobj")},vi=f.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(de+1)),re("/Root "+de+" 0 R"),re("/Info "+(de-1)+" 0 R"),null!==u&&re("/Encrypt "+Ii.oid+" 0 R"),re("/ID [ <"+le+"> <"+le+"> ]"),re(">>")},Dp=f.__private__.putHeader=function(){re("%PDF-"+m),re("%\xba\xdf\xac\xe0")},Pp=f.__private__.putXRef=function(){var w="0000000000";re("xref"),re("0 "+(de+1)),re("0000000000 65535 f ");for(var B=1;B<=de;B++)re("function"==typeof fe[B]?(w+fe[B]()).slice(-10)+" 00000 n ":void 0!==fe[B]?(w+fe[B]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},_c=f.__private__.buildDocument=function(){var w;de=0,Ie=0,Ce=[],fe=[],ke=[],pu=us(),rl=us(),De(Ce),qn.publish("buildDocument"),Dp(),il(),function(){qn.publish("putAdditionalObjects");for(var Z=0;Z<ke.length;Z++){var se=ke[Z];bs(se.objId,!0),re(se.content),re("endobj")}qn.publish("postPutAdditionalObjects")}(),w=[],function(){for(var Z in Xe)Xe.hasOwnProperty(Z)&&(!1===d||!0===d&&h.hasOwnProperty(Z))&&gu(Xe[Z])}(),function(){var Z;for(Z in Mt)Mt.hasOwnProperty(Z)&&T_(Mt[Z])}(),function(){for(var Z in Li)Li.hasOwnProperty(Z)&&mu(Li[Z])}(),function(Z){var se;for(se in Lt)Lt.hasOwnProperty(se)&&(Lt[se]instanceof pp?_u(Lt[se]):Lt[se]instanceof s_&&gd(Lt[se],Z))}(w),qn.publish("putResources"),w.forEach(Ep),Ep({resourcesOid:rl,objectOid:Number.MAX_SAFE_INTEGER}),qn.publish("postPutResources"),null!==u&&(Ii.oid=kr(),re("<<"),re("/Filter /Standard"),re("/V "+Ii.v),re("/R "+Ii.r),re("/U <"+Ii.toHexString(Ii.U)+">"),re("/O <"+Ii.toHexString(Ii.O)+">"),re("/P "+Ii.P),re(">>"),re("endobj")),vd(),xp();var B=Ie;return Pp(),vi(),re("startxref"),re(""+B),re("%%EOF"),De(Me[Y]),Ce.join("\n")},yd=f.__private__.getBlob=function(w){return new Blob([sn(w)],{type:"application/pdf"})},ka=f.output=f.__private__.output=((zs=function(w,B){switch("string"==typeof(B=B||{})?B={filename:B}:B.filename=B.filename||"generated.pdf",w){case void 0:return _c();case"save":f.save(B.filename);break;case"arraybuffer":return sn(_c());case"blob":return yd(_c());case"bloburi":case"bloburl":if(void 0!==dn.URL&&"function"==typeof dn.URL.createObjectURL)return dn.URL&&dn.URL.createObjectURL(yd(_c()))||void 0;Vr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",se=_c();try{Z=_W(se)}catch{Z=_W(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+B.filename+";base64,"+Z;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(dn)){var _e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(_e=B.pdfObjectUrl,Ne="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_e+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",mt=dn.open();return null!==mt&&mt.document.write(je),mt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(dn)){var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',Jt=dn.open();if(null!==Jt){Jt.document.write(Ct);var en=this;Jt.document.documentElement.querySelector("#pdfViewer").onload=function(){Jt.document.title=B.filename,Jt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(en.output("bloburl"))}}return Jt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(dn))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Kr=dn.open();if(null!==Kr&&(Kr.document.write(or),Kr.document.title=B.filename),Kr||typeof safari>"u")return Kr;break;case"datauri":case"dataurl":return dn.document.location.href=this.output("datauristring",B);default:return null}}).foo=function(){try{return zs.apply(this,arguments)}catch(Z){var w=Z.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var B="Error in function "+w.split("\n")[0].split("<")[0]+": "+Z.message;if(!dn.console)throw new Error(B);dn.console.error(B,Z),dn.alert&&alert(B)}},zs.foo.bar=zs,zs.foo),vu=function(w){return!0===Array.isArray(so)&&so.indexOf(w)>-1};switch(r){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=1==vu("px_scaling")?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);qt=r}var Ii=null;Pe(),he();var sl=f.__private__.getPageInfo=f.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Wt[w].objId,pageNumber:w,pageContext:Wt[w]}},ol=f.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in Wt)if(Wt[B].objId===w)break;return sl(B)},Uh=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Wt[Y].objId,pageNumber:Y,pageContext:Wt[Y]}};f.addPage=function(){return jl.apply(this,arguments),this},f.setPage=function(){return S_.apply(this,arguments),De.call(this,Me[Y]),this},f.insertPage=function(w){return this.addPage(),this.movePage(Y,w),this},f.movePage=function(w,B){var Z,se;if(w>B){Z=Me[w],se=Wt[w];for(var _e=w;_e>B;_e--)Me[_e]=Me[_e-1],Wt[_e]=Wt[_e-1];Me[B]=Z,Wt[B]=se,this.setPage(B)}else if(w<B){Z=Me[w],se=Wt[w];for(var Ne=w;Ne<B;Ne++)Me[Ne]=Me[Ne+1],Wt[Ne]=Wt[Ne+1];Me[B]=Z,Wt[B]=se,this.setPage(B)}return this},f.deletePage=function(){return _d.apply(this,arguments),this},f.__private__.text=f.text=function(w,B,Z,se,_e){var Ne,je,mt,Ct,Jt,en,or,Kr,Nr,xr=(se=se||{}).scope||this;if("number"==typeof w&&"number"==typeof B&&("string"==typeof Z||Array.isArray(Z))){var Fi=Z;Z=B,B=w,w=Fi}if(arguments[3]instanceof Bt==0?(mt=arguments[4],Ct=arguments[5],"object"===Tr(or=arguments[3])&&null!==or||("string"==typeof mt&&(Ct=mt,mt=null),"string"==typeof or&&(Ct=or,or=null),"number"==typeof or&&(mt=or,or=null),se={flags:or,angle:mt,align:Ct})):(S("The transform parameter of text() with a Matrix value"),Nr=_e),isNaN(B)||isNaN(Z)||null==w)throw new Error("Invalid arguments passed to jsPDF.text");if(0===w.length)return xr;var Ti,ds="",ao="number"==typeof se.lineHeightFactor?se.lineHeightFactor:Lo,Or=xr.internal.scaleFactor;function Np(br){return br=br.split("\t").join(Array(se.TabLen||9).join(" ")),Oo(br,or)}function xd(br){for(var Ur,es=br.concat(),ws=[],Md=es.length;Md--;)"string"==typeof(Ur=es.shift())?ws.push(Ur):Array.isArray(br)&&(1===Ur.length||void 0===Ur[1]&&void 0===Ur[2])?ws.push(Ur[0]):ws.push([Ur[0],Ur[1],Ur[2]]);return ws}function Oa(br,Ur){var es;if("string"==typeof br)es=Ur(br)[0];else if(Array.isArray(br)){for(var ws,Md,k1=br.concat(),k_=[],eE=k1.length;eE--;)"string"==typeof(ws=k1.shift())?k_.push(Ur(ws)[0]):Array.isArray(ws)&&"string"==typeof ws[0]&&(Md=Ur(ws[0],ws[1],ws[2]),k_.push([Md[0],Md[1],Md[2]]));es=k_}return es}var g=!1,E=!0;if("string"==typeof w)g=!0;else if(Array.isArray(w)){var R=w.concat();je=[];for(var W,ge=R.length;ge--;)("string"!=typeof(W=R.shift())||Array.isArray(W)&&"string"!=typeof W[0])&&(E=!1);g=E}if(!1===g)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');"string"==typeof w&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Se=Ke/xr.internal.scaleFactor,Ze=Se*(ao-1);switch(se.baseline){case"bottom":Z-=Ze;break;case"top":Z+=Se-Ze;break;case"hanging":Z+=Se-2*Ze;break;case"middle":Z+=Se/2-Ze}if((en=se.maxWidth||0)>0&&("string"==typeof w?w=xr.splitTextToSize(w,en):"[object Array]"===Object.prototype.toString.call(w)&&(w=w.reduce(function(br,Ur){return br.concat(xr.splitTextToSize(Ur,en))},[]))),qn.publish("preProcessText",Ne={text:w,x:B,y:Z,options:se,mutex:{pdfEscape:Oo,activeFontKey:It,fonts:Xe,activeFontSize:Ke}}),w=Ne.text,mt=(se=Ne.options).angle,Nr instanceof Bt==0&&mt&&"number"==typeof mt){mt*=Math.PI/180,0===se.rotationDirection&&(mt=-mt),P===T&&(mt=-mt);var lr=Math.cos(mt),Si=Math.sin(mt);Nr=new Bt(lr,Si,-Si,lr,0,0)}else mt&&mt instanceof Bt&&(Nr=mt);P!==T||Nr||(Nr=oi),void 0!==(Jt=se.charSpace||Hl)&&(ds+=D(L(Jt))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(Kr=se.horizontalScale)&&(ds+=D(100*Kr)+" Tz\n");var jt=-1,Yr=void 0!==se.renderingMode?se.renderingMode:se.stroke,xi=xr.internal.getCurrentPageInfo().pageContext;switch(Yr){case 0:case!1:case"fill":jt=0;break;case 1:case!0:case"stroke":jt=1;break;case 2:case"fillThenStroke":jt=2;break;case 3:case"invisible":jt=3;break;case 4:case"fillAndAddForClipping":jt=4;break;case 5:case"strokeAndAddPathForClipping":jt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":jt=6;break;case 7:case"addToPathForClipping":jt=7}-1!==jt?ds+=jt+" Tr\n":-1!==(void 0!==xi.usedRenderingMode?xi.usedRenderingMode:-1)&&(ds+="0 Tr\n"),-1!==jt&&(xi.usedRenderingMode=jt),Ct=se.align||"left";var yi,Wl=Ke*ao,Dd=xr.internal.pageSize.getWidth(),T1=Xe[It];Jt=se.charSpace||Hl,en=se.maxWidth||0,or=Object.assign({autoencode:!0,noBOM:!0},se.flags);var Gh=[],Op=function(br){return xr.getStringUnitWidth(br,{font:T1,charSpace:Jt,fontSize:Ke,doKerning:!1})*Ke/Or};if("[object Array]"===Object.prototype.toString.call(w)){var ll;je=xd(w),"left"!==Ct&&(yi=je.map(Op));var cl,qh=0;if("right"===Ct){B-=yi[0],w=[],ge=je.length;for(var Pd=0;Pd<ge;Pd++)0===Pd?(cl=yc(B),ll=$s(Z)):(cl=L(qh-yi[Pd]),ll=-Wl),w.push([je[Pd],cl,ll]),qh=yi[Pd]}else if("center"===Ct){B-=yi[0]/2,w=[],ge=je.length;for(var Wh=0;Wh<ge;Wh++)0===Wh?(cl=yc(B),ll=$s(Z)):(cl=L((qh-yi[Wh])/2),ll=-Wl),w.push([je[Wh],cl,ll]),qh=yi[Wh]}else if("left"===Ct){w=[],ge=je.length;for(var S1=0;S1<ge;S1++)w.push(je[S1])}else if("justify"===Ct&&"Identity-H"===T1.encoding){w=[],ge=je.length,en=0!==en?en:Dd;for(var M_=0,Ji=0;Ji<ge;Ji++)if(ll=0===Ji?$s(Z):-Wl,cl=0===Ji?yc(B):M_,Ji<ge-1){var JC=L((en-yi[Ji])/(je[Ji].split(" ").length-1)),Eu=je[Ji].split(" ");w.push([Eu[0]+" ",cl,ll]),M_=0;for(var Iu=1;Iu<Eu.length;Iu++){var x1=(Op(Eu[Iu-1]+" "+Eu[Iu])-Op(Eu[Iu]))*Or+JC;w.push(Iu==Eu.length-1?[Eu[Iu],x1,0]:[Eu[Iu]+" ",x1,0]),M_-=x1}}else w.push([je[Ji],cl,ll]);w.push(["",M_,0])}else{if("justify"!==Ct)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],ge=je.length,en=0!==en?en:Dd,Ji=0;Ji<ge;Ji++){ll=0===Ji?$s(Z):-Wl,cl=0===Ji?yc(B):0;var D1=je[Ji].split(" ").length-1;Gh.push(Ji<ge-1?D(L(D1>0?(en-yi[Ji])/D1:0)):0),w.push([je[Ji],cl,ll])}}}!0===("boolean"==typeof se.R2L?se.R2L:on)&&(w=Oa(w,function(br,Ur,es){return[br.split("").reverse().join(""),Ur,es]})),qn.publish("postProcessText",Ne={text:w,x:B,y:Z,options:se,mutex:{pdfEscape:Oo,activeFontKey:It,fonts:Xe,activeFontSize:Ke}}),w=Ne.text,Ti=Ne.mutex.isHex||!1;var M1=Xe[It].encoding;"WinAnsiEncoding"!==M1&&"StandardEncoding"!==M1||(w=Oa(w,function(br,Ur,es){return[Np(br),Ur,es]})),je=xd(w),w=[];for(var Kh,Yh,Xh,Lp=Array.isArray(je[0])?1:0,Qh="",Fp=function(br,Ur,es){var ws="";return es instanceof Bt?(es="number"==typeof se.angle?Ul(es,new Bt(1,0,0,1,br,Ur)):Ul(new Bt(1,0,0,1,br,Ur),es),P===T&&(es=Ul(new Bt(1,0,0,-1,0,0),es)),ws=es.join(" ")+" Tm\n"):ws=D(br)+" "+D(Ur)+" Td\n",ws},Kl=0;Kl<je.length;Kl++){switch(Qh="",Lp){case 1:Xh=(Ti?"<":"(")+je[Kl][0]+(Ti?">":")"),Kh=parseFloat(je[Kl][1]),Yh=parseFloat(je[Kl][2]);break;case 0:Xh=(Ti?"<":"(")+je[Kl]+(Ti?">":")"),Kh=yc(B),Yh=$s(Z)}void 0!==Gh&&void 0!==Gh[Kl]&&(Qh=Gh[Kl]+" Tw\n"),0===Kl?w.push(Qh+Fp(Kh,Yh,Nr)+Xh):0===Lp?w.push(Qh+Xh):1===Lp&&w.push(Qh+Fp(Kh,Yh,Nr)+Xh)}w=w.join(0===Lp?" Tj\nT* ":" Tj\n"),w+=" Tj\n";var Tu="BT\n/";return Tu+=It+" "+Ke+" Tf\n",Tu+=D(Ke*ao)+" TL\n",Tu+=Au+"\n",Tu+=ds,Tu+=w,re(Tu+="ET"),h[It]=!0,xr};var jh=f.__private__.clip=f.clip=function(w){return re("evenodd"===w?"W*":"W"),this};f.clipEvenOdd=function(){return jh("evenodd")},f.__private__.discardPath=f.discardPath=function(){return re("n"),this};var al=f.__private__.isValidStyle=function(w){var B=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)&&(B=!0),B};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(w){return al(w)&&(c=w),this};var yr=f.__private__.getStyle=f.getStyle=function(w){var B=c;switch(w){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=w}return B},bd=f.close=function(){return re("h"),this};f.stroke=function(){return re("S"),this},f.fill=function(w){return Ra("f",w),this},f.fillEvenOdd=function(w){return Ra("f*",w),this},f.fillStroke=function(w){return Ra("B",w),this},f.fillStrokeEvenOdd=function(w){return Ra("B*",w),this};var Ra=function(w,B){"object"===Tr(B)?x_(B,w):re(w)},vc=function(w){null===w||P===T&&void 0===w||(w=yr(w),re(w))};function b1(w,B,Z,se,_e){var Ne=new s_(B||this.boundingBox,Z||this.xStep,se||this.yStep,this.gState,_e||this.matrix);Ne.stream=this.stream;var je=w+"$$"+this.cloneIndex+++"$$";return ra(je,Ne),Ne}var x_=function(w,B){var Z=Sn[w.key],se=Lt[Z];if(se instanceof pp)re("q"),re(w1(B)),se.gState&&f.setGState(se.gState),re(w.matrix.toString()+" cm"),re("/"+Z+" sh"),re("Q");else if(se instanceof s_){var _e=new Bt(1,0,0,-1,0,wc());w.matrix&&(_e=_e.multiply(w.matrix||oi),Z=b1.call(se,w.key,w.boundingBox,w.xStep,w.yStep,_e).id),re("q"),re("/Pattern cs"),re("/"+Z+" scn"),se.gState&&f.setGState(se.gState),re(B),re("Q")}},w1=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Mp=f.moveTo=function(w,B){return re(D(L(w))+" "+D(te(B))+" m"),this},wd=f.lineTo=function(w,B){return re(D(L(w))+" "+D(te(B))+" l"),this},yu=f.curveTo=function(w,B,Z,se,_e,Ne){return re([D(L(w)),D(te(B)),D(L(Z)),D(te(se)),D(L(_e)),D(te(Ne)),"c"].join(" ")),this};f.__private__.line=f.line=function(w,B,Z,se,_e){if(isNaN(w)||isNaN(B)||isNaN(Z)||isNaN(se)||!al(_e))throw new Error("Invalid arguments passed to jsPDF.line");return P===A?this.lines([[Z-w,se-B]],w,B,[1,1],_e||"S"):this.lines([[Z-w,se-B]],w,B,[1,1]).stroke()},f.__private__.lines=f.lines=function(w,B,Z,se,_e,Ne){var je,mt,Ct,Jt,en,Fi,Ti,ds;if("number"==typeof w&&(ds=Z,Z=B,B=w,w=ds),se=se||[1,1],Ne=Ne||!1,isNaN(B)||isNaN(Z)||!Array.isArray(w)||!Array.isArray(se)||!al(_e)||"boolean"!=typeof Ne)throw new Error("Invalid arguments passed to jsPDF.lines");for(Mp(B,Z),je=se[0],mt=se[1],Jt=w.length,Fi=B,Ti=Z,Ct=0;Ct<Jt;Ct++)2===(en=w[Ct]).length?wd(Fi=en[0]*je+Fi,Ti=en[1]*mt+Ti):yu(en[0]*je+Fi,en[1]*mt+Ti,en[2]*je+Fi,en[3]*mt+Ti,Fi=en[4]*je+Fi,Ti=en[5]*mt+Ti);return Ne&&bd(),vc(_e),this},f.path=function(w){for(var B=0;B<w.length;B++){var Z=w[B],se=Z.c;switch(Z.op){case"m":Mp(se[0],se[1]);break;case"l":wd(se[0],se[1]);break;case"c":yu.apply(this,se);break;case"h":bd()}}return this},f.__private__.rect=f.rect=function(w,B,Z,se,_e){if(isNaN(w)||isNaN(B)||isNaN(Z)||isNaN(se)||!al(_e))throw new Error("Invalid arguments passed to jsPDF.rect");return P===A&&(se=-se),re([D(L(w)),D(te(B)),D(L(Z)),D(L(se)),"re"].join(" ")),vc(_e),this},f.__private__.triangle=f.triangle=function(w,B,Z,se,_e,Ne,je){if(isNaN(w)||isNaN(B)||isNaN(Z)||isNaN(se)||isNaN(_e)||isNaN(Ne)||!al(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-w,se-B],[_e-Z,Ne-se],[w-_e,B-Ne]],w,B,[1,1],je,!0),this},f.__private__.roundedRect=f.roundedRect=function(w,B,Z,se,_e,Ne,je){if(isNaN(w)||isNaN(B)||isNaN(Z)||isNaN(se)||isNaN(_e)||isNaN(Ne)||!al(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var mt=4/3*(Math.SQRT2-1);return _e=Math.min(_e,.5*Z),Ne=Math.min(Ne,.5*se),this.lines([[Z-2*_e,0],[_e*mt,0,_e,Ne-Ne*mt,_e,Ne],[0,se-2*Ne],[0,Ne*mt,-_e*mt,Ne,-_e,Ne],[2*_e-Z,0],[-_e*mt,0,-_e,-Ne*mt,-_e,-Ne],[0,2*Ne-se],[0,-Ne*mt,_e*mt,-Ne,_e,-Ne]],w+_e,B,[1,1],je,!0),this},f.__private__.ellipse=f.ellipse=function(w,B,Z,se,_e){if(isNaN(w)||isNaN(B)||isNaN(Z)||isNaN(se)||!al(_e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*Z,je=4/3*(Math.SQRT2-1)*se;return Mp(w+Z,B),yu(w+Z,B-je,w+Ne,B-se,w,B-se),yu(w-Ne,B-se,w-Z,B-je,w-Z,B),yu(w-Z,B+je,w-Ne,B+se,w,B+se),yu(w+Ne,B+se,w+Z,B+je,w+Z,B),vc(_e),this},f.__private__.circle=f.circle=function(w,B,Z,se){if(isNaN(w)||isNaN(B)||isNaN(Z)||!al(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,B,Z,Z,se)},f.setFont=function(w,B,Z){return Z&&(B=N(B,Z)),It=Sp(w,B,{disableWarning:!1}),this};var Ad=f.__private__.getFont=f.getFont=function(){return Xe[Sp.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var w,B,Z={};for(w in Ot)if(Ot.hasOwnProperty(w))for(B in Z[w]=[],Ot[w])Ot[w].hasOwnProperty(B)&&Z[w].push(B);return Z},f.addFont=function(w,B,Z,se,_e){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==Ne.indexOf(arguments[3])?_e=arguments[3]:arguments[3]&&-1==Ne.indexOf(arguments[3])&&(Z=N(Z,se)),Ip.call(this,w,B,Z,_e=_e||"Identity-H")};var Lo,zh=n.lineWidth||.200025,an=f.__private__.getLineWidth=f.getLineWidth=function(){return zh},D_=f.__private__.setLineWidth=f.setLineWidth=function(w){return zh=w,re(D(L(w))+" w"),this};f.__private__.setLineDash=Nt.API.setLineDash=Nt.API.setLineDashPattern=function(w,B){if(w=w||[],B=B||0,isNaN(B)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(Z){return D(L(Z))}).join(" "),B=D(L(B)),re("["+w+"] "+B+" d"),this};var bu=f.__private__.getLineHeight=f.getLineHeight=function(){return Ke*Lo};f.__private__.getLineHeight=f.getLineHeight=function(){return Ke*Lo};var A1=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(w){return"number"==typeof(w=w||1.15)&&(Lo=w),this},C1=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Lo};A1(n.lineHeight);var yc=f.__private__.getHorizontalCoordinate=function(w){return L(w)},$s=f.__private__.getVerticalCoordinate=function(w){return P===T?w:Wt[Y].mediaBox.topRightY-Wt[Y].mediaBox.bottomLeftY-L(w)},E1=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(w){return D(yc(w))},I1=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(w){return D($s(w))},zl=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ia(zl)},f.__private__.setStrokeColor=f.setDrawColor=function(w,B,Z,se){return zl=Ma({ch1:w,ch2:B,ch3:Z,ch4:se,pdfColorType:"draw",precision:2}),re(zl),this};var wu=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ia(wu)},f.__private__.setFillColor=f.setFillColor=function(w,B,Z,se){return wu=Ma({ch1:w,ch2:B,ch3:Z,ch4:se,pdfColorType:"fill",precision:2}),re(wu),this};var Au=n.textColor||"0 g",$l=f.__private__.getTextColor=f.getTextColor=function(){return ia(Au)};f.__private__.setTextColor=f.setTextColor=function(w,B,Z,se){return Au=Ma({ch1:w,ch2:B,ch3:Z,ch4:se,pdfColorType:"text",precision:3}),this};var Hl=n.charSpace,P_=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Hl||0)};f.__private__.setCharSpace=f.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hl=w,this};var Cd=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(w){var B=f.CapJoinStyles[w];if(void 0===B)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cd=B,re(B+" J"),this};var Rr=0;f.__private__.setLineJoin=f.setLineJoin=function(w){var B=f.CapJoinStyles[w];if(void 0===B)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rr=B,re(B+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(D(L(w))+" M"),this},f.GState=fC,f.setGState=function(w){(w="string"==typeof w?Mt[vr[w]]:Ed(null,w)).equals(si)||(re("/"+w.id+" gs"),si=w)};var Ed=function(w,B){if(!w||!vr[w]){var Z=!1;for(var se in Mt)if(Mt.hasOwnProperty(se)&&Mt[se].equals(B)){Z=!0;break}if(Z)B=Mt[se];else{var _e="GS"+(Object.keys(Mt).length+1).toString(10);Mt[_e]=B,B.id=_e}return w&&(vr[w]=B.id),qn.publish("addGState",B),B}};f.addGState=function(w,B){return Ed(w,B),this},f.saveGraphicsState=function(){return re("q"),fn.push({key:It,size:Ke,color:Au}),this},f.restoreGraphicsState=function(){re("Q");var w=fn.pop();return It=w.key,Ke=w.size,Au=w.color,si=null,this},f.setCurrentTransformationMatrix=function(w){return re(w.toString()+" cm"),this},f.comment=function(w){return re("#"+w),this};var Id=function(w,B){var Z=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(Ne){isNaN(Ne)||(Z=parseFloat(Ne))}});var se=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(Ne){isNaN(Ne)||(se=parseFloat(Ne))}});var _e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _e},set:function(Ne){_e=Ne.toString()}}),this},$h=function(w,B,Z,se){Id.call(this,w,B),this.type="rect";var _e=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _e},set:function(je){isNaN(je)||(_e=parseFloat(je))}});var Ne=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(je){isNaN(je)||(Ne=parseFloat(je))}}),this},Td=function(){this.page=er,this.currentPage=Y,this.pages=Me.slice(0),this.pagesContext=Wt.slice(0),this.x=Pt,this.y=mr,this.matrix=Vn,this.width=kp(Y),this.height=ql(Y),this.outputDestination=et,this.id="",this.objectNumber=-1};Td.prototype.restore=function(){er=this.page,Wt=this.pagesContext,Me=this.pages,Pt=this.x,mr=this.y,Vn=this.matrix,Na(Y=this.currentPage,this.width),bc(Y,this.height),et=this.outputDestination};var Hh=function(w,B,Z,se,_e){js.push(new Td),er=Y=0,Me=[],Pt=w,mr=B,Vn=_e,mc([Z,se])};for(var Gl in f.beginFormObject=function(w,B,Z,se,_e){return Hh(w,B,Z,se,_e),this},f.endFormObject=function(w){return function(B){if(Ro[B])js.pop().restore();else{var Z=new Td,se="Xo"+(Object.keys(Li).length+1).toString(10);Z.id=se,Ro[B]=se,Li[se]=Z,qn.publish("addFormObject",Z),js.pop().restore()}}(w),this},f.doFormObject=function(w,B){var Z=Li[Ro[w]];return re("q"),re(B.toString()+" cm"),re("/"+Z.id+" Do"),re("Q"),this},f.getFormObject=function(w){var B=Li[Ro[w]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},f.save=function(w,B){return w=w||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,!1===B.returnPromise?(fp(yd(_c()),w),"function"==typeof fp.unload&&dn.setTimeout&&setTimeout(fp.unload,911),this):new Promise(function(Z,se){try{var _e=fp(yd(_c()),w);"function"==typeof fp.unload&&dn.setTimeout&&setTimeout(fp.unload,911),Z(_e)}catch(Ne){se(Ne.message)}})},Nt.API)Nt.API.hasOwnProperty(Gl)&&("events"===Gl&&Nt.API.events.length?function(w,B){var se,_e;for(_e=B.length-1;-1!==_e;_e--)w.subscribe.apply(w,[B[_e][0]].concat("function"==typeof(se=B[_e][1])?[se]:se))}(qn,Nt.API.events):f[Gl]=Nt.API[Gl]);function kp(w){return Wt[w].mediaBox.topRightX-Wt[w].mediaBox.bottomLeftX}function Na(w,B){Wt[w].mediaBox.topRightX=B+Wt[w].mediaBox.bottomLeftX}function ql(w){return Wt[w].mediaBox.topRightY-Wt[w].mediaBox.bottomLeftY}function bc(w,B){Wt[w].mediaBox.topRightY=B+Wt[w].mediaBox.bottomLeftY}var Cu=f.getPageWidth=function(w){return kp(w=w||Y)/qt},Rp=f.setPageWidth=function(w,B){Na(w,B*qt)},wc=f.getPageHeight=function(w){return ql(w=w||Y)/qt},Sd=f.setPageHeight=function(w,B){bc(w,B*qt)};return f.internal={pdfEscape:Oo,getStyle:yr,getFont:Ad,getFontSize:at,getCharSpace:P_,getTextColor:$l,getLineHeight:bu,getLineHeightFactor:C1,getLineWidth:an,write:Mn,getHorizontalCoordinate:yc,getVerticalCoordinate:$s,getCoordinateString:E1,getVerticalCoordinateString:I1,collections:{},newObject:kr,newAdditionalObject:Pa,newObjectDeferred:us,newObjectDeferredBegin:bs,getFilters:sa,putStream:oo,events:qn,scaleFactor:qt,pageSize:{getWidth:function(){return Cu(Y)},setWidth:function(w){Rp(Y,w)},getHeight:function(){return wc(Y)},setHeight:function(w){Sd(Y,w)}},encryptionOptions:u,encryption:Ii,getEncryptor:function(w){return null!==u?Ii.encryptor(w,0):function(B){return B}},output:ka,getNumberOfPages:Tp,pages:Me,out:re,f2:I,f3:O,getPageInfo:sl,getPageInfoByObjId:ol,getCurrentPageInfo:Uh,getPDFVersion:v,Point:Id,Rectangle:$h,Matrix:Bt,hasHotfix:vu},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Cu(Y)},set:function(w){Rp(Y,w)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return wc(Y)},set:function(w){Sd(Y,w)},enumerable:!0,configurable:!0}),function(w){for(var B=0,Z=Vt.length;B<Z;B++){var se=Ip.call(this,w[B][0],w[B][1],w[B][2],Vt[B][3],!0);!1===d&&(h[se]=!0);var _e=w[B][0].split("-");md({id:se,fontName:_e[0],fontStyle:_e[1]||""})}qn.publish("addFonts",{fonts:Xe,dictionary:Ot})}.call(f,Vt),It="F1",jl(i,t),qn.publish("initialized"),f}r_.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},r_.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},r_.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},r_.prototype.processOwnerPassword=function(n,e){return qR(GR(e).substr(0,5),n)},r_.prototype.encryptor=function(n,e){var t=GR(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return qR(t,r)}},fC.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Tr(n)!==Tr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return 0===r},Nt.API={events:[]},Nt.version="3.0.3";var Ni=Nt.API,WR=1,gp=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},o_=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},bn=function(n){return n.toFixed(2)},Rh=function(n){return n.toFixed(5)};Ni.__acroform__={};var Ta=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},CW=function(n){return n*WR},su=function(n){var e=new IW,t=At.internal.getHeight(n)||0,r=At.internal.getWidth(n)||0;return e.BBox=[0,0,Number(bn(r)),Number(bn(t))],e},hCe=Ni.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},fCe=Ni.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},pCe=Ni.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Yi=Ni.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pCe(n,e-1)},Xi=Ni.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hCe(n,e-1)},Qi=Ni.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fCe(n,e-1)},gCe=Ni.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(bn(l.lowerLeft_X)),Number(bn(l.lowerLeft_Y)),Number(bn(l.upperRight_X)),Number(bn(l.upperRight_Y))]},mCe=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],r=KR(n,n._V||n.DV),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+bn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=su(n);return s.scope=n.scope,s.stream=e.join("\n"),s}},KR=function(n,e){var t=0===n.fontSize?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");i=i.map(n.multiline?function(I){return I.split("\n")}:function(I){return[I]});var s=t,o=At.internal.getHeight(n)||0;o=o<0?-o:o;var I,a=At.internal.getWidth(n)||0;a=a<0?-a:a,s++;e:for(;s>0;){e="",s--;var c,u,d=pC("3",n,s).height,h=n.multiline?o-s:(o-d)/2,f=h+=2,m=0,v=0,y=0;if(s<=0){e="(...) Tj\n",e+="% Width of Text: "+pC(e,n,s=12).width+", FieldWidth:"+a+"\n";break}for(var b="",A=0,T=0;T<i.length;T++)if(i.hasOwnProperty(T)){var P=!1;if(1!==i[T].length&&y!==i[T].length-1){if((d+2)*(A+2)+2>o)continue e;b+=i[T][y],P=!0,v=T,T--}else{b=" "==(b+=i[T][y]+" ").substr(b.length-1)?b.substr(0,b.length-1):b;var V=parseInt(T),q=(I=V)+1<i.length&&pC(b+" "+i[I+1][0],n,s).width<=a-4,N=T>=i.length-1;if(q&&!N){b+=" ",y=0;continue}if(q||N){if(N)v=V;else if(n.multiline&&(d+2)*(A+2)+2>o)continue e}else{if(!n.multiline||(d+2)*(A+2)+2>o)continue e;v=V}}for(var D="",S=m;S<=v;S++){var F=i[S];if(n.multiline){if(S===v){D+=F[y]+" ",y=(y+1)%F.length;continue}if(S===m){D+=F[F.length-1]+" ";continue}}D+=F[0]+" "}switch(D=" "==D.substr(D.length-1)?D.substr(0,D.length-1):D,u=pC(D,n,s).width,n.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;default:c=2}e+=bn(c)+" "+bn(f)+" Td\n",e+="("+gp(D)+") Tj\n",e+=-bn(c)+" 0 Td\n",f=-(s+2),u=0,m=P?v:v+1,A++,b=""}break}return r.text=e,r.fontSize=s,r},pC=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},_Ce={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vCe=function(n,e){var t={type:"reference",object:n};void 0===e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},EW=Ni.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(0!==s&&(i+=" "),Tr(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":"/"!==n[s].substr(0,1)?(void 0!==e&&t&&(r=t.internal.getEncryptor(e)),i+="("+gp(r(n[s].toString()))+")"):i+=n[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},YR=function(n,e,t){var r=function(i){return i};return void 0!==e&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+gp(r(n))+")"},ou=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ou.prototype.toString=function(){return this.objId+" 0 R"},ou.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ou.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return"content"!=s&&"appearanceStreamContent"!=s&&"scope"!=s&&"objId"!=s&&"_"!=s.substring(0,1)});for(var t in e)if(!1===Object.getOwnPropertyDescriptor(this,e[t]).configurable){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:EW(i,this.objId,this.scope)}):i instanceof ou?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&n.push({key:r,value:i}))}return n};var IW=function(){ou.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ta(IW,ou);var TW=function(){ou.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+gp(t(n))+")"}},set:function(t){n=t}})};Ta(TW,ou);var dc=function n(){ou.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Yi(e,3)},set:function(b){this.F=b?Xi(e,3):Qi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(b){r=void 0!==b?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof _C)return;s="FieldObject"+n.FieldNum++}var b=function(A){return A};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+gp(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/WR:c},set:function(b){c=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof _C||this instanceof mp))return YR(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Vs==0?YR(h,this.objId,this.scope):h},set:function(b){b=b.toString(),h=this instanceof Vs==0?"("===b.substr(0,1)?o_(b.substr(1,b.length-2)):o_(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vs==1?o_(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Vs==1?"/"+b:b}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Vs==0?YR(f,this.objId,this.scope):f},set:function(b){b=b.toString(),f=this instanceof Vs==0?"("===b.substr(0,1)?o_(b.substr(1,b.length-2)):o_(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vs==1?o_(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof Vs==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){v=b=!!b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(b){m=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,1)},set:function(b){this.Ff=b?Xi(this.Ff,1):Qi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,2)},set:function(b){this.Ff=b?Xi(this.Ff,2):Qi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,3)},set:function(b){this.Ff=b?Xi(this.Ff,3):Qi(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==y)return y},set:function(b){if(-1===[0,1,2].indexOf(b))throw new Error('Invalid value "'+b+'" for attribute Q supplied.');y=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(y){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};Ta(dc,ou);var a_=function(){dc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return EW(e,this.objId,this.scope)},set:function(t){var r,i;i=[],"string"==typeof(r=t)&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,18)},set:function(t){this.Ff=t?Xi(this.Ff,18):Qi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,19)},set:function(t){!0===this.combo&&(this.Ff=t?Xi(this.Ff,19):Qi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,20)},set:function(t){t?(this.Ff=Xi(this.Ff,20),e.sort()):this.Ff=Qi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,22)},set:function(t){this.Ff=t?Xi(this.Ff,22):Qi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,23)},set:function(t){this.Ff=t?Xi(this.Ff,23):Qi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,27)},set:function(t){this.Ff=t?Xi(this.Ff,27):Qi(this.Ff,27)}}),this.hasAppearanceStream=!1};Ta(a_,dc);var l_=function(){a_.call(this),this.fontName="helvetica",this.combo=!1};Ta(l_,a_);var c_=function(){l_.call(this),this.combo=!0};Ta(c_,l_);var gC=function(){c_.call(this),this.edit=!0};Ta(gC,c_);var Vs=function(){dc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,15)},set:function(t){this.Ff=t?Xi(this.Ff,15):Qi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,16)},set:function(t){this.Ff=t?Xi(this.Ff,16):Qi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,17)},set:function(t){this.Ff=t?Xi(this.Ff,17):Qi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,26)},set:function(t){this.Ff=t?Xi(this.Ff,26):Qi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+gp(t(e[r]))+")");return i.push(">>"),i.join("\n")}},set:function(t){"object"===Tr(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ta(Vs,dc);var mC=function(){Vs.call(this),this.pushButton=!0};Ta(mC,Vs);var u_=function(){Vs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=void 0!==e?e:[]}})};Ta(u_,Vs);var _C=function(){var n,e;dc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+gp(i(r[s]))+")");return o.push(">>"),o.join("\n")},set:function(i){"object"===Tr(i)&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){"string"==typeof i&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ta(_C,dc),u_.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},u_.prototype.createOption=function(n){var e=new _C;return e.Parent=this,e.optionName=n,this.Kids.push(e),bCe.call(this.scope,e),e};var vC=function(){Vs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};Ta(vC,Vs);var mp=function(){dc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,13)},set:function(e){this.Ff=e?Xi(this.Ff,13):Qi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,21)},set:function(e){this.Ff=e?Xi(this.Ff,21):Qi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,23)},set:function(e){this.Ff=e?Xi(this.Ff,23):Qi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,24)},set:function(e){this.Ff=e?Xi(this.Ff,24):Qi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,25)},set:function(e){this.Ff=e?Xi(this.Ff,25):Qi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,26)},set:function(e){this.Ff=e?Xi(this.Ff,26):Qi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ta(mp,dc);var yC=function(){mp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Yi(this.Ff,14)},set:function(n){this.Ff=n?Xi(this.Ff,14):Qi(this.Ff,14)}}),this.password=!0};Ta(yC,mp);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=su(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=KR(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+bn(At.internal.getWidth(n))+" "+bn(At.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+bn(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join("\n"),e},YesNormal:function(n){var e=su(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=At.internal.getHeight(n),o=At.internal.getWidth(n),a=KR(n,n.caption);return i.push("1 g"),i.push("0 0 "+bn(o)+" "+bn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+bn(o-1)+" "+bn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+bn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(n){var e=su(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+bn(At.internal.getWidth(n))+" "+bn(At.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=At.RadioButton.Circle.YesNormal,e.D[n]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=su(n);e.scope=n.scope;var t=[],r=At.internal.getWidth(n)<=At.internal.getHeight(n)?At.internal.getWidth(n)/4:At.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((r*At.internal.Bezier_C).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Rh(At.internal.getWidth(n)/2)+" "+Rh(At.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(n){var e=su(n);e.scope=n.scope;var t=[],r=At.internal.getWidth(n)<=At.internal.getHeight(n)?At.internal.getWidth(n)/4:At.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*At.internal.Bezier_C).toFixed(5)),o=Number((r*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Rh(At.internal.getWidth(n)/2)+" "+Rh(At.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Rh(At.internal.getWidth(n)/2)+" "+Rh(At.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},OffPushDown:function(n){var e=su(n);e.scope=n.scope;var t=[],r=At.internal.getWidth(n)<=At.internal.getHeight(n)?At.internal.getWidth(n)/4:At.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Rh(At.internal.getWidth(n)/2)+" "+Rh(At.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=At.RadioButton.Cross.YesNormal,e.D[n]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=su(n);e.scope=n.scope;var t=[],r=At.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+bn(At.internal.getWidth(n)-2)+" "+bn(At.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(bn(r.x1.x)+" "+bn(r.x1.y)+" m"),t.push(bn(r.x2.x)+" "+bn(r.x2.y)+" l"),t.push(bn(r.x4.x)+" "+bn(r.x4.y)+" m"),t.push(bn(r.x3.x)+" "+bn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(n){var e=su(n);e.scope=n.scope;var t=At.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+bn(At.internal.getWidth(n))+" "+bn(At.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+bn(At.internal.getWidth(n)-2)+" "+bn(At.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(bn(t.x1.x)+" "+bn(t.x1.y)+" m"),r.push(bn(t.x2.x)+" "+bn(t.x2.y)+" l"),r.push(bn(t.x4.x)+" "+bn(t.x4.y)+" m"),r.push(bn(t.x3.x)+" "+bn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(n){var e=su(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+bn(At.internal.getWidth(n))+" "+bn(At.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join("\n"),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};At.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=At.internal.getWidth(n),t=At.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},At.internal.getWidth=function(n){var e=0;return"object"===Tr(n)&&(e=CW(n.Rect[2])),e},At.internal.getHeight=function(n){var e=0;return"object"===Tr(n)&&(e=CW(n.Rect[3])),e};var bCe=Ni.addField=function(n){if(function(n,e){if(e.scope=n,void 0!==n.internal&&(void 0===n.internal.acroformPlugin||!1===n.internal.acroformPlugin.isInitialized)){if(dc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(_Ce)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");WR=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new TW,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){var t;(t=n).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),n.internal.events.subscribe("buildDocument",function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&vCe(s,t)}}(n)}),n.internal.events.subscribe("putCatalog",function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(n)}),n.internal.events.subscribe("postPutPages",function(t){!function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=gCe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=At.createDefaultAppearanceStream(a),"object"===Tr(a)&&"function"==typeof a.getKeyValueListForStream&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=mCe(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var m=f[o];"function"==typeof m&&(m=m.call(i,a)),d+="/"+o+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else"function"==typeof(m=f)&&(m=m.call(i,a)),d+="/"+o+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);d+=">>"}l.push({key:"AP",value:"<<\n"+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(v,y){for(var b in v)if(v.hasOwnProperty(b)){var A=b,T=v[b];y.internal.newObjectDeferredBegin(T.objId,!0),"object"===Tr(T)&&"function"==typeof T.putStream&&T.putStream(),delete v[A]}}(i.internal.acroformPlugin.xForms,i)}(t,n)}),n.internal.acroformPlugin.isInitialized=!0}}(this,n),!(n instanceof dc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};function SW(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}Ni.AcroFormChoiceField=a_,Ni.AcroFormListBox=l_,Ni.AcroFormComboBox=c_,Ni.AcroFormEditBox=gC,Ni.AcroFormButton=Vs,Ni.AcroFormPushButton=mC,Ni.AcroFormRadioButton=u_,Ni.AcroFormCheckBox=vC,Ni.AcroFormTextField=mp,Ni.AcroFormPasswordField=yC,Ni.AcroFormAppearance=At,Ni.AcroForm={ChoiceField:a_,ListBox:l_,ComboBox:c_,EditBox:gC,Button:Vs,PushButton:mC,RadioButton:u_,CheckBox:vC,TextField:mp,PasswordField:yC,Appearance:At},Nt.AcroForm={ChoiceField:a_,ListBox:l_,ComboBox:c_,EditBox:gC,Button:Vs,PushButton:mC,RadioButton:u_,CheckBox:vC,TextField:mp,PasswordField:yC,Appearance:At},function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(I,O){var L,te,me,le,ue,he=t;if("RGBA"===(O=O||t)||void 0!==I.data&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(q(I))for(ue in r)for(me=r[ue],L=0;L<me.length;L+=1){for(le=!0,te=0;te<me[L].length;te+=1)if(void 0!==me[L][te]&&me[L][te]!==I[te]){le=!1;break}if(!0===le){he=ue;break}}else for(ue in r)for(me=r[ue],L=0;L<me.length;L+=1){for(le=!0,te=0;te<me[L].length;te+=1)if(void 0!==me[L][te]&&me[L][te]!==I.charCodeAt(te)){le=!1;break}if(!0===le){he=ue;break}}return he===t&&O!==t&&(he=O),he},s=function I(O){for(var L=this.internal.write,te=this.internal.putStream,me=(0,this.internal.getFilters)();-1!==me.indexOf("FlateEncode");)me.splice(me.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:O.width}),le.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&void 0!==O.sMask?O.objectId+2:O.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&void 0!==O.decodeParameters&&le.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var ue="",he=0,be=O.transparency.length;he<be;he++)ue+=O.transparency[he]+" "+O.transparency[he]+" ";le.push({key:"Mask",value:"["+ue+"]"})}if(void 0!==O.sMask&&le.push({key:"SMask",value:O.objectId+1+" 0 R"}),te({data:O.data,additionalKeyValues:le,alreadyAppliedFilters:void 0!==O.filter?["/"+O.filter]:void 0,objectId:O.objectId}),L("endobj"),"sMask"in O&&void 0!==O.sMask){var Pe,j=null!==(Pe=O.sMaskBitsPerComponent)&&void 0!==Pe?Pe:O.bitsPerComponent,Y={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:O.sMask};"filter"in O&&(Y.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(O.width),Y.filter=O.filter),I.call(this,Y)}if(O.colorSpace===b.INDEXED){var ne=this.internal.newObject();te({data:D(new Uint8Array(O.palette)),objectId:ne}),L("endobj")}},o=function(){var I=this.internal.collections[e+"images"];for(var O in I)s.call(this,I[O])},a=function(){var I,O=this.internal.collections[e+"images"],L=this.internal.write;for(var te in O)L("/I"+(I=O[te]).index,I.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var I=this.internal.collections[e+"images"];return l.call(this),I},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(I){return"function"==typeof n["process"+I.toUpperCase()]},h=function(I){return"object"===Tr(I)&&1===I.nodeType},f=function(I,O){if("IMG"===I.nodeName&&I.hasAttribute("src")){var L=""+I.getAttribute("src");if(0===L.indexOf("data:image/"))return dC(unescape(L).split("base64,").pop());var te=n.loadFile(L,!0);if(void 0!==te)return te}if("CANVAS"===I.nodeName){if(0===I.width||0===I.height)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var me;switch(O){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;default:me="image/jpeg"}return dC(I.toDataURL(me,1).split("base64,").pop())}},m=function(I){var O=this.internal.collections[e+"images"];if(O)for(var L in O)if(I===O[L].alias)return O[L]},v=function(I,O,L){return I||O||(I=-96,O=-96),I<0&&(I=-1*L.width*72/I/this.internal.scaleFactor),O<0&&(O=-1*L.height*72/O/this.internal.scaleFactor),0===I&&(I=O*L.width/L.height),0===O&&(O=I*L.height/L.width),[I,O]},y=function(I,O,L,te,me,le){var ue=v.call(this,L,te,me),he=this.internal.getCoordinateString,be=this.internal.getVerticalCoordinateString,Ge=c.call(this);if(L=ue[0],te=ue[1],Ge[me.index]=me,le){le*=Math.PI/180;var Pe=Math.cos(le),j=Math.sin(le),Y=function(ie){return ie.toFixed(4)},ne=[Y(Pe),Y(j),Y(-1*j),Y(Pe),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,he(I),be(O+te),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([he(L),"0","0",he(te),"0","0","cm"].join(" "))):this.internal.write([he(L),"0","0",he(te),he(I),be(O+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},b=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=n.__addimage__.sHashCode=function(I){var O,L,te=0;if("string"==typeof I)for(L=I.length,O=0;O<L;O++)te=(te<<5)-te+I.charCodeAt(O),te|=0;else if(q(I))for(L=I.byteLength/2,O=0;O<L;O++)te=(te<<5)-te+I[O],te|=0;return te},P=n.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var O=!0;return 0===I.length&&(O=!1),I.length%4!=0&&(O=!1),!1===/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))&&(O=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))&&(O=!1),O},V=n.__addimage__.extractImageFromDataUrl=function(I){if(null==I||!(I=I.trim()).startsWith("data:"))return null;var O=I.indexOf(",");return O<0?null:I.substring(0,O).trim().endsWith("base64")?I.substring(O+1):null};n.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var q=n.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},N=n.__addimage__.binaryStringToUint8Array=function(I){for(var O=I.length,L=new Uint8Array(O),te=0;te<O;te++)L[te]=I.charCodeAt(te);return L},D=n.__addimage__.arrayBufferToBinaryString=function(I){for(var O="",L=q(I)?I:new Uint8Array(I),te=0;te<L.length;te+=8192)O+=String.fromCharCode.apply(null,L.subarray(te,te+8192));return O};n.addImage=function(){var I,O,L,te,me,le,ue,he,be;if("number"==typeof arguments[1]?(O=t,L=arguments[1],te=arguments[2],me=arguments[3],le=arguments[4],ue=arguments[5],he=arguments[6],be=arguments[7]):(O=arguments[1],L=arguments[2],te=arguments[3],me=arguments[4],le=arguments[5],ue=arguments[6],he=arguments[7],be=arguments[8]),"object"===Tr(I=arguments[0])&&!h(I)&&"imageData"in I){var Ge=I;I=Ge.imageData,O=Ge.format||O||t,L=Ge.x||L||0,te=Ge.y||te||0,me=Ge.w||Ge.width||me,le=Ge.h||Ge.height||le,ue=Ge.alias||ue,he=Ge.compression||he,be=Ge.rotation||Ge.angle||be}var Pe=this.internal.getFilters();if(void 0===he&&-1!==Pe.indexOf("FlateEncode")&&(he="SLOW"),isNaN(L)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var j=S.call(this,I,O,ue,he);return y.call(this,L,te,me,le,j,be),this};var S=function(I,O,L,te){var me,le,ue,be;if("string"==typeof I&&i(I)===t){I=unescape(I);var he=F(I,!1);(""!==he||void 0!==(he=n.loadFile(I,!0)))&&(I=he)}if(h(I)&&(I=f(I,O)),O=i(I,O),!d(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if((null==(ue=L)||0===ue.length)&&(L="string"==typeof(be=I)||q(be)?T(be):q(be.data)?T(be.data):null),(me=m.call(this,L))||(I instanceof Uint8Array||"RGBA"===O||(le=I,I=N(I)),me=this["process"+O.toUpperCase()](I,u.call(this),L,function(be){return be&&"string"==typeof be&&(be=be.toUpperCase()),be in n.image_compression?be:A.NONE}(te),le)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},F=n.__addimage__.convertBase64ToBinaryString=function(I,O){O="boolean"!=typeof O||O;var L,te="";if("string"==typeof I){var me;L=null!==(me=V(I))&&void 0!==me?me:I;try{te=dC(L)}catch(le){if(O)throw P(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(I){var O,L,te="";if(h(I)&&(I=f(I)),"string"==typeof I&&i(I)===t&&(""===(te=F(I,!1))&&(te=n.loadFile(I)||""),I=te),L=i(I),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(I instanceof Uint8Array||(I=N(I)),!(O=this["process"+L.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=L,O}}(Nt.API),
/**
         * @license
         * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e=function(t){if(void 0!==t&&""!=t)return!0};Nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(0!=u){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(b(r.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(b(A))+") >>",v.content=s;var T=v.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+T,r.open&&(s+=" /Open true"),y.content=s+=" >>",this.internal.write(v.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var P=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(m(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",s+=" /Border [0 0 0]",this.internal.write(s+=" >>");break;case"link":if(r.options.name){var V=this.annotations._nameMap[r.options.name];r.options.pageNumber=V.page,r.options.top=V.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var q=a(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+q+" "+r.options.zoom+"]"}""!=s&&this.internal.write(s+=" >>")}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:c(r),w:l(t+i),h:c(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==s.maxWidth){var u=this.splitTextToSize(t,a=s.maxWidth).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(t,r,i,s),"center"===s.align&&(r-=l/2),"right"===s.align&&(r-=l),this.link(r,(i+=.2*c)-c,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Nt.API),
/**
         * @license
         * Copyright (c) 2017 Aras Abbasi
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(v){return void 0!==e[v.charCodeAt(0)]},o=n.__arabicParser__.isArabicLetter=function(v){return"string"==typeof v&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},a=n.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&s(v)&&e[v.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&i.indexOf(v.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&s(v)&&e[v.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&s(v)&&e[v.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&s(v)&&e[v.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&s(v)&&4==e[v.charCodeAt(0)].length},d=n.__arabicParser__.resolveLigatures=function(v){var y=0,b=t,A="",T=0;for(y=0;y<v.length;y+=1)void 0!==b[v.charCodeAt(y)]?(T++,"number"==typeof(b=b[v.charCodeAt(y)])&&(A+=String.fromCharCode(b),b=t,T=0),y===v.length-1&&(b=t,A+=v.charAt(y-(T-1)),y-=T-1,T=0)):(b=t,A+=v.charAt(y-T),y-=T,T=0);return A};n.__arabicParser__.isArabicDiacritic=function(v){return void 0!==v&&void 0!==r[v.charCodeAt(0)]};var h=n.__arabicParser__.getCorrectForm=function(v,y,b){return o(v)?!1===s(v)?-1:!c(v)||!o(y)&&!o(b)||!o(b)&&a(y)||a(v)&&!o(y)||a(v)&&l(y)||a(v)&&a(y)?0:u(v)&&o(y)&&!a(y)&&o(b)&&c(b)?3:a(v)||!o(b)?1:2:-1},f=function(v){var y=0,b=0,A=0,T="",P="",V="",q=(v=v||"").split("\\s+"),N=[];for(y=0;y<q.length;y+=1){for(N.push(""),b=0;b<q[y].length;b+=1)P=q[y][b-1],V=q[y][b+1],o(T=q[y][b])?(A=h(T,P,V),N[y]+=-1!==A?String.fromCharCode(e[T.charCodeAt(0)][A]):T):N[y]+=T;N[y]=d(N[y])}return N.join(" ")},m=n.__arabicParser__.processArabic=n.processArabic=function(){var v,y="string"==typeof arguments[0]?arguments[0]:arguments[0].text,b=[];if(Array.isArray(y)){var A=0;for(b=[],A=0;A<y.length;A+=1)Array.isArray(y[A])?b.push([f(y[A][0]),y[A][1],y[A][2]]):b.push([f(y[A])]);v=b}else v=f(y);return"string"==typeof arguments[0]?v:(arguments[0].text=v,arguments[0])};n.events.push(["preProcessText",m])}(Nt.API),Nt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform","javascript"===n.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},
/**
         * @license
         * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||!1===Number.isInteger(a)||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||!1===Number.isInteger(a)||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if("2d"!==(t=t||"2d"))return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Nt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(v){m=v}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof l?l:void 0,this},n.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,m=0,v=0,y=this;if(!Array.isArray(l)&&"string"!=typeof l){if("number"!=typeof l)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=c.maxWidth;b>0?"string"==typeof l?l=this.splitTextToSize(l,b):"[object Array]"===Object.prototype.toString.call(l)&&(l=l.reduce(function(T,P){return T.concat(y.splitTextToSize(P,b))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)f<(v=this.getStringUnitWidth(l[A],{font:d})*u)&&(f=v);return 0!==f&&(m=l.length),{w:f/=h,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return void 0!==c.lineNumber&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),void 0!==l.text[0]&&(this.rect(l.x,l.y,l.width,l.height,!0===t?"FD":void 0),"right"===l.align?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):"center"===l.align?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,m,v,y,b=[],A=[],T=[],P={},V={},q=[],N=[],D=(h=h||{}).autoSize||!1,S=!1!==h.printHeaders,F=h.css&&void 0!==h.css["font-size"]?16*h.css["font-size"]:h.fontSize||12,I=h.margins||Object.assign({width:this.getPageWidth()},e),O="number"==typeof h.padding?h.padding:3,L=h.headerBackgroundColor||"#c8c8c8",te=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=te,this.setFontSize(F),null==d)A=b=Object.keys(u[0]),T=b.map(function(){return"left"});else if(Array.isArray(d)&&"object"===Tr(d[0]))for(b=d.map(function(Ge){return Ge.name}),A=d.map(function(Ge){return Ge.prompt||Ge.name||""}),T=d.map(function(Ge){return Ge.align||"left"}),f=0;f<d.length;f+=1)V[d[f].name]=.7499990551181103*d[f].width;else Array.isArray(d)&&"string"==typeof d[0]&&(A=b=d,T=b.map(function(){return"left"}));if(D||Array.isArray(d)&&"string"==typeof d[0])for(f=0;f<b.length;f+=1){for(P[y=b[f]]=u.map(function(Ge){return Ge[y]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(A[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=P[y],this.setFont(void 0,"normal"),v=0;v<m.length;v+=1)q.push(this.getTextDimensions(m[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[y]=Math.max.apply(null,q)+O+O,q=[]}if(S){var me={};for(f=0;f<b.length;f+=1)me[b[f]]={},me[b[f]].text=A[f],me[b[f]].align=T[f];var le=a.call(this,me,V);N=b.map(function(Ge){return new s(l,c,V[Ge],le,me[Ge].text,void 0,me[Ge].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var ue=d.reduce(function(Ge,Pe){return Ge[Pe.name]=Pe.align,Ge},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var he=a.call(this,u[f],V);for(v=0;v<b.length;v+=1){var be=u[f][b[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:v,data:be},this),o.call(this,new s(l,c,V[b[v]],he,be,f+2,ue[b[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var m=l[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,m){return Math.max(f,m)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,"function"==typeof this.internal.__cell__.headerFunction){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(Nt.API);var xW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},DW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],XR=SW(DW),PW=[100,200,300,400,500,600,700,800,900],wCe=SW(PW);function QR(n){var s,e=n.family.replace(/"|'/g,"").toLowerCase(),t=xW[s=(s=n.style)||"normal"]?s:"normal",r=function(s){return s?"number"==typeof s?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):"bold"===s?700:400:400}(n.weight),i=function(s){return"number"==typeof XR[s=s||"normal"]?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function MW(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var ACe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function RW(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function NW(n){return n.trimLeft()}function CCe(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function ECe(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],n.substring(e[0].length)]}var bC,OW,LW,d_,wC,FW,VW,BW,ZR=["times"];function UW(n,e,t,r,i){var s=4,o=zW;switch(i){case Nt.API.image_compression.FAST:s=1,o=jW;break;case Nt.API.image_compression.MEDIUM:s=6,o=$W;break;case Nt.API.image_compression.SLOW:s=9,o=HW}var a=Iy(n=function(l,c,u,d){for(var h,f=l.length/c,m=new Uint8Array(l.length+f),v=[ICe,jW,zW,$W,HW],y=0;y<f;y+=1){var b=y*c,A=l.subarray(b,b+c);if(d)m.set(d(A,u,h),b+y);else{for(var T=v.length,P=[],V=0;V<T;V+=1)P[V]=v[V](A,u,h);var q=SCe(P.concat());m.set(P[q],b+y)}h=A}return m}(n,e,Math.ceil(t*r/8),o),{level:s});return Nt.API.__addimage__.arrayBufferToBinaryString(a)}function ICe(n){var e=Array.apply([],n);return e.unshift(0),e}function jW(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1)r[i+1]=n[i]-(n[i-e]||0)+256&255;return r}function zW(n,e,t){var r=n.length,i=[];i[0]=2;for(var s=0;s<r;s+=1)i[s+1]=n[s]-(t&&t[s]||0)+256&255;return i}function $W(n,e,t){var r=n.length,i=[];i[0]=3;for(var s=0;s<r;s+=1)i[s+1]=n[s]+256-((n[s-e]||0)+(t&&t[s]||0)>>>1)&255;return i}function HW(n,e,t){var r=n.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=TCe(n[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);i[s+1]=n[s]-o+256&255}return i}function TCe(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),s=Math.abs(n+e-t-t);return r<=i&&r<=s?n:i<=s?e:t}function SCe(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function JR(n,e,t){var r=e*t,i=Math.floor(r/8),s=16-(r-8*i+t),o=(1<<t)-1;return qW(n,i)>>s&o}function GW(n,e,t,r){var c,u,d,i=t*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(e&a)<<o;c=n,u=s,d=qW(n,s)&~(a<<o)&65535|l,u+1<c.byteLength?c.setUint16(u,d,!1):c.setUint8(u,d>>8&255)}function qW(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function xCe(n){var e=0;if(71!==n[e++]||73!==n[e++]||70!==n[e++]||56!==n[e++]||56!=(n[e++]+1&253)||97!==n[e++])throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=1<<1+(7&i);e++,e++;var a=null,l=null;i>>7&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,f=0,m=null;for(this.width=t,this.height=r;c&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(11!==n[e]||78==n[e+1]&&69==n[e+2]&&84==n[e+3]&&83==n[e+4]&&67==n[e+5]&&65==n[e+6]&&80==n[e+7]&&69==n[e+8]&&50==n[e+9]&&46==n[e+10]&&48==n[e+11]&&3==n[e+12]&&1==n[e+13]&&0==n[e+16])e+=14,m=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(0===I)break;e+=I}break;case 249:if(4!==n[e++]||0!==n[e+4])throw new Error("Invalid graphics extension block.");var v=n[e++];d=n[e++]|n[e++]<<8,h=n[e++],1&v||(h=null),f=v>>2&7,e++;break;case 254:for(;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(0===I)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var y=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,P=n[e++],V=P>>6&1,q=1<<1+(7&P),N=a,D=l,S=!1;P>>7&&(S=!0,N=e,D=q,e+=3*q);var F=e;for(e++;;){var I;if(!((I=n[e++])>=0))throw Error("Invalid block size");if(0===I)break;e+=I}u.push({x:y,y:b,width:A,height:T,has_local_palette:S,palette_offset:N,palette_size:D,data_offset:F,data_length:e-F,transparent_index:h,interlaced:!!V,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,L){var te=this.frameInfo(O),me=te.width*te.height,le=new Uint8Array(me);WW(n,te.data_offset,le,me);var ue=te.palette_offset,he=te.transparent_index;null===he&&(he=256);var be=te.width,Ge=t-be,Pe=be,j=4*(te.y*t+te.x),Y=4*((te.y+te.height)*t+te.x),ne=j,ie=4*Ge;!0===te.interlaced&&(ie+=4*t*7);for(var de=8,fe=0,Ce=le.length;fe<Ce;++fe){var Ie=le[fe];if(0===Pe&&(Pe=be,(ne+=ie)>=Y&&(ie=4*Ge+4*t*(de-1),ne=j+(be+Ge)*(de<<1),de>>=1)),Ie===he)ne+=4;else{var ke=n[ue+3*Ie],Me=n[ue+3*Ie+1];L[ne++]=n[ue+3*Ie+2],L[ne++]=Me,L[ne++]=ke,L[ne++]=255}--Pe}},this.decodeAndBlitFrameRGBA=function(O,L){var te=this.frameInfo(O),me=te.width*te.height,le=new Uint8Array(me);WW(n,te.data_offset,le,me);var ue=te.palette_offset,he=te.transparent_index;null===he&&(he=256);var be=te.width,Ge=t-be,Pe=be,j=4*(te.y*t+te.x),Y=4*((te.y+te.height)*t+te.x),ne=j,ie=4*Ge;!0===te.interlaced&&(ie+=4*t*7);for(var de=8,fe=0,Ce=le.length;fe<Ce;++fe){var Ie=le[fe];if(0===Pe&&(Pe=be,(ne+=ie)>=Y&&(ie=4*Ge+4*t*(de-1),ne=j+(be+Ge)*(de<<1),de>>=1)),Ie===he)ne+=4;else{var Me=n[ue+3*Ie+1],Je=n[ue+3*Ie+2];L[ne++]=n[ue+3*Ie],L[ne++]=Me,L[ne++]=Je,L[ne++]=255}--Pe}}}function WW(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,f=n[e++],m=new Int32Array(4096),v=null;;){for(;u<16&&0!==f;)d|=n[e++]<<u,u+=8,1===f?f=n[e++]:--f;if(u<l)break;var y=d&c;if(d>>=l,u-=l,y!==s){if(y===o)break;for(var b=y<a?y:v,A=0,T=b;T>s;)T=m[T]>>8,++A;var P=T;if(h+A+(b!==y?1:0)>r)return void Vr.log("Warning, gif stream longer than expected.");t[h++]=P;var V=h+=A;for(b!==y&&(t[h++]=P),T=b;A--;)t[--V]=255&(T=m[T]),T>>=8;null!==v&&a<4096&&(m[a++]=v<<8|P,a>=c+1&&l<12&&(++l,c=c<<1|1)),v=y}else a=o+1,c=(1<<(l=i+1))-1,v=null}return h!==r&&Vr.log("Warning, gif stream shorter than expected."),t}function eN(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),m=new Array(64),v=[],y=0,b=7,A=new Array(64),T=new Array(64),P=new Array(64),V=new Array(256),q=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(j,Y){for(var ne=0,ie=0,de=new Array,fe=1;fe<=16;fe++){for(var Ce=1;Ce<=j[fe];Ce++)de[Y[ie]]=[],de[Y[ie]][0]=ne,de[Y[ie]][1]=fe,ie++,ne++;ne*=2}return de}function ue(j){for(var Y=j[0],ne=j[1]-1;ne>=0;)Y&1<<ne&&(y|=1<<b),ne--,--b<0&&(255==y?(he(255),he(0)):he(y),b=7,y=0)}function he(j){v.push(j)}function be(j){he(j>>8&255),he(255&j)}function Ge(j,Y,ne,ie,de){for(var fe,Ce=de[0],Ie=de[240],ke=function(Ke,Tt){var at,on,Rt,Rn,Ht,Zt,hn,Dt,It,qt,Pt=0;for(It=0;It<8;++It){var mr=(at=Ke[Pt])+(Dt=Ke[Pt+7]),Vn=at-Dt,Xe=(on=Ke[Pt+1])+(hn=Ke[Pt+6]),Ot=on-hn,fn=(Rt=Ke[Pt+2])+(Zt=Ke[Pt+5]),Lt=Rt-Zt,Sn=(Rn=Ke[Pt+3])+(Ht=Ke[Pt+4]),Mt=Rn-Ht,vr=mr+Sn,si=mr-Sn,er=Xe+fn,Wt=Xe-fn;Ke[Pt]=vr+er,Ke[Pt+4]=vr-er;var qn=.707106781*(Wt+si);Ke[Pt+2]=si+qn,Ke[Pt+6]=si-qn;var so=.382683433*((vr=Mt+Lt)-(Wt=Ot+Vn)),Li=.5411961*vr+so,Ro=1.306562965*Wt+so,js=.707106781*(er=Lt+Ot),Bt=Vn+js,Ul=Vn-js;Ke[Pt+5]=Ul+Li,Ke[Pt+3]=Ul-Li,Ke[Pt+1]=Bt+Ro,Ke[Pt+7]=Bt-Ro,Pt+=8}for(Pt=0,It=0;It<8;++It){var oi=(at=Ke[Pt])+(Dt=Ke[Pt+56]),ra=at-Dt,zs=(on=Ke[Pt+8])+(hn=Ke[Pt+48]),kr=on-hn,us=(Rt=Ke[Pt+16])+(Zt=Ke[Pt+40]),bs=Rt-Zt,Pa=(Rn=Ke[Pt+24])+(Ht=Ke[Pt+32]),pu=Rn-Ht,rl=oi+Pa,ia=oi-Pa,Ma=zs+us,sa=zs-us;Ke[Pt]=rl+Ma,Ke[Pt+32]=rl-Ma;var oo=.707106781*(sa+ia);Ke[Pt+16]=ia+oo,Ke[Pt+48]=ia-oo;var No=.382683433*((rl=pu+bs)-(sa=kr+ra)),il=.5411961*rl+No,gu=1.306562965*sa+No,mu=.707106781*(Ma=bs+kr),_u=ra+mu,gd=ra-mu;Ke[Pt+40]=gd+il,Ke[Pt+24]=gd-il,Ke[Pt+8]=_u+gu,Ke[Pt+56]=_u-gu,Pt++}for(It=0;It<64;++It)f[It]=(qt=Ke[It]*Tt[It])>0?qt+.5|0:qt-.5|0;return f}(j,Y),Me=0;Me<64;++Me)m[N[Me]]=ke[Me];var Je=m[0]-ne;ne=m[0],0==Je?ue(ie[0]):(ue(ie[h[fe=32767+Je]]),ue(d[fe]));for(var et=63;et>0&&0==m[et];)et--;if(0==et)return ue(Ce),ne;for(var De,re=1;re<=et;){for(var Mn=re;0==m[re]&&re<=et;)++re;var sn=re-Mn;if(sn>=16){De=sn>>4;for(var Vt=1;Vt<=De;++Vt)ue(Ie);sn&=15}ue(de[(sn<<4)+h[fe=32767+m[re]]]),ue(d[fe]),re++}return 63!=et&&ue(Ce),ne}function Pe(j){j=Math.min(Math.max(j,1),100),s!=j&&(function(Y){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var de=o((ne[ie]*Y+50)/100);de=Math.min(Math.max(de,1),255),a[N[ie]]=de}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var Ie=o((fe[Ce]*Y+50)/100);Ie=Math.min(Math.max(Ie,1),255),l[N[Ce]]=Ie}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Je=0;Je<8;Je++)for(var et=0;et<8;et++)c[Me]=1/(a[N[Me]]*ke[Je]*ke[et]*8),u[Me]=1/(l[N[Me]]*ke[Je]*ke[et]*8),Me++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),s=j)}this.encode=function(j,Y){var on,Rt;Y&&Pe(Y),v=new Array,y=0,b=7,be(65496),be(65504),be(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),be(1),be(1),he(0),he(0),function(){be(65499),be(132),he(0);for(var on=0;on<64;on++)he(a[on]);he(1);for(var Rt=0;Rt<64;Rt++)he(l[Rt])}(),on=j.width,Rt=j.height,be(65472),be(17),he(8),be(Rt),be(on),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1),function(){be(65476),be(418),he(0);for(var on=0;on<16;on++)he(D[on+1]);for(var Rt=0;Rt<=11;Rt++)he(S[Rt]);he(16);for(var Rn=0;Rn<16;Rn++)he(F[Rn+1]);for(var Ht=0;Ht<=161;Ht++)he(I[Ht]);he(1);for(var Zt=0;Zt<16;Zt++)he(O[Zt+1]);for(var hn=0;hn<=11;hn++)he(L[hn]);he(17);for(var Dt=0;Dt<16;Dt++)he(te[Dt+1]);for(var It=0;It<=161;It++)he(me[It])}(),be(65498),be(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var ne=0,ie=0,de=0;y=0,b=7,this.encode.displayName="_encode_";for(var fe,Ce,Ie,ke,Me,Je,et,De,re,Mn=j.data,Vt=j.height,Ke=4*j.width,Tt=0;Tt<Vt;){for(fe=0;fe<Ke;){for(Me=Ke*Tt+fe,et=-1,De=0,re=0;re<64;re++)Je=Me+(De=re>>3)*Ke+(et=4*(7&re)),Tt+De>=Vt&&(Je-=Ke*(Tt+1+De-Vt)),fe+et>=Ke&&(Je-=fe+et-Ke+4),Ce=Mn[Je++],Ie=Mn[Je++],ke=Mn[Je++],A[re]=(q[Ce]+q[Ie+256|0]+q[ke+512|0]>>16)-128,T[re]=(q[Ce+768|0]+q[Ie+1024|0]+q[ke+1280|0]>>16)-128,P[re]=(q[Ce+1280|0]+q[Ie+1536|0]+q[ke+1792|0]>>16)-128;ne=Ge(A,c,ne,e,r),ie=Ge(T,u,ie,t,i),de=Ge(P,u,de,t,i),fe+=32}Tt+=8}if(b>=0){var at=[];at[1]=b+1,at[0]=(1<<b+1)-1,ue(at)}return be(65497),new Uint8Array(v)},n=n||50,function(){for(var j=String.fromCharCode,Y=0;Y<256;Y++)V[Y]=j(Y)}(),e=le(D,S),t=le(O,L),r=le(F,I),i=le(te,me),function(){for(var j=1,Y=2,ne=1;ne<=15;ne++){for(var ie=j;ie<Y;ie++)h[32767+ie]=ne,d[32767+ie]=[],d[32767+ie][1]=ne,d[32767+ie][0]=ie;for(var de=-(Y-1);de<=-j;de++)h[32767+de]=ne,d[32767+de]=[],d[32767+de][1]=ne,d[32767+de][0]=Y-1+de;j<<=1,Y<<=1}}(),function(){for(var j=0;j<256;j++)q[j]=19595*j,q[j+256|0]=38470*j,q[j+512|0]=7471*j+32768,q[j+768|0]=-11059*j,q[j+1024|0]=-21709*j,q[j+1280|0]=32768*j+8421375,q[j+1536|0]=-27439*j,q[j+1792|0]=-5329*j}(),Pe(n)}function hc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function KW(n){function e(S){if(!S)throw Error("assert :P")}function t(S,F,I){for(var O=0;4>O;O++)if(S[F+O]!=I.charCodeAt(O))return!0;return!1}function r(S,F,I,O,L){for(var te=0;te<L;te++)S[F+te]=I[O+te]}function i(S,F,I,O){for(var L=0;L<O;L++)S[F+L]=I}function s(S){return new Int32Array(S)}function o(S,F){for(var I=[],O=0;O<S;O++)I.push(new F);return I}function a(S,F){var I=[];return function O(L,te,me){for(var le=me[te],ue=0;ue<le&&(L.push(me.length>te+1?[]:new F),!(me.length<te+1));ue++)O(L[ue],te+1,me)}(I,0,S),I}var l=function(){var S=this;function F(p,_){for(var C=1<<_-1>>>0;p&C;)C>>>=1;return C?(p&C-1)+C:p}function I(p,_,C,k,U){e(!(k%C));do{p[_+(k-=C)]=U}while(0<k)}function O(p,_,C,k,U){if(e(2328>=U),512>=U)var $=s(512);else if(null==($=s(U)))return 0;return function(G,K,X,J,ce,Ae){var ee,pe,ve=K,Re=1<<X,we=s(16),Oe=s(16);for(e(0!=ce),e(null!=J),e(null!=G),e(0<X),pe=0;pe<ce;++pe){if(15<J[pe])return 0;++we[J[pe]]}if(we[0]==ce)return 0;for(Oe[1]=0,ee=1;15>ee;++ee){if(we[ee]>1<<ee)return 0;Oe[ee+1]=Oe[ee]+we[ee]}for(pe=0;pe<ce;++pe)ee=J[pe],0<J[pe]&&(Ae[Oe[ee]++]=pe);if(1==Oe[15])return(J=new L).g=0,J.value=Ae[0],I(G,ve,1,Re,J),Re;var Fe,Ye=-1,ze=Re-1,Ft=0,yt=1,Nn=1,St=1<<X;for(pe=0,ee=1,ce=2;ee<=X;++ee,ce<<=1){if(yt+=Nn<<=1,0>(Nn-=we[ee]))return 0;for(;0<we[ee];--we[ee])(J=new L).g=ee,J.value=Ae[pe++],I(G,ve+Ft,ce,St,J),Ft=F(Ft,ee)}for(ee=X+1,ce=2;15>=ee;++ee,ce<<=1){if(yt+=Nn<<=1,0>(Nn-=we[ee]))return 0;for(;0<we[ee];--we[ee]){if(J=new L,(Ft&ze)!=Ye){for(ve+=St,Fe=1<<(Ye=ee)-X;15>Ye&&!(0>=(Fe-=we[Ye]));)++Ye,Fe<<=1;Re+=St=1<<(Fe=Ye-X),G[K+(Ye=Ft&ze)].g=Fe+X,G[K+Ye].value=ve-K-Ye}J.g=ee-X,J.value=Ae[pe++],I(G,ve+(Ft>>X),ce,St,J),Ft=F(Ft,ee)}}return yt!=2*Oe[15]-1?0:Re}(p,_,C,k,U,$)}function L(){this.value=this.g=0}function te(){this.value=this.g=0}function me(){this.G=o(5,L),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Op,te)}function le(p,_,C,k){e(null!=p),e(null!=_),e(2147483648>k),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=_,p.pa=C,p.Jd=_,p.Yc=C+k,p.Zc=4<=k?C+k-4+1:C,Ce(p)}function ue(p,_){for(var C=0;0<_--;)C|=ke(p,128)<<_;return C}function he(p,_){var C=ue(p,_);return Ie(p)?-C:C}function be(p,_,C,k){var U,$=0;for(e(null!=p),e(null!=_),e(4294967288>k),p.Sb=k,p.Ra=0,p.u=0,p.h=0,4<k&&(k=4),U=0;U<k;++U)$+=_[C+U]<<8*U;p.Ra=$,p.bb=k,p.oa=_,p.pa=C}function Ge(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<qh-8>>>0,++p.bb,p.u-=8;ie(p)&&(p.h=1,p.u=0)}function Pe(p,_){if(e(0<=_),!p.h&&_<=cl){var C=ne(p)&ll[_];return p.u+=_,Ge(p),C}return p.h=1,p.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(p){return p.Ra>>>(p.u&qh-1)>>>0}function ie(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>qh}function de(p,_){p.u=_,p.h=ie(p)}function fe(p){p.u>=Pd&&(e(p.u>=Pd),Ge(p))}function Ce(p){e(null!=p&&null!=p.oa),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(null!=p&&null!=p.oa),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function Ie(p){return ue(p,1)}function ke(p,_){var C=p.Ca;0>p.b&&Ce(p);var k=p.b,U=C*_>>>8,$=(p.I>>>k>U)+0;for($?(C-=U,p.I-=U+1<<k>>>0):C=U+1,k=C,U=0;256<=k;)U+=8,k>>=8;return p.b-=k=7^U+Wh[k],p.Ca=(C<<k)-1,$}function Me(p,_,C){p[_+0]=C>>24&255,p[_+1]=C>>16&255,p[_+2]=C>>8&255,p[_+3]=255&C}function Je(p,_){return p[_+0]|p[_+1]<<8}function et(p,_){return Je(p,_)|p[_+2]<<16}function De(p,_){return Je(p,_)|Je(p,_+2)<<16}function re(p,_){var C=1<<_;return e(null!=p),e(0<_),p.X=s(C),null==p.X?0:(p.Mb=32-_,p.Xa=_,1)}function Mn(p,_){e(null!=p),e(null!=_),e(p.Xa==_.Xa),r(_.X,0,p.X,0,1<<_.Xa)}function sn(){this.X=[],this.Xa=this.Mb=0}function Vt(p,_,C,k){e(null!=C),e(null!=k);var U=C[0],$=k[0];return 0==U&&(U=(p*$+_/2)/_),0==$&&($=(_*U+p/2)/p),0>=U||0>=$?0:(C[0]=U,k[0]=$,1)}function Ke(p,_){return p+(1<<_)-1>>>_}function Tt(p,_){return((4278255360&p)+(4278255360&_)>>>0&4278255360)+((16711935&p)+(16711935&_)>>>0&16711935)>>>0}function at(p,_){S[_]=function(C,k,U,$,G,K,X){var J;for(J=0;J<G;++J){var ce=S[p](K[X+J-1],U,$+J);K[X+J]=Tt(C[k+J],ce)}}}function on(){this.ud=this.hd=this.jd=0}function Rt(p,_){return((4278124286&(p^_))>>>1)+(p&_)>>>0}function Rn(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Ht(p,_){return Rn(p+(p-_+.5>>1))}function Zt(p,_,C){return Math.abs(_-C)-Math.abs(p-C)}function hn(p,_,C,k,U,$,G){for(k=$[G-1],C=0;C<U;++C)$[G+C]=k=Tt(p[_+C],k)}function Dt(p,_,C,k,U){var $;for($=0;$<C;++$){var G=p[_+$],K=G>>8&255,X=16711935&(X=(X=16711935&G)+((K<<16)+K));k[U+$]=(4278255360&G)+X>>>0}}function It(p,_){_.jd=255&p,_.hd=p>>8&255,_.ud=p>>16&255}function qt(p,_,C,k,U,$){var G;for(G=0;G<k;++G){var K=_[C+G],X=K>>>8,J=K,ce=255&(ce=(ce=K>>>16)+((p.jd<<24>>24)*(X<<24>>24)>>>5));J=255&(J=(J+=(p.hd<<24>>24)*(X<<24>>24)>>>5)+((p.ud<<24>>24)*(ce<<24>>24)>>>5)),U[$+G]=(4278255360&K)+(ce<<16)+J}}function Pt(p,_,C,k,U){S[_]=function($,G,K,X,J,ce,Ae,ee,pe){for(X=Ae;X<ee;++X)for(Ae=0;Ae<pe;++Ae)J[ce++]=U(K[k($[G++])])},S[p]=function($,G,K,X,J,ce,Ae){var ee=8>>$.b,pe=$.Ea,ve=$.K[0],Re=$.w;if(8>ee)for($=(1<<$.b)-1,Re=(1<<ee)-1;G<K;++G){var we,Oe=0;for(we=0;we<pe;++we)we&$||(Oe=k(X[J++])),ce[Ae++]=U(ve[Oe&Re]),Oe>>=ee}else S["VP8LMapColor"+C](X,J,ve,Re,ce,Ae,G,K,pe)}}function mr(p,_,C,k,U){for(C=_+C;_<C;){var $=p[_++];k[U++]=$>>16&255,k[U++]=$>>8&255,k[U++]=255&$}}function Vn(p,_,C,k,U){for(C=_+C;_<C;){var $=p[_++];k[U++]=$>>16&255,k[U++]=$>>8&255,k[U++]=255&$,k[U++]=$>>24&255}}function Xe(p,_,C,k,U){for(C=_+C;_<C;){var $=(G=p[_++])>>16&240|G>>12&15,G=240&G|G>>28&15;k[U++]=$,k[U++]=G}}function Ot(p,_,C,k,U){for(C=_+C;_<C;){var $=(G=p[_++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;k[U++]=$,k[U++]=G}}function fn(p,_,C,k,U){for(C=_+C;_<C;){var $=p[_++];k[U++]=255&$,k[U++]=$>>8&255,k[U++]=$>>16&255}}function Lt(p,_,C,k,U,$){if(0==$)for(C=_+C;_<C;)Me(k,(($=p[_++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),U+=32;else r(k,U,p,_,C)}function Sn(p,_){S[_][0]=S[p+"0"],S[_][1]=S[p+"1"],S[_][2]=S[p+"2"],S[_][3]=S[p+"3"],S[_][4]=S[p+"4"],S[_][5]=S[p+"5"],S[_][6]=S[p+"6"],S[_][7]=S[p+"7"],S[_][8]=S[p+"8"],S[_][9]=S[p+"9"],S[_][10]=S[p+"10"],S[_][11]=S[p+"11"],S[_][12]=S[p+"12"],S[_][13]=S[p+"13"],S[_][14]=S[p+"0"],S[_][15]=S[p+"0"]}function Mt(p){return p==nO||p==rO||p==oE||p==iO}function vr(){this.eb=[],this.size=this.A=this.fb=0}function si(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function er(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new si,this.sd=null}function Wt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function so(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function Li(p,_){var C=p.T,k=_.ba.f.RGBA,U=k.eb,$=k.fb+p.ka*k.A,G=Xl[_.ba.S],K=p.y,X=p.O,J=p.f,ce=p.N,Ae=p.ea,ee=p.W,pe=_.cc,ve=_.dc,Re=_.Mc,we=_.Nc,Oe=p.ka,Fe=p.ka+p.T,Ye=p.U,ze=Ye+1>>1;for(0==Oe?G(K,X,null,null,J,ce,Ae,ee,J,ce,Ae,ee,U,$,null,null,Ye):(G(_.ec,_.fc,K,X,pe,ve,Re,we,J,ce,Ae,ee,U,$-k.A,U,$,Ye),++C);Oe+2<Fe;Oe+=2)G(K,(X+=2*p.fa)-p.fa,K,X,pe=J,ve=ce,Re=Ae,we=ee,J,ce+=p.Rc,Ae,ee+=p.Rc,U,($+=2*k.A)-k.A,U,$,Ye);return X+=p.fa,p.j+Fe<p.o?(r(_.ec,_.fc,K,X,Ye),r(_.cc,_.dc,J,ce,ze),r(_.Mc,_.Nc,Ae,ee,ze),C--):1&Fe||G(K,X,null,null,J,ce,Ae,ee,J,ce,Ae,ee,U,$+k.A,null,null,Ye),C}function Ro(p,_,C){var k=p.F,U=[p.J];if(null!=k){var $=p.U,G=_.ba.S,K=G==sE||G==oE;_=_.ba.f.RGBA;var X=[0],J=p.ka;X[0]=p.T,p.Kb&&(0==J?--X[0]:(--J,U[0]-=p.width),p.j+p.ka+p.T==p.o&&(X[0]=p.o-p.j-J));var ce=_.eb;p=nX(k,U[0],p.width,$,X,ce,(J=_.fb+J*_.A)+(K?0:3),_.A),e(C==X),p&&Mt(G)&&R1(ce,J,K,$,X,_.A)}return 0}function js(p){var _=p.ma,C=_.ba.S,k=11>C,U=C==rE||C==iE||C==sE||C==tO||12==C||Mt(C);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!Dd(_.Oa,p,U?11:12))return 0;if(U&&Mt(C)&&Np(),p.da)alert("todo:use_scaling");else{if(k){if(_.Ib=so,p.Kb){if(_.memory=s(p.U+2*(C=p.U+1>>1)),null==_.memory)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+p.U,_.Mc=_.cc,_.Nc=_.dc+C,_.Ib=Li,Np()}}else alert("todo:EmitYUV");U&&(_.Jb=Ro,k&&ao())}if(k&&!yX){for(p=0;256>p;++p)iDe[p]=89858*(p-128)+lE>>aE,aDe[p]=-22014*(p-128)+lE,oDe[p]=-45773*(p-128),sDe[p]=113618*(p-128)+lE>>aE;for(p=O1;p<aO;++p)lDe[p-O1]=jt(_=76283*(p-16)+lE>>aE,255),cDe[p-O1]=jt(_+8>>4,15);yX=1}return 1}function Bt(p){var _=p.ma,C=p.U,k=p.T;return e(!(1&p.ka)),0>=C||0>=k?0:(C=_.Ib(p,_),null!=_.Jb&&_.Jb(p,_,C),_.Dc+=C,1)}function Ul(p){p.ma.memory=null}function oi(p,_,C,k){return 47!=Pe(p,8)?0:(_[0]=Pe(p,14)+1,C[0]=Pe(p,14)+1,k[0]=Pe(p,1),0!=Pe(p,3)?0:!p.h)}function ra(p,_){if(4>p)return p+1;var C=p-2>>1;return(2+(1&p)<<C)+Pe(_,C)+1}function zs(p,_){return 120<_?_-120:1<=(C=((C=H5e[_-1])>>4)*p+(8-(15&C)))?C:1;var C}function kr(p,_,C){var k=ne(C),U=p[_+=255&k].g-8;return 0<U&&(de(C,C.u+8),k=ne(C),_+=p[_].value,_+=k&(1<<U)-1),de(C,C.u+p[_].g),p[_].value}function us(p,_,C){return C.g+=p.g,C.value+=p.value<<_>>>0,e(8>=C.g),p.g}function bs(p,_,C){var k=p.xc;return e((_=0==k?0:p.vc[p.md*(C>>k)+(_>>k)])<p.Wb),p.Ya[_]}function Pa(p,_,C,k){var U=p.ab,$=p.c*_,G=p.C;_=G+_;var K=C,X=k;for(k=p.Ta,C=p.Ua;0<U--;){var J=p.gc[U],ce=G,Ae=_,ee=K,pe=X,ve=(X=k,K=C,J.Ea);switch(e(ce<Ae),e(Ae<=J.nc),J.hc){case 2:Ji(ee,pe,(Ae-ce)*ve,X,K);break;case 0:var Re=ce,we=Ae,Oe=X,Fe=K,Ye=(St=J).Ea;0==Re&&(S1(ee,pe,null,null,1,Oe,Fe),hn(ee,pe+1,0,0,Ye-1,Oe,Fe+1),pe+=Ye,Fe+=Ye,++Re);for(var ze=1<<St.b,Ft=ze-1,yt=Ke(Ye,St.b),Nn=St.K,St=St.w+(Re>>St.b)*yt;Re<we;){var tr=Nn,As=St,On=1;for(M_(ee,pe,Oe,Fe-Ye,1,Oe,Fe);On<Ye;){var xt=(On&~Ft)+ze;xt>Ye&&(xt=Ye),(0,D1[tr[As++]>>8&15])(ee,pe+ +On,Oe,Fe+On-Ye,xt-On,Oe,Fe+On),On=xt}pe+=Ye,Fe+=Ye,++Re&Ft||(St+=yt)}Ae!=J.nc&&r(X,K-ve,X,K+(Ae-ce-1)*ve,ve);break;case 1:for(ve=ee,we=pe,Ye=(ee=J.Ea)-(Fe=ee&~(Oe=(pe=1<<J.b)-1)),Re=Ke(ee,J.b),ze=J.K,J=J.w+(ce>>J.b)*Re;ce<Ae;){for(Ft=ze,yt=J,Nn=new on,St=we+Fe,tr=we+ee;we<St;)It(Ft[yt++],Nn),P1(Nn,ve,we,pe,X,K),we+=pe,K+=pe;we<tr&&(It(Ft[yt++],Nn),P1(Nn,ve,we,Ye,X,K),we+=Ye,K+=Ye),++ce&Oe||(J+=Re)}break;case 3:if(ee==X&&pe==K&&0<J.b){for(we=X,ee=ve=K+(Ae-ce)*ve-(Fe=(Ae-ce)*Ke(J.Ea,J.b)),pe=X,Oe=K,Re=[],Fe=(Ye=Fe)-1;0<=Fe;--Fe)Re[Fe]=pe[Oe+Fe];for(Fe=Ye-1;0<=Fe;--Fe)we[ee+Fe]=Re[Fe];JC(J,ce,Ae,X,ve,X,K)}else JC(J,ce,Ae,ee,pe,X,K)}K=k,X=C}X!=C&&r(k,C,K,X,$)}function pu(p,_){var C=p.V,k=p.Ba+p.c*p.C,U=_-p.C;if(e(_<=p.l.o),e(16>=U),0<U){var $=p.l,G=p.Ta,K=p.Ua,X=$.width;if(Pa(p,U,C,k),U=K=[K],e((C=p.C)<(k=_)),e($.v<$.va),k>$.o&&(k=$.o),C<$.j){var J=$.j-C;C=$.j,U[0]+=J*X}if(C>=k?C=0:(U[0]+=4*$.v,$.ka=C-$.j,$.U=$.va-$.v,$.T=k-C,C=1),C){if(K=K[0],11>(C=p.ca).S){var ce=C.f.RGBA,Ae=(k=C.S,U=$.U,$=$.T,J=ce.eb,ce.A),ee=$;for(ce=ce.fb+p.Ma*ce.A;0<ee--;){var pe=G,ve=K,Re=U,we=J,Oe=ce;switch(k){case nE:M1(pe,ve,Re,we,Oe);break;case rE:Kh(pe,ve,Re,we,Oe);break;case nO:Kh(pe,ve,Re,we,Oe),R1(we,Oe,0,Re,1,0);break;case cX:Lp(pe,ve,Re,we,Oe);break;case iE:Lt(pe,ve,Re,we,Oe,1);break;case rO:Lt(pe,ve,Re,we,Oe,1),R1(we,Oe,0,Re,1,0);break;case sE:Lt(pe,ve,Re,we,Oe,0);break;case oE:Lt(pe,ve,Re,we,Oe,0),R1(we,Oe,1,Re,1,0);break;case tO:Yh(pe,ve,Re,we,Oe);break;case iO:Yh(pe,ve,Re,we,Oe),tX(we,Oe,Re,1,0);break;case uX:Xh(pe,ve,Re,we,Oe);break;default:e(0)}K+=X,ce+=Ae}p.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=C.height)}}p.C=_,e(p.C<=p.i)}function rl(p){var _;if(0<p.ua)return 0;for(_=0;_<p.Wb;++_){var C=p.Ya[_].G,k=p.Ya[_].H;if(0<C[1][k[1]+0].g||0<C[2][k[2]+0].g||0<C[3][k[3]+0].g)return 0}return 1}function ia(p,_,C,k,U,$){if(0!=p.Z){var G=p.qd,K=p.rd;for(e(null!=Jh[p.Z]);_<C;++_)Jh[p.Z](G,K,k,U,k,U,$),G=k,K=U,U+=$;p.qd=G,p.rd=K}}function Ma(p,_){var C=p.l.ma,k=0==C.Z||1==C.Z?p.l.j:p.C;if(k=p.C<k?k:p.C,e(_<=p.l.o),_>k){var U=p.l.width,$=C.ca,G=C.tb+U*k,K=p.V,X=p.Ba+p.c*k,J=p.gc;e(1==p.ab),e(3==J[0].hc),Iu(J[0],k,_,K,X,$,G),ia(C,k,_,$,G,U)}p.C=p.Ma=_}function sa(p,_,C,k,U,$,G){var K=p.$/k,X=p.$%k,J=p.m,ce=p.s,Ae=C+p.$,ee=Ae;U=C+k*U;var pe=C+k*$,ve=280+ce.ua,Re=p.Pb?K:16777216,we=0<ce.ua?ce.Wa:null,Oe=ce.wc,Fe=Ae<pe?bs(ce,X,K):null;e(p.C<$),e(pe<=U);var Ye=!1;e:for(;;){for(;Ye||Ae<pe;){var ze=0;if(K>=Re){var Ft=Ae-C;e((Re=p).Pb),Re.wd=Re.m,Re.xd=Ft,0<Re.s.ua&&Mn(Re.s.Wa,Re.s.vb),Re=K+q5e}if(X&Oe||(Fe=bs(ce,X,K)),e(null!=Fe),Fe.Qb&&(_[Ae]=Fe.qb,Ye=!0),!Ye)if(fe(J),Fe.jc){Ft=_;var yt=Ae,Nn=Fe.pd[ne(ze=J)&Op-1];e(Fe.jc),256>Nn.g?(de(ze,ze.u+Nn.g),Ft[yt]=Nn.value,ze=0):(de(ze,ze.u+Nn.g-256),e(256<=Nn.value),ze=Nn.value),0==ze&&(Ye=!0)}else ze=kr(Fe.G[0],Fe.H[0],J);if(J.h)break;if(Ye||256>ze){if(!Ye)if(Fe.nd)_[Ae]=(Fe.qb|ze<<8)>>>0;else{if(fe(J),Ye=kr(Fe.G[1],Fe.H[1],J),fe(J),Ft=kr(Fe.G[2],Fe.H[2],J),yt=kr(Fe.G[3],Fe.H[3],J),J.h)break;_[Ae]=(yt<<24|Ye<<16|ze<<8|Ft)>>>0}if(Ye=!1,++Ae,++X>=k&&(X=0,++K,null!=G&&K<=$&&!(K%16)&&G(p,K),null!=we))for(;ee<Ae;)ze=_[ee++],we.X[(506832829*ze&4294967295)>>>we.Mb]=ze}else if(280>ze){if(ze=ra(ze-256,J),Ft=kr(Fe.G[4],Fe.H[4],J),fe(J),Ft=zs(k,Ft=ra(Ft,J)),J.h)break;if(Ae-C<Ft||U-Ae<ze)break e;for(yt=0;yt<ze;++yt)_[Ae+yt]=_[Ae+yt-Ft];for(Ae+=ze,X+=ze;X>=k;)X-=k,++K,null!=G&&K<=$&&!(K%16)&&G(p,K);if(e(Ae<=U),X&Oe&&(Fe=bs(ce,X,K)),null!=we)for(;ee<Ae;)ze=_[ee++],we.X[(506832829*ze&4294967295)>>>we.Mb]=ze}else{if(!(ze<ve))break e;for(Ye=ze-280,e(null!=we);ee<Ae;)ze=_[ee++],we.X[(506832829*ze&4294967295)>>>we.Mb]=ze;ze=Ae,e(!(Ye>>>(Ft=we).Xa)),_[ze]=Ft.X[Ye],Ye=!0}Ye||e(J.h==ie(J))}if(p.Pb&&J.h&&Ae<U)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Mn(p.s.vb,p.s.Wa);else{if(J.h)break e;G?.(p,K>$?$:K),p.a=0,p.$=Ae-C}return 1}return p.a=3,0}function oo(p){e(null!=p),p.vc=null,p.yc=null,p.Ya=null;var _=p.Wa;null!=_&&(_.X=null),p.vb=null,e(null!=p)}function No(){var p=new Ct;return null==p?null:(p.a=0,p.xb=fX,Sn("Predictor","VP8LPredictors"),Sn("Predictor","VP8LPredictors_C"),Sn("PredictorAdd","VP8LPredictorsAdd"),Sn("PredictorAdd","VP8LPredictorsAdd_C"),Ji=Dt,P1=qt,M1=mr,Kh=Vn,Yh=Xe,Xh=Ot,Lp=fn,S.VP8LMapColor32b=Eu,S.VP8LMapColor8b=x1,p)}function il(p,_,C,k,U){var $=1,G=[p],K=[_],X=k.m,J=k.s,ce=null,Ae=0;e:for(;;){if(C)for(;$&&Pe(X,1);){var ee=G,pe=K,ve=k,Re=1,we=ve.m,Oe=ve.gc[ve.ab],Fe=Pe(we,2);if(ve.Oc&1<<Fe)$=0;else{switch(ve.Oc|=1<<Fe,Oe.hc=Fe,Oe.Ea=ee[0],Oe.nc=pe[0],Oe.K=[null],++ve.ab,e(4>=ve.ab),Fe){case 0:case 1:Oe.b=Pe(we,3)+2,Re=il(Ke(Oe.Ea,Oe.b),Ke(Oe.nc,Oe.b),0,ve,Oe.K),Oe.K=Oe.K[0];break;case 3:var Ye,ze=Pe(we,8)+1,Ft=16<ze?0:4<ze?1:2<ze?2:3;if(ee[0]=Ke(Oe.Ea,Ft),Oe.b=Ft,Ye=Re=il(ze,1,0,ve,Oe.K)){var yt,Nn=ze,St=Oe,tr=1<<(8>>St.b),As=s(tr);if(null==As)Ye=0;else{var On=St.K[0],xt=St.w;for(As[0]=St.K[0][0],yt=1;yt<1*Nn;++yt)As[yt]=Tt(On[xt+yt],As[yt-1]);for(;yt<4*tr;++yt)As[yt]=0;St.K[0]=null,St.K[0]=As,Ye=1}}Re=Ye;break;case 2:break;default:e(0)}$=Re}}if(G=G[0],K=K[0],$&&Pe(X,1)&&!($=1<=(Ae=Pe(X,4))&&11>=Ae)){k.a=3;break e}var lt;if(lt=$)t:{var ts,xn,ar,ai=k,lo=G,oa=K,Vi=Ae,Fo=C,aa=ai.m,Cs=ai.s,cr=[null],Dr=1,Bi=0,Pr=G5e[Vi];n:for(;;){if(Fo&&Pe(aa,1)){var co=Pe(aa,3)+2,Ec=Ke(lo,co),ns=Ke(oa,co),La=Ec*ns;if(!il(Ec,ns,0,ai,cr))break n;for(cr=cr[0],Cs.xc=co,ts=0;ts<La;++ts){var jr=cr[ts]>>8&65535;cr[ts]=jr,jr>=Dr&&(Dr=jr+1)}}if(aa.h)break n;for(xn=0;5>xn;++xn){var Es=dX[xn];!xn&&0<Vi&&(Es+=1<<Vi),Bi<Es&&(Bi=Es)}var dl=o(Dr*Pr,L),la=Dr,hl=o(la,me);if(null==hl)var fl=null;else e(65536>=la),fl=hl;var Fa=s(Bi);if(null==fl||null==Fa||null==dl){ai.a=1;break n}var pl=dl;for(ts=ar=0;ts<Dr;++ts){var Xr=fl[ts],gl=Xr.G,Ic=Xr.H,Vp=0,Rd=1,uo=0;for(xn=0;5>xn;++xn){Es=dX[xn],gl[xn]=pl,Ic[xn]=ar,!xn&&0<Vi&&(Es+=1<<Vi);i:{var uE,lO=Es,dE=ai,L1=Fa,hDe=pl,fDe=ar,cO=0,ef=dE.m,pDe=Pe(ef,1);if(i(L1,0,0,lO),pDe){var gDe=Pe(ef,1)+1,mDe=Pe(ef,1),AX=Pe(ef,0==mDe?1:8);L1[AX]=1,2==gDe&&(L1[AX=Pe(ef,8)]=1);var hE=1}else{var CX=s(19),EX=Pe(ef,4)+4;if(19<EX){dE.a=3;var fE=0;break i}for(uE=0;uE<EX;++uE)CX[$5e[uE]]=Pe(ef,3);var uO=void 0,F1=void 0,IX=dE,_De=CX,pE=lO,TX=L1,dO=0,tf=IX.m,SX=8,xX=o(128,L);r:for(;O(xX,0,7,_De,19);){if(Pe(tf,1)){var vDe=2+2*Pe(tf,3);if((uO=2+Pe(tf,vDe))>pE)break r}else uO=pE;for(F1=0;F1<pE&&uO--;){fe(tf);var DX=xX[0+(127&ne(tf))];de(tf,tf.u+DX.g);var R_=DX.value;if(16>R_)TX[F1++]=R_,0!=R_&&(SX=R_);else{var yDe=16==R_,PX=R_-16,bDe=j5e[PX],MX=Pe(tf,U5e[PX])+bDe;if(F1+MX>pE)break r;for(var wDe=yDe?SX:0;0<MX--;)TX[F1++]=wDe}}dO=1;break r}dO||(IX.a=3),hE=dO}(hE=hE&&!ef.h)&&(cO=O(hDe,fDe,8,L1,lO)),hE&&0!=cO?fE=cO:(dE.a=3,fE=0)}if(0==fE)break n;if(Rd&&1==z5e[xn]&&(Rd=0==pl[ar].g),Vp+=pl[ar].g,ar+=fE,3>=xn){var V1,hO=Fa[0];for(V1=1;V1<Es;++V1)Fa[V1]>hO&&(hO=Fa[V1]);uo+=hO}}if(Xr.nd=Rd,Xr.Qb=0,Rd&&(Xr.qb=(gl[3][Ic[3]+0].value<<24|gl[1][Ic[1]+0].value<<16|gl[2][Ic[2]+0].value)>>>0,0==Vp&&256>gl[0][Ic[0]+0].value&&(Xr.Qb=1,Xr.qb+=gl[0][Ic[0]+0].value<<8)),Xr.jc=!Xr.Qb&&6>uo,Xr.jc){var gE,Nd=Xr;for(gE=0;gE<Op;++gE){var nf=gE,rf=Nd.pd[nf],mE=Nd.G[0][Nd.H[0]+nf];256<=mE.value?(rf.g=mE.g+256,rf.value=mE.value):(rf.g=0,rf.value=0,nf>>=us(mE,8,rf),nf>>=us(Nd.G[1][Nd.H[1]+nf],16,rf),nf>>=us(Nd.G[2][Nd.H[2]+nf],0,rf),us(Nd.G[3][Nd.H[3]+nf],24,rf))}}}Cs.vc=cr,Cs.Wb=Dr,Cs.Ya=fl,Cs.yc=dl,lt=1;break t}lt=0}if(!($=lt)){k.a=3;break e}if(0<Ae){if(J.ua=1<<Ae,!re(J.Wa,Ae)){k.a=1,$=0;break e}}else J.ua=0;var fO=k,kX=G,ADe=K,pO=fO.s,gO=pO.xc;if(fO.c=kX,fO.i=ADe,pO.md=Ke(kX,gO),pO.wc=0==gO?-1:(1<<gO)-1,C){k.xb=J5e;break e}if(null==(ce=s(G*K))){k.a=1,$=0;break e}$=($=sa(k,ce,0,G,K,K,null))&&!X.h;break e}return $?(null!=U?U[0]=ce:(e(null==ce),e(C)),k.$=0,C||oo(J)):oo(J),$}function gu(p,_){var C=p.c*p.i,k=C+_+16*_;return e(p.c<=_),p.V=s(k),null==p.V?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+C+_,1)}function mu(p,_){var C=p.C,k=_-C,U=p.V,$=p.Ba+p.c*C;for(e(_<=p.l.o);0<k;){var G=16<k?16:k,K=p.l.ma,X=p.l.width,J=X*G,ce=K.ca,Ae=K.tb+X*C,ee=p.Ta,pe=p.Ua;Pa(p,G,U,$),rX(ee,pe,ce,Ae,J),ia(K,C,C+G,ce,Ae,X),k-=G,U+=G*p.c,C+=G}e(C==_),p.C=p.Ma=_}function _u(){this.ub=this.yd=this.td=this.Rb=0}function gd(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function T_(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ep(){var p;this.Yb=(function _(C,k,U){for(var $=U[k],G=0;G<$&&(C.push(U.length>k+1?[]:0),!(U.length<k+1));G++)_(C[G],k+1,U)}(p=[],0,[3,11]),p)}function md(){this.jb=s(3),this.Wc=a([4,8],Ep),this.Xc=a([4,17],Ep)}function Ip(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Oo(){this.ld=this.La=this.dd=this.tc=0}function mc(){this.Na=this.la=0}function jl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _d(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function S_(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oo),this.Y=0,this.ya=Array(new _d),this.aa=0,this.l=new vd}function Tp(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Sp(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new _u,this.Kc=new gd,this.ed=new Ip,this.Qa=new T_,this.Ic=this.$c=this.Aa=0,this.D=new S_,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,j),this.ia=0,this.pb=o(4,jl),this.Pa=new md,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tp),this.Hd=0,this.rb=Array(new mc),this.sb=0,this.wa=Array(new Oo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _d),this.L=this.aa=0,this.gd=a([4,2],Oo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vd(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xp(){var p=new Sp;return null!=p&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,N1||(N1=_c)),p}function vi(p,_,C){return 0==p.a&&(p.a=_,p.sc=C,p.cb=0),0}function Dp(p,_,C){return 3<=C&&157==p[_+0]&&1==p[_+1]&&42==p[_+2]}function Pp(p,_){if(null==p)return 0;if(p.a=0,p.sc="OK",null==_)return vi(p,2,"null VP8Io passed to VP8GetHeaders()");var C=_.data,k=_.w,U=_.ha;if(4>U)return vi(p,7,"Truncated header.");var $=C[k+0]|C[k+1]<<8|C[k+2]<<16,G=p.Od;if(G.Rb=!(1&$),G.td=$>>1&7,G.yd=$>>4&1,G.ub=$>>5,3<G.td)return vi(p,3,"Incorrect keyframe parameters.");if(!G.yd)return vi(p,4,"Frame not displayable.");k+=3,U-=3;var K=p.Kc;if(G.Rb){if(7>U)return vi(p,7,"cannot parse picture header");if(!Dp(C,k,U))return vi(p,3,"Bad code word");K.c=16383&(C[k+4]<<8|C[k+3]),K.Td=C[k+4]>>6,K.i=16383&(C[k+6]<<8|C[k+5]),K.Ud=C[k+6]>>6,k+=7,U-=7,p.za=K.c+15>>4,p.Ub=K.i+15>>4,_.width=K.c,_.height=K.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,i(($=p.Pa).jb,0,255,$.jb.length),e(null!=($=p.Qa)),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(G.ub>U)return vi(p,7,"bad partition length");le($=p.m,C,k,G.ub),k+=G.ub,U-=G.ub,G.Rb&&(K.Ld=Ie($),K.Kd=Ie($)),K=p.Qa;var X,J=p.Pa;if(e(null!=$),e(null!=K),K.Cb=Ie($),K.Cb){if(K.Bb=Ie($),Ie($)){for(K.Fb=Ie($),X=0;4>X;++X)K.Zb[X]=Ie($)?he($,7):0;for(X=0;4>X;++X)K.Lb[X]=Ie($)?he($,6):0}if(K.Bb)for(X=0;3>X;++X)J.jb[X]=Ie($)?ue($,8):255}else K.Bb=0;if($.Ka)return vi(p,3,"cannot parse segment header");if((K=p.ed).zd=Ie($),K.Tb=ue($,6),K.wb=ue($,3),K.Pc=Ie($),K.Pc&&Ie($)){for(J=0;4>J;++J)Ie($)&&(K.vd[J]=he($,6));for(J=0;4>J;++J)Ie($)&&(K.od[J]=he($,6))}if(p.L=0==K.Tb?0:K.zd?1:2,$.Ka)return vi(p,3,"cannot parse filter header");var ce=U;if(U=X=k,k=X+ce,K=ce,p.Xb=(1<<ue(p.m,2))-1,ce<3*(J=p.Xb))C=7;else{for(X+=3*J,K-=3*J,ce=0;ce<J;++ce){var Ae=C[U+0]|C[U+1]<<8|C[U+2]<<16;Ae>K&&(Ae=K),le(p.Jc[+ce],C,X,Ae),X+=Ae,K-=Ae,U+=3}le(p.Jc[+J],C,X,K),C=X<k?0:5}if(0!=C)return vi(p,C,"cannot parse partitions");for(C=ue(X=p.m,7),U=Ie(X)?he(X,4):0,k=Ie(X)?he(X,4):0,K=Ie(X)?he(X,4):0,J=Ie(X)?he(X,4):0,X=Ie(X)?he(X,4):0,ce=p.Qa,Ae=0;4>Ae;++Ae){if(ce.Cb){var ee=ce.Zb[Ae];ce.Fb||(ee+=C)}else{if(0<Ae){p.pb[Ae]=p.pb[0];continue}ee=C}var pe=p.pb[Ae];pe.Sc[0]=sO[jt(ee+U,127)],pe.Sc[1]=oO[jt(ee+0,127)],pe.Eb[0]=2*sO[jt(ee+k,127)],pe.Eb[1]=101581*oO[jt(ee+K,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=sO[jt(ee+J,117)],pe.Qc[1]=oO[jt(ee+X,127)],pe.lc=ee+X}if(!G.Rb)return vi(p,4,"Not a key frame.");for(Ie($),G=p.Pa,C=0;4>C;++C){for(U=0;8>U;++U)for(k=0;3>k;++k)for(K=0;11>K;++K)J=ke($,Q5e[C][U][k][K])?ue($,8):Y5e[C][U][k][K],G.Wc[C][U].Yb[k][K]=J;for(U=0;17>U;++U)G.Xc[C][U]=G.Wc[C][Z5e[U]]}return p.kc=Ie($),p.kc&&(p.Bd=ue($,8)),p.cb=1}function _c(p,_,C,k,U,$,G){var K=_[U].Yb[C];for(C=0;16>U;++U){if(!ke(p,K[C+0]))return U;for(;!ke(p,K[C+1]);)if(K=_[++U].Yb[0],C=0,16==U)return 16;var X=_[U+1].Yb;if(ke(p,K[C+2])){var J=p,ce=0;if(ke(J,(ee=K)[(Ae=C)+3]))if(ke(J,ee[Ae+6])){for(K=0,Ae=2*(ce=ke(J,ee[Ae+8]))+(ee=ke(J,ee[Ae+9+ce])),ce=0,ee=W5e[Ae];ee[K];++K)ce+=ce+ke(J,ee[K]);ce+=3+(8<<Ae)}else ke(J,ee[Ae+7])?(ce=7+2*ke(J,165),ce+=ke(J,145)):ce=5+ke(J,159);else ce=ke(J,ee[Ae+4])?3+ke(J,ee[Ae+5]):2;K=X[2]}else ce=1,K=X[1];X=G+K5e[U],0>(J=p).b&&Ce(J);var Ae,ee=J.b,pe=(Ae=J.Ca>>1)-(J.I>>ee)>>31;--J.b,J.Ca+=pe,J.Ca|=1,J.I-=(Ae+1&pe)<<ee,$[X]=((ce^pe)-pe)*k[(0<U)+0]}return 16}function yd(p){var _=p.rb[p.sb-1];_.la=0,_.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function ka(p,_,C,k,U){p[_+C+32*k]=-256&(U=p[_+C+32*k]+(U>>3))?0>U?0:255:U}function vu(p,_,C,k,U,$){ka(p,_,0,C,k+U),ka(p,_,1,C,k+$),ka(p,_,2,C,k-$),ka(p,_,3,C,k-U)}function Ii(p){return(20091*p>>16)+p}function sl(p,_,C,k){var U,$=0,G=s(16);for(U=0;4>U;++U){var K=p[_+0]+p[_+8],X=p[_+0]-p[_+8],J=(35468*p[_+4]>>16)-Ii(p[_+12]),ce=Ii(p[_+4])+(35468*p[_+12]>>16);G[$+0]=K+ce,G[$+1]=X+J,G[$+2]=X-J,G[$+3]=K-ce,$+=4,_++}for(U=$=0;4>U;++U)K=(p=G[$+0]+4)+G[$+8],X=p-G[$+8],J=(35468*G[$+4]>>16)-Ii(G[$+12]),ka(C,k,0,0,K+(ce=Ii(G[$+4])+(35468*G[$+12]>>16))),ka(C,k,1,0,X+J),ka(C,k,2,0,X-J),ka(C,k,3,0,K-ce),$++,k+=32}function ol(p,_,C,k){var U=p[_+0]+4,$=35468*p[_+4]>>16,G=Ii(p[_+4]),K=35468*p[_+1]>>16;vu(C,k,0,U+G,p=Ii(p[_+1]),K),vu(C,k,1,U+$,p,K),vu(C,k,2,U-$,p,K),vu(C,k,3,U-G,p,K)}function Uh(p,_,C,k,U){sl(p,_,C,k),U&&sl(p,_+16,C,k+4)}function jh(p,_,C,k){Fp(p,_+0,C,k,1),Fp(p,_+32,C,k+128,1)}function al(p,_,C,k){var U;for(p=p[_+0]+4,U=0;4>U;++U)for(_=0;4>_;++_)ka(C,k,_,U,p)}function yr(p,_,C,k){p[_+0]&&br(p,_+0,C,k),p[_+16]&&br(p,_+16,C,k+4),p[_+32]&&br(p,_+32,C,k+128),p[_+48]&&br(p,_+48,C,k+128+4)}function bd(p,_,C,k){var U,$=s(16);for(U=0;4>U;++U){var G=p[_+0+U]+p[_+12+U],K=p[_+4+U]+p[_+8+U],X=p[_+4+U]-p[_+8+U],J=p[_+0+U]-p[_+12+U];$[0+U]=G+K,$[8+U]=G-K,$[4+U]=J+X,$[12+U]=J-X}for(U=0;4>U;++U)G=(p=$[0+4*U]+3)+$[3+4*U],X=$[1+4*U]-$[2+4*U],J=p-$[3+4*U],C[k+0]=G+(K=$[1+4*U]+$[2+4*U])>>3,C[k+16]=J+X>>3,C[k+32]=G-K>>3,C[k+48]=J-X>>3,k+=64}function Ra(p,_,C){var k,U=_-32,$=ul,G=255-p[U-1];for(k=0;k<C;++k){var K,X=$,J=G+p[_-1];for(K=0;K<C;++K)p[_+K]=X[J+p[U+K]];_+=32}}function vc(p,_){Ra(p,_,4)}function b1(p,_){Ra(p,_,8)}function x_(p,_){Ra(p,_,16)}function w1(p,_){var C;for(C=0;16>C;++C)r(p,_+32*C,p,_-32,16)}function Mp(p,_){var C;for(C=16;0<C;--C)i(p,_,p[_-1],16),_+=32}function wd(p,_,C){var k;for(k=0;16>k;++k)i(_,C+32*k,p,16)}function yu(p,_){var C,k=16;for(C=0;16>C;++C)k+=p[_-1+32*C]+p[_+C-32];wd(k>>5,p,_)}function Ad(p,_){var C,k=8;for(C=0;16>C;++C)k+=p[_-1+32*C];wd(k>>4,p,_)}function Lo(p,_){var C,k=8;for(C=0;16>C;++C)k+=p[_+C-32];wd(k>>4,p,_)}function zh(p,_){wd(128,p,_)}function an(p,_,C){return p+2*_+C+2>>2}function D_(p,_){var C,k=_-32;for(k=new Uint8Array([an(p[k-1],p[k+0],p[k+1]),an(p[k+0],p[k+1],p[k+2]),an(p[k+1],p[k+2],p[k+3]),an(p[k+2],p[k+3],p[k+4])]),C=0;4>C;++C)r(p,_+32*C,k,0,k.length)}function bu(p,_){var C=p[_-1],k=p[_-1+32],U=p[_-1+64],$=p[_-1+96];Me(p,_+0,16843009*an(p[_-1-32],C,k)),Me(p,_+32,16843009*an(C,k,U)),Me(p,_+64,16843009*an(k,U,$)),Me(p,_+96,16843009*an(U,$,$))}function A1(p,_){var C,k=4;for(C=0;4>C;++C)k+=p[_+C-32]+p[_-1+32*C];for(k>>=3,C=0;4>C;++C)i(p,_+32*C,k,4)}function C1(p,_){var C=p[_-1+0],k=p[_-1+32],U=p[_-1+64],$=p[_-1-32],G=p[_+0-32],K=p[_+1-32],X=p[_+2-32],J=p[_+3-32];p[_+0+96]=an(k,U,p[_-1+96]),p[_+1+96]=p[_+0+64]=an(C,k,U),p[_+2+96]=p[_+1+64]=p[_+0+32]=an($,C,k),p[_+3+96]=p[_+2+64]=p[_+1+32]=p[_+0+0]=an(G,$,C),p[_+3+64]=p[_+2+32]=p[_+1+0]=an(K,G,$),p[_+3+32]=p[_+2+0]=an(X,K,G),p[_+3+0]=an(J,X,K)}function yc(p,_){var C=p[_+1-32],k=p[_+2-32],U=p[_+3-32],$=p[_+4-32],G=p[_+5-32],K=p[_+6-32],X=p[_+7-32];p[_+0+0]=an(p[_+0-32],C,k),p[_+1+0]=p[_+0+32]=an(C,k,U),p[_+2+0]=p[_+1+32]=p[_+0+64]=an(k,U,$),p[_+3+0]=p[_+2+32]=p[_+1+64]=p[_+0+96]=an(U,$,G),p[_+3+32]=p[_+2+64]=p[_+1+96]=an($,G,K),p[_+3+64]=p[_+2+96]=an(G,K,X),p[_+3+96]=an(K,X,X)}function $s(p,_){var C=p[_-1+0],k=p[_-1+32],U=p[_-1+64],$=p[_-1-32],G=p[_+0-32],K=p[_+1-32],X=p[_+2-32],J=p[_+3-32];p[_+0+0]=p[_+1+64]=$+G+1>>1,p[_+1+0]=p[_+2+64]=G+K+1>>1,p[_+2+0]=p[_+3+64]=K+X+1>>1,p[_+3+0]=X+J+1>>1,p[_+0+96]=an(U,k,C),p[_+0+64]=an(k,C,$),p[_+0+32]=p[_+1+96]=an(C,$,G),p[_+1+32]=p[_+2+96]=an($,G,K),p[_+2+32]=p[_+3+96]=an(G,K,X),p[_+3+32]=an(K,X,J)}function E1(p,_){var C=p[_+0-32],k=p[_+1-32],U=p[_+2-32],$=p[_+3-32],G=p[_+4-32],K=p[_+5-32],X=p[_+6-32],J=p[_+7-32];p[_+0+0]=C+k+1>>1,p[_+1+0]=p[_+0+64]=k+U+1>>1,p[_+2+0]=p[_+1+64]=U+$+1>>1,p[_+3+0]=p[_+2+64]=$+G+1>>1,p[_+0+32]=an(C,k,U),p[_+1+32]=p[_+0+96]=an(k,U,$),p[_+2+32]=p[_+1+96]=an(U,$,G),p[_+3+32]=p[_+2+96]=an($,G,K),p[_+3+64]=an(G,K,X),p[_+3+96]=an(K,X,J)}function I1(p,_){var C=p[_-1+0],k=p[_-1+32],U=p[_-1+64],$=p[_-1+96];p[_+0+0]=C+k+1>>1,p[_+2+0]=p[_+0+32]=k+U+1>>1,p[_+2+32]=p[_+0+64]=U+$+1>>1,p[_+1+0]=an(C,k,U),p[_+3+0]=p[_+1+32]=an(k,U,$),p[_+3+32]=p[_+1+64]=an(U,$,$),p[_+3+64]=p[_+2+64]=p[_+0+96]=p[_+1+96]=p[_+2+96]=p[_+3+96]=$}function zl(p,_){var C=p[_-1+0],k=p[_-1+32],U=p[_-1+64],$=p[_-1+96],G=p[_-1-32],K=p[_+0-32],X=p[_+1-32],J=p[_+2-32];p[_+0+0]=p[_+2+32]=C+G+1>>1,p[_+0+32]=p[_+2+64]=k+C+1>>1,p[_+0+64]=p[_+2+96]=U+k+1>>1,p[_+0+96]=$+U+1>>1,p[_+3+0]=an(K,X,J),p[_+2+0]=an(G,K,X),p[_+1+0]=p[_+3+32]=an(C,G,K),p[_+1+32]=p[_+3+64]=an(k,C,G),p[_+1+64]=p[_+3+96]=an(U,k,C),p[_+1+96]=an($,U,k)}function wu(p,_){var C;for(C=0;8>C;++C)r(p,_+32*C,p,_-32,8)}function Au(p,_){var C;for(C=0;8>C;++C)i(p,_,p[_-1],8),_+=32}function $l(p,_,C){var k;for(k=0;8>k;++k)i(_,C+32*k,p,8)}function Hl(p,_){var C,k=8;for(C=0;8>C;++C)k+=p[_+C-32]+p[_-1+32*C];$l(k>>4,p,_)}function P_(p,_){var C,k=4;for(C=0;8>C;++C)k+=p[_+C-32];$l(k>>3,p,_)}function Cd(p,_){var C,k=4;for(C=0;8>C;++C)k+=p[_-1+32*C];$l(k>>3,p,_)}function Rr(p,_){$l(128,p,_)}function Ed(p,_,C){var k=p[_-C],U=p[_+0],$=3*(U-k)+eO[1020+p[_-2*C]-p[_+C]],G=tE[112+($+4>>3)];p[_-C]=ul[255+k+tE[112+($+3>>3)]],p[_+0]=ul[255+U-G]}function Id(p,_,C,k){return Yl[255+p[_-2*C]-p[_-C]]>k||Yl[255+p[_+C]-p[_+0]]>k}function $h(p,_,C,k){return 4*Yl[255+p[_-C]-p[_+0]]+Yl[255+p[_-2*C]-p[_+C]]<=k}function Td(p,_,C,k,U){var $=p[_-3*C],G=p[_-2*C],K=p[_-C],X=p[_+0],J=p[_+C],ce=p[_+2*C];return 4*Yl[255+K-X]+Yl[255+G-J]>k?0:Yl[255+p[_-4*C]-$]<=U&&Yl[255+$-G]<=U&&Yl[255+G-K]<=U&&Yl[255+p[_+3*C]-ce]<=U&&Yl[255+ce-J]<=U&&Yl[255+J-X]<=U}function Hh(p,_,C,k){var U=2*k+1;for(k=0;16>k;++k)$h(p,_+k,C,U)&&Ed(p,_+k,C)}function Gl(p,_,C,k){var U=2*k+1;for(k=0;16>k;++k)$h(p,_+k*C,1,U)&&Ed(p,_+k*C,1)}function kp(p,_,C,k){var U;for(U=3;0<U;--U)Hh(p,_+=4*C,C,k)}function Na(p,_,C,k){var U;for(U=3;0<U;--U)Gl(p,_+=4,C,k)}function ql(p,_,C,k,U,$,G,K){for($=2*$+1;0<U--;){if(Td(p,_,C,$,G))if(Id(p,_,C,K))Ed(p,_,C);else{var X=p,J=_,ce=C,Ae=X[J-2*ce],ee=X[J-ce],pe=X[J+0],ve=X[J+ce],Re=X[J+2*ce],we=27*(Fe=eO[1020+3*(pe-ee)+eO[1020+Ae-ve]])+63>>7,Oe=18*Fe+63>>7,Fe=9*Fe+63>>7;X[J-3*ce]=ul[255+X[J-3*ce]+Fe],X[J-2*ce]=ul[255+Ae+Oe],X[J-ce]=ul[255+ee+we],X[J+0]=ul[255+pe-we],X[J+ce]=ul[255+ve-Oe],X[J+2*ce]=ul[255+Re-Fe]}_+=k}}function bc(p,_,C,k,U,$,G,K){for($=2*$+1;0<U--;){if(Td(p,_,C,$,G))if(Id(p,_,C,K))Ed(p,_,C);else{var X=p,J=_,ce=C,Ae=X[J-ce],ee=X[J+0],pe=X[J+ce],ve=tE[112+(4+(Re=3*(ee-Ae))>>3)],Re=tE[112+(Re+3>>3)],we=ve+1>>1;X[J-2*ce]=ul[255+X[J-2*ce]+we],X[J-ce]=ul[255+Ae+Re],X[J+0]=ul[255+ee-ve],X[J+ce]=ul[255+pe-we]}_+=k}}function Cu(p,_,C,k,U,$){ql(p,_,C,1,16,k,U,$)}function Rp(p,_,C,k,U,$){ql(p,_,1,C,16,k,U,$)}function wc(p,_,C,k,U,$){var G;for(G=3;0<G;--G)bc(p,_+=4*C,C,1,16,k,U,$)}function Sd(p,_,C,k,U,$){var G;for(G=3;0<G;--G)bc(p,_+=4,1,C,16,k,U,$)}function w(p,_,C,k,U,$,G,K){ql(p,_,U,1,8,$,G,K),ql(C,k,U,1,8,$,G,K)}function B(p,_,C,k,U,$,G,K){ql(p,_,1,U,8,$,G,K),ql(C,k,1,U,8,$,G,K)}function Z(p,_,C,k,U,$,G,K){bc(p,_+4*U,U,1,8,$,G,K),bc(C,k+4*U,U,1,8,$,G,K)}function se(p,_,C,k,U,$,G,K){bc(p,_+4,1,U,8,$,G,K),bc(C,k+4,1,U,8,$,G,K)}function _e(){this.ba=new er,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ne(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function je(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function mt(){this.ua=0,this.Wa=new sn,this.vb=new sn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new L}function Ct(){this.xb=this.a=0,this.l=new vd,this.ca=new er,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new mt,this.ab=0,this.gc=o(4,je),this.Oc=0}function Jt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new vd,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function en(p,_,C,k,U,$,G){for(p=null==p?0:p[_+0],_=0;_<G;++_)U[$+_]=p+C[k+_]&255,p=U[$+_]}function or(p,_,C,k,U,$,G){var K;if(null==p)en(null,null,C,k,U,$,G);else for(K=0;K<G;++K)U[$+K]=p[_+K]+C[k+K]&255}function Kr(p,_,C,k,U,$,G){if(null==p)en(null,null,C,k,U,$,G);else{var K,X=p[_+0],J=X,ce=X;for(K=0;K<G;++K)J=ce+(X=p[_+K])-J,ce=C[k+K]+(-256&J?0>J?0:255:J)&255,J=X,U[$+K]=ce}}function Nr(p,_,C,k){var U=_.width,$=_.o;if(e(null!=p&&null!=_),0>C||0>=k||C+k>$)return null;if(!p.Cc){if(null==p.ga){var G;if(p.ga=new Jt,(G=null==p.ga)||(G=_.width*_.o,e(0==p.Gb.length),p.Gb=s(G),p.Uc=0,null==p.Gb?G=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,G=1),G=!G),!G){var K=p.Fa,X=p.P,J=p.qc,ce=p.mb,Ae=p.nb,ee=X+1,pe=J-1,ve=(G=p.ga).l;if(e(null!=K&&null!=ce&&null!=_),Jh[0]=null,Jh[1]=en,Jh[2]=or,Jh[3]=Kr,G.ca=ce,G.tb=Ae,G.c=_.width,G.i=_.height,e(0<G.c&&0<G.i),1>=J)_=0;else if(G.$a=3&K[X+0],G.Z=K[X+0]>>2&3,G.Lc=K[X+0]>>4&3,X=K[X+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||X)_=0;else if(ve.put=Bt,ve.ac=js,ve.bc=Ul,ve.ma=G,ve.width=_.width,ve.height=_.height,ve.Da=_.Da,ve.v=_.v,ve.va=_.va,ve.j=_.j,ve.o=_.o,G.$a)e:{e(1==G.$a),_=No();t:for(;;){if(null==_){_=0;break e}if(e(null!=G),G.mc=_,_.c=G.c,_.i=G.i,_.l=G.l,_.l.ma=G,_.l.width=G.c,_.l.height=G.i,_.a=0,be(_.m,K,ee,pe),!il(G.c,G.i,1,_,null)||(1==_.ab&&3==_.gc[0].hc&&rl(_.s)?(G.ic=1,K=_.c*_.i,_.Ta=null,_.Ua=0,_.V=s(K),_.Ba=0,null==_.V?(_.a=1,_=0):_=1):(G.ic=0,_=gu(_,G.c)),!_))break t;_=1;break e}G.mc=null,_=0}else _=pe>=G.c*G.i;G=!_}if(G)return null;1!=p.ga.Lc?p.Ga=0:k=$-C}e(null!=p.ga),e(C+k<=$);e:{if(_=(K=p.ga).c,$=K.l.o,0==K.$a){if(ee=p.rc,pe=p.Vc,ve=p.Fa,J=p.mb,ce=p.nb+C*_,e((X=p.P+1+C*_)<=p.P+p.qc),0!=K.Z)for(e(null!=Jh[K.Z]),G=0;G<k;++G)Jh[K.Z](ee,pe,ve,X,J,ce,_),ee=J,pe=ce,ce+=_,X+=_;else for(G=0;G<k;++G)r(J,ce,ve,X,_),ee=J,pe=ce,ce+=_,X+=_;p.rc=ee,p.Vc=pe}else{if(e(null!=K.mc),_=C+k,e(null!=(G=K.mc)),e(_<=G.i),G.C>=_)_=1;else if(K.ic||ao(),K.ic){K=G.V,ee=G.Ba;var Re=G.i,we=(ve=1,X=G.$/(pe=G.c),J=G.$%pe,ce=G.m,Ae=G.s,G.$),Oe=pe*Re,Fe=pe*_,Ye=Ae.wc,ze=we<Fe?bs(Ae,J,X):null;e(we<=Oe),e(_<=Re),e(rl(Ae));t:for(;;){for(;!ce.h&&we<Fe;){if(J&Ye||(ze=bs(Ae,J,X)),e(null!=ze),fe(ce),256>(Re=kr(ze.G[0],ze.H[0],ce)))K[ee+we]=Re,++we,++J>=pe&&(J=0,++X<=_&&!(X%16)&&Ma(G,X));else{if(!(280>Re)){ve=0;break t}Re=ra(Re-256,ce);var Ft,yt=kr(ze.G[4],ze.H[4],ce);if(fe(ce),!(we>=(yt=zs(pe,yt=ra(yt,ce)))&&Oe-we>=Re)){ve=0;break t}for(Ft=0;Ft<Re;++Ft)K[ee+we+Ft]=K[ee+we+Ft-yt];for(we+=Re,J+=Re;J>=pe;)J-=pe,++X<=_&&!(X%16)&&Ma(G,X);we<Fe&&J&Ye&&(ze=bs(Ae,J,X))}e(ce.h==ie(ce))}Ma(G,X>_?_:X);break t}!ve||ce.h&&we<Oe?(ve=0,G.a=ce.h?5:3):G.$=we,_=ve}else _=sa(G,G.V,G.Ba,G.c,G.i,_,mu);if(!_){k=0;break e}}C+k>=$&&(p.Cc=1),k=1}if(!k)return null;if(p.Cc&&(null!=(k=p.ga)&&(k.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+C*U}function xr(p,_,C,k,U,$){for(;0<U--;){var G,K=p,X=_+(C?1:0),J=p,ce=_+(C?0:3);for(G=0;G<k;++G){var Ae=J[ce+4*G];255!=Ae&&(K[X+4*G+0]=K[X+4*G+0]*(Ae*=32897)>>23,K[X+4*G+1]=K[X+4*G+1]*Ae>>23,K[X+4*G+2]=K[X+4*G+2]*Ae>>23)}_+=$}}function Fi(p,_,C,k,U){for(;0<k--;){var $;for($=0;$<C;++$){var G=p[_+2*$+0],K=15&(J=p[_+2*$+1]),X=4369*K,J=(240&J|J>>4)*X>>16;p[_+2*$+0]=(240&G|G>>4)*X>>16&240|(15&G|G<<4)*X>>16>>4&15,p[_+2*$+1]=240&J|K}_+=U}}function Ti(p,_,C,k,U,$,G,K){var X,J,ce=255;for(J=0;J<U;++J){for(X=0;X<k;++X){var Ae=p[_+X];$[G+4*X]=Ae,ce&=Ae}_+=C,G+=K}return 255!=ce}function ds(p,_,C,k,U){var $;for($=0;$<U;++$)C[k+$]=p[_+$]>>8}function ao(){R1=xr,tX=Fi,nX=Ti,rX=ds}function Or(p,_,C){S[p]=function(k,U,$,G,K,X,J,ce,Ae,ee,pe,ve,Re,we,Oe,Fe,Ye){var ze,Ft=Ye-1>>1,yt=K[X+0]|J[ce+0]<<16,Nn=Ae[ee+0]|pe[ve+0]<<16;e(null!=k);var St=3*yt+Nn+131074>>2;for(_(k[U+0],255&St,St>>16,Re,we),null!=$&&_($[G+0],255&(St=3*Nn+yt+131074>>2),St>>16,Oe,Fe),ze=1;ze<=Ft;++ze){var tr=K[X+ze]|J[ce+ze]<<16,As=Ae[ee+ze]|pe[ve+ze]<<16,On=yt+tr+Nn+As+524296,xt=On+2*(tr+Nn)>>3;St=xt+yt>>1,yt=(On=On+2*(yt+As)>>3)+tr>>1,_(k[U+2*ze-1],255&St,St>>16,Re,we+(2*ze-1)*C),_(k[U+2*ze-0],255&yt,yt>>16,Re,we+(2*ze-0)*C),null!=$&&(yt=xt+As>>1,_($[G+2*ze-1],255&(St=On+Nn>>1),St>>16,Oe,Fe+(2*ze-1)*C),_($[G+2*ze+0],255&yt,yt>>16,Oe,Fe+(2*ze+0)*C)),yt=tr,Nn=As}1&Ye||(_(k[U+Ye-1],255&(St=3*yt+Nn+131074>>2),St>>16,Re,we+(Ye-1)*C),null!=$&&_($[G+Ye-1],255&(St=3*Nn+yt+131074>>2),St>>16,Oe,Fe+(Ye-1)*C))}}function Np(){Xl[nE]=eDe,Xl[rE]=pX,Xl[cX]=tDe,Xl[iE]=gX,Xl[sE]=mX,Xl[tO]=_X,Xl[uX]=nDe,Xl[nO]=pX,Xl[rO]=gX,Xl[oE]=mX,Xl[iO]=_X}function xd(p){return p&~rDe?0>p?0:255:p>>vX}function Oa(p,_){return xd((19077*p>>8)+(26149*_>>8)-14234)}function g(p,_,C){return xd((19077*p>>8)-(6419*_>>8)-(13320*C>>8)+8708)}function E(p,_){return xd((19077*p>>8)+(33050*_>>8)-17685)}function R(p,_,C,k,U){k[U+0]=Oa(p,C),k[U+1]=g(p,_,C),k[U+2]=E(p,_)}function W(p,_,C,k,U){k[U+0]=E(p,_),k[U+1]=g(p,_,C),k[U+2]=Oa(p,C)}function ge(p,_,C,k,U){var $=g(p,_,C);_=$<<3&224|E(p,_)>>3,k[U+0]=248&Oa(p,C)|$>>5,k[U+1]=_}function Se(p,_,C,k,U){var $=240&E(p,_)|15;k[U+0]=240&Oa(p,C)|g(p,_,C)>>4,k[U+1]=$}function Ze(p,_,C,k,U){k[U+0]=255,R(p,_,C,k,U+1)}function lr(p,_,C,k,U){W(p,_,C,k,U),k[U+3]=255}function Si(p,_,C,k,U){R(p,_,C,k,U),k[U+3]=255}function jt(p,_){return 0>p?0:p>_?_:p}function Yr(p,_,C){S[p]=function(k,U,$,G,K,X,J,ce,Ae){for(var ee=ce+(-2&Ae)*C;ce!=ee;)_(k[U+0],$[G+0],K[X+0],J,ce),_(k[U+1],$[G+0],K[X+0],J,ce+C),U+=2,++G,++X,ce+=2*C;1&Ae&&_(k[U+0],$[G+0],K[X+0],J,ce)}}function xi(p,_,C){return 0==C?0==p?0==_?6:5:0==_?4:0:C}function Ac(p,_,C,k,U){switch(p>>>30){case 3:Fp(_,C,k,U,0);break;case 2:Kl(_,C,k,U);break;case 1:br(_,C,k,U)}}function yi(p,_){var C,k,U=_.M,$=_.Nb,G=p.oc,K=p.pc+40,X=p.oc,J=p.pc+584,ce=p.oc,Ae=p.pc+600;for(C=0;16>C;++C)G[K+32*C-1]=129;for(C=0;8>C;++C)X[J+32*C-1]=129,ce[Ae+32*C-1]=129;for(0<U?G[K-1-32]=X[J-1-32]=ce[Ae-1-32]=129:(i(G,K-32-1,127,21),i(X,J-32-1,127,9),i(ce,Ae-32-1,127,9)),k=0;k<p.za;++k){var ee=_.ya[_.aa+k];if(0<k){for(C=-1;16>C;++C)r(G,K+32*C-4,G,K+32*C+12,4);for(C=-1;8>C;++C)r(X,J+32*C-4,X,J+32*C+4,4),r(ce,Ae+32*C-4,ce,Ae+32*C+4,4)}var pe=p.Gd,ve=p.Hd+k,Re=ee.ad,we=ee.Hc;if(0<U&&(r(G,K-32,pe[ve].y,0,16),r(X,J-32,pe[ve].f,0,8),r(ce,Ae-32,pe[ve].ea,0,8)),ee.Za){var Oe=G,Fe=K-32+16;for(0<U&&(k>=p.za-1?i(Oe,Fe,pe[ve].y[15],4):r(Oe,Fe,pe[ve+1].y,0,4)),C=0;4>C;C++)Oe[Fe+128+C]=Oe[Fe+256+C]=Oe[Fe+384+C]=Oe[Fe+0+C];for(C=0;16>C;++C,we<<=2)Cc[ee.Ob[C]](Oe=G,Fe=K+bX[C]),Ac(we,Re,16*+C,Oe,Fe)}else if(Oe=xi(k,U,ee.Ob[0]),Zh[Oe](G,K),0!=we)for(C=0;16>C;++C,we<<=2)Ac(we,Re,16*+C,G,K+bX[C]);for(C=ee.Gc,Oe=xi(k,U,ee.Dd),kd[Oe](X,J),kd[Oe](ce,Ae),we=Re,Oe=X,Fe=J,255&(ee=0|C)&&(170&ee?Tu(we,256,Oe,Fe):Ur(we,256,Oe,Fe)),ee=ce,we=Ae,255&(C>>=8)&&(170&C?Tu(Re,320,ee,we):Ur(Re,320,ee,we)),U<p.Ub-1&&(r(pe[ve].y,0,G,K+480,16),r(pe[ve].f,0,X,J+224,8),r(pe[ve].ea,0,ce,Ae+224,8)),pe=p.sa,ve=p.ta+16*k+16*$*p.R,Re=p.qa,ee=p.ra+8*k+(C=8*$*p.B),we=p.Ha,Oe=p.Ia+8*k+C,C=0;16>C;++C)r(pe,ve+C*p.R,G,K+32*C,16);for(C=0;8>C;++C)r(Re,ee+C*p.B,X,J+32*C,8),r(we,Oe+C*p.B,ce,Ae+32*C,8)}}function Wl(p,_,C,k,U,$,G,K,X){var J=[0],ce=[0],Ae=0,ee=null!=X?X.kd:0,pe=X??new Ne;if(null==p||12>C)return 7;pe.data=p,pe.w=_,pe.ha=C,_=[_],C=[C],pe.gb=[pe.gb];e:{var ve=_,Re=C,we=pe.gb;if(e(null!=p),e(null!=Re),e(null!=we),we[0]=0,12<=Re[0]&&!t(p,ve[0],"RIFF")){if(t(p,ve[0]+8,"WEBP")){we=3;break e}var Oe=De(p,ve[0]+4);if(12>Oe||4294967286<Oe){we=3;break e}if(ee&&Oe>Re[0]-8){we=7;break e}we[0]=Oe,ve[0]+=12,Re[0]-=12}we=0}if(0!=we)return we;for(Oe=0<pe.gb[0],C=C[0];;){e:{var Fe=p;Re=_,we=C;var Ye=J,ze=ce,Ft=ve=[0];if((St=Ae=[Ae])[0]=0,8>we[0])we=7;else{if(!t(Fe,Re[0],"VP8X")){if(10!=De(Fe,Re[0]+4)){we=3;break e}if(18>we[0]){we=7;break e}var yt=De(Fe,Re[0]+8),Nn=1+et(Fe,Re[0]+12);if(2147483648<=Nn*(Fe=1+et(Fe,Re[0]+15))){we=3;break e}null!=Ft&&(Ft[0]=yt),null!=Ye&&(Ye[0]=Nn),null!=ze&&(ze[0]=Fe),Re[0]+=18,we[0]-=18,St[0]=1}we=0}}if(Ae=Ae[0],0!=we)return we;if(Re=!!(2&(ve=ve[0])),!Oe&&Ae)return 3;if(null!=$&&($[0]=!!(16&ve)),null!=G&&(G[0]=Re),null!=K&&(K[0]=0),G=J[0],ve=ce[0],Ae&&Re&&null==X){we=0;break}if(4>C){we=7;break}if(Oe&&Ae||!Oe&&!Ae&&!t(p,_[0],"ALPH")){C=[C],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{we=_,Oe=C;var St=pe.gb;Ye=pe.na,ze=pe.P,Ft=pe.Sa,Nn=22,e(null!=(yt=p)),e(null!=Oe),Fe=we[0];var tr=Oe[0];for(e(null!=Ye),e(null!=Ft),Ye[0]=null,ze[0]=null,Ft[0]=0;;){if(we[0]=Fe,Oe[0]=tr,8>tr){we=7;break e}var As=De(yt,Fe+4);if(4294967286<As){we=3;break e}var On=8+As+1&-2;if(Nn+=On,0<St&&Nn>St){we=3;break e}if(!t(yt,Fe,"VP8 ")||!t(yt,Fe,"VP8L")){we=0;break e}if(tr[0]<On){we=7;break e}t(yt,Fe,"ALPH")||(Ye[0]=yt,ze[0]=Fe+8,Ft[0]=As),Fe+=On,tr-=On}}if(C=C[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],0!=we)break}C=[C],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(St=p,we=_,Oe=C,Ye=pe.gb[0],ze=pe.Ja,Ft=pe.xa,yt=we[0],Fe=!t(St,yt,"VP8 "),Nn=!t(St,yt,"VP8L"),e(null!=St),e(null!=Oe),e(null!=ze),e(null!=Ft),8>Oe[0])we=7;else{if(Fe||Nn){if(St=De(St,yt+4),12<=Ye&&St>Ye-12){we=3;break e}if(ee&&St>Oe[0]-8){we=7;break e}ze[0]=St,we[0]+=8,Oe[0]-=8,Ft[0]=Nn}else Ft[0]=5<=Oe[0]&&47==St[yt+0]&&!(St[yt+4]>>5),ze[0]=Oe[0];we=0}if(C=C[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],_=_[0],0!=we)break;if(4294967286<pe.Ja)return 3;if(null==K||Re||(K[0]=pe.xa?2:1),G=[G],ve=[ve],pe.xa){if(5>C){we=7;break}K=G,ee=ve,Re=$,null==p||5>C?p=0:5<=C&&47==p[_+0]&&!(p[_+4]>>5)?(Oe=[0],St=[0],Ye=[0],be(ze=new Y,p,_,C),oi(ze,Oe,St,Ye)?(null!=K&&(K[0]=Oe[0]),null!=ee&&(ee[0]=St[0]),null!=Re&&(Re[0]=Ye[0]),p=1):p=0):p=0}else{if(10>C){we=7;break}K=ve,null==p||10>C||!Dp(p,_+3,C-3)?p=0:(ee=p[_+0]|p[_+1]<<8|p[_+2]<<16,Re=16383&(p[_+7]<<8|p[_+6]),p=16383&(p[_+9]<<8|p[_+8]),1&ee||3<(ee>>1&7)||!(ee>>4&1)||ee>>5>=pe.Ja||!Re||!p?p=0:(G&&(G[0]=Re),K&&(K[0]=p),p=1))}if(!p||(G=G[0],ve=ve[0],Ae&&(J[0]!=G||ce[0]!=ve)))return 3;null!=X&&(X[0]=pe,X.offset=_-X.w,e(4294967286>_-X.w),e(X.offset==X.ha-C));break}return 0==we||7==we&&Ae&&null==X?(null!=$&&($[0]|=null!=pe.na&&0<pe.na.length),null!=k&&(k[0]=G),null!=U&&(U[0]=ve),0):we}function Dd(p,_,C){var k=_.width,U=_.height,$=0,G=0,K=k,X=U;if(_.Da=null!=p&&0<p.Da,_.Da&&(K=p.cd,X=p.bd,$=p.v,G=p.j,11>C||($&=-2,G&=-2),0>$||0>G||0>=K||0>=X||$+K>k||G+X>U))return 0;if(_.v=$,_.j=G,_.va=$+K,_.o=G+X,_.U=K,_.T=X,_.da=null!=p&&0<p.da,_.da){if(!Vt(K,X,C=[p.ib],$=[p.hb]))return 0;_.ib=C[0],_.hb=$[0]}return _.ob=null!=p&&p.ob,_.Kb=null==p||!p.Sd,_.da&&(_.ob=_.ib<3*k/4&&_.hb<3*U/4,_.Kb=0),1}function T1(p){if(null==p)return 2;if(11>p.S){var _=p.f.RGBA;_.fb+=(p.height-1)*_.A,_.A=-_.A}else(_=p.f.kb).O+=((p=p.height)-1)*_.fa,_.fa=-_.fa,_.N+=(p-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(p-1>>1)*_.Db,_.Db=-_.Db,null!=_.F&&(_.J+=(p-1)*_.lb,_.lb=-_.lb);return 0}function Gh(p,_,C,k){if(null==k||0>=p||0>=_)return 2;if(null!=C){if(C.Da){var U=C.cd,$=C.bd,G=-2&C.v,K=-2&C.j;if(0>G||0>K||0>=U||0>=$||G+U>p||K+$>_)return 2;p=U,_=$}if(C.da){if(!Vt(p,_,U=[C.ib],$=[C.hb]))return 2;p=U[0],_=$[0]}}k.width=p,k.height=_;e:{var X=k.width,J=k.height;if(p=k.S,0>=X||0>=J||!(p>=nE&&13>p))p=2;else{if(0>=k.Rd&&null==k.sd){G=$=U=_=0;var ce=(K=X*wX[p])*J;if(11>p||($=(J+1)/2*(_=(X+1)/2),12==p&&(G=(U=X)*J)),null==(J=s(ce+2*$+G))){p=1;break e}k.sd=J,11>p?((X=k.f.RGBA).eb=J,X.fb=0,X.A=K,X.size=ce):((X=k.f.kb).y=J,X.O=0,X.fa=K,X.Fd=ce,X.f=J,X.N=0+ce,X.Ab=_,X.Cd=$,X.ea=J,X.W=0+ce+$,X.Db=_,X.Ed=$,12==p&&(X.F=J,X.J=0+ce+2*$),X.Tc=G,X.lb=U)}if(_=1,$=k.width,G=k.height,(U=k.S)>=nE&&13>U)if(11>U)p=k.f.RGBA,_&=(K=Math.abs(p.A))*(G-1)+$<=p.size,_&=K>=$*wX[U],_&=null!=p.eb;else{p=k.f.kb,K=($+1)/2,ce=(G+1)/2,X=Math.abs(p.fa),J=Math.abs(p.Ab);var Ae=Math.abs(p.Db),ee=Math.abs(p.lb);_&=X*(G-1)+$<=p.Fd,_&=J*(ce-1)+K<=p.Cd,_=(_&=Ae*(ce-1)+K<=p.Ed)&X>=$&J>=K&Ae>=K,_&=null!=p.y,_&=null!=p.f,_&=null!=p.ea,12==U&&(_&=ee>=$,_&=ee*(G-1)+$<=p.Tc,_&=null!=p.F)}else _=0;p=_?0:2}}return 0!=p||null!=C&&C.fd&&(p=T1(k)),p}var Op=64,ll=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cl=24,qh=32,Pd=8,Wh=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];at("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(p){return p},S.Predictor2=function(p,_,C){return _[C+0]},S.Predictor3=function(p,_,C){return _[C+1]},S.Predictor4=function(p,_,C){return _[C-1]},S.Predictor5=function(p,_,C){return Rt(Rt(p,_[C+1]),_[C+0])},S.Predictor6=function(p,_,C){return Rt(p,_[C-1])},S.Predictor7=function(p,_,C){return Rt(p,_[C+0])},S.Predictor8=function(p,_,C){return Rt(_[C-1],_[C+0])},S.Predictor9=function(p,_,C){return Rt(_[C+0],_[C+1])},S.Predictor10=function(p,_,C){return Rt(Rt(p,_[C-1]),Rt(_[C+0],_[C+1]))},S.Predictor11=function(p,_,C){var k=_[C+0];return 0>=Zt(k>>24&255,p>>24&255,(_=_[C-1])>>24&255)+Zt(k>>16&255,p>>16&255,_>>16&255)+Zt(k>>8&255,p>>8&255,_>>8&255)+Zt(255&k,255&p,255&_)?k:p},S.Predictor12=function(p,_,C){var k=_[C+0];return(Rn((p>>24&255)+(k>>24&255)-((_=_[C-1])>>24&255))<<24|Rn((p>>16&255)+(k>>16&255)-(_>>16&255))<<16|Rn((p>>8&255)+(k>>8&255)-(_>>8&255))<<8|Rn((255&p)+(255&k)-(255&_)))>>>0},S.Predictor13=function(p,_,C){var k=_[C-1];return(Ht((p=Rt(p,_[C+0]))>>24&255,k>>24&255)<<24|Ht(p>>16&255,k>>16&255)<<16|Ht(p>>8&255,k>>8&255)<<8|Ht(255&p,255&k))>>>0};var S1=S.PredictorAdd0;S.PredictorAdd1=hn,at("Predictor2","PredictorAdd2"),at("Predictor3","PredictorAdd3"),at("Predictor4","PredictorAdd4"),at("Predictor5","PredictorAdd5"),at("Predictor6","PredictorAdd6"),at("Predictor7","PredictorAdd7"),at("Predictor8","PredictorAdd8"),at("Predictor9","PredictorAdd9"),at("Predictor10","PredictorAdd10"),at("Predictor11","PredictorAdd11"),at("Predictor12","PredictorAdd12"),at("Predictor13","PredictorAdd13");var M_=S.PredictorAdd2;Pt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),Pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Ji,JC=S.ColorIndexInverseTransform,Eu=S.MapARGB,Iu=S.VP8LColorIndexInverseTransformAlpha,x1=S.MapAlpha,D1=S.VP8LPredictorsAdd=[];D1.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var P1,M1,Kh,Yh,Xh,Lp,Qh,Fp,Kl,Tu,br,Ur,es,ws,Md,k1,k_,eE,YY,XY,QY,ZY,JY,eX,R1,tX,nX,rX,iX=s(511),sX=s(2041),oX=s(225),aX=s(767),lX=0,eO=sX,tE=oX,ul=aX,Yl=iX,nE=0,rE=1,cX=2,iE=3,sE=4,tO=5,uX=6,nO=7,rO=8,oE=9,iO=10,U5e=[2,3,7],j5e=[3,3,11],dX=[280,256,256,256,40],z5e=[0,1,1,1,0],$5e=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],H5e=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],G5e=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],q5e=8,sO=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],oO=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],N1=null,W5e=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],K5e=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hX=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Y5e=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],X5e=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Q5e=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Z5e=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zh=[],Cc=[],kd=[],J5e=1,fX=2,Jh=[],Xl=[];Or("UpsampleRgbLinePair",R,3),Or("UpsampleBgrLinePair",W,3),Or("UpsampleRgbaLinePair",Si,4),Or("UpsampleBgraLinePair",lr,4),Or("UpsampleArgbLinePair",Ze,4),Or("UpsampleRgba4444LinePair",Se,2),Or("UpsampleRgb565LinePair",ge,2);var eDe=S.UpsampleRgbLinePair,tDe=S.UpsampleBgrLinePair,pX=S.UpsampleRgbaLinePair,gX=S.UpsampleBgraLinePair,mX=S.UpsampleArgbLinePair,_X=S.UpsampleRgba4444LinePair,nDe=S.UpsampleRgb565LinePair,aE=16,lE=1<<aE-1,O1=-227,aO=482,vX=6,rDe=(256<<vX)-1,yX=0,iDe=s(256),sDe=s(256),oDe=s(256),aDe=s(256),lDe=s(aO-O1),cDe=s(aO-O1);Yr("YuvToRgbRow",R,3),Yr("YuvToBgrRow",W,3),Yr("YuvToRgbaRow",Si,4),Yr("YuvToBgraRow",lr,4),Yr("YuvToArgbRow",Ze,4),Yr("YuvToRgba4444Row",Se,2),Yr("YuvToRgb565Row",ge,2);var bX=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cE=[0,2,8],uDe=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(p,_,C,k,U){var $=rE,G=new _e,K=new er;G.ba=K,K.S=$,K.width=[K.width],K.height=[K.height];var X=K.width,J=K.height,ce=new Wt;if(null==ce||null==p)var Ae=2;else e(null!=ce),Ae=Wl(p,_,C,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(0!=Ae?X=0:(null!=X&&(X[0]=ce.width[0]),null!=J&&(J[0]=ce.height[0]),X=1),X){K.width=K.width[0],K.height=K.height[0],null!=k&&(k[0]=K.width),null!=U&&(U[0]=K.height);e:{if(k=new vd,(U=new Ne).data=p,U.w=_,U.ha=C,U.kd=1,_=[0],e(null!=U),(0==(p=Wl(U.data,U.w,U.ha,null,null,null,_,null,U))||7==p)&&_[0]&&(p=4),0==(_=p)){if(e(null!=G),k.data=U.data,k.w=U.w+U.offset,k.ha=U.ha-U.offset,k.put=Bt,k.ac=js,k.bc=Ul,k.ma=G,U.xa){if(null==(p=No())){G=1;break e}if(function(ee,pe){var ve=[0],Re=[0],we=[0];t:for(;;){if(null==ee)return 0;if(null==pe)return ee.a=2,0;if(ee.l=pe,ee.a=0,be(ee.m,pe.data,pe.w,pe.ha),!oi(ee.m,ve,Re,we)){ee.a=3;break t}if(ee.xb=fX,pe.width=ve[0],pe.height=Re[0],!il(ve[0],Re[0],1,ee,null))break t;return 1}return e(0!=ee.a),0}(p,k)){if(k=0==(_=Gh(k.width,k.height,G.Oa,G.ba))){t:{k=p;n:for(;;){if(null==k){k=0;break t}if(e(null!=k.s.yc),e(null!=k.s.Ya),e(0<k.s.Wb),e(null!=(C=k.l)),e(null!=(U=C.ma)),0!=k.xb){if(k.ca=U.ba,k.tb=U.tb,e(null!=k.ca),!Dd(U.Oa,C,iE)){k.a=2;break n}if(!gu(k,C.width)||C.da)break n;if((C.da||Mt(k.ca.S))&&ao(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=k.ca.f.kb.F&&ao()),k.Pb&&0<k.s.ua&&null==k.s.vb.X&&!re(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!sa(k,k.V,k.Ba,k.c,k.i,C.o,pu))break n;U.Dc=k.Ma,k=1;break t}e(0!=k.a),k=0}k=!k}k&&(_=p.a)}else _=p.a}else{if(null==(p=new xp)){G=1;break e}if(p.Fa=U.na,p.P=U.P,p.qc=U.Sa,Pp(p,k)){if(0==(_=Gh(k.width,k.height,G.Oa,G.ba))){if(p.Aa=0,C=G.Oa,e(null!=(U=p)),null!=C){if(0<(X=0>(X=C.Md)?0:100<X?255:255*X/100)){for(J=ce=0;4>J;++J)12>(Ae=U.pb[J]).lc&&(Ae.ia=X*uDe[0>Ae.lc?0:Ae.lc]>>3),ce|=Ae.ia;ce&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=C.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(ee,pe){if(null==ee)return 0;if(null==pe)return vi(ee,2,"NULL VP8Io parameter in VP8Decode().");if(!ee.cb&&!Pp(ee,pe))return 0;if(e(ee.cb),null==pe.ac||pe.ac(pe)){pe.ob&&(ee.L=0);var ve=cE[ee.L];if(2==ee.L?(ee.yb=0,ee.zb=0):(ee.yb=pe.v-ve>>4,ee.zb=pe.j-ve>>4,0>ee.yb&&(ee.yb=0),0>ee.zb&&(ee.zb=0)),ee.Va=pe.o+15+ve>>4,ee.Hb=pe.va+15+ve>>4,ee.Hb>ee.za&&(ee.Hb=ee.za),ee.Va>ee.Ub&&(ee.Va=ee.Ub),0<ee.L){var Re=ee.ed;for(ve=0;4>ve;++ve){var we;if(ee.Qa.Cb){var Oe=ee.Qa.Lb[ve];ee.Qa.Fb||(Oe+=Re.Tb)}else Oe=Re.Tb;for(we=0;1>=we;++we){var Fe=ee.gd[ve][we],Ye=Oe;if(Re.Pc&&(Ye+=Re.vd[0],we&&(Ye+=Re.od[0])),0<(Ye=0>Ye?0:63<Ye?63:Ye)){var ze=Ye;0<Re.wb&&(ze=4<Re.wb?ze>>2:ze>>1)>9-Re.wb&&(ze=9-Re.wb),1>ze&&(ze=1),Fe.dd=ze,Fe.tc=2*Ye+ze,Fe.ld=40<=Ye?2:15<=Ye?1:0}else Fe.tc=0;Fe.La=we}}}ve=0}else vi(ee,6,"Frame setup failed"),ve=ee.a;if(ve=0==ve){if(ve){ee.$c=0,0<ee.Aa||(ee.Ic=1);t:{Re=4*(ze=ee.za);var Ft=32*ze,yt=ze+1,Nn=0<ee.L?ze*(0<ee.Aa?2:1):0,St=(2==ee.Aa?2:1)*ze;if((Fe=Re+832+(we=3*(16*(ve=ee.Ic)+cE[ee.L])/2*Ft)+(Oe=null!=ee.Fa&&0<ee.Fa.length?ee.Kc.c*ee.Kc.i:0))!=Fe)ve=0;else{if(Fe>ee.Vb){if(ee.Vb=0,ee.Ec=s(Fe),ee.Fc=0,null==ee.Ec){ve=vi(ee,1,"no memory during frame initialization.");break t}ee.Vb=Fe}Ye=ee.Fc,ee.Ac=Fe=ee.Ec,ee.Bc=Ye,Ye+=Re,ee.Gd=o(Ft,Tp),ee.Hd=0,ee.rb=o(yt+1,mc),ee.sb=1,ee.wa=Nn?o(Nn,Oo):null,ee.Y=0,ee.D.Nb=0,ee.D.wa=ee.wa,ee.D.Y=ee.Y,0<ee.Aa&&(ee.D.Y+=ze),e(!0),ee.oc=Fe,ee.pc=Ye,Ye+=832,ee.ya=o(St,_d),ee.aa=0,ee.D.ya=ee.ya,ee.D.aa=ee.aa,2==ee.Aa&&(ee.D.aa+=ze),ee.R=16*ze,ee.B=8*ze,ze=(Ft=cE[ee.L])*ee.R,Ft=Ft/2*ee.B,ee.sa=Fe,ee.ta=Ye+ze,ee.qa=ee.sa,ee.ra=ee.ta+16*ve*ee.R+Ft,ee.Ha=ee.qa,ee.Ia=ee.ra+8*ve*ee.B+Ft,ee.$c=0,Ye+=we,ee.mb=Oe?Fe:null,ee.nb=Oe?Ye:null,e(Ye+Oe<=ee.Fc+ee.Vb),yd(ee),i(ee.Ac,ee.Bc,0,Re),ve=1}}if(ve){if(pe.ka=0,pe.y=ee.sa,pe.O=ee.ta,pe.f=ee.qa,pe.N=ee.ra,pe.ea=ee.Ha,pe.Vd=ee.Ia,pe.fa=ee.R,pe.Rc=ee.B,pe.F=null,pe.J=0,!lX){for(ve=-255;255>=ve;++ve)iX[255+ve]=0>ve?-ve:ve;for(ve=-1020;1020>=ve;++ve)sX[1020+ve]=-128>ve?-128:127<ve?127:ve;for(ve=-112;112>=ve;++ve)oX[112+ve]=-16>ve?-16:15<ve?15:ve;for(ve=-255;510>=ve;++ve)aX[255+ve]=0>ve?0:255<ve?255:ve;lX=1}Qh=bd,Fp=Uh,Tu=jh,br=al,Ur=yr,Kl=ol,es=Cu,ws=Rp,Md=w,k1=B,k_=wc,eE=Sd,YY=Z,XY=se,QY=Hh,ZY=Gl,JY=kp,eX=Na,Cc[0]=A1,Cc[1]=vc,Cc[2]=D_,Cc[3]=bu,Cc[4]=C1,Cc[5]=$s,Cc[6]=yc,Cc[7]=E1,Cc[8]=zl,Cc[9]=I1,Zh[0]=yu,Zh[1]=x_,Zh[2]=w1,Zh[3]=Mp,Zh[4]=Ad,Zh[5]=Lo,Zh[6]=zh,kd[0]=Hl,kd[1]=b1,kd[2]=wu,kd[3]=Au,kd[4]=Cd,kd[5]=P_,kd[6]=Rr,ve=1}else ve=0}ve&&(ve=function(tr,As){for(tr.M=0;tr.M<tr.Va;++tr.M){var On,xt=tr.Jc[tr.M&tr.Xb],lt=tr.m,ts=tr;for(On=0;On<ts.za;++On){var xn=lt,ar=ts,ai=ar.Ac,lo=ar.Bc+4*On,oa=ar.zc,Vi=ar.ya[ar.aa+On];if(Vi.$b=ar.Qa.Bb?ke(xn,ar.Pa.jb[0])?2+ke(xn,ar.Pa.jb[2]):ke(xn,ar.Pa.jb[1]):0,ar.kc&&(Vi.Ad=ke(xn,ar.Bd)),Vi.Za=!ke(xn,145)+0,Vi.Za){var Fo=Vi.Ob,aa=0;for(ar=0;4>ar;++ar){var Cs,cr=oa[0+ar];for(Cs=0;4>Cs;++Cs){for(var Dr=hX[ke(xn,(cr=X5e[ai[lo+Cs]][cr])[0])];0<Dr;)Dr=hX[2*Dr+ke(xn,cr[Dr])];ai[lo+Cs]=cr=-Dr}r(Fo,aa,ai,lo,4),aa+=4,oa[0+ar]=cr}}else cr=ke(xn,156)?ke(xn,128)?1:3:ke(xn,163)?2:0,Vi.Ob[0]=cr,i(ai,lo,cr,4),i(oa,0,cr,4);Vi.Dd=ke(xn,142)?ke(xn,114)?ke(xn,183)?1:3:2:0}if(ts.m.Ka)return vi(tr,7,"Premature end-of-partition0 encountered.");for(;tr.ja<tr.za;++tr.ja){if(ts=xt,xn=(lt=tr).rb[lt.sb-1],ai=lt.rb[lt.sb+lt.ja],On=lt.ya[lt.aa+lt.ja],lo=lt.kc?On.Ad:0)xn.la=ai.la=0,On.Za||(xn.Na=ai.Na=0),On.Hc=0,On.Gc=0,On.ia=0;else{var Bi,Pr;if(xn=ai,ai=ts,lo=lt.Pa.Xc,Vi=lt.pb[(oa=lt.ya[lt.aa+lt.ja]).$b],aa=lt.rb[lt.sb-1],cr=Cs=0,i(ar=oa.ad,Fo=0,0,384),oa.Za)var co=0,Ec=lo[3];else{Dr=s(16);var ns=xn.Na+aa.Na;if(ns=N1(ai,lo[1],ns,Vi.Eb,0,Dr,0),xn.Na=aa.Na=(0<ns)+0,1<ns)Qh(Dr,0,ar,Fo);else{var La=Dr[0]+3>>3;for(Dr=0;256>Dr;Dr+=16)ar[Fo+Dr]=La}co=1,Ec=lo[0]}var jr=15&xn.la,Es=15&aa.la;for(Dr=0;4>Dr;++Dr){var dl=1&Es;for(La=Pr=0;4>La;++La)jr=jr>>1|(dl=(ns=N1(ai,Ec,ns=dl+(1&jr),Vi.Sc,co,ar,Fo))>co)<<7,Pr=Pr<<2|(3<ns?3:1<ns?2:0!=ar[Fo+0]),Fo+=16;jr>>=4,Es=Es>>1|dl<<7,Cs=(Cs<<8|Pr)>>>0}for(Ec=jr,co=Es>>4,Bi=0;4>Bi;Bi+=2){for(Pr=0,jr=xn.la>>4+Bi,Es=aa.la>>4+Bi,Dr=0;2>Dr;++Dr){for(dl=1&Es,La=0;2>La;++La)jr=jr>>1|(dl=0<(ns=N1(ai,lo[2],ns=dl+(1&jr),Vi.Qc,0,ar,Fo)))<<3,Pr=Pr<<2|(3<ns?3:1<ns?2:0!=ar[Fo+0]),Fo+=16;jr>>=2,Es=Es>>1|dl<<5}cr|=Pr<<4*Bi,Ec|=jr<<4<<Bi,co|=(240&Es)<<Bi}xn.la=Ec,aa.la=co,oa.Hc=Cs,oa.Gc=cr,oa.ia=43690&cr?0:Vi.ia,lo=!(Cs|cr)}if(0<lt.L&&(lt.wa[lt.Y+lt.ja]=lt.gd[On.$b][On.Za],lt.wa[lt.Y+lt.ja].La|=!lo),ts.Ka)return vi(tr,7,"Premature end-of-file encountered.")}if(yd(tr),lt=As,ts=1,On=(xt=tr).D,xn=0<xt.L&&xt.M>=xt.zb&&xt.M<=xt.Va,0==xt.Aa)t:{if(On.M=xt.M,On.uc=xn,yi(xt,On),ts=1,On=(Pr=xt.D).Nb,xn=(cr=cE[xt.L])*xt.R,lo=xt.sa,oa=xt.ta-xn+(Dr=16*On*xt.R),Vi=xt.qa,ar=xt.ra-(ai=cr/2*xt.B)+(La=8*On*xt.B),Fo=xt.Ha,aa=xt.Ia-ai+La,Es=0==(jr=Pr.M),Cs=jr>=xt.Va-1,2==xt.Aa&&yi(xt,Pr),Pr.uc)for(dl=(ns=xt).D.M,e(ns.D.uc),Pr=ns.yb;Pr<ns.Hb;++Pr){Ec=dl;var la=(hl=(uo=ns).D).Nb,hl=hl.wa[hl.Y+(co=Pr)],fl=uo.sa,Fa=uo.ta+16*la*(Bi=uo.R)+16*co,pl=hl.dd,Xr=hl.tc;if(0!=Xr)if(e(3<=Xr),1==uo.L)0<co&&ZY(fl,Fa,Bi,Xr+4),hl.La&&eX(fl,Fa,Bi,Xr),0<Ec&&QY(fl,Fa,Bi,Xr+4),hl.La&&JY(fl,Fa,Bi,Xr);else{var gl=uo.B,Ic=uo.qa,Vp=uo.ra+8*la*gl+8*co,Rd=uo.Ha,uo=uo.Ia+8*la*gl+8*co;la=hl.ld,0<co&&(ws(fl,Fa,Bi,Xr+4,pl,la),k1(Ic,Vp,Rd,uo,gl,Xr+4,pl,la)),hl.La&&(eE(fl,Fa,Bi,Xr,pl,la),XY(Ic,Vp,Rd,uo,gl,Xr,pl,la)),0<Ec&&(es(fl,Fa,Bi,Xr+4,pl,la),Md(Ic,Vp,Rd,uo,gl,Xr+4,pl,la)),hl.La&&(k_(fl,Fa,Bi,Xr,pl,la),YY(Ic,Vp,Rd,uo,gl,Xr,pl,la))}}if(xt.ia&&alert("todo:DitherRow"),null!=lt.put){if(Pr=16*jr,jr=16*(jr+1),Es?(lt.y=xt.sa,lt.O=xt.ta+Dr,lt.f=xt.qa,lt.N=xt.ra+La,lt.ea=xt.Ha,lt.W=xt.Ia+La):(Pr-=cr,lt.y=lo,lt.O=oa,lt.f=Vi,lt.N=ar,lt.ea=Fo,lt.W=aa),Cs||(jr-=cr),jr>lt.o&&(jr=lt.o),lt.F=null,lt.J=null,null!=xt.Fa&&0<xt.Fa.length&&Pr<jr&&(lt.J=Nr(xt,lt,Pr,jr-Pr),lt.F=xt.mb,null==lt.F&&0==lt.F.length)){ts=vi(xt,3,"Could not decode alpha data.");break t}Pr<lt.j&&(cr=lt.j-Pr,Pr=lt.j,e(!(1&cr)),lt.O+=xt.R*cr,lt.N+=xt.B*(cr>>1),lt.W+=xt.B*(cr>>1),null!=lt.F&&(lt.J+=lt.width*cr)),Pr<jr&&(lt.O+=lt.v,lt.N+=lt.v>>1,lt.W+=lt.v>>1,null!=lt.F&&(lt.J+=lt.v),lt.ka=Pr-lt.j,lt.U=lt.va-lt.v,lt.T=jr-Pr,ts=lt.put(lt))}On+1!=xt.Ic||Cs||(r(xt.sa,xt.ta-xn,lo,oa+16*xt.R,xn),r(xt.qa,xt.ra-ai,Vi,ar+8*xt.B,ai),r(xt.Ha,xt.Ia-ai,Fo,aa+8*xt.B,ai))}if(!ts)return vi(tr,6,"Output aborted.")}return 1}(ee,pe)),null!=pe.bc&&pe.bc(pe),ve&=1}return ve?(ee.cb=0,ve):0})(p,k)||(_=p.a)}}else _=p.a}0==_&&null!=G.Oa&&G.Oa.fd&&(_=T1(G.ba))}G=_}$=0!=G?null:11>$?K.f.RGBA.eb:K.f.kb.y}else $=null;return $};var wX=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(S,F){for(var I="",O=0;O<4;O++)I+=String.fromCharCode(S[F++]);return I}function u(S,F){return S[F+0]|S[F+1]<<8}function d(S,F){return(S[F+0]|S[F+1]<<8|S[F+2]<<16)>>>0}function h(S,F){return(S[F+0]|S[F+1]<<8|S[F+2]<<16|S[F+3]<<24)>>>0}new l;var f=[0],m=[0],v=[],y=new l,b=n,A=function(S,F){var I={},O=0,L=!1,te=0,me=0;if(I.frames=[],!
/** @license
               * Copyright (c) 2017 Dominik Homberger
              Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
              The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
              THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
              https://webpjs.appspot.com
              WebPRiffParser dominikhlbg@gmail.com
              */
function(j,Y){for(var ne=0;ne<4;ne++)if(j[Y+ne]!="RIFF".charCodeAt(ne))return!0;return!1}(S,F)){for(h(S,F+=4),F+=8;F<S.length;){var le=c(S,F),ue=h(S,F+=4);F+=4;var he=ue+(1&ue);switch(le){case"VP8 ":case"VP8L":void 0===I.frames[O]&&(I.frames[O]={}),(Pe=I.frames[O]).src_off=L?me:F-8,Pe.src_size=te+ue+8,O++,L&&(L=!1,te=0,me=0);break;case"VP8X":(Pe=I.header={}).feature_flags=S[F];var be=F+4;Pe.canvas_width=1+d(S,be),Pe.canvas_height=1+d(S,be+=3),be+=3;break;case"ALPH":L=!0,te=he+8,me=F-8;break;case"ANIM":(Pe=I.header).bgcolor=h(S,F),Pe.loop_count=u(S,be=F+4),be+=2;break;case"ANMF":var Ge,Pe;(Pe=I.frames[O]={}).offset_x=2*d(S,F),Pe.offset_y=2*d(S,F+=3),Pe.width=1+d(S,F+=3),Pe.height=1+d(S,F+=3),Pe.duration=d(S,F+=3),F+=3,Ge=S[F++],Pe.dispose=1&Ge,Pe.blend=Ge>>1&1}"ANMF"!=le&&(F+=he)}return I}}(b,0);A.response=b,A.rgbaoutput=!0,A.dataurl=!1;var T=A.header?A.header:null,P=A.frames?A.frames:null;if(T){T.loop_counter=T.loop_count,f=[T.canvas_height],m=[T.canvas_width];for(var V=0;V<P.length&&0!=P[V].blend;V++);}var q=P[0],N=y.WebPDecodeRGBA(b,q.src_off,q.src_size,m,f);q.rgba=N,q.imgwidth=m[0],q.imgheight=f[0];for(var D=0;D<m[0]*f[0]*4;D++)v[D]=N[D];return this.width=m,this.height=f,this.data=v,this}(function(n){var e,t,r,i,s,o,a,l,c,u=function(j){return this.isStrokeTransparent=(j=j||{}).isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=void 0!==j.transform?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new o,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new o,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof j.ignoreClearRect||j.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=j;Object.defineProperty(this,"pdf",{get:function(){return Y}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(De){ne=!!De}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(De){ie=!!De}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(De){isNaN(De)||(de=De)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(De){isNaN(De)||(fe=De)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(De){var re;"number"==typeof De?re=[De,De,De,De]:((re=new Array(4))[0]=De[0],re[1]=De.length>=2?De[1]:re[0],re[2]=De.length>=3?De[2]:re[0],re[3]=De.length>=4?De[3]:re[1]),c.margin=re}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(De){Ce=De}});var Ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ie},set:function(De){Ie=De}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(De){ke=De}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(De){De instanceof u&&(c=De)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(De){c.path=De}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(De){Me=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var re;re=h(De),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=0===re.a,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var re=h(De);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=0===re.a,this.ctx.strokeOpacity=re.a,0===re.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(re.r,re.g,re.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){-1!==["butt","round","square"].indexOf(De)&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){-1!==["bevel","round","miter"].indexOf(De)&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){-1!==["right","end","center","left","start"].indexOf(De)&&(this.ctx.textAlign=De)}});var Je=null,et=null;Object.defineProperty(this,"fontFaces",{get:function(){return et},set:function(De){Je=null,et=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var re;if(this.ctx.font=De,null!==(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))){var Mn=re[1],sn=re[3],Vt=re[4],Ke=re[6],Tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Vt)[2];Vt=Math.floor("px"===Tt?parseFloat(Vt)*this.pdf.internal.scaleFactor:"em"===Tt?parseFloat(Vt)*this.pdf.getFontSize():parseFloat(Vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Vt);var at=function(qt){var Pt,mr,Vn=[],Xe=qt.trim();if(""===Xe)return ZR;if(Xe in kW)return[kW[Xe]];for(;""!==Xe;){switch(mr=null,Pt=(Xe=NW(Xe)).charAt(0)){case'"':case"'":mr=CCe(Xe.substring(1),Pt);break;default:mr=ECe(Xe)}if(null===mr||(Vn.push(mr[0]),""!==(Xe=NW(mr[1]))&&","!==Xe.charAt(0)))return ZR;Xe=Xe.replace(/^,/,"")}return Vn}(Ke);if(this.fontFaces){var Rn=function(qt,Pt,mr){for(var Vn=(mr=mr||{}).defaultFontFamily||"times",Xe=Object.assign({},ACe,mr.genericFontFamilies||{}),Ot=null,fn=null,Lt=0;Lt<Pt.length;++Lt)if(Xe[(Ot=QR(Pt[Lt])).family]&&(Ot.family=Xe[Ot.family]),qt.hasOwnProperty(Ot.family)){fn=qt[Ot.family];break}if(!(fn=fn||qt[Vn]))throw new Error("Could not find a font-family for the rule '"+RW(Ot)+"' and default family '"+Vn+"'.");if(fn=function(Sn,Mt){if(Mt[Sn])return Mt[Sn];var vr=XR[Sn],er=MW(Mt,DW,vr,vr<=XR.normal?-1:1);if(!er)throw new Error("Could not find a matching font-stretch value for "+Sn);return er}(Ot.stretch,fn),fn=function(Sn,Mt){if(Mt[Sn])return Mt[Sn];for(var vr=xW[Sn],si=0;si<vr.length;++si)if(Mt[vr[si]])return Mt[vr[si]];throw new Error("Could not find a matching font-style for "+Sn)}(Ot.style,fn),!(fn=function(Sn,Mt){if(Mt[Sn])return Mt[Sn];if(400===Sn&&Mt[500])return Mt[500];if(500===Sn&&Mt[400])return Mt[400];var si=MW(Mt,PW,wCe[Sn],Sn<400?-1:1);if(!si)throw new Error("Could not find a matching font-weight for value "+Sn);return si}(Ot.weight,fn)))throw new Error("Failed to resolve a font for the rule '"+RW(Ot)+"'.");return fn}(function(qt,Pt){if(null===Je){var mr=(Vn=qt.getFontList(),Xe=[],Object.keys(Vn).forEach(function(Ot){Vn[Ot].forEach(function(fn){var Lt=null;switch(fn){case"bold":Lt={family:Ot,weight:"bold"};break;case"italic":Lt={family:Ot,style:"italic"};break;case"bolditalic":Lt={family:Ot,weight:"bold",style:"italic"};break;case"":case"normal":Lt={family:Ot}}null!==Lt&&(Lt.ref={name:Ot,style:fn},Xe.push(Lt))})}),Xe);Je=function(Vn){for(var Xe={},Ot=0;Ot<Vn.length;++Ot){var fn=QR(Vn[Ot]),Lt=fn.family,Sn=fn.stretch,Mt=fn.style,vr=fn.weight;Xe[Lt]=Xe[Lt]||{},Xe[Lt][Sn]=Xe[Lt][Sn]||{},Xe[Lt][Sn][Mt]=Xe[Lt][Sn][Mt]||{},Xe[Lt][Sn][Mt][vr]=fn}return Xe}(mr.concat(Pt))}var Vn,Xe;return Je}(this.pdf,this.fontFaces),at.map(function(qt){return{family:qt,stretch:"normal",weight:sn,style:Mn}}));this.pdf.setFont(Rn.ref.name,Rn.ref.style)}else{var Ht="";("bold"===sn||parseInt(sn,10)>=700||"bold"===Mn)&&(Ht="bold"),"italic"===Mn&&(Ht+="italic"),0===Ht.length&&(Ht="normal");for(var Zt="",hn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dt=0;Dt<at.length;Dt++){if(void 0!==this.pdf.internal.getFont(at[Dt],Ht,{noFallback:!0,disableWarning:!0})){Zt=at[Dt];break}if("bolditalic"===Ht&&void 0!==this.pdf.internal.getFont(at[Dt],"bold",{noFallback:!0,disableWarning:!0}))Zt=at[Dt],Ht="bold";else if(void 0!==this.pdf.internal.getFont(at[Dt],"normal",{noFallback:!0,disableWarning:!0})){Zt=at[Dt],Ht="normal";break}}if(""===Zt)for(var It=0;It<at.length;It++)if(hn[at[It]]){Zt=hn[at[It]];break}this.pdf.setFont(Zt=""===Zt?"Times":Zt,Ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,Pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,Pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};d.prototype.setLineDash=function(j){this.lineDash=j},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){P.call(this,"fill",!1)},d.prototype.stroke=function(){P.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(j,Y){if(isNaN(j)||isNaN(Y))throw Vr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new o(j,Y));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(j,Y)},d.prototype.closePath=function(){var j=new o(0,0),Y=0;for(Y=this.path.length-1;-1!==Y;Y--)if("begin"===this.path[Y].type&&"object"===Tr(this.path[Y+1])&&"number"==typeof this.path[Y+1].x){j=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(j.x,j.y)},d.prototype.lineTo=function(j,Y){if(isNaN(j)||isNaN(Y))throw Vr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new o(j,Y));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},d.prototype.quadraticCurveTo=function(j,Y,ne,ie){if(isNaN(ne)||isNaN(ie)||isNaN(j)||isNaN(Y))throw Vr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new o(ne,ie)),fe=this.ctx.transform.applyToPoint(new o(j,Y));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},d.prototype.bezierCurveTo=function(j,Y,ne,ie,de,fe){if(isNaN(de)||isNaN(fe)||isNaN(j)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Vr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new o(de,fe)),Ie=this.ctx.transform.applyToPoint(new o(j,Y)),ke=this.ctx.transform.applyToPoint(new o(ne,ie));this.path.push({type:"bct",x1:Ie.x,y1:Ie.y,x2:ke.x,y2:ke.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new o(Ce.x,Ce.y)},d.prototype.arc=function(j,Y,ne,ie,de,fe){if(isNaN(j)||isNaN(Y)||isNaN(ne)||isNaN(ie)||isNaN(de))throw Vr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new o(j,Y));j=Ce.x,Y=Ce.y;var Ie=this.ctx.transform.applyToPoint(new o(0,ne)),ke=this.ctx.transform.applyToPoint(new o(0,0));ne=Math.sqrt(Math.pow(Ie.x-ke.x,2)+Math.pow(Ie.y-ke.y,2))}Math.abs(de-ie)>=2*Math.PI&&(ie=0,de=2*Math.PI),this.path.push({type:"arc",x:j,y:Y,radius:ne,startAngle:ie,endAngle:de,counterclockwise:fe})},d.prototype.arcTo=function(j,Y,ne,ie,de){throw new Error("arcTo not implemented.")},d.prototype.rect=function(j,Y,ne,ie){if(isNaN(j)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Vr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,Y),this.lineTo(j+ne,Y),this.lineTo(j+ne,Y+ie),this.lineTo(j,Y+ie),this.lineTo(j,Y),this.lineTo(j+ne,Y),this.lineTo(j,Y)},d.prototype.fillRect=function(j,Y,ne,ie){if(isNaN(j)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Vr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var de={};"butt"!==this.lineCap&&(de.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,Y,ne,ie),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},d.prototype.strokeRect=function(j,Y,ne,ie){if(isNaN(j)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Vr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(j,Y,ne,ie),this.stroke())},d.prototype.clearRect=function(j,Y,ne,ie){if(isNaN(j)||isNaN(Y)||isNaN(ne)||isNaN(ie))throw Vr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,Y,ne,ie))},d.prototype.save=function(j){j="boolean"!=typeof j||j;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},d.prototype.restore=function(j){j="boolean"!=typeof j||j;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),j&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(j){var Y,ne,ie,de;if(!0===j.isCanvasGradient&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))Y=0,ne=0,ie=0,de=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(null!==fe)Y=parseInt(fe[1]),ne=parseInt(fe[2]),ie=parseInt(fe[3]),de=1;else if(null!==(fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j)))Y=parseInt(fe[1]),ne=parseInt(fe[2]),ie=parseInt(fe[3]),de=parseFloat(fe[4]);else{if(de=1,"string"==typeof j&&"#"!==j.charAt(0)){var Ce=new mW(j);j=Ce.ok?Ce.toHex():"#000000"}4===j.length?(Y=j.substring(1,2),Y+=Y,ne=j.substring(2,3),ne+=ne,ie=j.substring(3,4),ie+=ie):(Y=j.substring(1,3),ne=j.substring(3,5),ie=j.substring(5,7)),Y=parseInt(Y,16),ne=parseInt(ne,16),ie=parseInt(ie,16)}}return{r:Y,g:ne,b:ie,a:de,style:j}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return!(!this.ctx.isStrokeTransparent&&0!=this.globalAlpha)};d.prototype.fillText=function(j,Y,ne,ie){if(isNaN(Y)||isNaN(ne)||"string"!=typeof j)throw Vr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!f.call(this)){var de=he(this.ctx.transform.rotation);O.call(this,{text:j,x:Y,y:ne,scale:this.ctx.transform.scaleX,angle:de,align:this.textAlign,maxWidth:ie})}},d.prototype.strokeText=function(j,Y,ne,ie){if(isNaN(Y)||isNaN(ne)||"string"!=typeof j)throw Vr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){ie=isNaN(ie)?void 0:ie;var de=he(this.ctx.transform.rotation);O.call(this,{text:j,x:Y,y:ne,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:ie})}},d.prototype.measureText=function(j){if("string"!=typeof j)throw Vr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,ne=this.pdf.internal.scaleFactor,ie=Y.internal.getFontSize(),de=Y.getStringUnitWidth(j)*ie/Y.internal.scaleFactor;return new function(fe){var Ce=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this}({width:de*=Math.round(96*ne/72*1e4)/1e4})},d.prototype.scale=function(j,Y){if(isNaN(j)||isNaN(Y))throw Vr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new l(j,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},d.prototype.rotate=function(j){if(isNaN(j))throw Vr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},d.prototype.translate=function(j,Y){if(isNaN(j)||isNaN(Y))throw Vr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new l(1,0,0,1,j,Y);this.ctx.transform=this.ctx.transform.multiply(ne)},d.prototype.transform=function(j,Y,ne,ie,de,fe){if(isNaN(j)||isNaN(Y)||isNaN(ne)||isNaN(ie)||isNaN(de)||isNaN(fe))throw Vr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new l(j,Y,ne,ie,de,fe);this.ctx.transform=this.ctx.transform.multiply(Ce)},d.prototype.setTransform=function(j,Y,ne,ie,de,fe){j=isNaN(j)?1:j,Y=isNaN(Y)?0:Y,ne=isNaN(ne)?0:ne,ie=isNaN(ie)?1:ie,de=isNaN(de)?0:de,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(j,Y,ne,ie,de,fe)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(j,Y,ne,ie,de,fe,Ce,Ie,ke){var Me=this.pdf.getImageProperties(j),Je=1,et=1,De=1,re=1;void 0!==ie&&void 0!==Ie&&(De=Ie/ie,re=ke/de,Je=Me.width/ie*Ie/ie,et=Me.height/de*ke/de),void 0===fe&&(fe=Y,Ce=ne,Y=0,ne=0),void 0!==ie&&void 0===Ie&&(Ie=ie,ke=de),void 0===ie&&void 0===Ie&&(Ie=Me.width,ke=Me.height);for(var Mn,sn=this.ctx.transform.decompose(),Vt=he(sn.rotate.shx),Ke=new l,Tt=(Ke=(Ke=(Ke=Ke.multiply(sn.translate)).multiply(sn.skew)).multiply(sn.scale)).applyToRectangle(new a(fe-Y*De,Ce-ne*re,ie*Je,de*et)),at=y.call(this,Tt),on=[],Rt=0;Rt<at.length;Rt+=1)-1===on.indexOf(at[Rt])&&on.push(at[Rt]);if(T(on),this.autoPaging)for(var Rn=on[0],Ht=on[on.length-1],Zt=Rn;Zt<Ht+1;Zt++){this.pdf.setPage(Zt);var hn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=1===Zt?this.posY+this.margin[0]:this.margin[0],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=1===Zt?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Zt-2)*qt;if(0!==this.ctx.clip_path.length){var mr=this.path;Mn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Mn,this.posX+this.margin[3],-Pt+Dt+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=mr}var Vn=JSON.parse(JSON.stringify(Tt));Vn=A([Vn],this.posX+this.margin[3],-Pt+Dt+this.ctx.prevPageLastElemOffset)[0];var Xe=(Zt>Rn||Zt<Ht)&&v.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],hn,qt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Vn.x,Vn.y,Vn.w,Vn.h,null,null,Vt),Xe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,Vt)};var y=function(j,Y,ne){var ie=[];Y=Y||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":ie.push(Math.floor((j.y+de)/ne)+1);break;case"arc":ie.push(Math.floor((j.y+de-j.radius)/ne)+1),ie.push(Math.floor((j.y+de+j.radius)/ne)+1);break;case"qct":var fe=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);ie.push(Math.floor((fe.y+de)/ne)+1),ie.push(Math.floor((fe.y+fe.h+de)/ne)+1);break;case"bct":var Ce=Ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);ie.push(Math.floor((Ce.y+de)/ne)+1),ie.push(Math.floor((Ce.y+Ce.h+de)/ne)+1);break;case"rect":ie.push(Math.floor((j.y+de)/ne)+1),ie.push(Math.floor((j.y+j.h+de)/ne)+1)}for(var Ie=0;Ie<ie.length;Ie+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Ie];)b.call(this);return ie},b=function(){var j=this.fillStyle,Y=this.strokeStyle,ne=this.font,ie=this.lineCap,de=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=Y,this.font=ne,this.lineCap=ie,this.lineWidth=de,this.lineJoin=fe},A=function(j,Y,ne){for(var ie=0;ie<j.length;ie++)switch(j[ie].type){case"bct":j[ie].x2+=Y,j[ie].y2+=ne;case"qct":j[ie].x1+=Y,j[ie].y1+=ne;default:j[ie].x+=Y,j[ie].y+=ne}return j},T=function(j){return j.sort(function(Y,ne){return Y-ne})},P=function(j,Y){for(var ne,ie,de=this.fillStyle,fe=this.strokeStyle,Ce=this.lineCap,Ie=this.lineWidth,ke=Math.abs(Ie*this.ctx.transform.scaleX),Me=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),et=JSON.parse(JSON.stringify(this.path)),De=[],re=0;re<et.length;re++)if(void 0!==et[re].x)for(var Mn=y.call(this,et[re]),sn=0;sn<Mn.length;sn+=1)-1===De.indexOf(Mn[sn])&&De.push(Mn[sn]);for(var Vt=0;Vt<De.length;Vt++)for(;this.pdf.internal.getNumberOfPages()<De[Vt];)b.call(this);if(T(De),this.autoPaging)for(var Ke=De[0],Tt=De[De.length-1],at=Ke;at<Tt+1;at++){this.pdf.setPage(at),this.fillStyle=de,this.strokeStyle=fe,this.lineCap=Ce,this.lineWidth=ke,this.lineJoin=Me;var on=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=1===at?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Zt=1===at?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(at-2)*Ht;if(0!==this.ctx.clip_path.length){var hn=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ne,this.posX+this.margin[3],-Zt+Rt+this.ctx.prevPageLastElemOffset),V.call(this,j,!0),this.path=hn}if(ie=JSON.parse(JSON.stringify(Je)),this.path=A(ie,this.posX+this.margin[3],-Zt+Rt+this.ctx.prevPageLastElemOffset),!1===Y||0===at){var Dt=(at>Ke||at<Tt)&&v.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],on,Ht,null).clip().discardPath()),V.call(this,j,Y),Dt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ie}else this.lineWidth=ke,V.call(this,j,Y),this.lineWidth=Ie;this.path=Je},V=function(j,Y){if(("stroke"!==j||Y||!m.call(this))&&("stroke"===j||Y||!f.call(this))){for(var ne,ie,de=[],fe=this.path,Ce=0;Ce<fe.length;Ce++){var Ie=fe[Ce];switch(Ie.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Ie,deltas:[],abs:[]});break;case"lt":var ke=de.length;if(fe[Ce-1]&&!isNaN(fe[Ce-1].x)&&(ne=[Ie.x-fe[Ce-1].x,Ie.y-fe[Ce-1].y],ke>0))for(;ke>=0;ke--)if(!0!==de[ke-1].close&&!0!==de[ke-1].begin){de[ke-1].deltas.push(ne),de[ke-1].abs.push(Ie);break}break;case"bct":de[de.length-1].deltas.push(ne=[Ie.x1-fe[Ce-1].x,Ie.y1-fe[Ce-1].y,Ie.x2-fe[Ce-1].x,Ie.y2-fe[Ce-1].y,Ie.x-fe[Ce-1].x,Ie.y-fe[Ce-1].y]);break;case"qct":de[de.length-1].deltas.push(ne=[fe[Ce-1].x+2/3*(Ie.x1-fe[Ce-1].x)-fe[Ce-1].x,fe[Ce-1].y+2/3*(Ie.y1-fe[Ce-1].y)-fe[Ce-1].y,Ie.x+2/3*(Ie.x1-Ie.x)-fe[Ce-1].x,Ie.y+2/3*(Ie.y1-Ie.y)-fe[Ce-1].y,Ie.x-fe[Ce-1].x,Ie.y-fe[Ce-1].y]);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Ie)}}ie=Y?null:"stroke"===j?"stroke":"fill";for(var sn=!1,Vt=0;Vt<de.length;Vt++)if(de[Vt].arc)for(var Ke=de[Vt].abs,Tt=0;Tt<Ke.length;Tt++){var at=Ke[Tt];"arc"===at.type?D.call(this,at.x,at.y,at.radius,at.startAngle,at.endAngle,at.counterclockwise,void 0,Y,!sn):L.call(this,at.x,at.y),sn=!0}else!0===de[Vt].close?(this.pdf.internal.out("h"),sn=!1):!0!==de[Vt].begin&&(te.call(this,de[Vt].deltas,de[Vt].start.x,de[Vt].start.y),sn=!0);ie&&S.call(this,ie),Y&&F.call(this)}},q=function(j){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-ne;case"top":return j+Y-ne;case"hanging":return j+Y-2*ne;case"middle":return j+Y/2-ne;default:return j}},N=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(Y,ne){this.colorStops.push([Y,ne])},j.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(j,Y,ne,ie,de,fe,Ce,Ie,ke){for(var Me=le.call(this,ne,ie,de,fe),Je=0;Je<Me.length;Je++){var et=Me[Je];0===Je&&(ke?I.call(this,et.x1+j,et.y1+Y):L.call(this,et.x1+j,et.y1+Y)),me.call(this,j,Y,et.x2,et.y2,et.x3,et.y3,et.x4,et.y4)}Ie?F.call(this):S.call(this,Ce)},S=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(j,Y){this.pdf.internal.out(t(j)+" "+r(Y)+" m")},O=function(j){var Y;switch(j.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var ne=this.pdf.getTextDimensions(j.text),ie=q.call(this,j.y),de=N.call(this,ie)-ne.h,fe=this.ctx.transform.applyToPoint(new o(j.x,ie)),Ce=this.ctx.transform.decompose(),Ie=new l;Ie=(Ie=(Ie=Ie.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var ke,Me,Je,et=this.ctx.transform.applyToRectangle(new a(j.x,ie,ne.w,ne.h)),De=Ie.applyToRectangle(new a(j.x,de,ne.w,ne.h)),re=y.call(this,De),Mn=[],sn=0;sn<re.length;sn+=1)-1===Mn.indexOf(re[sn])&&Mn.push(re[sn]);if(T(Mn),this.autoPaging)for(var Vt=Mn[0],Ke=Mn[Mn.length-1],Tt=Vt;Tt<Ke+1;Tt++){this.pdf.setPage(Tt);var at=1===Tt?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.margin[2],Rn=Rt-this.margin[0],Ht=this.pdf.internal.pageSize.width-this.margin[1],Zt=Ht-this.margin[3],hn=1===Tt?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Tt-2)*Rn;if(0!==this.ctx.clip_path.length){var Dt=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ke,this.posX+this.margin[3],-1*hn+at),V.call(this,"fill",!0),this.path=Dt}var It=A([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-hn+at+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*j.scale),this.lineWidth=(Je=this.lineWidth)*j.scale);var qt="text"!==this.autoPaging;if(qt||It.y+It.h<=Rt){if(qt||It.y>=at&&It.x<=Ht){var Pt=qt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Ht-It.x)[0],mr=A([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-hn+at+this.ctx.prevPageLastElemOffset)[0],Vn=qt&&(Tt>Vt||Tt<Ke)&&v.call(this);Vn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zt,Rn,null).clip().discardPath()),this.pdf.text(Pt,mr.x,mr.y,{angle:j.angle,align:Y,renderingMode:j.renderingMode}),Vn&&this.pdf.restoreGraphicsState()}}else It.y<Rt&&(this.ctx.prevPageLastElemOffset+=Rt-It.y);j.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Je)}else j.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*j.scale),this.lineWidth=(Je=this.lineWidth)*j.scale),this.pdf.text(j.text,fe.x+this.posX,fe.y+this.posY,{angle:j.angle,align:Y,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Je)},L=function(j,Y,ne,ie){ie=ie||0,this.pdf.internal.out(t(j+(ne=ne||0))+" "+r(Y+ie)+" l")},te=function(j,Y,ne){return this.pdf.lines(j,Y,ne,null,null)},me=function(j,Y,ne,ie,de,fe,Ce,Ie){this.pdf.internal.out([e(i(ne+j)),e(s(ie+Y)),e(i(de+j)),e(s(fe+Y)),e(i(Ce+j)),e(s(Ie+Y)),"c"].join(" "))},le=function(j,Y,ne,ie){for(var de=2*Math.PI,fe=Math.PI/2;Y>ne;)Y-=de;var Ce=Math.abs(ne-Y);Ce<de&&ie&&(Ce=de-Ce);for(var Ie=[],ke=ie?-1:1,Me=Y;Ce>1e-5;){var Je=Me+ke*Math.min(Ce,fe);Ie.push(ue.call(this,j,Me,Je)),Ce-=Math.abs(Je-Me),Me=Je}return Ie},ue=function(j,Y,ne){var ie=(ne-Y)/2,de=j*Math.cos(ie),fe=j*Math.sin(ie),Ce=de,Ie=-fe,ke=Ce*Ce+Ie*Ie,Me=ke+Ce*de+Ie*fe,Je=4/3*(Math.sqrt(2*ke*Me)-Me)/(Ce*fe-Ie*de),et=Ce-Je*Ie,De=Ie+Je*Ce,re=et,Mn=-De,sn=ie+Y,Vt=Math.cos(sn),Ke=Math.sin(sn);return{x1:j*Math.cos(Y),y1:j*Math.sin(Y),x2:et*Vt-De*Ke,y2:et*Ke+De*Vt,x3:re*Vt-Mn*Ke,y3:re*Ke+Mn*Vt,x4:j*Math.cos(ne),y4:j*Math.sin(ne)}},he=function(j){return 180*j/Math.PI},be=function(j,Y,ne,ie,de,fe){var Ce=j+.5*(ne-j),Ie=Y+.5*(ie-Y),ke=de+.5*(ne-de),Me=fe+.5*(ie-fe),Je=Math.min(j,de,Ce,ke),et=Math.max(j,de,Ce,ke),De=Math.min(Y,fe,Ie,Me),re=Math.max(Y,fe,Ie,Me);return new a(Je,De,et-Je,re-De)},Ge=function(j,Y,ne,ie,de,fe,Ce,Ie){var ke,Me,Je,et,De,re,Mn,sn,Vt,Ke,Tt,at,on,Rt,Rn=ne-j,Ht=ie-Y,Zt=de-ne,hn=fe-ie,Dt=Ce-de,It=Ie-fe;for(Me=0;Me<41;Me++)Vt=(Mn=(Je=j+(ke=Me/40)*Rn)+ke*((De=ne+ke*Zt)-Je))+ke*(De+ke*(de+ke*Dt-De)-Mn),Ke=(sn=(et=Y+ke*Ht)+ke*((re=ie+ke*hn)-et))+ke*(re+ke*(fe+ke*It-re)-sn),0==Me?(Tt=Vt,at=Ke,on=Vt,Rt=Ke):(Tt=Math.min(Tt,Vt),at=Math.min(at,Ke),on=Math.max(on,Vt),Rt=Math.max(Rt,Ke));return new a(Math.round(Tt),Math.round(at),Math.round(on-Tt),Math.round(Rt-at))},Pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ne=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Nt.API),
/**
         * @license
         * jsPDF filters PlugIn
         * Copyright (c) 2014 Aras Abbasi
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e=function(o){var a,l,c,u,d,h,f,m,v,y;for(/[^\x00-\xFF]/.test(o),l=[],c=0,u=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;u>c;c+=4)0!==(d=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))?(h=(d=((d=((d=((d=(d-(y=d%85))/85)-(v=d%85))/85)-(m=d%85))/85)-(f=d%85))/85)%85,l.push(h+33,f+33,m+33,v+33,y+33)):l.push(122);return function(b,A){for(var T=A;T>0;T--)b.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},t=function(o){var a,l,c,u,d,h=String,f="length",m=255,v="charCodeAt",y="slice",b="replace";for(o[y](-2),o=o[y](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(o+=a="uuuuu"[y](o[f]%5||5))[f];d>u;u+=5)l=52200625*(o[v](u)-33)+614125*(o[v](u+1)-33)+7225*(o[v](u+2)-33)+85*(o[v](u+3)-33)+(o[v](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(A,T){for(var P=T;P>0;P--)A.pop()}(c,a[f]),h.fromCharCode.apply(h,c)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(o=o.replace(/\s/g,"")).indexOf(">")&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),!1===a.test(o))return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=Iy(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(o,a){var l=0,c=o||"",u=[];for("string"==typeof(a=a||[])&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Nt.API),
/**
         * @license
         * jsPDF fileloading PlugIn
         * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=!1!==s,o="function"==typeof o?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(m){var v=m.length,y=[],b=String.fromCharCode;for(h=0;h<v;h+=1)y.push(b(255&m.charCodeAt(h)));return y.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),!1===c&&(d.onload=function(){u(200===d.status?f(this.responseText):void 0)}),d.send(null),c&&200===d.status)return f(d.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(Nt.API),function(n){function e(){return(dn.html2canvas?Promise.resolve(dn.html2canvas):tt.e(239).then(tt.t.bind(tt,7239,23))).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(dn.DOMPurify?Promise.resolve(dn.DOMPurify):tt.e(627).then(tt.bind(tt,627))).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Tr(a);return"undefined"===l?"undefined":"string"===l||a instanceof String?"string":"number"===l||a instanceof Number?"number":"function"===l||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&1===a.nodeType?"element":"object"===l?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function a(l,c){for(var u=3===l.nodeType?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)!0!==c&&1===d.nodeType&&"SCRIPT"===d.nodeName||u.appendChild(a(d,c));return 1===l.nodeType&&("CANVAS"===l.nodeName?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):"TEXTAREA"!==l.nodeName&&"SELECT"!==l.nodeName||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},o=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return(u=u.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return"canvas"===c.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===l.tagName&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var m=u[f],v=m.src.find(function(y){return"truetype"===y.format});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=0==h.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,c){return"img"===(c=c||"pdf").toLowerCase()||"image"===c.toLowerCase()?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if("object"!==r(a))return this;var l=Object.keys(a||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var c=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(2===a.length&&(a=[a[0],a[1],a[0],a[1]]),4===a.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||Nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,c,u){return null!=a&&(this.progress.val=a),null!=l&&(this.progress.state=l),null!=c&&(this.progress.n=c),null!=u&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,c,u){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,u),h}).then(u,d).then(function(h){return c.updateProgress(1),h})})},o.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var u=this;a&&(a=a.bind(u)),l&&(l=l.bind(u));var d=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?u:o.convert(Object.assign({},u),Promise.prototype),h=c.call(d,a,l);return o.convert(h,u.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Nt.getPageSize=function(a,l,c){if("object"===Tr(a)){var u=a;a=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,v=0,y=0;if(f.hasOwnProperty(h))v=f[h][1]/d,y=f[h][0]/d;else try{v=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if("p"===a||"portrait"===a)a="p",y>v&&(m=y,y=v,v=m);else{if("l"!==a&&"landscape"!==a)throw"Invalid orientation: "+a;a="l",v>y&&(m=y,y=v,v=m)}return{width:y,height:v,unit:l,k:d,orientation:a}},n.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(QR):null;var c=new o(l);return l.worker?c:c.from(a).doCallback()}}(Nt.API),Nt.API.addJS=function(n){return LW=n,this.internal.events.subscribe("postPutResources",function(){bC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(bC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),OW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+LW+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==bC&&void 0!==OW&&this.internal.out("/Names <</JavaScript "+bC+" 0 R>>")}),this},
/**
         * @license
         * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);null!=a&&t.internal.newObjectDeferredBegin(a[1],!1),t.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=t.internal.newObject();u.push(d);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<u.length;s++)t.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return null==r&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},t.outline.line=function(r){this.ctx.val+=r+"\r\n"},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+="\r\n"+r.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Nt.API),
/**
         * @license
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=o||t)?new Uint8Array(t):t,(l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),m=d.length,v={width:0,height:0,numcomponents:1},y=4;y<m;y+=2){if(-1!==e.indexOf(d.charCodeAt((y+=f)+1))){h=256*d.charCodeAt(y+5)+d.charCodeAt(y+6),v={width:256*d.charCodeAt(y+7)+d.charCodeAt(y+8),height:h,numcomponents:d.charCodeAt(y+9)};break}f=256*d.charCodeAt(y+2)+d.charCodeAt(y+3)}return v}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(Nt.API),Nt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,d,h,f,s=function aCe(n,e){return new JAe(n,e).decode()}(n,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,u=s.depth,v=(i=s.palette&&1===l?function(D){for(var S=D.width,F=D.height,I=D.data,O=D.palette,L=D.depth,te=!1,me=[],le=[],ue=void 0,he=!1,be=0,Ge=0;Ge<O.length;Ge++){var Pe=TG(O[Ge],4),ie=Pe[3];me.push(Pe[0],Pe[1],Pe[2]),null!=ie&&(0===ie?(be++,le.length<1&&le.push(Ge)):ie<255&&(he=!0))}if(he||be>1){te=!0,le=void 0;var de=S*F;ue=new Uint8Array(de);for(var fe=new DataView(I.buffer),Ce=0;Ce<de;Ce++){var ke=TG(O[JR(fe,Ce,L)],4)[3];ue[Ce]=ke}}else 0===be&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:I,alphaBytes:ue,needSMask:te,palette:me,mask:le}}(s):2===l||4===l?function(D){for(var S=D.data,O=D.channels,L=D.depth,te=2===O?"DeviceGray":"DeviceRGB",me=O-1,le=D.width*D.height,ue=me,be=1*le,Ge=Math.ceil(le*ue*L/8),Pe=Math.ceil(be*L/8),j=new Uint8Array(Ge),Y=new Uint8Array(Pe),ne=new DataView(S.buffer),ie=new DataView(j.buffer),de=new DataView(Y.buffer),fe=!1,Ce=0;Ce<le;Ce++){for(var Ie=Ce*O,ke=0;ke<ue;ke++)GW(ie,JR(ne,Ie+ke,L),Ce*ue+ke,L);var Me=JR(ne,Ie+ue,L);Me<(1<<L)-1&&(fe=!0),GW(de,Me,1*Ce,L)}return{colorSpace:te,colorsPerPixel:me,sMaskBitsPerComponent:fe?L:void 0,colorBytes:j,alphaBytes:Y,needSMask:fe}}(s):{colorSpace:F=1===(D=s).channels?"DeviceGray":"DeviceRGB",colorsPerPixel:"DeviceGray"===F?1:3,colorBytes:(S=D.data)instanceof Uint16Array?function(I){for(var O=I.length,L=new Uint8Array(2*O),te=new DataView(L.buffer,L.byteOffset,L.byteLength),me=0;me<O;me++)te.setUint16(2*me,I[me],!1);return L}(S):S,needSMask:!1}).colorSpace,y=i.colorsPerPixel,b=i.sMaskBitsPerComponent,A=i.colorBytes,T=i.alphaBytes,P=i.needSMask,V=i.palette,q=i.mask,N=null;return r!==Nt.API.image_compression.NONE?(N=function(D){var S;switch(D){case Nt.API.image_compression.FAST:S=11;break;case Nt.API.image_compression.MEDIUM:S=13;break;case Nt.API.image_compression.SLOW:S=14;break;default:S=12}return S}(r),d=this.decode.FLATE_DECODE,h="/Predictor ".concat(N," /Colors ").concat(y," /BitsPerComponent ").concat(u," /Columns ").concat(o),n=UW(A,Math.ceil(o*y*u/8),y,u,r),P&&(f=UW(T,Math.ceil(o*b/8),1,b,r))):(d=void 0,h=void 0,n=A,P&&(f=T)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:t,data:n,index:e,filter:d,decodeParameters:h,transparency:q,palette:V,sMask:f,predictor:N,width:o,height:a,bitsPerComponent:u,sMaskBitsPerComponent:b,colorSpace:v}}var D,S,F},function(n){n.processGIF89A=function(e,t,r,i){var s=new xCe(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new eN(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)},n.processGIF87A=n.processGIF89A}(Nt.API),hc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[n]()}catch(t){Vr.log("bit decode error:"+t)}},hc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}0!==t&&(this.pos+=4-t)}},hc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,l=15&s,c=this.palette[s>>4];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;this.data[o+4]=(c=this.palette[l]).blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}0!==e&&(this.pos+=4-e)}},hc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==n&&(this.pos+=4-n)}},hc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=(s>>10&e)/e*255|0,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=n}},hc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,u=i*this.width*4+4*s;this.data[u]=(o>>11)/e*255|0,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=n}},hc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},hc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},hc.prototype.getData=function(){return this.data},
/**
         * @license
         * Copyright (c) 2018 Aras Abbasi
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){n.processBMP=function(e,t,r,i){var s=new hc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new eN(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}}(Nt.API),KW.prototype.getData=function(){return this.data},
/**
         * @license
         * Copyright (c) 2019 Aras Abbasi
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){n.processWEBP=function(e,t,r,i){var s=new KW(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new eN(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}}(Nt.API),Nt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c+1],h=r[c+2],f=r[c+3];s[a++]=r[c],s[a++]=d,s[a++]=h,o[l++]=f}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Nt.API.setLanguage=function(n){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]&&(this.internal.languageSettings.languageCode=n,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},wC=(d_=Nt.API).getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=!1!==e.doKerning,h=0,f=n.length,m=0,v=a[0]||l,y=[];for(t=0;t<f;t++)r=n.charCodeAt(t),"function"==typeof i.metadata.widthOfString?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(h=d&&"object"===Tr(c[r])&&!isNaN(parseInt(c[r][m],10))?c[r][m]/u:0,y.push((a[r]||v)/l+h)),m=r;return y},FW=d_.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return d_.processArabic&&(n=d_.processArabic(n)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(n,t,i)/t:wC.apply(this,arguments).reduce(function(s,o){return s+o},0)},VW=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},BW=function(n,e,t){t||(t={});var r,i,s,o,a,l,u=[],d=[u],h=t.textIndent||0,f=0,m=0,v=n.split(" "),y=wC.apply(this,[" ",t])[0];if(l=-1===t.lineIndent?v[0].length+2:t.lineIndent||0){var b=Array(l).join(" "),A=[];v.map(function(P){(P=P.split(/\s*\n/)).length>1?A=A.concat(P.map(function(V,q){return(q&&V.length?"\n":"")+V})):A.push(P[0])}),v=A,l=FW.apply(this,[b,t])}for(s=0,o=v.length;s<o;s++){var T=0;if(r=v[s],l&&"\n"==r[0]&&(r=r.substr(1),T=1),h+f+(m=(i=wC.apply(this,[r,t])).reduce(function(P,V){return P+V},0))>e||T){if(m>e){for(a=VW.apply(this,[r,i,e-(h+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);m=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(P,V){return P+V},0)}else u=[r];d.push(u),h=m+l,f=y}else u.push(r),h+=f+m,f=y}return d.map(l?function(P,V){return(V?b:"")+P.join(" ")}:function(P){return P.join(" ")})},d_.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),h="Unicode";return d.metadata[h]?{widths:d.metadata[h].widths||{0:1},kerning:d.metadata[h].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(BW.apply(this,[r[a],o,s]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[t[s]]=e[s],i[e[s]]=t[s];var o=function(h){return"0x"+parseInt(h,10).toString(16)},a=n.__fontmetrics__.compress=function(h){var f,m,v,y,b=["{"];for(var A in h){if(f=h[A],isNaN(parseInt(A,10))?m="'"+A+"'":(A=parseInt(A,10),m=(m=o(A).slice(2)).slice(0,-1)+i[m.slice(-1)]),"number"==typeof f)f<0?(v=o(f).slice(3),y="-"):(v=o(f).slice(2),y=""),v=y+v.slice(0,-1)+i[v.slice(-1)];else{if("object"!==Tr(f))throw new Error("Don't know what to do with value type "+Tr(f)+".");v=a(f)}b.push(m+v)}return b.push("}"),b.join("")},l=n.__fontmetrics__.uncompress=function(h){if("string"!=typeof h)throw new Error("Invalid argument passed to uncompress.");for(var f,m,v,y,b={},A=1,T=b,P=[],V="",q="",N=h.length-1,D=1;D<N;D+=1)"'"==(y=h[D])?f?(v=f.join(""),f=void 0):f=[]:f?f.push(y):"{"==y?(P.push([T,v]),T={},v=void 0):"}"==y?((m=P.pop())[0][m[1]]=T,v=void 0,T=m[0]):"-"==y?A=-1:void 0===v?r.hasOwnProperty(y)?(V+=r[y],v=parseInt(V,16)*A,A=1,V=""):V+=y:r.hasOwnProperty(y)?(q+=r[y],T[v]=parseInt(q,16)*A,A=1,v=void 0,q=""):q+=y;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(h){var f=h.font,m=d.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var v=u.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(Nt.API),
/**
         * @license
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var o,a,r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(i.postScriptName)?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");o=i,a=/^\x00\x01\x00\x00/.test(a=r)?e(a):e(dC(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]}}])}(Nt),Nt.API.addSvgAsImage=function(n,e,t,r,i,s,o,a){if(isNaN(e)||isNaN(t))throw Vr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Vr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(dn.canvg?Promise.resolve(dn.canvg):tt.e(842).then(tt.bind(tt,3842))).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(c,n,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,t,r,i,o,a)})},Nt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Nt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(m,v){var y,b=!1;for(y=0;y<m.length;y+=1)m[y]===v&&(b=!0);return b}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,"reset"===n||!0===e){var f=a.length;for(d=0;d<f;d+=1)t[a[d]].value=t[a[d]].defaultValue,t[a[d]].explicitSet=!1}if("object"===Tr(n))for(i in n)if(s=n[i],h(a,i)&&void 0!==s){if("boolean"===t[i].type&&"boolean"==typeof s)t[i].value=s;else if("name"===t[i].type&&h(t[i].valueSet,s))t[i].value=s;else if("integer"===t[i].type&&Number.isInteger(s))t[i].value=s;else if("array"===t[i].type){for(c=0;c<s.length;c+=1)if(r=!0,1===s[c].length&&"number"==typeof s[c][0])l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)"number"!=typeof s[c][u]&&(r=!1);!0===r&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var m,v=[];for(m in t)!0===t[m].explicitSet&&v.push("name"===t[m].type?"/"+m+" /"+t[m].value:"/"+m+" "+t[m].value);0!==v.length&&this.internal.write("/ViewerPreferences\n<<\n"+v.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},
/** ====================================================================
         * @license
         * jsPDF XMP metadata plugin
         * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
         *
         * Permission is hereby granted, free of charge, to any person obtaining
         * a copy of this software and associated documentation files (the
         * "Software"), to deal in the Software without restriction, including
         * without limitation the rights to use, copy, modify, merge, publish,
         * distribute, sublicense, and/or sell copies of the Software, and to
         * permit persons to whom the Software is furnished to do so, subject to
         * the following conditions:
         *
         * The above copyright notice and this permission notice shall be
         * included in all copies or substantial portions of the Software.
         *
         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
         * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
         * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
         * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
         * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
         * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
         * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
         * ====================================================================
         */
function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Nt.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=s.length;d<h;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),-1==l.indexOf(a)&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),"0"==a)return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,d,h;for(u="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",l=[],d=0,h=(a=Object.keys(s).sort(function(f,m){return f-m})).length;d<h;d++)o=a[d],l.length>=100&&(u+="\n"+l.length+" beginbfchar\n"+l.join("\n")+"\nendbfchar",l=[]),null!=s[o]&&"function"==typeof s[o].toString&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+="\n"+l.length+" beginbfchar\n"+l.join("\n")+"\nendbfchar\n"),u+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(s){!function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof n.API.TTFFont&&"Identity-H"===a.encoding){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var v=c();u({data:f,addLength1:!0,objectId:v}),l("endobj");var y=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var b=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+i_(a.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var A=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+i_(a.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+i_(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}}(s)}]),e.events.push(["putFont",function(s){!function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof n.API.TTFFont&&"WinAnsiEncoding"===a.encoding){for(var d=a.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var m=c();u({data:h,addLength1:!0,objectId:m}),l("endobj");var v=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var y=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+i_(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+i_(a.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}}(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},h=d.pdfEscape,f=d.activeFontKey,m=d.fonts,v=f,y="",b=0,A="",T=m[v].encoding;if("Identity-H"!==m[v].encoding)return{text:a,x:l,y:c,options:u,mutex:d};for(A=a,v=f,Array.isArray(a)&&(A=a[0]),b=0;b<A.length;b+=1)m[v].metadata.hasOwnProperty("cmap")&&(o=m[v].metadata.cmap.unicode.codeMap[A[b].charCodeAt(0)]),o||A[b].charCodeAt(0)<256&&m[v].metadata.hasOwnProperty("Unicode")?y+=A[b]:y+="";var P="";return parseInt(v.slice(1))<14||"WinAnsiEncoding"===T?P=h(y,v).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):"Identity-H"===T&&(P=t(y,m[v])),d.isHex=!0,{text:P,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&3===o[c].length?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Nt),
/**
         * @license
         * jsPDF virtual FileSystem functionality
         *
         * Licensed under the MIT License.
         * http://opensource.org/licenses/mit-license
         */
function(n){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(Nt.API),
/**
         * @license
         * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
         * MIT License
         */
function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,T=0;this.__bidiEngine__={};var P=function(I){var O=I.charCodeAt(),L=O>>8,te=v[L];return void 0!==te?d[256*te+(255&O)]:252===L||253===L?"AL":b.test(L)?"L":8===L?"R":"N"},V=function(I){for(var O,L=0;L<I.length;L++){if("L"===(O=P(I.charAt(L))))return!1;if("R"===O)return!0}return!1},q=function(I,O,L,te){var me,le,ue,he,be=O[te];switch(be){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"N":case"AN":break;case"EN":A&&(be="AN");break;case"AL":A=!0,be="R";break;case"WS":case"BN":be="N";break;case"CS":te<1||te+1>=O.length||"EN"!==(me=L[te-1])&&"AN"!==me||"EN"!==(le=O[te+1])&&"AN"!==le?be="N":A&&(le="AN"),be=le===me?le:"N";break;case"ES":be="EN"===(me=te>0?L[te-1]:"B")&&te+1<O.length&&"EN"===O[te+1]?"EN":"N";break;case"ET":if(te>0&&"EN"===L[te-1]){be="EN";break}if(A){be="N";break}for(ue=te+1,he=O.length;ue<he&&"ET"===O[ue];)ue++;be=ue<he&&"EN"===O[ue]?"EN":"N";break;case"NSM":if(o&&!a){for(he=O.length,ue=te+1;ue<he&&"NSM"===O[ue];)ue++;if(ue<he){var Ge=I[te];if(me=O[ue],(Ge>=1425&&Ge<=2303||64286===Ge)&&("R"===me||"AL"===me)){be="R";break}}}be=te<1||"B"===(me=O[te-1])?"N":L[te-1];break;case"B":A=!1,i=!0,be=T;break;case"S":s=!0,be="N"}return be},N=function(I,O,L){var te=I.split("");return L&&D(te,L,{hiLevel:T}),te.reverse(),O&&O.reverse(),te.join("")},D=function(I,O,L){var te,me,le,ue,he,be=-1,Ge=I.length,Pe=0,j=[],Y=T?f:h,ne=[];for(A=!1,i=!1,s=!1,me=0;me<Ge;me++)ne[me]=P(I[me]);for(le=0;le<Ge;le++){if(he=Pe,j[le]=q(I,ne,j,le),te=240&(Pe=Y[he][m[j[le]]]),O[le]=ue=Y[Pe&=15][5],te>0)if(16===te){for(me=be;me<le;me++)O[me]=1;be=-1}else be=-1;if(Y[Pe][6])-1===be&&(be=le);else if(be>-1){for(me=be;me<le;me++)O[me]=ue;be=-1}"B"===ne[le]&&(O[le]=0),L.hiLevel|=ue}s&&function(ie,de,fe){for(var Ce=0;Ce<fe;Ce++)if("S"===ie[Ce]){de[Ce]=T;for(var Ie=Ce-1;Ie>=0&&"WS"===ie[Ie];Ie--)de[Ie]=T}}(ne,O,Ge)},S=function(I,O,L,te,me){if(!(me.hiLevel<I)){if(1===I&&1===T&&!i)return O.reverse(),void(L&&L.reverse());for(var le,ue,he,be,Ge=O.length,Pe=0;Pe<Ge;){if(te[Pe]>=I){for(he=Pe+1;he<Ge&&te[he]>=I;)he++;for(be=Pe,ue=he-1;be<ue;be++,ue--)le=O[be],O[be]=O[ue],O[ue]=le,L&&(le=L[be],L[be]=L[ue],L[ue]=le);Pe=he}Pe++}}},F=function(I,O,L){var te=I.split(""),me={hiLevel:T};return L||(L=[]),D(te,L,me),function(le,ue,he){if(0!==he.hiLevel&&u)for(var be,Ge=0;Ge<le.length;Ge++)1===ue[Ge]&&(be=y.indexOf(le[Ge]))>=0&&(le[Ge]=y[be+1])}(te,L,me),S(2,te,O,L,me),S(1,te,O,L,me),te.join("")};return this.__bidiEngine__.doBidiReorder=function(I,O,L){if(function(me,le){if(le)for(var ue=0;ue<me.length;ue++)le[ue]=ue;void 0===a&&(a=V(me)),void 0===c&&(c=V(me))}(I,O),o||!l||c)if(o&&l&&a^c)T=a?1:0,I=N(I,O,L);else if(!o&&l&&c)T=a?1:0,I=F(I,O,L),I=N(I,O);else if(!o||a||l||c){if(o&&!l&&a^c)I=N(I,O),a?(T=0,I=F(I,O,L)):(T=1,I=F(I,O,L),I=N(I,O));else if(o&&a&&!l&&c)T=1,I=F(I,O,L),I=N(I,O);else if(!o&&!l&&a^c){var te=u;a?(T=1,I=F(I,O,L),T=0,u=!1,I=F(I,O,L),u=te):(T=0,I=F(I,O,L),I=N(I,O),T=1,u=!1,I=F(I,O,L),u=te,I=N(I,O))}}else T=0,I=F(I,O,L);else T=a?1:0,I=F(I,O,L);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,c=I.isOutputRtl,u=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=r.options||{},o=[];if(s.isInputVisual="boolean"!=typeof s.isInputVisual||s.isInputVisual,t.setOptions(s),"[object Array]"===Object.prototype.toString.call(i)){var a=0;for(o=[],a=0;a<i.length;a+=1)"[object Array]"===Object.prototype.toString.call(i[a])?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Nt),Nt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Nh(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new $Ce(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new DCe(this.contents),this.head=new MCe(this),this.name=new LCe(this),this.cmap=new XW(this),this.toUnicode={},this.hhea=new kCe(this),this.maxp=new FCe(this),this.hmtx=new VCe(this),this.post=new NCe(this),this.os2=new RCe(this),this.loca=new zCe(this),this.glyf=new BCe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)c.push(Math.round(l[o]*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(s=this.familyClass)||2===s||3===s||4===s||5===s||7===s,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*e},n}();var fc,Nh=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var r,i,s;for(s=[],r=0,i=e.length;r<i;r++)s.push(this.writeByte(e[r]));return s},n}(),DCe=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,a,l,c,u,d,h,f,m,v;for(v in f=Object.keys(t).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),o=Math.floor(d/l),u=16*f-d,(i=new Nh).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(o),i.writeShort(u),c=i.pos+16*f,a=null,m=[],t)for(h=t[v],i.writeString(v),i.writeInt(n(h)),i.writeInt(c),i.writeInt(h.length),m=m.concat(h),"head"===v&&(a=c),c+=h.length;c%4;)m.push(0),c++;return i.write(m),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=QW.call(t);t.length%4;)t.push(0);for(s=new Nh(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),PCe={}.hasOwnProperty,au=function(n,e){for(var t in e)PCe.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};fc=function(){function n(e){var t;this.file=e,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var MCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Nh).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n}(),YW=function(){function n(e,t){var r,i,s,o,a,l,c,u,d,h,f,m,v,y,b,A,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var P,V;for(V=[],l=P=0;0<=h?P<h:P>h;l=0<=h?++P:--P)V.push(e.readUInt16());return V}(),e.pos+=2,v=function(){var P,V;for(V=[],l=P=0;0<=h?P<h:P>h;l=0<=h?++P:--P)V.push(e.readUInt16());return V}(),c=function(){var P,V;for(V=[],l=P=0;0<=h?P<h:P>h;l=0<=h?++P:--P)V.push(e.readUInt16());return V}(),u=function(){var P,V;for(V=[],l=P=0;0<=h?P<h:P>h;l=0<=h?++P:--P)V.push(e.readUInt16());return V}(),i=(this.length-e.pos+this.offset)/2,a=function(){var P,V;for(V=[],l=P=0;0<=i?P<i:P>i;l=0<=i?++P:--P)V.push(e.readUInt16());return V}(),l=b=0,T=s.length;b<T;l=++b)for(y=s[l],r=A=m=v[l];m<=y?A<=y:A>=y;r=m<=y?++A:--A)0===u[l]?o=r+c[l]:0!==(o=a[u[l]/2+(r-m)-(h-l)]||0)&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return n.encode=function(e,t){var r,i,s,o,a,l,c,u,d,h,f,m,v,y,b,A,T,V,q,N,D,S,F,I,O,L,te,me,le,ue,he,be,Ge,Pe,j,Y,ne,ie,de,fe,Ce,Ie,ke,Me,Je;switch(te=new Nh,o=Object.keys(e).sort(function(et,De){return et-De}),t){case"macroman":for(v=0,y=function(){var et=[];for(m=0;m<256;++m)et.push(0);return et}(),A={0:0},s={},me=0,be=o.length;me<be;me++)null==A[Ie=e[i=o[me]]]&&(A[Ie]=++v),s[i]={old:e[i],new:A[e[i]]},y[i]=A[e[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(y),{charMap:s,subtable:te.data,maxGlyphID:v+1};case"unicode":for(O=[],d=[],T=0,A={},r={},b=c=null,le=0,Ge=o.length;le<Ge;le++)null==A[V=e[i=o[le]]]&&(A[V]=++T),r[i]={old:V,new:A[V]},a=A[V]-i,null!=b&&a===c||(b&&d.push(b),O.push(i),c=a),b=i;for(b&&d.push(b),d.push(65535),O.push(65535),F=2*(S=O.length),D=2*Math.pow(Math.log(S)/Math.LN2,2),h=Math.log(D/2)/Math.LN2,N=2*S-D,l=[],q=[],f=[],m=ue=0,Pe=O.length;ue<Pe;m=++ue){if(u=d[m],65535===(I=O[m])){l.push(0),q.push(0);break}if(I-(L=r[I].new)>=32768)for(l.push(0),q.push(2*(f.length+S-m)),i=he=I;I<=u?he<=u:he>=u;i=I<=u?++he:--he)f.push(r[i].new);else l.push(L-I),q.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*S+2*f.length),te.writeUInt16(0),te.writeUInt16(F),te.writeUInt16(D),te.writeUInt16(h),te.writeUInt16(N),fe=0,j=d.length;fe<j;fe++)te.writeUInt16(i=d[fe]);for(te.writeUInt16(0),Ce=0,Y=O.length;Ce<Y;Ce++)te.writeUInt16(i=O[Ce]);for(ke=0,ne=l.length;ke<ne;ke++)te.writeUInt16(a=l[ke]);for(Me=0,ie=q.length;Me<ie;Me++)te.writeUInt16(q[Me]);for(Je=0,de=f.length;Je<de;Je++)te.writeUInt16(v=f[Je]);return{charMap:r,subtable:te.data,maxGlyphID:T+1}}},n}(),XW=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new YW(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return null==t&&(t="macroman"),r=YW.encode(e,t),(i=new Nh).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n}(),kCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n}(),RCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n}(),NCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(e.readUInt32());return l}.call(this)}},n}(),OCe=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},LCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,s,o,a,l,c,u,d,h;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},s=u=0,d=r.length;u<d;s=++u)e.pos=(i=r[s]).offset,c=e.readString(i.length),o=new OCe(c,i),null==l[h=i.nameID]&&(l[h]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},n}(),FCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n}(),VCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,a,l;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)u.push(e.readInt16());return u}(),this.widths=function(){var c,u,d,h;for(h=[],c=0,u=(d=this.metrics).length;c<u;c++)h.push(d[c].advance);return h}.call(this),r=this.widths[this.widths.length-1],l=[],t=o=0;0<=i?o<i:o>i;t=0<=i?++o:--o)l.push(this.widths.push(r));return l},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n}(),QW=[].slice,BCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,s,o,a,l,c,u,d;return e in this.cache?this.cache[e]:(t=this.file.contents,r=(s=this.file.loca).indexOf(e),0===(i=s.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+r,o=(a=new Nh(t.read(i))).readShort(),c=a.readShort(),d=a.readShort(),l=a.readShort(),u=a.readShort(),this.cache[e]=-1===o?new jCe(a,c,d,l,u):new UCe(a,o,c,d,l,u),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=t.length;a<l;a++)i=e[t[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},n}(),UCe=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),jCe=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Nh(QW.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),zCe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return au(n,fc),n.prototype.tag="loca",n.prototype.parse=function(e){var r;return e.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}.call(this):function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}.call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<t.length&&t[s]==o){++s,r[o]=i;var l=this.offsets[o+1]-this.offsets[o];l>0&&(i+=l)}for(var c=new Array(4*r.length),u=0;u<r.length;++u)c[4*u+3]=255&r[u],c[4*u+2]=(65280&r[u])>>8,c[4*u+1]=(16711680&r[u])>>16,c[4*u]=(4278190080&r[u])>>24;return c},n}(),$Ce=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)e[t]=i[s[t]];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)null!=(r=i[s])&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))i[s]=r=l[s];return i},n.prototype.encode=function(e,t){var r,i,s,o,l,c,u,d,h,f,m,v,y,b;for(i in r=XW.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},b=r.charMap)f[(l=b[i]).old]=l.new;for(m in h=r.maxGlyphID,o)m in f||(f[m]=h++);return u=function(A){var T,P;for(T in P={},A)P[A[T]]=T;return P}(f),d=Object.keys(u).sort(function(A,T){return A-T}),v=function(){var A,T,P;for(P=[],A=0,T=d.length;A<T;A++)P.push(u[d[A]]);return P}(),s=this.font.glyf.encode(o,v,f),c=this.font.loca.encode(s.offsets,v),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},n}();Nt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var i,s;if(Array.isArray(t))return"["+function(){var a,l,c;for(c=[],a=0,l=t.length;a<l;a++)c.push(e.convert(t[a]));return c}().join(" ")+"]";if("string"==typeof t)return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(t)){for(i in s=["<<"],t)s.push("/"+i+" "+e.convert(t[i]));return s.push(">>"),s.join("\n")}return""+t},e}();let HCe=(()=>{class n{constructor(t){this.giocatoriService=t}generaListaGara(t){var r=this;return(0,Q.A)(function*(){const i=new Nt,s=i.internal.pageSize.width,o=[0,128,0],l=[0,0,0];let c=15;try{const Xe=yield r.loadImageAsBase64("assets/images/uisp1.png"),Ot=yield r.loadImageAsBase64("assets/images/uisp2.png"),fn=yield r.loadImageAsBase64("assets/images/uisp3.jpg");i.addImage(Xe,"PNG",20,5,20,20),i.addImage(Ot,"PNG",s/2-10,5,20,20),i.addImage(fn,"JPG",s-40,5,20,20)}catch(Xe){console.error("Errore nel caricamento delle immagini:",Xe),i.setFontSize(8),i.setTextColor(...l),i.text("UISP",25,c),i.text("COMITATO TERRITORIALE",s/2-30,c),i.text("LOGO PALLAVOLO",s-60,c)}c+=22,i.setFontSize(12),i.setFont("helvetica","normal"),i.setTextColor(...o);const u=kl.TITOLO_PDF,d=i.getTextWidth(u);i.text(u,(s-d)/2,c),c+=10,i.setFontSize(9),i.setFont("helvetica","bold");const h=kl.PRIMO_SOTTOTITOLO,f=i.getTextWidth(h);i.rect(20,c-6,s-40,8),i.text(h,(s-f)/2,c),c+=12,i.setFontSize(9),i.setTextColor(...o),i.rect(20,c-6,s-40,8),i.text(kl.SECONDO_SOTTOTITOLO,22,c);const v=22+i.getTextWidth(kl.SECONDO_SOTTOTITOLO)+4;i.setTextColor(...l),i.setFont("helvetica","bold"),i.text(kl.NOME_SQUADRA,v,c),c+=12;const y=20,b=s-40;i.setFontSize(9),i.setFont("helvetica","bold");const A=c,P=[.2*b,.4*b,.4*b];let V=y;P.forEach(Xe=>{i.rect(V,A-4,Xe,6),V+=Xe}),V=y,i.setFontSize(8),i.setFont("helvetica","bold"),i.setTextColor(...o);const q="N\xb0 GARA";i.text(q,V+2,A);const N=i.getTextWidth(q);i.setTextColor(...l),i.text(`    ${t.numeroGara}`,V+2+N,A),V+=P[0],i.setTextColor(...o);const D="OSPITANTE";i.text(D,V+2,A);const S=i.getTextWidth(D);i.setTextColor(...l),i.text(`    ${t.ospitante}`,V+2+S,A),V+=P[1],i.setTextColor(...o);const F="OSPITE";i.text(F,V+2,A);const I=i.getTextWidth(F);i.setTextColor(...l),i.text(`    ${t.ospite}`,V+2+I,A),c+=6;const O=c,L=[.7*b,.3*b];V=y,L.forEach(Xe=>{i.rect(V,O-4,Xe,6),V+=Xe}),V=y;const te=t.indirizzo.length>50?t.indirizzo.substring(0,32)+"...":t.indirizzo;i.setTextColor(...o);const me="INDIRIZZO";i.text(me,V+2,O);const le=i.getTextWidth(me);i.setTextColor(...l),i.text(`     ${te}`,V+2+le,O),V+=L[0],i.setTextColor(...o);const ue="DATA E ORA";i.text(ue,V+2,O);const he=i.getTextWidth(ue);i.setTextColor(...l);const be=r.formatDate(t.data);i.text(`    ${be} ${t.ora}`,V+2+he,O),c+=6;const Ge=c;i.rect(y,Ge-4,b,6),i.setTextColor(...o);const Pe="CAMPIONATO";i.text(Pe,22,Ge);const j=i.getTextWidth(Pe);i.setTextColor(...l),i.text(`    ${t.campionato}`,22+j,Ge),c+=12;const Y=yield r.giocatoriService.getGiocatori(),ne=r.filtraEOrdinaGiocatori(Y),ie=Y.filter(Xe=>"allenatore"===(Xe.ruolo||"").toLowerCase()),de=Y.filter(Xe=>"dirigente"===(Xe.ruolo||"").toLowerCase()),Ce=[.0625*b,.3125*b,3/12.8*b,3/12.8*b,2/12.8*b],Ie=c;i.setFontSize(9),i.setFont("helvetica","bold"),i.setTextColor(...o);let Me=y;["N\xb0","COGNOME E NOME","DATA DI NASCITA","TESSERA UISP","DOCUMENTO"].forEach((Xe,Ot)=>{i.rect(Me,Ie-4,Ce[Ot],6);const fn=i.getTextWidth(Xe);i.text(Xe,Me+(Ce[Ot]-fn)/2,Ie),Me+=Ce[Ot]}),c+=6,i.setFontSize(9),i.setFont("helvetica","bold"),i.setTextColor(...l),ne.forEach((Xe,Ot)=>{Me=y,Ce.forEach(js=>{i.rect(Me,c-4,js,6),Me+=js}),Me=y;const Lt=`${Xe.numeroMaglia||Ot+1}`,Sn=i.getTextWidth(Lt);i.text(Lt,Me+(Ce[0]-Sn)/2,c),Me+=Ce[0];let Mt=`${Xe.cognome?.toUpperCase()||""} ${Xe.nome?.toUpperCase()||""}`.trim();const vr=Xe.capitano?"K":"libero"===Xe.ruolo?.toLowerCase()?"L":"",si=vr?i.getTextWidth(vr):0,Wt=Ce[1]-2-(vr?si+4:0);if(i.getTextWidth(Mt)>Wt){for(;i.getTextWidth(Mt+"...")>Wt&&Mt.length>0;)Mt=Mt.slice(0,-1);Mt+="..."}i.text(Mt,Me+2,c),vr&&i.text(vr,Me+Ce[1]-2-si,c),Me+=Ce[1];const qn=r.formatDate(Xe.dataDiNascita||""),so=i.getTextWidth(qn);i.text(qn,Me+(Ce[2]-so)/2,c),Me+=Ce[2];const Li=Xe.tesseraUisp||"",Ro=i.getTextWidth(Li);i.text(Li,Me+(Ce[3]-Ro)/2,c),Me+=Ce[3],c+=6}),c+=4;const et=[3/12.8*b,4.8/12.8*b,3/12.8*b,2/12.8*b];i.setFontSize(8),i.setFont("helvetica","bold"),["1\xb0 ALLENATORE","2\xb0 ALLENATORE","DIRIGENTE"].forEach(Xe=>{Me=y,et.forEach(Mt=>{i.rect(Me,c-4,Mt,6),Me+=Mt}),Me=y,i.setTextColor(...o);const Ot=i.getTextWidth(Xe);i.text(Xe,Me+(et[0]-Ot)/2,c),Me+=et[0],i.setTextColor(...l);let fn=null;Xe.startsWith("1\xb0")&&ie.length>0?fn=ie[0]:Xe.startsWith("2\xb0")&&ie.length>1?fn=ie[1]:"DIRIGENTE"===Xe&&de.length>0&&(fn=de[0]);const Lt=fn?`${(fn.cognome||"").toUpperCase()} ${(fn.nome||"").toUpperCase()}`.trim():"",Sn=fn&&fn.tesseraUisp||"";if(Lt&&i.text(Lt,Me+2,c),Me+=et[1],Sn){const Mt=i.getTextWidth(Sn);i.text(Sn,Me+(et[2]-Mt)/2,c)}Me+=et[2],c+=6}),c+=4,i.rect(20,c-4,s-40,6),i.setFontSize(10),i.setFont("helvetica","bold"),i.setTextColor(139,0,0);const sn=kl.TITOLO_DEFIBRILLATORE,Vt=i.getTextWidth(sn);i.text(sn,(s-Vt)/2,c),c+=6,i.setFontSize(9);const at=i.splitTextToSize(kl.SOTTOTITOLO_DEFIBRILLATORE,s-48),Rt=4*at.length+2;i.rect(20,c-4,s-40,Rt),at.forEach((Xe,Ot)=>{const fn=i.getTextWidth(Xe);i.text(Xe,(s-fn)/2,c+4*Ot)}),c+=Rt+4;const Rn=(t.ospitante||"").toUpperCase().includes("THUNDERS"),Ht=kl.ADDETTO_DEFIBRILLATORE_THUNDERS;i.setFontSize(9),i.setFont("helvetica","bold"),i.setTextColor(...l);const Zt=Rn?`${Ht.cognome.toUpperCase()} ${Ht.nome.toUpperCase()}`:"",hn=Rn?Ht.codiceFiscale:"";i.text(`IL/LA SOTTOSCRITTO/A: ${Zt||"_______________________"}`,20,c),i.text(`CODICE FISCALE: ${hn||"_______________"}`,125,c),c+=6;const Dt=Rn?r.formatDate(Ht.dataDiNascita):"",It=Rn?Ht.luogoNascita:"__________",qt=Rn?Ht.residenza:"_______________";i.text(`NATO/A IL: ${Dt||"__________"}`,20,c),i.text(`A: ${It}`,75,c),i.text(`RESIDENTE IN: ${qt}`,125,c),c+=7,i.setFontSize(8);const mr=i.splitTextToSize(kl.TESTO_DICHIARAZIONE_DEFIBRILLATORE,s-40);i.text(mr,20,c),c+=2.5*mr.length+8,i.setFontSize(9),i.text("DATA_______________",20,c),i.text("FIRMA_______________________",80,c),i.setFont("helvetica","bold"),i.text("IL CAPITANO_____________________",140,c);const Vn=`Lista_Gara_${t.numeroGara}_${t.data.replace(/-/g,"")}.pdf`;i.save(Vn)})()}formatDate(t){return ks.formatDate(t)}loadImageAsBase64(t){return(0,Q.A)(function*(){const i=yield(yield fetch(t)).blob();return new Promise((s,o)=>{const a=new FileReader;a.onloadend=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})})()}filtraEOrdinaGiocatori(t){const r=t.filter(i=>{const s=(i.ruolo||"").toLowerCase();return"allenatore"!==s&&"dirigente"!==s});return ks.ordinaGiocatoriPerCognome(r)}static{this.\u0275fac=function(r){return new(r||n)(bt(AA))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GCe(n,e){if(1&n&&(x(0,"span",37),oe(1,"i",38),H(2),M()),2&n){const t=Te();z(2),Hn("",t.season," ")}}function qCe(n,e){if(1&n&&(x(0,"span",37),oe(1,"i",39),H(2),M()),2&n){const t=Te();z(2),Hn("",t.partiteRimanenti," partite rimanenti ")}}function WCe(n,e){if(1&n&&(x(0,"span",37),oe(1,"i",40),H(2),ei(3,"date"),M()),2&n){const t=Te();z(2),Hn("Agg. ",va(3,1,t.lastUpdate,"dd/MM/yy HH:mm")," ")}}function KCe(n,e){if(1&n&&(x(0,"div",41)(1,"span",42),H(2,"Stagione"),M(),x(3,"span",43),H(4),M()()),2&n){const t=Te();z(4),Qe(t.season)}}function YCe(n,e){if(1&n&&(x(0,"div",41)(1,"span",42),H(2,"Campionato"),M(),x(3,"span",43),H(4),M()()),2&n){const t=Te();z(4),Qe(t.campionato)}}function XCe(n,e){if(1&n&&(x(0,"div",41)(1,"span",42),H(2,"Partite rimanenti"),M(),x(3,"span",43),H(4),M()()),2&n){const t=Te();z(4),Qe(t.partiteRimanenti)}}function QCe(n,e){if(1&n&&(x(0,"div",41)(1,"span",42),oe(2,"i",40),H(3,"Aggiornamento"),M(),x(4,"span",43),H(5),ei(6,"date"),M()()),2&n){const t=Te();z(5),Qe(va(6,1,t.lastUpdate,"dd/MM/yy HH:mm"))}}function ZCe(n,e){1&n&&(x(0,"span",51),H(1,"-"),M())}function JCe(n,e){1&n&&(x(0,"span",53),oe(1,"i",54),M())}function eEe(n,e){1&n&&(x(0,"span",53),oe(1,"i",55),M())}function tEe(n,e){if(1&n&&(x(0,"span"),H(1),Be(2,JCe,2,0,"span",52),Be(3,eEe,2,0,"span",52),M()),2&n){const t=Te().$implicit,r=Te();z(1),Hn(" ",t.risultato," "),z(1),ae("ngIf",!0===r.isVittoria(t)),z(1),ae("ngIf",!1===r.isVittoria(t))}}function nEe(n,e){if(1&n){const t=Fn();x(0,"button",56),Ee("click",function(){rt(t);const i=Te().index;return it(Te().aggiungiAlCalendario(i))}),oe(1,"i",57),M()}}function rEe(n,e){if(1&n){const t=Fn();x(0,"button",58),Ee("click",function(){rt(t);const i=Te().index;return it(Te().creaListaGara(i))}),oe(1,"i",59),M()}}function iEe(n,e){if(1&n){const t=Fn();x(0,"tr")(1,"td")(2,"span",44),H(3),M()(),x(4,"td"),H(5),M(),x(6,"td"),H(7),M(),x(8,"td"),H(9),M(),x(10,"td")(11,"a",45),Ee("click",function(){const s=rt(t).$implicit;return it(Te().openMaps(s.indirizzo))}),oe(12,"i",46),H(13),M()(),x(14,"td"),H(15),M(),x(16,"td"),H(17),M(),x(18,"td"),Be(19,ZCe,2,0,"span",47),Be(20,tEe,4,3,"span",32),M(),x(21,"td",48),Be(22,nEe,2,0,"button",49),Be(23,rEe,2,0,"button",50),M()()}if(2&n){const t=e.$implicit,r=Te();z(3),Qe(t.numeroGara),z(2),Qe(r.formatDataCompleta(t.data)),z(2),Qe(t.ora),z(2),Qe(t.campionato),z(4),Hn(" ",t.indirizzo," "),z(2),Qe(t.ospitante),z(2),Qe(t.ospite),z(2),ae("ngIf",!t.risultato),z(1),ae("ngIf",t.risultato),z(2),ae("ngIf",!t.risultato),z(1),ae("ngIf",r.authService.hasEditPermission()&&!t.risultato)}}function sEe(n,e){if(1&n&&(x(0,"tr")(1,"td",60),oe(2,"i",61),H(3),M()()),2&n){const t=Te();z(3),Hn(" ",0===t.partite.length?"Nessuna partita in calendario":"Nessun risultato trovato"," ")}}function oEe(n,e){1&n&&(x(0,"div",62),H(1," Nessuna partita in calendario "),M())}function aEe(n,e){1&n&&oe(0,"i",87)}function lEe(n,e){1&n&&oe(0,"i",88)}function cEe(n,e){if(1&n&&(x(0,"div",83)(1,"span",84),H(2),M(),Be(3,aEe,1,0,"i",85),Be(4,lEe,1,0,"i",86),M()),2&n){const t=Te().$implicit,r=Te();z(1),rn("text-success",r.isVittoria(t))("text-danger",!1===r.isVittoria(t)),z(1),Hn(" ",t.risultato," "),z(1),ae("ngIf",!0===r.isVittoria(t)),z(1),ae("ngIf",!1===r.isVittoria(t))}}function uEe(n,e){if(1&n&&(x(0,"div",89),oe(1,"i",40),H(2),M()),2&n){const t=Te().$implicit;z(2),Hn("",t.ora," ")}}function dEe(n,e){if(1&n){const t=Fn();x(0,"button",90),Ee("click",function(){rt(t);const i=Te().index;return it(Te().aggiungiAlCalendario(i))}),oe(1,"i",91),H(2,"Aggiungi "),M()}}function hEe(n,e){if(1&n){const t=Fn();x(0,"button",92),Ee("click",function(){rt(t);const i=Te().index;return it(Te().creaListaGara(i))}),oe(1,"i",39),H(2,"Lista Gara "),M()}}function fEe(n,e){if(1&n){const t=Fn();x(0,"div",63)(1,"h2",64)(2,"button",65)(3,"div",66),H(4),M(),x(5,"div",67)(6,"div",68),H(7),M(),x(8,"div",69),H(9),M()(),Be(10,cEe,5,7,"div",70),Be(11,uEe,3,1,"div",71),M()(),x(12,"div",72)(13,"div",73)(14,"div",74)(15,"div",75)(16,"span",76),H(17,"Ospitante"),M(),x(18,"span",77),H(19),M()()(),x(20,"div",74)(21,"div",75)(22,"span",76),H(23,"Ospite"),M(),x(24,"span",77),H(25),M()()(),x(26,"div",74)(27,"div",78)(28,"span",76),oe(29,"i",46),H(30,"Indirizzo "),M(),x(31,"a",79),Ee("click",function(){const s=rt(t).$implicit;return it(Te().openMaps(s.indirizzo))}),H(32),M()()(),x(33,"div",80),Be(34,dEe,3,0,"button",81),Be(35,hEe,3,0,"button",82),M()()()()}if(2&n){const t=e.$implicit,r=e.index,i=Te();rn("partita-giocata",t.risultato)("partita-futura",!t.risultato),z(1),Pi("id","heading"+r),z(1),Pi("data-bs-target","#collapse"+r)("aria-controls","collapse"+r),z(2),Qe(t.numeroGara),z(3),Qe(i.formatDataCompleta(t.data)),z(2),ic("",t.ospitante," vs ",t.ospite,""),z(1),ae("ngIf",t.risultato),z(1),ae("ngIf",!t.risultato),z(1),Pi("id","collapse"+r)("aria-labelledby","heading"+r),z(7),Qe(t.ospitante),z(6),Qe(t.ospite),z(7),Hn(" ",t.indirizzo," "),z(2),ae("ngIf",!t.risultato),z(1),ae("ngIf",i.authService.hasEditPermission()&&!t.risultato)}}const Oh=function(n,e,t){return{"bi-arrow-down":n,"bi-arrow-up":e,"bi-arrow-down-up":t}};let pEe=(()=>{class n{constructor(t,r,i){this.calendarioService=t,this.pdfService=r,this.authService=i,this.partite=[],this.filteredPartite=[],this.lastUpdate=null,this.season="",this.filters={numeroGara:"",data:"",ora:"",campionato:"",indirizzo:"",ospitante:"",ospite:"",risultato:""},this.sortColumn="data",this.sortDirection="asc"}ngOnInit(){this.partiteSubscription=this.calendarioService.getPartiteWithMetadataObservable().subscribe(t=>{this.partite=t.partite||[],this.lastUpdate=t.lastUpdate,this.season=t.season,this.applyFilters()})}ngOnDestroy(){this.partiteSubscription&&this.partiteSubscription.unsubscribe()}get partiteRimanenti(){return this.partite.filter(t=>!t.risultato||""===t.risultato.trim()).length}get campionato(){return this.partite.length>0?this.partite[0].campionato:""}get partiteOrdinateEFiltrate(){return this.filteredPartite}applyFilters(){let t=[...this.partite];Object.keys(this.filters).forEach(r=>{const i=this.filters[r].toLowerCase().trim();i&&(t=t.filter(s=>{let o=s[r];if("data"===r&&o){const a=new Date(o);o=`${a.getDate().toString().padStart(2,"0")}/${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getFullYear()}`}return o?.toString().toLowerCase().includes(i)}))}),t.sort((r,i)=>{let s=r[this.sortColumn],o=i[this.sortColumn];return"data"===this.sortColumn?(s=s?new Date(s).getTime():0,o=o?new Date(o).getTime():0):"numeroGara"===this.sortColumn?(s=parseInt(s)||0,o=parseInt(o)||0):(s=s?.toString().toLowerCase()||"",o=o?.toString().toLowerCase()||""),s<o?"asc"===this.sortDirection?-1:1:s>o?"asc"===this.sortDirection?1:-1:0}),this.filteredPartite=t}onFilterChange(){this.applyFilters()}sortBy(t){this.sortColumn===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=t,this.sortDirection="asc"),this.applyFilters()}clearFilters(){this.filters={numeroGara:"",data:"",ora:"",campionato:"",indirizzo:"",ospitante:"",ospite:"",risultato:""},this.applyFilters()}isVittoria(t){if(!t.risultato)return null;const r=t.risultato.split("-");if(2!==r.length)return null;const i=parseInt(r[0].trim()),s=parseInt(r[1].trim());if(isNaN(i)||isNaN(s))return null;const o=t.ospitante.toLowerCase().includes("thunders"),a=t.ospite.toLowerCase().includes("thunders");return o||a?o?i>s:s>i:null}openMaps(t){ks.openMaps(t)}creaListaGara(t){var r=this;return(0,Q.A)(function*(){try{const i=r.filteredPartite[t];yield r.pdfService.generaListaGara(i)}catch(i){console.error("Errore nella generazione del PDF:",i),alert("Errore nella generazione del PDF. Riprova pi\xf9 tardi.")}})()}aggiungiAlCalendario(t){const r=this.filteredPartite[t],i=new Date(r.data),[s,o]=r.ora.split(":");i.setHours(parseInt(s),parseInt(o),0,0);const a=new Date(i);a.setHours(i.getHours()+2);const l=f=>`${f.getFullYear()}${String(f.getMonth()+1).padStart(2,"0")}${String(f.getDate()).padStart(2,"0")}T${String(f.getHours()).padStart(2,"0")}${String(f.getMinutes()).padStart(2,"0")}${String(f.getSeconds()).padStart(2,"0")}`,c=l(i),u=l(a),d=l(new Date),h=ks.getIcsConstants(c,u,d,r);if(kl.isMobile){const f=new Blob([h],{type:"text/calendar;charset=utf-8"}),m=URL.createObjectURL(f);window.location.href=m,setTimeout(()=>URL.revokeObjectURL(m),1e3)}else{const f=new Blob([h],{type:"text/calendar;charset=utf-8"}),m=window.URL.createObjectURL(f),v=document.createElement("a");v.href=m,v.download=`partita-${r.numeroGara}.ics`,v.click(),window.URL.revokeObjectURL(m)}}formatDataCompleta(t){return ks.formatDateWithDay(t)}static{this.\u0275fac=function(r){return new(r||n)(Le(Y$),Le(HCe),Le(ld))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-calendario"]],decls:101,vars:59,consts:[[1,"container-fluid","px-3","py-4","custom-spacing"],[1,"desktop-header","d-none","d-md-block","mb-3"],[1,"desktop-header-card"],[1,"desktop-header-content"],[1,"header-left"],[1,"header-icon"],[1,"bi","bi-calendar-event-fill"],[1,"header-text"],[1,"header-title"],[1,"header-meta"],["class","meta-item",4,"ngIf"],[1,"mobile-header","d-md-none","mb-3"],[1,"mobile-header-card"],[1,"mobile-header-title"],[1,"bi","bi-calendar-event-fill","me-2"],[1,"title-text"],[1,"mobile-header-info"],["class","info-item",4,"ngIf"],[1,"table-container","d-none","d-md-block"],[1,"table-wrapper"],[1,"table","table-hover","modern-table"],[1,"table-header","sticky-header"],[1,"sortable",3,"click"],[1,"th-content"],[1,"bi",3,"ngClass"],[1,"actions-column"],["title","Pulisci filtri",1,"btn","btn-sm","btn-link","text-white",3,"click"],[1,"bi","bi-x-circle"],[1,"filter-row"],["type","text","placeholder","Filtra...",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],["type","text","placeholder","gg/mm/aaaa",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-md-none"],["class","text-center text-muted py-4",4,"ngIf"],["id","calendarioAccordion",1,"accordion","mobile-calendario"],["class","accordion-item mobile-partita-card",3,"partita-giocata","partita-futura",4,"ngFor","ngForOf"],[1,"meta-item"],[1,"bi","bi-calendar3","me-1"],[1,"bi","bi-list-check","me-1"],[1,"bi","bi-clock","me-1"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"badge","bg-primary"],["href","javascript:void(0)","title","Apri in Google Maps",1,"text-decoration-none","text-primary","d-inline-flex","align-items-center","maps-link",3,"click"],[1,"bi","bi-geo-alt-fill","me-1"],["class","text-muted",4,"ngIf"],[1,"actions-cell"],["class","btn btn-info btn-sm me-1","title","Aggiungi al calendario",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm","title","Crea lista gara",3,"click",4,"ngIf"],[1,"text-muted"],["class","ms-2",4,"ngIf"],[1,"ms-2"],[1,"bi","bi-check-circle-fill","text-success"],[1,"bi","bi-x-circle-fill","text-danger"],["title","Aggiungi al calendario",1,"btn","btn-info","btn-sm","me-1",3,"click"],[1,"bi","bi-calendar-plus"],["title","Crea lista gara",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"bi","bi-list-check"],["colspan","9",1,"text-center","text-muted","py-4"],[1,"bi","bi-inbox","fs-1","d-block","mb-2"],[1,"text-center","text-muted","py-4"],[1,"accordion-item","mobile-partita-card"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","mobile-partita-header"],[1,"gara-badge"],[1,"partita-info"],[1,"partita-data"],[1,"partita-match"],["class","risultato-badge",4,"ngIf"],["class","ora-badge",4,"ngIf"],["data-bs-parent","#calendarioAccordion",1,"accordion-collapse","collapse"],[1,"accordion-body","mobile-partita-details"],[1,"detail-row"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"detail-item","full-width"],["href","javascript:void(0)",1,"detail-value","detail-link",3,"click"],[1,"action-buttons","mt-3"],["class","btn btn-info btn-sm flex-fill",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm flex-fill",3,"click",4,"ngIf"],[1,"risultato-badge"],[1,"risultato-value"],["class","bi bi-check-circle-fill text-success ms-1",4,"ngIf"],["class","bi bi-x-circle-fill text-danger ms-1",4,"ngIf"],[1,"bi","bi-check-circle-fill","text-success","ms-1"],[1,"bi","bi-x-circle-fill","text-danger","ms-1"],[1,"ora-badge"],[1,"btn","btn-info","btn-sm","flex-fill",3,"click"],[1,"bi","bi-calendar-plus","me-1"],[1,"btn","btn-secondary","btn-sm","flex-fill",3,"click"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),oe(6,"i",6),M(),x(7,"div",7)(8,"h3",8),H(9,"Calendario"),M(),x(10,"div",9),Be(11,GCe,3,1,"span",10),Be(12,qCe,3,1,"span",10),Be(13,WCe,4,4,"span",10),M()()()()()(),x(14,"div",11)(15,"div",12)(16,"div",13),oe(17,"i",14),x(18,"span",15),H(19,"Calendario"),M()(),x(20,"div",16),Be(21,KCe,5,1,"div",17),Be(22,YCe,5,1,"div",17),Be(23,XCe,5,1,"div",17),Be(24,QCe,7,4,"div",17),M()()(),x(25,"div",18)(26,"div",19)(27,"table",20)(28,"thead",21)(29,"tr")(30,"th",22),Ee("click",function(){return i.sortBy("numeroGara")}),x(31,"div",23)(32,"span"),H(33,"N. Gara"),M(),oe(34,"i",24),M()(),x(35,"th",22),Ee("click",function(){return i.sortBy("data")}),x(36,"div",23)(37,"span"),H(38,"Data"),M(),oe(39,"i",24),M()(),x(40,"th",22),Ee("click",function(){return i.sortBy("ora")}),x(41,"div",23)(42,"span"),H(43,"Ora"),M(),oe(44,"i",24),M()(),x(45,"th",22),Ee("click",function(){return i.sortBy("campionato")}),x(46,"div",23)(47,"span"),H(48,"Campionato"),M(),oe(49,"i",24),M()(),x(50,"th",22),Ee("click",function(){return i.sortBy("indirizzo")}),x(51,"div",23)(52,"span"),H(53,"Indirizzo"),M(),oe(54,"i",24),M()(),x(55,"th",22),Ee("click",function(){return i.sortBy("ospitante")}),x(56,"div",23)(57,"span"),H(58,"Ospitante"),M(),oe(59,"i",24),M()(),x(60,"th",22),Ee("click",function(){return i.sortBy("ospite")}),x(61,"div",23)(62,"span"),H(63,"Ospite"),M(),oe(64,"i",24),M()(),x(65,"th",22),Ee("click",function(){return i.sortBy("risultato")}),x(66,"div",23)(67,"span"),H(68,"Risultato"),M(),oe(69,"i",24),M()(),x(70,"th",25)(71,"div",23)(72,"span"),H(73,"Azioni"),M(),x(74,"button",26),Ee("click",function(){return i.clearFilters()}),oe(75,"i",27),M()()()(),x(76,"tr",28)(77,"th")(78,"input",29),Ee("ngModelChange",function(o){return i.filters.numeroGara=o})("input",function(){return i.onFilterChange()}),M()(),x(79,"th")(80,"input",30),Ee("ngModelChange",function(o){return i.filters.data=o})("input",function(){return i.onFilterChange()}),M()(),x(81,"th")(82,"input",29),Ee("ngModelChange",function(o){return i.filters.ora=o})("input",function(){return i.onFilterChange()}),M()(),x(83,"th")(84,"input",29),Ee("ngModelChange",function(o){return i.filters.campionato=o})("input",function(){return i.onFilterChange()}),M()(),x(85,"th")(86,"input",29),Ee("ngModelChange",function(o){return i.filters.indirizzo=o})("input",function(){return i.onFilterChange()}),M()(),x(87,"th")(88,"input",29),Ee("ngModelChange",function(o){return i.filters.ospitante=o})("input",function(){return i.onFilterChange()}),M()(),x(89,"th")(90,"input",29),Ee("ngModelChange",function(o){return i.filters.ospite=o})("input",function(){return i.onFilterChange()}),M()(),x(91,"th")(92,"input",29),Ee("ngModelChange",function(o){return i.filters.risultato=o})("input",function(){return i.onFilterChange()}),M()(),oe(93,"th"),M()(),x(94,"tbody"),Be(95,iEe,24,11,"tr",31),Be(96,sEe,4,1,"tr",32),M()()()(),x(97,"div",33),Be(98,oEe,2,0,"div",34),x(99,"div",35),Be(100,fEe,36,20,"div",36),M()()()),2&r&&(z(11),ae("ngIf",i.season),z(1),ae("ngIf",i.partite.length),z(1),ae("ngIf",i.lastUpdate),z(8),ae("ngIf",i.season),z(1),ae("ngIf",i.campionato),z(1),ae("ngIf",i.partite.length),z(1),ae("ngIf",i.lastUpdate),z(10),ae("ngClass",Jr(27,Oh,"numeroGara"===i.sortColumn&&"asc"===i.sortDirection,"numeroGara"===i.sortColumn&&"desc"===i.sortDirection,"numeroGara"!==i.sortColumn)),z(5),ae("ngClass",Jr(31,Oh,"data"===i.sortColumn&&"asc"===i.sortDirection,"data"===i.sortColumn&&"desc"===i.sortDirection,"data"!==i.sortColumn)),z(5),ae("ngClass",Jr(35,Oh,"ora"===i.sortColumn&&"asc"===i.sortDirection,"ora"===i.sortColumn&&"desc"===i.sortDirection,"ora"!==i.sortColumn)),z(5),ae("ngClass",Jr(39,Oh,"campionato"===i.sortColumn&&"asc"===i.sortDirection,"campionato"===i.sortColumn&&"desc"===i.sortDirection,"campionato"!==i.sortColumn)),z(5),ae("ngClass",Jr(43,Oh,"indirizzo"===i.sortColumn&&"asc"===i.sortDirection,"indirizzo"===i.sortColumn&&"desc"===i.sortDirection,"indirizzo"!==i.sortColumn)),z(5),ae("ngClass",Jr(47,Oh,"ospitante"===i.sortColumn&&"asc"===i.sortDirection,"ospitante"===i.sortColumn&&"desc"===i.sortDirection,"ospitante"!==i.sortColumn)),z(5),ae("ngClass",Jr(51,Oh,"ospite"===i.sortColumn&&"asc"===i.sortDirection,"ospite"===i.sortColumn&&"desc"===i.sortDirection,"ospite"!==i.sortColumn)),z(5),ae("ngClass",Jr(55,Oh,"risultato"===i.sortColumn&&"asc"===i.sortDirection,"risultato"===i.sortColumn&&"desc"===i.sortDirection,"risultato"!==i.sortColumn)),z(9),ae("ngModel",i.filters.numeroGara),z(2),ae("ngModel",i.filters.data),z(2),ae("ngModel",i.filters.ora),z(2),ae("ngModel",i.filters.campionato),z(2),ae("ngModel",i.filters.indirizzo),z(2),ae("ngModel",i.filters.ospitante),z(2),ae("ngModel",i.filters.ospite),z(2),ae("ngModel",i.filters.risultato),z(3),ae("ngForOf",i.partiteOrdinateEFiltrate),z(1),ae("ngIf",0===i.filteredPartite.length),z(2),ae("ngIf",0===i.partite.length),z(2),ae("ngForOf",i.partiteOrdinateEFiltrate))},dependencies:[Fg,Wd,Sl,Qc,wh,rp,L0],styles:[".file-input-hidden[_ngcontent-%COMP%]{display:none}.custom-spacing[_ngcontent-%COMP%]{margin-top:-20px}.table-container[_ngcontent-%COMP%]{background:white;border-radius:8px;box-shadow:0 1px 3px #00000014;overflow:hidden;margin-bottom:2rem}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;max-height:calc(100vh - 200px)}.modern-table[_ngcontent-%COMP%]{margin-bottom:0;font-size:.9rem}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}.table-header[_ngcontent-%COMP%]{background-color:#cfe2ff;color:#084298}.table-header[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#cfe2ff!important}.table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:.75rem;font-weight:600;white-space:nowrap;background-color:#cfe2ff!important}.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s}.sortable[_ngcontent-%COMP%]:hover{background-color:#0842981a}.th-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem}.th-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7}.filter-row[_ngcontent-%COMP%]{background-color:#cfe2ff}.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem;background-color:#cfe2ff;border-top:none}.filter-input[_ngcontent-%COMP%]{font-size:.85rem;border:1px solid #dee2e6;border-radius:4px;padding:.375rem .5rem}.filter-input[_ngcontent-%COMP%]:focus{border-color:#6ea8fe;box-shadow:0 0 0 .2rem #6ea8fe40}.table-header[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#084298;opacity:.8}.table-header[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#052c65;opacity:1}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .15s;border-bottom:1px solid #f8f9fa}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#0d6efd0a}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:middle}.actions-column[_ngcontent-%COMP%]{min-width:180px;text-align:center}.actions-cell[_ngcontent-%COMP%]{white-space:nowrap;text-align:center}.actions-cell[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.actions-cell[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.modern-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.35rem .65rem;font-weight:500}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.375rem}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:last-child{margin-right:0}.maps-link[_ngcontent-%COMP%]{transition:all .2s ease}.maps-link[_ngcontent-%COMP%]:hover{background-color:rgba(var(--bs-primary-rgb),.1);border-radius:4px;padding:2px 4px;transform:translate(2px)}.accordion-header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%}.gara-numero[_ngcontent-%COMP%]{font-weight:600;min-width:65px;color:#0d6efd}.gara-data[_ngcontent-%COMP%]{font-weight:500;min-width:85px}.gara-ora[_ngcontent-%COMP%]{font-weight:400;color:#6c757d;min-width:50px}@media (max-width: 1400px){.modern-table[_ngcontent-%COMP%]{font-size:.85rem}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{display:none}.maps-link[_ngcontent-%COMP%]:hover{transform:none}}.desktop-header[_ngcontent-%COMP%]{margin-bottom:1rem}.desktop-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1.5rem 2rem;box-shadow:0 4px 12px #0d6efd33;color:#fff}.desktop-header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1.5rem}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.header-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:rgba(255,255,255,.15);border-radius:12px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.header-text[_ngcontent-%COMP%]{flex:1}.header-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;letter-spacing:-.5px}.header-meta[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-top:.5rem;flex-wrap:wrap}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.9rem;opacity:.95;font-weight:500}.meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.8}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;border-radius:8px;white-space:nowrap}@media (max-width: 1200px){.desktop-header-card[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.header-icon[_ngcontent-%COMP%]{width:48px;height:48px}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .header-title[_ngcontent-%COMP%]{font-size:1.5rem}.header-meta[_ngcontent-%COMP%]{gap:1rem}.meta-item[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 992px){.desktop-header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}}.mobile-header[_ngcontent-%COMP%]{padding:0}.mobile-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1rem;box-shadow:0 4px 8px #00000026;color:#fff}.mobile-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;font-weight:700;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid rgba(255,255,255,.2)}.mobile-header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.title-text[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.5px}.mobile-header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem .5rem;background:rgba(255,255,255,.1);border-radius:6px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.info-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;opacity:.9;font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}@media (max-width: 400px){.mobile-header-card[_ngcontent-%COMP%]{padding:.75rem}.mobile-header-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.5rem;padding-bottom:.5rem}.mobile-header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.info-item[_ngcontent-%COMP%]{padding:.35rem .4rem}.info-label[_ngcontent-%COMP%]{font-size:.7rem}.info-value[_ngcontent-%COMP%]{font-size:.85rem}}.mobile-calendario[_ngcontent-%COMP%]{padding:.5rem}.mobile-partita-card[_ngcontent-%COMP%]{border-radius:8px!important;margin-bottom:.75rem;border:1px solid #dee2e6!important;box-shadow:0 2px 4px #0000001a;overflow:hidden}.partita-giocata[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(25,135,84,.05) 0%,rgba(255,255,255,1) 100%)}.partita-futura[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(13,110,253,.05) 0%,rgba(255,255,255,1) 100%)}.mobile-partita-header[_ngcontent-%COMP%]{padding:.75rem!important;display:flex!important;align-items:center!important;gap:.75rem!important;background:transparent!important;border:none!important;box-shadow:none!important}.mobile-partita-header[_ngcontent-%COMP%]:not(.collapsed){background:transparent!important;border-bottom:1px solid #dee2e6!important}.mobile-partita-header[_ngcontent-%COMP%]:after{margin-left:auto!important;flex-shrink:0}.gara-badge[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#0d6efd;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;flex-shrink:0}.partita-info[_ngcontent-%COMP%]{flex:1;min-width:0}.partita-data[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;font-weight:500;text-transform:uppercase}.partita-match[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#212529;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.risultato-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;background:#f8f9fa;font-weight:600;font-size:.85rem;display:flex;align-items:center;gap:.25rem;flex-shrink:0}.risultato-value[_ngcontent-%COMP%]{font-weight:700}.ora-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;background:#e7f1ff;color:#0d6efd;font-weight:600;font-size:.85rem;display:flex;align-items:center;flex-shrink:0}.mobile-partita-details[_ngcontent-%COMP%]{padding:.75rem!important}.detail-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.75rem}.detail-row[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.detail-item[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.detail-item.full-width[_ngcontent-%COMP%]{flex:1 0 100%}.detail-label[_ngcontent-%COMP%]{font-size:.7rem;text-transform:uppercase;color:#6c757d;font-weight:600;letter-spacing:.5px}.detail-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#212529}.detail-link[_ngcontent-%COMP%]{color:#0d6efd!important;text-decoration:none;cursor:pointer;display:flex;align-items:center;word-break:break-word}.detail-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{white-space:nowrap}@media (max-width: 400px){.mobile-calendario[_ngcontent-%COMP%]{padding:.25rem}.mobile-partita-card[_ngcontent-%COMP%]{margin-bottom:.5rem}.mobile-partita-header[_ngcontent-%COMP%]{padding:.5rem!important;gap:.5rem!important}.gara-badge[_ngcontent-%COMP%]{width:32px;height:32px;font-size:.8rem}.partita-data[_ngcontent-%COMP%]{font-size:.7rem}.partita-match[_ngcontent-%COMP%]{font-size:.85rem}.risultato-badge[_ngcontent-%COMP%], .ora-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.2rem .4rem}.detail-label[_ngcontent-%COMP%]{font-size:.65rem}.detail-value[_ngcontent-%COMP%]{font-size:.9rem}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.35rem .5rem}}"]})}}return n})(),gEe=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="classifica"}getStandingsDataObservable(){const t=Yc(this.firestore,this.collectionName);return ly(t,{idField:"id"}).pipe(Xt(r=>{if(r&&r.length>0){const i=r[0];return{lastUpdate:i.lastUpdate?.toDate?i.lastUpdate.toDate():new Date(i.lastUpdate),season:i.season,standings:i.standings||[]}}return null}))}getStandingsData(){var t=this;return(0,Q.A)(function*(){return yield wA(t.getStandingsDataObservable())})()}getClassificaObservable(){return this.getStandingsDataObservable().pipe(Xt(t=>t&&t.standings?[...t.standings].sort((r,i)=>(i.punti||0)-(r.punti||0)):[]))}getClassifica(){var t=this;return(0,Q.A)(function*(){return yield wA(t.getClassificaObservable())})()}static{this.\u0275fac=function(r){return new(r||n)(bt(_h))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mEe(n,e){if(1&n&&(x(0,"span",32),oe(1,"i",33),H(2),M()),2&n){const t=Te();z(2),Hn("",t.season," ")}}function _Ee(n,e){if(1&n&&(x(0,"span",32),oe(1,"i",34),H(2),ei(3,"date"),M()),2&n){const t=Te();z(2),Hn("Agg. ",va(3,1,t.lastUpdate,"dd/MM/yyyy HH:mm")," ")}}function vEe(n,e){if(1&n&&(x(0,"tr")(1,"td",35),H(2),M(),x(3,"td"),H(4),M(),x(5,"td",36),H(6),M(),x(7,"td",18),H(8),M(),x(9,"td",18),H(10),M(),x(11,"td",18),H(12),M(),x(13,"td",18),H(14),M(),x(15,"td",18),H(16),M(),x(17,"td",18),H(18),ei(19,"percent"),M(),x(20,"td",18),H(21),M(),x(22,"td",18),H(23),M(),x(24,"td",18),H(25),ei(26,"percent"),M()()),2&n){const t=e.$implicit,r=e.index,i=Te();rn("table-primary",i.isThunders(t)),z(2),Qe(r+1),z(1),rn("fw-bold",i.isThunders(t))("fw-semibold",!i.isThunders(t)),z(1),Qe(t.squadra),z(2),Qe(t.punti),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.partiteVinte+t.partitePerse),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.partiteVinte),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.partitePerse),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.setVinti),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.setPersi),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(va(19,36,t.quozienteSet/100,"1.0-0")),z(2),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.puntiFatti),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.puntiSubiti),z(1),rn("fw-bold",i.isThunders(t)),z(1),Qe(va(26,39,t.quozientePunti/100,"1.2-2"))}}function yEe(n,e){1&n&&(x(0,"tr")(1,"td",37),oe(2,"i",38),H(3,"Nessun dato disponibile "),M()())}function bEe(n,e){if(1&n&&(x(0,"div",39)(1,"span",40),H(2,"Stagione"),M(),x(3,"span",41),H(4),M()()),2&n){const t=Te();z(4),Qe(t.season)}}function wEe(n,e){if(1&n&&(x(0,"div",39)(1,"span",40),oe(2,"i",34),H(3,"Aggiornamento"),M(),x(4,"span",41),H(5),ei(6,"date"),M()()),2&n){const t=Te();z(5),Qe(va(6,1,t.lastUpdate,"dd/MM/yy HH:mm"))}}function AEe(n,e){1&n&&(x(0,"div",42),oe(1,"i",38),H(2,"Nessun dato disponibile "),M())}function CEe(n,e){if(1&n&&(x(0,"div",43)(1,"h2",44)(2,"button",45)(3,"div",46),H(4),M(),x(5,"div",47),H(6),M(),x(7,"div",48)(8,"span",49),H(9),M()()()(),x(10,"div",50)(11,"div",51)(12,"div",52)(13,"div",53)(14,"span",54),H(15,"GIOCATE"),M(),x(16,"span",55),H(17),M()(),x(18,"div",53)(19,"span",54),H(20,"Vittorie"),M(),x(21,"span",55),H(22),M()(),x(23,"div",53)(24,"span",54),H(25,"Sconfitte"),M(),x(26,"span",55),H(27),M()()(),x(28,"div",52)(29,"div",53)(30,"span",54),H(31,"Set Vinti"),M(),x(32,"span",55),H(33),M()(),x(34,"div",53)(35,"span",54),H(36,"Set Persi"),M(),x(37,"span",55),H(38),M()(),x(39,"div",53)(40,"span",54),H(41,"Q. Set"),M(),x(42,"span",55),H(43),ei(44,"percent"),M()()(),x(45,"div",52)(46,"div",53)(47,"span",54),H(48,"Pt. Fatti"),M(),x(49,"span",55),H(50),M()(),x(51,"div",53)(52,"span",54),H(53,"Pt. Subiti"),M(),x(54,"span",55),H(55),M()(),x(56,"div",53)(57,"span",54),H(58,"Q. Punti"),M(),x(59,"span",55),H(60),ei(61,"percent"),M()()()()()()),2&n){const t=e.$implicit,r=e.index,i=Te();rn("thunders-highlight",i.isThunders(t)),z(1),Pi("id","heading"+r),z(1),Pi("data-bs-target","#collapse"+r)("aria-controls","collapse"+r),z(2),Qe(r+1),z(1),rn("fw-bold",i.isThunders(t)),z(1),Hn(" ",t.squadra," "),z(3),Qe(t.punti),z(1),Pi("id","collapse"+r)("aria-labelledby","heading"+r),z(6),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.partiteVinte+t.partitePerse),z(4),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.partiteVinte),z(4),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.partitePerse),z(5),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.setVinti),z(4),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.setPersi),z(4),rn("fw-bold",i.isThunders(t)),z(1),Qe(va(44,39,t.quozienteSet/100,"1.0-0")),z(6),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.puntiFatti),z(4),rn("fw-bold",i.isThunders(t)),z(1),Qe(t.puntiSubiti),z(4),rn("fw-bold",i.isThunders(t)),z(1),Qe(va(61,42,t.quozientePunti/100,"1.2-2"))}}let EEe=(()=>{class n{constructor(t){this.classificaService=t,this.classifica=[],this.standingsData=null,this.lastUpdate=null,this.season=""}ngOnInit(){this.standingsSubscription=this.classificaService.getStandingsDataObservable().subscribe(t=>{t?(this.standingsData=t,this.classifica=t.standings||[],this.lastUpdate=t.lastUpdate,this.season=t.season,this.classifica.sort((r,i)=>(i.punti||0)-(r.punti||0))):(this.classifica=[],this.lastUpdate=null,this.season="")})}ngOnDestroy(){this.standingsSubscription&&this.standingsSubscription.unsubscribe()}isThunders(t){return t.squadra?.toLowerCase().includes("thunders")||!1}static{this.\u0275fac=function(r){return new(r||n)(Le(gEe))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-classifica"]],decls:61,vars:8,consts:[[1,"container-fluid","py-4","custom-spacing"],[1,"row"],[1,"col-12"],[1,"desktop-header","d-none","d-md-block","mb-3"],[1,"desktop-header-card"],[1,"desktop-header-content"],[1,"header-left"],[1,"header-icon"],[1,"bi","bi-trophy-fill"],[1,"header-text"],[1,"header-title"],[1,"header-meta"],["class","meta-item",4,"ngIf"],[1,"card","shadow-sm","d-none","d-md-block"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","table-striped","mb-0"],[1,"table-light"],[1,"text-center"],[3,"table-primary",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mobile-header","d-md-none","mb-3"],[1,"mobile-header-card"],[1,"mobile-header-title"],[1,"bi","bi-trophy-fill","me-2"],[1,"title-text"],[1,"mobile-header-info"],["class","info-item",4,"ngIf"],[1,"d-md-none"],["class","text-center text-muted py-4",4,"ngIf"],["id","classificaAccordion",1,"accordion","mobile-classifica"],["class","accordion-item mobile-squadra-card",3,"thunders-highlight",4,"ngFor","ngForOf"],[1,"meta-item"],[1,"bi","bi-calendar3","me-1"],[1,"bi","bi-clock","me-1"],[1,"text-center","fw-bold"],[1,"text-center","fw-bold","text-primary"],["colspan","12",1,"text-center","text-muted","py-4"],[1,"bi","bi-info-circle","me-2"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"text-center","text-muted","py-4"],[1,"accordion-item","mobile-squadra-card"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","mobile-squadra-header"],[1,"position-badge"],[1,"squadra-nome"],[1,"punti-badge"],[1,"punti-value"],["data-bs-parent","#classificaAccordion",1,"accordion-collapse","collapse"],[1,"accordion-body","mobile-squadra-stats"],[1,"stat-row"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),oe(8,"i",8),M(),x(9,"div",9)(10,"h3",10),H(11,"Classifica"),M(),x(12,"div",11),Be(13,mEe,3,1,"span",12),Be(14,_Ee,4,4,"span",12),M()()()()()(),x(15,"div",13)(16,"div",14)(17,"div",15)(18,"table",16)(19,"thead",17)(20,"tr")(21,"th",18),H(22,"Pos"),M(),x(23,"th"),H(24,"Squadra"),M(),x(25,"th",18),H(26,"Punti"),M(),x(27,"th",18),H(28,"GIOCATE"),M(),x(29,"th",18),H(30,"V"),M(),x(31,"th",18),H(32,"P"),M(),x(33,"th",18),H(34,"Set V"),M(),x(35,"th",18),H(36,"Set P"),M(),x(37,"th",18),H(38,"Q. Set"),M(),x(39,"th",18),H(40,"Pt. F"),M(),x(41,"th",18),H(42,"Pt. S"),M(),x(43,"th",18),H(44,"Q. Pt."),M()()(),x(45,"tbody"),Be(46,vEe,27,42,"tr",19),Be(47,yEe,4,0,"tr",20),M()()()()(),x(48,"div",21)(49,"div",22)(50,"div",23),oe(51,"i",24),x(52,"span",25),H(53,"Classifica"),M()(),x(54,"div",26),Be(55,bEe,5,1,"div",27),Be(56,wEe,7,4,"div",27),M()()(),x(57,"div",28),Be(58,AEe,3,0,"div",29),x(59,"div",30),Be(60,CEe,62,45,"div",31),M()()()()()),2&r&&(z(13),ae("ngIf",i.season),z(1),ae("ngIf",i.lastUpdate),z(32),ae("ngForOf",i.classifica),z(1),ae("ngIf",0===i.classifica.length),z(8),ae("ngIf",i.season),z(1),ae("ngIf",i.lastUpdate),z(2),ae("ngIf",0===i.classifica.length),z(2),ae("ngForOf",i.classifica))},dependencies:[Wd,Sl,qV,L0],styles:['.card[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem}.custom-spacing[_ngcontent-%COMP%]{margin-top:-20px}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;border-bottom:2px solid #dee2e6;padding:.75rem;font-size:.9rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:middle;font-size:.95rem}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#007bff0d}.mobile-classifica[_ngcontent-%COMP%]{padding:.5rem}.mobile-squadra-card[_ngcontent-%COMP%]{background:white;border:1px solid #dee2e6;border-radius:8px;margin-bottom:.75rem;overflow:hidden}.mobile-squadra-card.thunders-highlight[_ngcontent-%COMP%]{border:2px solid #0d6efd;background:linear-gradient(to bottom,rgba(13,110,253,.05) 0%,white 100%)}.mobile-squadra-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);border:none;width:100%;text-align:left;cursor:pointer}.accordion-button[_ngcontent-%COMP%]:after{display:none}.mobile-squadra-header[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.mobile-squadra-header[_ngcontent-%COMP%]:after{content:"\\f282";font-family:bootstrap-icons;margin-left:auto;font-size:1rem;transition:transform .2s ease;flex-shrink:0}.mobile-squadra-header[_ngcontent-%COMP%]:not(.collapsed):after{transform:rotate(180deg)}.thunders-highlight[_ngcontent-%COMP%]   .mobile-squadra-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0b5ed7 100%);color:#fff}.position-badge[_ngcontent-%COMP%]{background:#0d6efd;color:#fff;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;flex-shrink:0}.thunders-highlight[_ngcontent-%COMP%]   .position-badge[_ngcontent-%COMP%]{background:white;color:#0d6efd}.squadra-nome[_ngcontent-%COMP%]{flex:1;font-size:.95rem;font-weight:600;line-height:1.3}.thunders-highlight[_ngcontent-%COMP%]   .squadra-nome[_ngcontent-%COMP%]{color:#fff}.punti-badge[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:white;padding:.25rem .75rem;border-radius:6px;border:1px solid #dee2e6;flex-shrink:0;margin-right:.5rem}.thunders-highlight[_ngcontent-%COMP%]   .punti-badge[_ngcontent-%COMP%]{background:rgba(255,255,255,.95);border-color:#fff}.punti-label[_ngcontent-%COMP%]{font-size:.7rem;color:#6c757d;text-transform:uppercase;font-weight:600}.punti-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#0d6efd;line-height:1}.mobile-squadra-stats[_ngcontent-%COMP%]{padding:.75rem 1rem;background:white}.stat-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.5rem}.stat-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.stat-item[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;padding:.5rem;background:#f8f9fa;border-radius:6px;min-width:0}.thunders-highlight[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{background:rgba(13,110,253,.05)}.stat-label[_ngcontent-%COMP%]{font-size:.7rem;color:#6c757d;text-transform:uppercase;font-weight:600;margin-bottom:.25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;text-align:center}.stat-value[_ngcontent-%COMP%]{font-size:1rem;color:#212529;font-weight:500}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem;font-size:.85rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 400px){.squadra-nome[_ngcontent-%COMP%]{font-size:.85rem}.stat-label[_ngcontent-%COMP%]{font-size:.65rem}.stat-value[_ngcontent-%COMP%]{font-size:.9rem}}.desktop-header[_ngcontent-%COMP%]{margin-bottom:1rem}.desktop-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1.5rem 2rem;box-shadow:0 4px 12px #0d6efd33;color:#fff}.desktop-header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1.5rem}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.header-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:rgba(255,255,255,.15);border-radius:12px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.header-text[_ngcontent-%COMP%]{flex:1}.header-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;letter-spacing:-.5px}.header-meta[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-top:.5rem;flex-wrap:wrap}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.9rem;opacity:.95;font-weight:500}.meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.8}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;border-radius:8px;white-space:nowrap}@media (max-width: 1200px){.desktop-header-card[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.header-icon[_ngcontent-%COMP%]{width:48px;height:48px}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .header-title[_ngcontent-%COMP%]{font-size:1.5rem}.header-meta[_ngcontent-%COMP%]{gap:1rem}.meta-item[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 992px){.desktop-header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}}.mobile-header[_ngcontent-%COMP%]{padding:0}.mobile-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1rem;box-shadow:0 4px 8px #00000026;color:#fff}.mobile-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;font-weight:700;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid rgba(255,255,255,.2)}.mobile-header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.title-text[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.5px}.mobile-header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.4rem .5rem;background:rgba(255,255,255,.1);border-radius:6px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.info-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;opacity:.9;font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}@media (max-width: 400px){.mobile-header-card[_ngcontent-%COMP%]{padding:.75rem}.mobile-header-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.5rem;padding-bottom:.5rem}.mobile-header-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.info-item[_ngcontent-%COMP%]{padding:.35rem .4rem}.info-label[_ngcontent-%COMP%]{font-size:.7rem}.info-value[_ngcontent-%COMP%]{font-size:.85rem}}']})}}return n})();function IEe(n,e){if(1&n&&(x(0,"div",13),oe(1,"i",14),H(2),M()),2&n){const t=Te();z(2),Hn(" ",t.errorMessage," ")}}function TEe(n,e){1&n&&(x(0,"span"),oe(1,"i",15),H(2," Accedi "),M())}function SEe(n,e){1&n&&(x(0,"span"),oe(1,"span",16),H(2," Accesso in corso... "),M())}let xEe=(()=>{class n{constructor(t,r,i){this.fb=t,this.authService=r,this.router=i,this.errorMessage="",this.loading=!1}ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/home"]),this.loginForm=this.fb.group({codiceFiscale:["",[Zc.required,Zc.minLength(16),Zc.maxLength(16)]]})}onLogin(){var t=this;return(0,Q.A)(function*(){if(t.loginForm.invalid)return;t.loading=!0,t.errorMessage="";const r=t.loginForm.get("codiceFiscale")?.value;try{(yield t.authService.login(r))?t.router.navigate(["/home"]):t.errorMessage="Codice fiscale non riconosciuto. Accesso negato."}catch{t.errorMessage="Errore durante il login. Riprova."}finally{t.loading=!1}})()}onCodiceFiscaleInput(t){const i=t.target.value.toUpperCase();this.loginForm.get("codiceFiscale")?.setValue(i,{emitEvent:!1})}static{this.\u0275fac=function(r){return new(r||n)(Le(QH),Le(ld),Le(wo))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-login"]],decls:18,vars:7,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"bi","bi-lightning-fill","text-primary"],["autocomplete","on",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","codiceFiscale",1,"form-label"],["type","text","id","codiceFiscale","name","username","formControlName","codiceFiscale","maxlength","16","autocomplete","username",1,"form-control","form-control-lg",3,"input"],[1,"invalid-feedback"],["type","password","name","password","autocomplete","current-password","value","dummy",2,"display","none"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-lg","w-100",3,"disabled"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"bi","bi-box-arrow-in-right","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(r,i){if(1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2),oe(3,"i",3),x(4,"h2"),H(5,"PuntoVolley Thunders"),M()(),x(6,"form",4),Ee("ngSubmit",function(){return i.onLogin()}),x(7,"div",5)(8,"label",6),H(9,"Codice Fiscale"),M(),x(10,"input",7),Ee("input",function(o){return i.onCodiceFiscaleInput(o)}),M(),x(11,"div",8),H(12," Il codice fiscale deve essere di 16 caratteri "),M()(),oe(13,"input",9),Be(14,IEe,3,1,"div",10),x(15,"button",11),Be(16,TEe,3,0,"span",12),Be(17,SEe,3,0,"span",12),M()()()()),2&r){let s;z(6),ae("formGroup",i.loginForm),z(4),rn("is-invalid",(null==(s=i.loginForm.get("codiceFiscale"))?null:s.invalid)&&(null==(s=i.loginForm.get("codiceFiscale"))?null:s.touched)),z(4),ae("ngIf",i.errorMessage),z(1),ae("disabled",i.loginForm.invalid||i.loading),z(1),ae("ngIf",!i.loading),z(1),ae("ngIf",i.loading)}},dependencies:[Sl,Bk,Qc,wh,Dk,vy,_y,RA],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:1rem}.login-card[_ngcontent-%COMP%]{background:white;border-radius:1rem;padding:2rem;box-shadow:0 10px 40px #0003;max-width:450px;width:100%}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.login-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem;font-weight:700}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:.9rem}.form-control-lg[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem}#codiceFiscale[_ngcontent-%COMP%]{text-transform:uppercase}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem}@media (max-width: 576px){.login-card[_ngcontent-%COMP%]{padding:1.5rem}.login-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}}return n})();const ZW="firebasestorage.googleapis.com",JW="storageBucket";class Ai extends jc{constructor(e,t,r=0){super(tN(e),`Firebase Storage: ${t} (${tN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ai.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var _i=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(_i||{});function tN(n){return"storage/"+n}function nN(){return new Ai(_i.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rN(n){return new Ai(_i.INVALID_ARGUMENT,n)}function rK(){return new Ai(_i.APP_DELETED,"The Firebase app was deleted.")}function Wy(n,e){return new Ai(_i.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ky(n){throw new Ai(_i.INTERNAL_ERROR,"Internal error: "+n)}class Jo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Jo.makeFromUrl(e,t)}catch{return new Jo(e,"")}if(""===r.path)return r;throw function VEe(n){return new Ai(_i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(P){P.path_=decodeURIComponent(P.path)}const d=t.replace(/[.]/g,"\\."),T=[{regex:a,indices:{bucket:1,path:3},postModify:function s(P){"/"===P.path.charAt(P.path.length-1)&&(P.path_=P.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===ZW?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<T.length;P++){const V=T[P],q=V.regex.exec(e);if(q){let D=q[V.indices.path];D||(D=""),r=new Jo(q[V.indices.bucket],D),V.postModify(r);break}}if(null==r)throw function FEe(n){return new Ai(_i.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class HEe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function AC(n){return"string"==typeof n||n instanceof String}function iK(n){return iN()&&n instanceof Blob}function iN(){return typeof Blob<"u"}function sN(n,e,t,r){if(r<e)throw rN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw rN(`Invalid value for '${n}'. Expected ${t} or less.`)}function hd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function sK(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var h_=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(h_||{});class XEe{constructor(e,t,r,i,s,o,a,l,c,u,d,h=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,m)=>{this.resolve_=f,this.reject_=m,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function WEe(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=nN();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(i.canceled?this.appDelete_?rK():function tK(){return new Ai(_i.CANCELED,"User canceled the upload/download.")}():function eK(){return new Ai(_i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new CC(!1,null,!0)):this.backoffId_=function GEe(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function d(y){i=setTimeout(()=>{i=null,n(f,l())},y)}function h(){s&&clearTimeout(s)}function f(y,...b){if(c)return void h();if(y)return h(),void u.call(null,y,...b);if(l()||o)return h(),void u.call(null,y,...b);let T;r<64&&(r*=2),1===a?(a=2,T=0):T=1e3*(r+Math.random()),d(T)}let m=!1;function v(y){m||(m=!0,h(),!c&&(null!==i?(y||(a=2),clearTimeout(i),d(0)):y||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},t),v}((r,i)=>{if(i)return void r(!1,new CC(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===h_.NO_ERROR,l=s.getStatus();if(!a||function oK(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===h_.ABORT;return void r(!1,new CC(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new CC(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function qEe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class CC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function rIe(...n){const e=function nIe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(iN())return new Blob(n);throw new Ai(_i.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const pc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class oN{constructor(e,t){this.data=e,this.contentType=t||null}}function lK(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function cK(n,e){switch(n){case pc.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Wy(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pc.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Wy(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function sIe(n){if(typeof atob>"u")throw function zEe(n){return new Ai(_i.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Wy(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class uK{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Wy(pc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function cIe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class fd{constructor(e,t){let r=0,i="";iK(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(iK(this.data_)){const i=function iIe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new fd(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new fd(r,!0)}}static getBlob(...e){if(iN()){const t=e.map(r=>r instanceof fd?r.data_:r);return new fd(rIe.apply(null,t))}{const t=e.map(o=>AC(o)?function aK(n,e){switch(n){case pc.RAW:return new oN(lK(e));case pc.BASE64:case pc.BASE64URL:return new oN(cK(n,e));case pc.DATA_URL:return new oN(function aIe(n){const e=new uK(n);return e.base64?cK(pc.BASE64,e.rest):function oIe(n){let e;try{e=decodeURIComponent(n)}catch{throw Wy(pc.DATA_URL,"Malformed data URL.")}return lK(e)}(e.rest)}(e),function lIe(n){return new uK(n).contentType}(e))}throw nN()}(pc.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new fd(i,!0)}}uploadData(){return this.data_}}function aN(n){let e;try{e=JSON.parse(n)}catch{return null}return function YEe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function dK(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function hIe(n,e){return e}class ea{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||hIe}}let EC=null;function Yy(){if(EC)return EC;const n=[];n.push(new ea("bucket")),n.push(new ea("generation")),n.push(new ea("metageneration")),n.push(new ea("name","fullPath",!0));const t=new ea("name");t.xform=function e(s,o){return function fIe(n){return!AC(n)||n.length<2?n:dK(n)}(o)},n.push(t);const i=new ea("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new ea("timeCreated")),n.push(new ea("updated")),n.push(new ea("md5Hash",null,!0)),n.push(new ea("cacheControl",null,!0)),n.push(new ea("contentDisposition",null,!0)),n.push(new ea("contentEncoding",null,!0)),n.push(new ea("contentLanguage",null,!0)),n.push(new ea("contentType",null,!0)),n.push(new ea("metadata","customMetadata",!0)),EC=n,EC}function hK(n,e,t){const r=aN(e);return null===r?null:function gIe(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function pIe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Jo(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}class lu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function cu(n){if(!n)throw nN()}function f_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function OEe(){return new Ai(_i.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function NEe(){return new Ai(_i.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function REe(n){return new Ai(_i.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function LEe(n){return new Ai(_i.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Xy(n){const e=f_(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function kEe(n){return new Ai(_i.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function vK(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let T="";for(let P=0;P<2;P++)T+=Math.random().toString().slice(2);return T}();o["Content-Type"]="multipart/related; boundary="+l;const c=function _K(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function IIe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}(e,r,i),u=function lN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}(c,t),f=fd.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===f)throw function nK(){return new Ai(_i.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const m={name:c.fullPath},v=hd(s,n.host,n._protocol),b=n.maxUploadRetryTime,A=new lu(v,"POST",function IC(n,e){return function t(r,i){const s=hK(n,i,e);return cu(null!==s),s}}(n,t),b);return A.urlParams=m,A.headers=o,A.body=f.uploadData(),A.errorHandler=f_(e),A}let bK=null;class PIe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=h_.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=h_.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=h_.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ky("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ky("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ky("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ky("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ky("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class MIe extends PIe{initXhr(){this.xhr_.responseType="text"}}function gc(){return bK?bK():new MIe}class _p{constructor(e,t){this._service=e,this._location=t instanceof Jo?t:Jo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _p(e,t)}get root(){const e=new Jo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dK(this._location.path)}get storage(){return this._service}get parent(){const e=function uIe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Jo(this._location.bucket,e);return new _p(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function $Ee(n){return new Ai(_i.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function HIe(n){n._throwIfRoot("getDownloadURL");const e=function AIe(n,e,t){const i=hd(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new lu(i,"GET",function bIe(n,e){return function t(r,i){const s=hK(n,i,e);return cu(null!==s),function mIe(n,e,t,r){const i=aN(e);if(null===i||!AC(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.fullPath;return hd("/b/"+o(n.bucket)+"/o/"+o(d),t,r)+sK({alt:"media",token:c})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Xy(e),a}(n.storage,n._location,Yy());return n.storage.makeRequestWithTokens(e,gc).then(t=>{if(null===t)throw function jEe(){return new Ai(_i.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function IK(n,e){if(n instanceof hN){const t=n;if(null==t._bucket)throw function BEe(){return new Ai(_i.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JW+"' property when initializing the app?")}();const r=new _p(t,t._bucket);return null!=e?IK(r,e):r}return void 0!==e?function EK(n,e){const t=function dIe(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Jo(n._location.bucket,t);return new _p(n.storage,r)}(n,e):n}function TK(n,e){const t=e?.[JW];return null==t?null:Jo.makeFromBucketSpec(t,n)}class hN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ZW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Jo.makeFromBucketSpec(i,this._host):TK(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Jo.makeFromBucketSpec(this._url,e):TK(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Q.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Q.A)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _p(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new HEe(rK());{const o=function tIe(n,e,t,r,i,s,o=!0){const a=sK(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return function JEe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function QEe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function ZEe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function eIe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,r),new XEe(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,Q.A)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const SK="@firebase/storage",DK="storage";function XIe(n,e,t){return function wK(n,e,t){n._throwIfRoot("uploadBytes");const r=vK(n.storage,n._location,Yy(),new fd(e,!0),t);return n.storage.makeRequestWithTokens(r,gc).then(i=>({metadata:i,ref:n}))}(n=ki(n),e,t)}function QIe(n){return HIe(n=ki(n))}function ZIe(n){return function GIe(n){n._throwIfRoot("deleteObject");const e=function EIe(n,e){const r=hd(e.fullServerUrl(),n.host,n._protocol),a=new lu(r,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Xy(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,gc)}(n=ki(n))}function JIe(n,e){return function KIe(n,e){if(e&&function qIe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hN)return function WIe(n,e){return new _p(n,e)}(n,e);throw rN("To use ref(service, url), the first argument must be a Storage instance.")}return IK(n,e)}(n=ki(n),e)}function eTe(n=Mx(),e){const r=Px(n=ki(n),DK).getImmediate({identifier:e}),i=SU("storage");return i&&function tTe(n,e,t,r={}){!function YIe(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:PU(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function nTe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hN(t,r,i,e,av)}!function rTe(){xf(new Qd(DK,nTe,"PUBLIC").setMultipleInstances(!0)),Ao(SK,"0.13.2",""),Ao(SK,"0.13.2","esm2017")}();class Qy{constructor(e){return e}}const PK="storage",fN=new gt("angularfire2.storage-instances");function oTe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Qy(r)}}const aTe={provide:class iTe{constructor(){return n2(PK)}},deps:[[new vo,fN]]},lTe={provide:Qy,useFactory:function sTe(n,e){const t=Fx(PK,n,e);return t&&new Qy(t)},deps:[[new vo,fN],Qg]};let cTe=(()=>{class n{constructor(){Ao("angularfire",t2.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Uo({type:n});static \u0275inj=mo({providers:[lTe,aTe]})}return n})();function uTe(n,...e){return{ngModule:cTe,providers:[{provide:fN,useFactory:oTe(n),multi:!0,deps:[dr,Ys,Vx,Bx,[new vo,QD],[new vo,JU],...e]}]}}const Zy=Co(ZIe,!0),pN=Co(QIe,!0),dTe=Co(eTe,!0),Lh=Co(JIe,!0),gN=Co(XIe,!0);function SC(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(i){return{value:i,done:r}})}return(SC=function(r){this.s=r,this.n=r.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return void 0===i?Promise.resolve({value:r,done:!0}):e(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return void 0===i?Promise.reject(r):e(i.apply(this.s,arguments))}},new SC(n)}const ta=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),mN=[.001,0,0,.001,0,0],Fh={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Jy="pdfjs_internal_editor_",Tn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Zn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PC={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ls={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},MC={ERRORS:0,WARNINGS:1,INFOS:5},e1={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94};let kC=MC.WARNINGS;function mTe(){return kC}function RC(n){kC>=MC.INFOS&&console.info(`Info: ${n}`)}function _n(n){kC>=MC.WARNINGS&&console.warn(`Warning: ${n}`)}function Br(n){throw new Error(n)}function Jn(n,e){n||Br(e)}function MK(n,e=null,t=null){if(!n)return null;if(t&&"string"==typeof n&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=function CTe(n){return decodeURIComponent(escape(n))}(n)}catch{}const r=e?URL.parse(n,e):URL.parse(n);return function _Te(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r)?r:null}function kK(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&MK(n,"http://example.com")?n.split("#",1)[0]+""+(e?`#${e}`:""):""}function wn(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const vp=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class RK extends vp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class vN extends vp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class yN extends vp{constructor(e){super(e,"InvalidPDFException")}}class NC extends vp{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class vTe extends vp{constructor(e){super(e,"FormatError")}}class Vh extends vp{constructor(e){super(e,"AbortException")}}function NK(n){("object"!=typeof n||void 0===n?.length)&&Br("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function m_(n){"string"!=typeof n&&Br("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=255&n.charCodeAt(r);return t}class ys{static get isLittleEndian(){return wn(this,"isLittleEndian",function bTe(){const n=new Uint8Array(4);return n[0]=1,1===new Uint32Array(n.buffer,0,1)[0]}())}static get isEvalSupported(){return wn(this,"isEvalSupported",function wTe(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return wn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wn(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return wn(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return wn(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return wn(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return wn(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const OC=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class ht{static makeHexColor(e,t,r){return`#${OC[e]}${OC[t]}${OC[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const i=e[r],s=e[r+1];e[r]=i*t[0]+s*t[2]+t[4],e[r+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const d=e[r+u],h=e[r+u+1];e[r+u]=d*i+h*o+l,e[r+u+1]=d*s+h*a+c}}static applyInverseTransform(e,t){const r=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,r){const i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],d=e[1],h=e[2],f=e[3];let m=i*u+l,v=m,y=i*h+l,b=y,A=a*d+c,T=A,P=a*f+c,V=P;if(0!==s||0!==o){const q=s*u,N=s*h,D=o*d,S=o*f;m+=D,b+=D,y+=S,v+=S,A+=q,V+=q,P+=N,T+=N}r[0]=Math.min(r[0],m,y,v,b),r[1]=Math.min(r[1],A,P,T,V),r[2]=Math.max(r[2],m,y,v,b),r[3]=Math.max(r[3],A,P,T,V)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],s=e[2],o=e[3],a=r**2+i**2,c=s**2+o**2,u=(a+c)/2,d=Math.sqrt(u**2-(a*c-(r*s+i*o)**2));t[0]=Math.sqrt(u+d||1),t[1]=Math.sqrt(u-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],t,i)}static#e(e,t,r,i,s,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,h=c*c,f=h*c,m=d*(d*(d*e+3*c*t)+3*h*r)+f*i,v=d*(d*(d*s+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],m),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],m),u[3]=Math.max(u[3],v)}static#t(e,t,r,i,s,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12)return void(Math.abs(u)>=1e-12&&this.#e(e,t,r,i,s,o,a,l,-d/u,h));const f=u**2-4*d*c;if(f<0)return;const m=Math.sqrt(f),v=2*c;this.#e(e,t,r,i,s,o,a,l,(-u+m)/v,h),this.#e(e,t,r,i,s,o,a,l,(-u-m)/v,h)}static bezierBoundingBox(e,t,r,i,s,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),this.#t(e,r,s,a,t,i,o,l,3*(3*(r-s)-e+a),6*(e-2*r+s),3*(r-e),c),this.#t(e,r,s,a,t,i,o,l,3*(3*(i-o)-t+l),6*(t-2*i+o),3*(i-t),c)}}let bN=null,OK=null;function LK(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),NK(n)}const __="pdfjs_internal_id_";function na(n,e,t){return Math.min(Math.max(n,e),t)}function FK(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(NK(n))}"function"!=typeof Promise.try&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})}),"function"!=typeof Math.sumPrecise&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class n1{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};return function i(s){if(!s)return;let o=null;const a=s.name;if("#text"===a)o=s.value;else{if(!n1.shouldBuildText(a))return;s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value)}if(null!==o&&t.push({str:o}),s.children)for(const l of s.children)i(l)}(e),r}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}class VK{static setupStorage(e,t,r,i,s){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(null!==o.value&&(e.textContent=o.value),"print"===s)break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if("radio"===r.attributes.type||"checkbox"===r.attributes.type){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.getAttribute(a.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==o.value&&e.setAttribute("value",o.value),"print"===s)break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(null!==o.value){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options;i.setValue(t,{value:-1===l.selectedIndex?"":l[l.selectedIndex].value})})}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;"radio"===o.type&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(null!=c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const a="richText"!==s,l=e.div;if(l.append(o),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(0===i.children.length){if(i.value){const d=document.createTextNode(i.value);o.append(d),a&&n1.shouldBuildText(i.name)&&c.push(d)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}const m=d.children[++u.at(-1)[1]];if(null===m)continue;const{name:v}=m;if("#text"===v){const b=document.createTextNode(m.value);c.push(b),f.append(b);continue}const y=m?.attributes?.xmlns?document.createElementNS(m.attributes.xmlns,v):document.createElement(v);if(f.append(y),m.attributes&&this.setAttributes({html:y,element:m,storage:t,intent:s,linkService:r}),m.children?.length>0)u.push([m,-1,y]);else if(m.value){const b=document.createTextNode(m.value);a&&n1.shouldBuildText(v)&&c.push(b),y.append(b)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const pd="http://www.w3.org/2000/svg";class v_{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}function r1(n){return wN.apply(this,arguments)}function wN(){return wN=(0,Q.A)(function*(n,e="text"){if(s1(n,document.baseURI)){const t=yield fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(200===i.status||0===i.status){switch(e){case"arraybuffer":case"blob":case"json":return void t(i.response)}return void t(i.responseText)}r(new Error(i.statusText))}},i.send(null)})}),wN.apply(this,arguments)}class i1{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=o,r*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,d,h,f,m,v,y,b;switch((i%=360)<0&&(i+=360),i){case 180:u=-1,d=0,h=0,f=1;break;case 90:u=0,d=1,h=1,f=0;break;case 270:u=0,d=-1,h=-1,f=0;break;case 0:u=1,d=0,h=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,f=-f),0===u?(m=Math.abs(c-e[1])*r+s,v=Math.abs(l-e[0])*r+o,y=(e[3]-e[1])*r,b=(e[2]-e[0])*r):(m=Math.abs(l-e[0])*r+s,v=Math.abs(c-e[1])*r+o,y=(e[2]-e[0])*r,b=(e[3]-e[1])*r),this.transform=[u*r,d*r,h*r,f*r,m-u*r*l-h*r*c,v-d*r*l-f*r*c],this.width=y,this.height=b}get rawDims(){const e=this.viewBox;return wn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new i1({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const r=[e,t];return ht.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];ht.applyTransform(t,this.transform);const r=[e[2],e[3]];return ht.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return ht.applyInverseTransform(r,this.transform),r}}class AN extends vp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function LC(n){const e=n.length;let t=0;for(;t<e&&""===n[t].trim();)t++;return"data:"===n.substring(t,t+5).toLowerCase()}function CN(n){return"string"==typeof n&&/\.pdf$/i.test(n)}class BK{started=Object.create(null);times=[];time(e){e in this.started&&_n(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_n(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms\n`);return e.join("")}}function s1(n,e){const t=e?URL.parse(n,e):URL.parse(n);return"http:"===t?.protocol||"https:"===t?.protocol}function Ll(n){n.preventDefault()}function Oi(n){n.preventDefault(),n.stopPropagation()}class EN{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||"string"!=typeof e)return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(o+=u,a+=d):"+"===c&&(o-=u,a-=d),new Date(Date.UTC(r,i,s,o,a,l))}}function o1(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_n(`Not a valid color format: "${n}"`),[0,0,0])}function Ci(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function uu(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function yp(n,e,t=!1,r=!0){if(e instanceof i1){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,a=ys.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;t&&e.rotation%180!=0?(o.width=d,o.height=u):(o.width=u,o.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class du{constructor(){const{pixelRatio:e}=du;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,s=-1){let o=1/0,a=1/0,l=1/0;(r=du.capPixels(r,s))>0&&(o=Math.sqrt(r/(e*t))),-1!==i&&(a=i/e,l=i/t);const c=Math.min(o,a,l);return(this.sx>c||this.sy>c)&&(this.sx=c,this.sy=c,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const IN=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class kTe{static get isDarkMode(){return wn(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}function UK(n,e){const t=n[0]/255,r=n[1]/255,i=n[2]/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;if(s===o)e[0]=e[1]=0;else{const l=s-o;switch(e[1]=a<.5?l/(s+o):l/(2-s-o),s){case t:e[0]=60*((r-i)/l+(r<i?6:0));break;case r:e[0]=60*((i-t)/l+2);break;case i:e[0]=60*((t-r)/l+4)}}e[2]=a}function TN(n,e){const t=n[0],r=n[1],i=n[2],s=(1-Math.abs(2*i-1))*r,o=s*(1-Math.abs(t/60%2-1)),a=i-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=s+a,e[2]=a;break;case 2:e[0]=a,e[1]=s+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=s+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=s+a;break;case 5:case 6:e[0]=s+a,e[1]=a,e[2]=o+a}}function jK(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function zK(n,e,t){TN(n,t),t.map(jK);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];TN(e,t),t.map(jK);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const $K=new Map;function HK({html:n,dir:e,className:t},r){const i=document.createDocumentFragment();if("string"==typeof n){const s=document.createElement("p");s.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a)s.append(document.createTextNode(o[a])),a<l-1&&s.append(document.createElement("br"));i.append(s)}else VK.render({xfaHtml:n,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),r.append(i)}function GK(n){const e=new Path2D;if(!n)return e;for(let t=0,r=n.length;t<r;)switch(n[t++]){case 0:e.moveTo(n[t++],n[t++]);break;case 1:e.lineTo(n[t++],n[t++]);break;case 2:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case 3:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case 4:e.closePath();break;default:_n(`Unrecognized drawing path operator: ${n[t-1]}`)}return e}class a1{#e=null;#t=null;#r;#n=null;#o=null;#s=null;#i=null;#a=null;static#c=null;constructor(e){this.#r=e,a1.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#r._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ll,{signal:t}),e.addEventListener("pointerdown",a1.#l,{signal:t}));const r=this.#n=document.createElement("div");r.className="buttons",e.append(r);const i=this.#r.toolbarPosition;if(i){const{style:s}=e,o="ltr"===this.#r._uiManager.direction?1-i[0]:i[0];s.insetInlineEnd=100*o+"%",s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,Oi(e)}#d(e){this.#r._focusEventsAllowed=!0,Oi(e)}#f(e){const t=this.#r._uiManager._signal;return t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ll,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#o?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#r,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",a1.#c[e]),this.#f(r)&&r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(r)}get#m(){const e=document.createElement("div");return e.className="divider",e}addAltText(e){var t=this;return(0,Q.A)(function*(){const r=yield e.render();t.#f(r),t.#n.append(r,t.#m),t.#o=e})()}addComment(e,t=null){if(this.#s)return;const r=e.renderForToolbar();if(!r)return;this.#f(r);const i=this.#i=this.#m;t?(this.#n.insertBefore(r,t),this.#n.insertBefore(i,t)):this.#n.append(r,i),this.#s=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#m)}addEditSignatureButton(e){var t=this;return(0,Q.A)(function*(){const r=t.#a=yield e.renderEditButton(t.#r);t.#f(r),t.#n.append(r,t.#m)})()}removeButton(e){"comment"===e&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#i?.remove(),this.#i=null)}addButton(e,t){var r=this;return(0,Q.A)(function*(){switch(e){case"colorPicker":t&&r.addColorPicker(t);break;case"altText":t&&(yield r.addAltText(t));break;case"editSignature":t&&(yield r.addEditSignatureButton(t));break;case"delete":r.addDeleteButton();break;case"comment":t&&r.addComment(t)}})()}addButtonBefore(e,t,r){var i=this;return(0,Q.A)(function*(){if(!t&&"comment"===e)return;const s=i.#n.querySelector(r);s&&"comment"===e&&i.addComment(t,s)})()}updateEditSignatureButton(e){this.#a&&(this.#a.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class LTe{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#r._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ll,{signal:t});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#r.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),e}#o(e,t){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const a=s.x+(t?s.width:0);o>r?(i=a,r=o):t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]}show(e,t,r){const[i,s]=this.#o(t,r),{style:o}=this.#t||=this.#n();e.append(this.#t),o.insetInlineEnd=100*i+"%",o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(e,t,r,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const a=this.#r._signal;a instanceof AbortSignal&&!a.aborted&&(s.addEventListener("contextmenu",Ll,{signal:a}),s.addEventListener("click",i,{signal:a})),this.#e.append(s)}}function qK(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}class gr{static#e=NaN;static#t=null;static#r=NaN;static#n=null;static initializeAndAddPointerId(e){(gr.#t||=new Set).add(e)}static setPointer(e,t){gr.#e||=t,gr.#n??=e}static setTimeStamp(e){gr.#r=e}static isSamePointerId(e){return gr.#e===e}static isSamePointerIdOrRemove(e){return gr.#e===e||(gr.#t?.delete(e),!1)}static isSamePointerType(e){return gr.#n===e}static isInitializedAndDifferentPointerType(e){return null!==gr.#n&&!gr.isSamePointerType(e)}static isSameTimeStamp(e){return gr.#r===e}static isUsingMultiplePointers(){return gr.#t?.size>=1}static clearPointerType(){gr.#n=null}static clearPointerIds(){gr.#e=NaN,gr.#t=null}static clearTimeStamp(){gr.#r=NaN}}class FTe{#e=0;get id(){return`${Jy}${this.#e++}`}}class SN{#e=LK();#t=0;#r=null;static get _isSVGFittingCanvas(){const r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;return i.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',wn(this,"_isSVGFittingCanvas",i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),0===new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0])))}#n(e,t){var r=this;return(0,Q.A)(function*(){r.#r||=new Map;let i=r.#r.get(e);if(null===i)return null;if(i?.bitmap)return i.refCounter+=1,i;try{let s;if(i||={bitmap:null,id:`image_${r.#e}_${r.#t++}`,refCounter:0,isSvg:!1},"string"==typeof t?(i.url=t,s=yield r1(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),"image/svg+xml"===s.type){const o=SN._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((u,d)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,u()},a.onload=(0,Q.A)(function*(){const h=i.svgUrl=a.result;l.src=(yield o)?`${h}#svgView(preserveAspectRatio(none))`:h}),l.onerror=a.onerror=d});a.readAsDataURL(s),yield c}else i.bitmap=yield createImageBitmap(s);i.refCounter=1}catch(s){_n(s),i=null}return r.#r.set(e,i),i&&r.#r.set(i.id,i),i})()}getFromFile(e){var t=this;return(0,Q.A)(function*(){const{lastModified:r,name:i,size:s,type:o}=e;return t.#n(`${r}_${i}_${s}_${o}`,e)})()}getFromUrl(e){var t=this;return(0,Q.A)(function*(){return t.#n(e,e)})()}getFromBlob(e,t){var r=this;return(0,Q.A)(function*(){const i=yield t;return r.#n(e,i)})()}getFromId(e){var t=this;return(0,Q.A)(function*(){t.#r||=new Map;const r=t.#r.get(e);if(!r)return null;if(r.bitmap)return r.refCounter+=1,r;if(r.file)return t.getFromFile(r.file);if(r.blobPromise){const{blobPromise:i}=r;return delete r.blobPromise,t.getFromBlob(r.id,i)}return t.getFromUrl(r.url)})()}getFromCanvas(e,t){this.#r||=new Map;let r=this.#r.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,r),this.#r.set(r.id,r),r}getSvgUrl(e){const t=this.#r.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t||(t.refCounter-=1,0!==t.refCounter))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class VTe{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),this.#t)return;const l={cmd:e,undo:t,post:r,type:s};if(-1===this.#n)return this.#e.length>0&&(this.#e.length=0),this.#n=0,void this.#e.push(l);if(o&&this.#e[this.#n].type===s)return a&&(l.undo=this.#e[this.#n].undo),void(this.#e[this.#n]=l);const c=this.#n+1;c===this.#r?this.#e.splice(0,1):(this.#n=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(-1===this.#n)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return-1!==this.#n}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(-1!==this.#n){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e)return this.#e.splice(t+1,this.#n-t),void(this.#n=t);this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class l1{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ys.platform;for(const[r,i,s={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...o,t)(),s||Oi(t))}}class xN{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function MTe(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,o1(r))}e.remove()}(e),wn(this,"_colors",e)}convert(e){const t=o1(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return xN._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ht.makeHexColor(...t):e}}let c1=(()=>{class n{#e=new AbortController;#t=null;#r=null;#n=new Map;#o=new Map;#s=null;#i=null;#a=null;#c=new VTe;#l=null;#h=null;#d=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#_=!1;#y=!1;#v=!1;#I=null;#C=null;#w=null;#S=null;#b=!1;#E=null;#P=new FTe;#x=!1;#D=!1;#F=!1;#k=null;#N=null;#V=null;#O=null;#H=null;#T=Tn.NONE;#A=new Set;#R=null;#B=null;#j=null;#W=null;#q=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#L=null;#G=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=n.prototype,r=a=>a.#G.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&a.hasSomethingToControl(),i=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return"text"!==c&&"number"!==c}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wn(this,"_keyboardManager",new l1([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#G.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:r}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:r}]]))}constructor(t,r,i,s,o,a,l,c,u,d,h,f,m,v,y,b){const A=this._signal=this.#e.signal;this.#G=t,this.#Z=r,this.#J=i,this.#s=s,this.#l=o,this.#B=a,this.#q=c,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:A}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),l._on("setpreference",this.onSetPreference.bind(this),{signal:A}),l._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:A}),this.#oe(),this.#he(),this.#te(),this.#i=c.annotationStorage,this.#I=c.filterFactory,this.#j=u,this.#S=d||null,this.#_=h,this.#y=f,this.#v=m,this.#H=v||null,this.viewParameters={realScale:v_.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=!1!==b,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const t of this.#o.values())t.destroy();this.#o.clear(),this.#n.clear(),this.#p.clear(),this.#O?.clear(),this.#t=null,this.#A.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#E?.hide(),this.#E=null,this.#V?.destroy(),this.#V=null,this.#r=null,this.#C&&(clearTimeout(this.#C),this.#C=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#H}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return wn(this,"hcmFilter",this.#j?this.#I.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return wn(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return wn(this,"_highlightColors",this.#S?new Map(this.#S.split(",").map(t=>((t=t.split("=").map(r=>r.trim()))[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return wn(this,"highlightColors",null);const r=new Map,i=!!this.#j;for(const[s,o]of t){const a=s.endsWith("_HCM");i&&a?r.set(s.replace("_HCM",""),o):!i&&!a&&r.set(s,o)}return wn(this,"highlightColors",r)}get highlightColorNames(){return wn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const r=this.highlightColorNames.get(t);return this._highlightColors.get(r)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#V=t}editAltText(t,r=!1){this.#s?.editAltText(this,t,r)}hasCommentManager(){return!!this.#l}editComment(t,r,i,s){this.#l?.showDialog(this,t,r,i,s)}selectComment(t,r){this.#o.get(t)?.getEditorByUID(r)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,r,i=void 0){this.#l?.toggleCommentPopup(t,r,i)}makeCommentColor(t,r){return t&&this.#l?.makeCommentColor(t,r)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}waitForEditorsRendered(t){var r=this;return(0,Q.A)(function*(){if(r.#o.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),o=a=>{a.pageNumber===t&&(r._eventBus._off("editorsrendered",o),i())};r._eventBus.on("editorsrendered",o),yield s})()}getSignature(t){this.#B?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#B}switchToMode(t,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,r){this._eventBus.dispatch("setpreference",{source:this,name:t,value:r})}onSetPreference({name:t,value:r}){"enableNewAltTextWhenAddingImage"===t&&(this.#v=r)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#G.focus()}findParent(t,r){for(const i of this.#o.values()){const{x:s,y:o,width:a,height:l}=i.div.getBoundingClientRect();if(t>=s&&t<=s+a&&r>=o&&r<=o+l)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*v_.PDF_TO_CSS_UNITS;for(const r of this.#p)r.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#ee(t){const{currentLayer:r}=this;if(r.hasTextLayer(t))return r;for(const i of this.#o.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",r=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:o,focusNode:a,focusOffset:l}=i,c=i.toString(),d=this.#Q(i).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;i.empty();const f=this.#ee(d),m=this.#T===Tn.NONE,v=()=>{const y=f?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:s,anchorOffset:o,focusNode:a,focusOffset:l,text:c});m&&this.showAllEditors("highlight",!0,!0),r&&y?.editComment()};m?this.switchToMode(Tn.HIGHLIGHT,v):v()}commentSelection(t=""){this.highlightSelection(t,!0)}#ie(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#E||=new LTe(this),this.#E.show(i,s,"ltr"===this.direction))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#i)return null;const r=`${Jy}${t}`,i=this.#i.getRawValue(r);return i&&this.#i.remove(r),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#i&&!this.#i.has(t.id)&&this.#i.setValue(t.id,t)}a11yAlert(t,r=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),r?i.setAttribute("data-l10n-args",JSON.stringify(r)):i.removeAttribute("data-l10n-args"))}#se(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#R&&(this.#E?.hide(),this.#R=null,this.#M({hasSelectedText:!1})));const{anchorNode:r}=t;if(r===this.#R)return;const s=this.#Q(t).closest(".textLayer");if(s){if(this.#E?.hide(),this.#R=r,this.#M({hasSelectedText:!0}),(this.#T===Tn.HIGHLIGHT||this.#T===Tn.NONE)&&(this.#T===Tn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#b=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===Tn.HIGHLIGHT?this.#ee(s):null;if(o?.toggleDrawing(),this.#D){const a=new AbortController,l=this.combinedSignal(a),c=u=>{"pointerup"===u.type&&0!==u.button||(a.abort(),o?.toggleDrawing(!0),"pointerup"===u.type&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}else o?.toggleDrawing(!0),this.#Y("main_toolbar")}}else this.#R&&(this.#E?.hide(),this.#R=null,this.#M({hasSelectedText:!1}))}#Y(t=""){this.#T===Tn.HIGHLIGHT?this.highlightSelection(t):this.#_&&this.#ie()}#oe(){document.addEventListener("selectionchange",this.#se.bind(this),{signal:this._signal})}#ae(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#le(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#b&&(this.#b=!1,this.#Y("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const r of this.#A)if(r.div.contains(t)){this.#N=[r,t],r._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,r]=this.#N;this.#N=null,r.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}#te(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ce(){this.#k?.abort(),this.#k=null}#ue(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#de(){this.#h?.abort(),this.#h=null}#he(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(t){for(const{type:r}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(r))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const r of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(r.type))return i.paste(r,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const r=[];for(const i of this.#A){const s=i.serialize(!0);s&&r.push(s)}0!==r.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(t){this.copy(t),this.delete()}paste(t){var r=this;return(0,Q.A)(function*(){t.preventDefault();const{clipboardData:i}=t;for(const a of i.items)for(const l of r.#u)if(l.isHandlingMimeForPasting(a.type))return void l.paste(a,r.currentLayer);let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(a){return void _n(`paste: "${a.message}".`)}if(!Array.isArray(s))return;r.unselectAll();const o=r.currentLayer;try{const a=[];for(const u of s){const d=yield o.deserialize(u);if(!d)return;a.push(d)}const l=()=>{for(const u of a)r.#ne(u);r.#re(a)};r.addCommands({cmd:l,undo:()=>{for(const u of a)u.remove()},mustExec:!0})}catch(a){_n(`paste: "${a.message}".`)}})()}keydown(t){!this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!0),this.#T!==Tn.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#b&&(this.#b=!1,this.#Y("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}#M(t){Object.entries(t).some(([i,s])=>this.#K[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,t)}),this.#T===Tn.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#$([[Zn.HIGHLIGHT_FREE,!0]]))}#$(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ae(),this.#ue(),this.#M({isEditing:this.#T!==Tn.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const r of this.#u)this.#$(r.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#o.get(this.#f)}getLayer(t){return this.#o.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#o.set(t.pageIndex,t),this.#x?t.enable():t.disable()}removeLayer(t){this.#o.delete(t.pageIndex)}updateMode(t){var r=this;return(0,Q.A)(function*(i,s=null,o=!1,a=!1,l=!1,c=!1){if(r.#T!==i&&(!r.#U||(yield r.#U.promise,r.#U))){if(r.#U=Promise.withResolvers(),r.#d?.commitOrRemove(),r.#T===Tn.POPUP&&r.#l?.hideSidebar(),r.#l?.destroyPopup(),r.#T=i,i===Tn.NONE){r.setEditingState(!1),r.#pe();for(const u of r.#n.values())u.hideStandaloneCommentButton();return r._editorUndoBar?.hide(),r.toggleComment(null),void r.#U.resolve()}for(const u of r.#n.values())u.addStandaloneCommentButton();i===Tn.SIGNATURE&&(yield r.#B?.loadSignatures()),o&&gr.clearPointerType(),r.setEditingState(!0),yield r.#fe(),r.unselectAll();for(const u of r.#o.values())u.updateMode(i);if(i===Tn.POPUP){r.#r||=(yield r.#q.getAnnotationsByType(new Set(r.#u.map(h=>h._editorType))));const u=new Set,d=[];for(const h of r.#n.values()){const{annotationElementId:f,hasComment:m,deleted:v}=h;f&&u.add(f),m&&!v&&d.push(h.getData())}for(const h of r.#r){const{id:f,popupRef:m,contentsObj:v}=h;m&&v?.str&&!u.has(f)&&!r.#m.has(f)&&d.push(h)}r.#l?.showSidebar(d)}if(!s)return a&&r.addNewEditorFromKeyboard(),void r.#U.resolve();for(const u of r.#n.values())u.uid===s?(r.setSelected(u),c?u.editComment():l?u.enterInEditMode():u.focus()):u.unselect();r.#U.resolve()}}).apply(this,arguments)}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,r){if(this.#u){switch(t){case Zn.CREATE:return void this.currentLayer.addNewEditor(r);case Zn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(t,r),this.showAllEditors("highlight",r)}if(this.hasSelection)for(const i of this.#A)i.updateParams(t,r);else for(const i of this.#u)i.updateDefaultParams(t,r)}}showAllEditors(t,r,i=!1){for(const o of this.#n.values())o.editorType===t&&o.show(r);(this.#W?.get(Zn.HIGHLIGHT_SHOW_ALL)??!0)!==r&&this.#$([[Zn.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(const r of this.#o.values())t?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",t)}}#fe(){var t=this;return(0,Q.A)(function*(){if(!t.#x){t.#x=!0;const r=[];for(const i of t.#o.values())r.push(i.enable());yield Promise.all(r);for(const i of t.#n.values())i.enable()}})()}#pe(){if(this.unselectAll(),this.#x){this.#x=!1;for(const t of this.#o.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const r of this.#n.values())r.pageIndex===t&&(yield r)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.focusMainContainer(),this.#C=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#O?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#i?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#ne(t){const r=this.#o.get(t.pageIndex);r?r.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#$(t.propertiesToUpdate))}get#ge(){let t=null;for(t of this.#A);return t}updateUI(t){this.#ge===t&&this.#$(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#$(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t))return this.#A.delete(t),t.unselect(),void this.#M({hasSelectedEditor:this.hasSelection});this.#A.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#d?.commitOrRemove();for(const r of this.#A)r!==t&&r.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#A.size}get isEnterHandled(){return 1===this.#A.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#c.add(t),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#c.cleanType(t)}#X(){if(0===this.#n.size)return!0;if(1===this.#n.size)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const r=t?[t]:[...this.#A],s=()=>{for(const o of r)this.#ne(o)};this.addCommands({cmd:()=>{this._editorUndoBar?.show(s,1===r.length?r[0].editorType:r.length);for(const o of r)o.remove()},undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(t){for(const r of this.#A)r.unselect();this.#A.clear();for(const r of t)r.isEmpty()||(this.#A.add(r),r.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#re(this.#n.values())}unselectAll(){if((!this.#t||(this.#t.commitOrRemove(),this.#T===Tn.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(t,r,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=t,this.#z[1]+=r;const[s,o]=this.#z,a=[...this.#A];this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(s,o),c.translationDone())},undo:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(-s,-o),c.translationDone())},mustExec:!1})},1e3);for(const c of a)c.translateInPage(t,r),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#A)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let r=!1;for(const[{x:s,y:o,pageIndex:a},l]of t)l.newX=s,l.newY=o,l.newPageIndex=a,r||=s!==l.savedX||o!==l.savedY||a!==l.savedPageIndex;if(!r)return!1;const i=(s,o,a,l)=>{if(this.#n.has(s.id)){const c=this.#o.get(l);c?s._setParentAndPosition(c,o,a):(s.pageIndex=l,s.x=o,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:a,newPageIndex:l}]of t)i(s,o,a,l)},undo:()=>{for(const[s,{savedX:o,savedY:a,savedPageIndex:l}]of t)i(s,o,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,r){if(this.#g)for(const i of this.#g.keys())i.drag(t,r)}rebuild(t){if(null===t.parent){const r=this.getLayer(t.pageIndex);r?(r.changeParent(t),r.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#A.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==Tn.NONE}get imageManager(){return wn(this,"imageManager",new SN)}getSelectionBoxes(t){if(!t)return null;const r=document.getSelection();for(let u=0,d=r.rangeCount;u<d;u++)if(!t.contains(r.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:o,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-s)/a,y:1-(u+h-i)/o,width:f/a,height:h/o});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-i)/o,y:1-(d+f-s)/a,width:h/o,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-s)/a,y:(u-i)/o,width:f/a,height:h/o});break;default:l=(u,d,h,f)=>({x:(u-i)/o,y:(d-s)/a,width:h/o,height:f/a})}const c=[];for(let u=0,d=r.rangeCount;u<d;u++){const h=r.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:m,width:v,height:y}of h.getClientRects())0===v||0===y||c.push(l(f,m,v,y))}return 0===c.length?null:c}addChangedExistingAnnotation({annotationElementId:t,id:r}){(this.#a||=new Map).set(t,r)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const r=this.#a?.get(t.data.id);if(!r)return;const i=this.#i.getRawValue(r);i&&(this.#T===Tn.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,r,i){const s=this.#O?.get(t);s&&(s.setCanvas(r,i),this.#O.delete(t))}addMissingCanvas(t,r){(this.#O||=new Map).set(t,r)}}return n})(),WK=(()=>{class n{#e=null;#t=!1;#r=null;#n=null;#o=null;#s=null;#i=!1;#a=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#d=t._uiManager.useNewAltTextFlow,n.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){n._l10n??=t}render(){var t=this;return(0,Q.A)(function*(){const r=t.#r=document.createElement("button");r.className="altText",r.tabIndex="0";const i=t.#n=document.createElement("span");r.append(i),t.#d?(r.classList.add("new"),r.setAttribute("data-l10n-id",n.#f.missing),i.setAttribute("data-l10n-id",n.#f["missing-label"])):(r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=t.#c._uiManager._signal;r.addEventListener("contextmenu",Ll,{signal:s}),r.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const o=a=>{a.preventDefault(),t.#c._uiManager.editAltText(t.#c),t.#d&&t.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:t.#m}})};return r.addEventListener("click",o,{capture:!0,signal:s}),r.addEventListener("keydown",a=>{a.target===r&&"Enter"===a.key&&(t.#i=!0,o(a))},{signal:s}),yield t.#g(),r})()}get#m(){return(this.#e?"added":null===this.#e&&this.guessedText&&"review")||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#d?null===this.#e:!this.#e&&!this.#t}hasData(){return this.#d?null!==this.#e||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}setGuessedText(t){var r=this;return(0,Q.A)(function*(){null===r.#e&&(r.#l=t,r.#h=yield n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),r.#g())})()}toggleAltTextBadge(t=!1){if(!this.#d||this.#e)return this.#a?.remove(),void(this.#a=null);if(!this.#a){const r=this.#a=document.createElement("div");r.className="noAltTextBadge",this.#c.div.append(r)}this.#a.classList.toggle("hidden",!t)}serialize(t){let r=this.#e;return!t&&this.#l===r&&(r=this.#h),{altText:r,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:r,guessedText:i,textWithDisclaimer:s,cancel:o=!1}){i&&(this.#l=i,this.#h=s),(this.#e!==t||this.#t!==r)&&(o||(this.#e=t,this.#t=r),this.#g())}toggle(t=!1){this.#r&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#o=null,this.#a?.remove(),this.#a=null}#g(){var t=this;return(0,Q.A)(function*(){const r=t.#r;if(!r)return;if(t.#d){if(r.classList.toggle("done",!!t.#e),r.setAttribute("data-l10n-id",n.#f[t.#m]),t.#n?.setAttribute("data-l10n-id",n.#f[`${t.#m}-label`]),!t.#e)return void t.#o?.remove()}else{if(!t.#e&&!t.#t)return r.classList.remove("done"),void t.#o?.remove();r.classList.add("done"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=t.#o;if(!i){t.#o=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${t.#c.id}`;const o=100,a=t.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(t.#s),t.#s=null},{once:!0}),r.addEventListener("mouseenter",()=>{t.#s=setTimeout(()=>{t.#s=null,t.#o.classList.add("show"),t.#c._reportTelemetry({action:"alt_text_tooltip"})},o)},{signal:a}),r.addEventListener("mouseleave",()=>{t.#s&&(clearTimeout(t.#s),t.#s=null),t.#o?.classList.remove("show")},{signal:a})}t.#t?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=t.#e),i.parentNode||r.append(i),t.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)})()}}return n})();class FC{#e=null;#t=null;#r=!1;#n=null;#o=null;#s=null;#i=null;#a=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*("ltr"===this.#n._uiManager.direction?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(r.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:r}=this.#e.getBoundingClientRect(),{x:i,y:s,width:o,height:a}=this.#n.parent.boundingClientRect;return[(e-i)/o,(t+r-s)/a]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return null===this.#l}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=this.#n._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Ll,{signal:r}),t&&(e.addEventListener("focusin",s=>{this.#n._focusEventsAllowed=!1,Oi(s)},{capture:!0,signal:r}),e.addEventListener("focusout",s=>{this.#n._focusEventsAllowed=!0,Oi(s)},{capture:!0,signal:r})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&"Enter"===s.key&&(this.#r=!0,i(s))},{signal:r}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:r}),e}edit(e){const t=this.commentPopupPositionInLayer;let r,i;if(t)[r,i]=t;else{[r,i]=this.#n.commentButtonPosition;const{width:u,height:d,x:h,y:f}=this.#n;r=h+r*u,i=f+i*d}const s=this.#n.parent.boundingClientRect,{x:o,y:a,width:l,height:c}=s;this.#n._uiManager.editComment(this.#n,o+r*l,a+i*c,{...e,parentDimensions:s})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#c||""===this.#i}isEmpty(){return null===this.#i}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#o}serialize(){return this.data}get data(){return{text:this.#i,richText:this.#s,date:this.#a,deleted:this.isDeleted()}}set data(e){if(e!==this.#i&&(this.#s=null),null===e)return this.#i="",void(this.#c=!0);this.#i=e,this.#a=new Date,this.#c=!1}setInitialText(e,t=null){this.#o=e,this.data=e,this.#a=null,this.#s=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#i="",this.#s=null,this.#a=null,this.#n=null,this.#r=!1,this.#c=!1}}class VC{#e;#t=!1;#r=null;#n;#o;#s;#i;#a=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){this.#e=e,this.#r=r,this.#n=t,this.#o=i,this.#s=s,this.#i=o,this.#h=new AbortController,this.#c=AbortSignal.any([a,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/du.pixelRatio}#f(e){if(this.#n?.())return;if(1===e.touches.length){if(this.#a)return;const i=this.#a=new AbortController,s=AbortSignal.any([this.#c,i.signal]),o=this.#e,a={capture:!0,signal:s,passive:!1},l=c=>{"touch"===c.pointerType&&(this.#a?.abort(),this.#a=null)};return o.addEventListener("pointerdown",c=>{"touch"===c.pointerType&&(Oi(c),l(c))},a),o.addEventListener("pointerup",l,a),void o.addEventListener("pointercancel",l,a)}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),s=this.#e,o={signal:i,capture:!1,passive:!1};s.addEventListener("touchmove",this.#m.bind(this),o);const a=this.#g.bind(this);s.addEventListener("touchend",a,o),s.addEventListener("touchcancel",a,o),o.capture=!0,s.addEventListener("pointerdown",Oi,o),s.addEventListener("pointermove",Oi,o),s.addEventListener("pointercancel",Oi,o),s.addEventListener("pointerup",Oi,o),this.#o?.()}if(Oi(e),2!==e.touches.length||this.#r?.())return void(this.#l=null);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#m(e){if(!this.#l||2!==e.touches.length)return;Oi(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:s}=t,{screenX:o,screenY:a}=r,l=this.#l,{touch0X:c,touch0Y:u,touch1X:d,touch1Y:h}=l,f=d-c,m=h-u,b=Math.hypot(o-i,a-s)||1,A=Math.hypot(f,m)||1;if(!this.#t&&Math.abs(A-b)<=VC.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,!this.#t)return void(this.#t=!0);const T=[(i+o)/2,(s+a)/2];this.#s?.(T,A,b)}#g(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#i?.()),this.#l&&(Oi(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}}class Ut{#e=null;#t=null;#r=null;#n=null;#o=null;#s=!1;#i=null;#a="";#c=null;#l=null;#h=null;#d=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#_=!1;#y=!1;#v=null;#I=0;#C=0;#w=null;#S=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#b=!1;#E=Ut._zIndex++;static _borderLineWidth=-1;static _colorManager=new xN;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Ut.prototype._resizeWithKeyboard,t=c1.TRANSLATE_SMALL,r=c1.TRANSLATE_BIG;return wn(this,"_resizerKeyboardManager",new l1([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Ut.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new BTe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ut._l10n??=e,Ut._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),-1!==Ut._borderLineWidth)return;const r=getComputedStyle(document.documentElement);Ut._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Br("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#b}set _isDraggable(e){this.#b=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}#P([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#P(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#P(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=r;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Ut,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:s,y:o,width:a,height:l}=this;if(a*=r,l*=i,s*=r,o*=i,this._mustFixPosition)switch(e){case 0:s=na(s,0,r-a),o=na(o,0,i-l);break;case 90:s=na(s,0,r-l),o=na(o,a,i);break;case 180:s=na(s,a,r),o=na(o,l,i);break;case 270:s=na(s,l,r),o=na(o,0,i-a)}this.x=s/=r,this.y=o/=i;const[c,u]=this.getBaseTranslation();s+=c,o+=u,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#x(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Ut.#x(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Ut.#x(e,t,360-this.parentRotation)}#D(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#k.bind(this,r),{signal:t}),i.addEventListener("contextmenu",Ll,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#k(e,t){t.preventDefault();const{isMac:r}=ys.platform;if(0!==t.button||t.ctrlKey&&r)return;this.#r?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Oi,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ll,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#V()};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}#N(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#V(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#h;this.#h=null;const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===r&&l===i||this.addCommands({cmd:this.#N.bind(this,s,o,a,l),undo:this.#N.bind(this,e,t,r,i),mustExec:!0})}static _round(e){return Math.round(1e4*e)/1e4}#O(e,t){const[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=Ut.MIN_SIZE/r,u=Ut.MIN_SIZE/i,d=this.#D(this.rotation),h=(le,ue)=>[d[0]*le+d[2]*ue,d[1]*le+d[3]*ue],f=this.#D(360-this.rotation);let v,y,b=!1,A=!1;switch(e){case"topLeft":b=!0,v=(le,ue)=>[0,0],y=(le,ue)=>[le,ue];break;case"topMiddle":v=(le,ue)=>[le/2,0],y=(le,ue)=>[le/2,ue];break;case"topRight":b=!0,v=(le,ue)=>[le,0],y=(le,ue)=>[0,ue];break;case"middleRight":A=!0,v=(le,ue)=>[le,ue/2],y=(le,ue)=>[0,ue/2];break;case"bottomRight":b=!0,v=(le,ue)=>[le,ue],y=(le,ue)=>[0,0];break;case"bottomMiddle":v=(le,ue)=>[le/2,ue],y=(le,ue)=>[le/2,0];break;case"bottomLeft":b=!0,v=(le,ue)=>[0,ue],y=(le,ue)=>[le,0];break;case"middleLeft":A=!0,v=(le,ue)=>[0,ue/2],y=(le,ue)=>[le,ue/2]}const T=v(a,l),P=y(a,l);let V=h(...P);const q=Ut._round(s+V[0]),N=Ut._round(o+V[1]);let F,I,D=1,S=1;if(t.fromKeyboard)({deltaX:F,deltaY:I}=t);else{const{screenX:le,screenY:ue}=t,[he,be]=this.#l;[F,I]=this.screenToPageTranslation(le-he,ue-be),this.#l[0]=le,this.#l[1]=ue}if([F,I]=[f[0]*(le=F/r)+f[2]*(ue=I/i),f[1]*le+f[3]*ue],b){const le=Math.hypot(a,l);D=S=Math.max(Math.min(Math.hypot(P[0]-T[0]-F,P[1]-T[1]-I)/le,1/a,1/l),c/a,u/l)}else A?D=na(Math.abs(P[0]-T[0]-F),c,1)/a:S=na(Math.abs(P[1]-T[1]-I),u,1)/l;var le,ue;const O=Ut._round(a*D),L=Ut._round(l*S);V=h(...y(O,L));const te=q-V[0],me=N-V[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=O,this.height=L,this.x=te,this.y=me,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}addEditToolbar(){var e=this;return(0,Q.A)(function*(){if(e._editToolbar||e.#_)return e._editToolbar;e._editToolbar=new a1(e),e.div.append(e._editToolbar.render());const{toolbarButtons:t}=e;if(t)for(const[r,i]of t)yield e._editToolbar.addButton(r,i);return e.hasComment||e._editToolbar.addButton("comment",e.addCommentButton()),e._editToolbar.addButton("delete"),e._editToolbar})()}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(WK.initialize(Ut._l10n),this.#r=new WK(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}setGuessedAltText(e){var t=this;return(0,Q.A)(function*(){yield t.#r?.setGuessedText(e)})()}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new FC(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#o)return void(this._uiManager.isEditingMode()&&this.#o.classList.remove("hidden"));this.hasComment&&(this.#o=this.#n.renderForStandalone(),this.div.append(this.#o))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#o=null}hideStandaloneCommentButton(){this.#o?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:i}}=this.#n;return{text:t,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new FC(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(this.#n||=new FC(this),this.#n.setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}editComment(e){var t=this;return(0,Q.A)(function*(){t.#n||=new FC(t),t.#n.edit(e)})()}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,a=o+s+1;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,i-100,a+180,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#s?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#j();const[t,r]=this.parentDimensions;this.parentRotation%180!=0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),qK(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new VC({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#H.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#H(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,t,r){let s=r/t*.7+1-.7;if(1===s)return;const o=this.#D(this.rotation),a=(q,N)=>[o[0]*q+o[2]*N,o[1]*q+o[3]*N],[l,c]=this.parentDimensions,u=this.x,d=this.y,h=this.width,f=this.height,m=Ut.MIN_SIZE/l,v=Ut.MIN_SIZE/c;s=Math.max(Math.min(s,1/h,1/f),m/h,v/f);const y=Ut._round(h*s),b=Ut._round(f*s);if(y===h&&b===f)return;this.#u||=[u,d,h,f];const A=a(h/2,f/2),T=Ut._round(u+A[0]),P=Ut._round(d+A[1]),V=a(y/2,b/2);this.x=T-V[0],this.y=P-V[1],this.width=y,this.height=b,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#V()}pointerdown(e){const{isMac:t}=ys.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#g=!0,this._isDraggable?this.#B(e):this.#R(e))}#R(e){const{isMac:t}=ys.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},a=c=>{i.abort(),this.#i=null,this.#g=!1,this._uiManager.endDragSession()||this.#R(c),r&&this._onStopDragging()};t&&(this.#I=e.clientX,this.#C=e.clientY,this.#i=e.pointerId,this.#a=e.pointerType,window.addEventListener("pointermove",c=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:u,clientY:d,pointerId:h}=c;if(h!==this.#i)return void Oi(c);const[f,m]=this.screenToPageTranslation(u-this.#I,d-this.#C);this.#I=u,this.#C=d,this._uiManager.dragSelectedEditors(f,m)},o),window.addEventListener("touchmove",Oi,o),window.addEventListener("pointerdown",c=>{c.pointerType===this.#a&&(this.#S||c.isPrimary)&&a(c),Oi(c)},o));const l=c=>{this.#i&&this.#i!==c.pointerId?Oi(c):a(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,u=t/i,d=this.x*s,h=this.y*o,f=this.width*s,m=this.height*o;switch(r){case 0:return[d+c+a,o-h-u-m+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+m+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+m+l];case 270:return[d-u-m+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,o]=e,a=s-r,l=o-i;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-i,l,a];case 180:return[s,t-i,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:i,deleted:s,richText:o},uid:a,pageIndex:l,creationDate:c,modificationDate:u}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:c,modificationDate:r||u,popupRef:!s,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),this.#_=!0,!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),this.#_=!1,!0)}isInEditMode(){return this.#_}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return t<o&&i>0&&e<s&&r>0}#j(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#j()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static deserialize(e,t,r){var i=this;return(0,Q.A)(function*(){const s=new i.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,s.#e=e.accessibilityData,s._isCopy=e.isCopy||!1;const[o,a]=s.pageDimensions,[l,c,u,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=l/o,s.y=c/a,s.width=u/o,s.height=d/a,s})()}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#L(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#S?.destroy(),this.#S=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,i,s,o]=this.getPDFRect();return[Ut._round(r+(s-r)*e),Ut._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const o=this.#W.bind(this),a=this.#q.bind(this),l=this._uiManager._signal;for(const c of this.#t){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#K.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",Ut._l10nResizer[u])}}const r=this.#t[0];let i=0;for(const o of t){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)this.#c.append(this.#c.firstElementChild);else if(s>i)for(let a=0;a<s-i;a++)this.#c.firstElementChild.before(this.#c.lastElementChild);let o=0;for(const a of t){const c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ut._l10nResizer[c])}}this.#z(0),this.#y=!0,this.#c.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#W(e){Ut._resizerKeyboardManager.exec(this,e)}#q(e){this.#y&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#K(e){this.#m=this.#y?e:""}#z(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#y&&this.#O(this.#m,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#y=!1,this.#z(-1),this.#V()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){"BUTTON"!==e.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:r}=e;let i=this.#w.get(r);return i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(r),0===this.#w.size&&(this.#w=null)},Ut._telemetryTimeout),void this.#w.set(r,i)}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(e){if(this.#d||this.deleted)return this.deleted?(this.#d.remove(),void(this.#d=null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment}));this.#d=e.addFakeAnnotation(this)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;"DIV"===t?.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}class BTe extends Ut{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const KK=3285377520,Fl=4294901760,hu=65535;class YK{constructor(e){this.h1=e?4294967295&e:KK,this.h2=e?4294967295&e:KK}update(e){let t,r;if("string"==typeof e){t=new Uint8Array(2*e.length),r=0;for(let v=0,y=e.length;v<y;v++){const b=e.charCodeAt(v);b<=255?t[r++]=b:(t[r++]=b>>>8,t[r++]=255&b)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),r=t.byteLength}const i=r>>2,s=r-4*i,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,h=461845907,f=d&hu,m=h&hu;for(let v=0;v<i;v++)1&v?(a=o[v],a=a*d&Fl|a*f&hu,a=a<<15|a>>>17,a=a*h&Fl|a*m&hu,c^=a,c=c<<13|c>>>19,c=5*c+3864292196):(l=o[v],l=l*d&Fl|l*f&hu,l=l<<15|l>>>17,l=l*h&Fl|l*m&hu,u^=l,u=u<<13|u>>>19,u=5*u+3864292196);switch(a=0,s){case 3:a^=t[4*i+2]<<16;case 2:a^=t[4*i+1]<<8;case 1:a^=t[4*i],a=a*d&Fl|a*f&hu,a=a<<15|a>>>17,a=a*h&Fl|a*m&hu,1&i?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Fl|36045*e&hu,t=4283543511*t&Fl|(2950163797*(t<<16|e>>>16)&Fl)>>>16,e^=t>>>1,e=444984403*e&Fl|60499*e&hu,t=3301882366*t&Fl|(3120437893*(t<<16|e>>>16)&Fl)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const DN=Object.freeze({map:null,hash:"",transfer:void 0});class PN{#e=!1;#t=null;#r=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return void 0===r?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(void 0!==t&&(t instanceof Ut&&this.#r.delete(t.annotationElementId),this.#n.delete(e),0===this.#n.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor)){for(const r of this.#n.values())if(r instanceof Ut)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(void 0!==r)for(const[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,this.#n.set(e,t);i&&this.#o(),t instanceof Ut&&((this.#r||=new Map).set(t.annotationElementId,t),"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#o(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new XK(this)}get serializable(){if(0===this.#n.size)return DN;const e=new Map,t=new YK,r=[],i=Object.create(null);let s=!1;for(const[o,a]of this.#n){const l=a instanceof Ut?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:DN}get editorStats(){let e=null;const t=new Map;let r=0,i=0;for(const s of this.#n.values()){if(!(s instanceof Ut)){s.popup&&(s.popup.deleted?i+=1:r+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(r+=1);const o=s.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const l=e[a]||=new Map;for(const[c,u]of Object.entries(o)){if("type"===c)continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const h=d.get(u)??0;d.set(u,h+1)}}if((i>0||r>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:r}),!e)return null;for(const[s,o]of t)e[s]=o.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const r=this.#r?.get(e);return!!r&&(r.updateFromAnnotationLayer(t),!0)}getEditor(e){return this.#r?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#r)for(const t of this.#r.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class XK extends PN{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);this.#e={map:s,hash:r,transfer:i}}get print(){Br("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return wn(this,"modifiedIds",{ids:new Set,hash:""})}}class UTe{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(e){var t=this;return(0,Q.A)(function*({systemFontInfo:r,disableFontFace:i,_inspectFont:s}){if(r&&!t.#e.has(r.loadedName)){if(Jn(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),t.isFontLoadingAPISupported){const{loadedName:o,src:a,style:l}=r,c=new FontFace(o,a,l);t.addNativeFontFace(c);try{yield c.load(),t.#e.add(o),s?.(r)}catch{_n(`Cannot load system font: ${r.baseFontName}, installing it could help to improve PDF rendering.`),t.removeNativeFontFace(c)}return}Br("Not implemented: loadSystemFont without the Font Loading API.")}}).apply(this,arguments)}bind(e){var t=this;return(0,Q.A)(function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(yield t.loadSystemFont(e));if(t.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){t.addNativeFontFace(i);try{yield i.loaded}catch(s){throw _n(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const r=e.createFontFaceRule();if(r){if(t.insertRule(r),t.isSyncFontLoadingSupported)return;yield new Promise(i=>{const s=t._queueLoadingCallback(i);t._prepareFontLoadEvent(e,s)})}})()}get isFontLoadingAPISupported(){return wn(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){return wn(this,"isSyncFontLoadingSupported",ta||ys.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:r}=this,i={done:!1,complete:function t(){for(Jn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}},callback:e};return r.push(i),i}get _loadTestFont(){return wn(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function r(P,V){return P.charCodeAt(V)<<24|P.charCodeAt(V+1)<<16|P.charCodeAt(V+2)<<8|255&P.charCodeAt(V+3)}function i(P,V,q,N){return P.substring(0,V)+N+P.substring(V+q)}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;const d=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=i(h,976,d.length,d);const v=1482184792;let y=r(h,16);for(s=0,o=d.length-3;s<o;s+=4)y=y-v+r(d,s)|0;s<d.length&&(y=y-v+r(d+"XXX",s)|0),h=i(h,16,4,function yTe(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,255&n)}(y));const b=`url(data:font/opentype;base64,${btoa(h)});`;this.insertRule(`@font-face {font-family:"${d}";src:${b}}`);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const P of[e.loadedName,d]){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=P,T.append(V)}this._document.body.append(T),function u(P,V){if(++c>30)return _n("Load test font never loaded."),void V();l.font="30px "+P,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?V():setTimeout(u.bind(null,P,V))}(d,()=>{T.remove(),t.complete()})}}class jTe{#e;constructor(e,t=null,r,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${FK(this.data)});`;let t;if(this.cssFontInfo){let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}else t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(o){_n(`getPathGenerator - ignoring character: "${o}".`)}const s=GK(i?.path);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=s}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){wn(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){wn(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}let QK=(()=>{class n{#e;#t;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const r=new TextEncoder,i={};let s=0;for(const u of n.strings){const d=r.encode(t[u]);i[u]=d,s+=4+d.length}const o=new ArrayBuffer(s),a=new Uint8Array(o),l=new DataView(o);let c=0;for(const u of n.strings){const d=i[u],h=d.length;l.setUint32(c,h),a.set(d,c+4),c+=4+h}return Jn(c===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#e=t,this.#t=new DataView(this.#e),this.#r=new TextDecoder}#n(t){Jn(t<n.strings.length,"Invalid string index");let r=0;for(let s=0;s<t;s++)r+=this.#t.getUint32(r)+4;const i=this.#t.getUint32(r);return this.#r.decode(new Uint8Array(this.#e,r+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}return n})(),ZK=(()=>{class n{#e;#t;#r;static strings=["css","loadedName","baseFontName","src"];static write(t){const r=new TextEncoder,i={};let s=0;for(const f of n.strings){const m=r.encode(t[f]);i[f]=m,s+=4+m.length}s+=4;let o,a,l=1+s;t.style&&(o=r.encode(t.style.style),a=r.encode(t.style.weight),l+=4+o.length+4+a.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,t.guessFallback?1:0),d.setUint32(h,0),h+=4,s=0;for(const f of n.strings){const m=i[f],v=m.length;s+=4+v,d.setUint32(h,v),u.set(m,h+4),h+=4+v}return d.setUint32(h-s-4,s),t.style&&(d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length,d.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length),Jn(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}constructor(t){this.#e=t,this.#t=new DataView(this.#e),this.#r=new TextDecoder}get guessFallback(){return 0!==this.#t.getUint8(0)}#n(t){Jn(t<n.strings.length,"Invalid string index");let r=5;for(let s=0;s<t;s++)r+=this.#t.getUint32(r)+4;const i=this.#t.getUint32(r);return this.#r.decode(new Uint8Array(this.#e,r+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#t.getUint32(t);const r=this.#t.getUint32(t),i=this.#r.decode(new Uint8Array(this.#e,t+4,r));t+=4+r;const s=this.#t.getUint32(t);return{style:i,weight:this.#r.decode(new Uint8Array(this.#e,t+4,s))}}}return n})(),zTe=(()=>{class n{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(2*this.bools.length/8);static#t=this.#e+8*this.numbers.length;static#r=this.#t+1+8;static#n=this.#r+1+48;static#o=this.#n+1+6;#s;#i;#a;constructor({data:t,extra:r}){this.#s=t,this.#i=new TextDecoder,this.#a=new DataView(this.#s),r&&Object.assign(this,r)}#c(t){Jn(t<n.bools.length,"Invalid boolean index");const r=Math.floor(t/4),i=2*t%8,s=this.#a.getUint8(r)>>i&3;return 0===s?void 0:2===s}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Jn(t<n.numbers.length,"Invalid number index"),this.#a.getFloat64(n.#e+8*t)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=n.#t;if(0===this.#a.getUint8(t))return;t+=1;const i=[];for(let s=0;s<4;s++)i.push(this.#a.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=n.#r;if(0===this.#a.getUint8(t))return;t+=1;const i=[];for(let s=0;s<6;s++)i.push(this.#a.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=n.#n;if(0===this.#a.getUint8(t))return;t+=1;const i=[];for(let s=0;s<3;s++)i.push(this.#a.getInt16(t,!0)),t+=2;return i}#h(t){Jn(t<n.strings.length,"Invalid string index");let r=n.#o+4;for(let o=0;o<t;o++)r+=this.#a.getUint32(r)+4;const i=this.#a.getUint32(r),s=new Uint8Array(i);return s.set(new Uint8Array(this.#s,r+4,i)),this.#i.decode(s)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let t=n.#o;t+=4+this.#a.getUint32(t),t+=4+this.#a.getUint32(t),t+=4+this.#a.getUint32(t);const o=this.#a.getUint32(t);if(0!==o)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=n.#o;t+=4+this.#a.getUint32(t),t+=4+this.#a.getUint32(t),t+=4+this.#a.getUint32(t);const o=this.#a.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#a.setUint32(t,0)}get cssFontInfo(){let t=n.#o;t+=4+this.#a.getUint32(t),t+=4+this.#a.getUint32(t);const s=this.#a.getUint32(t);if(0===s)return null;const o=new Uint8Array(s);return o.set(new Uint8Array(this.#s,t+4,s)),new QK(o.buffer)}get systemFontInfo(){let t=n.#o;t+=4+this.#a.getUint32(t);const i=this.#a.getUint32(t);if(0===i)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(this.#s,t+4,i)),new ZK(s.buffer)}static write(t){const r=t.systemFontInfo?ZK.write(t.systemFontInfo):null,i=t.cssFontInfo?QK.write(t.cssFontInfo):null,s=new TextEncoder,o={};let a=0;for(const y of n.strings)o[y]=s.encode(t[y]),a+=4+o[y].length;const l=n.#o+4+a+4+(r?r.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=n.bools.length;let m=0,v=0;for(let y=0;y<f;y++){const b=t[n.bools[y]];m|=(void 0===b?0:b?2:1)<<v,v+=2,(8===v||y===f-1)&&(d.setUint8(h++,m),m=0,v=0)}Jn(h===n.#e,"FontInfo.write: Boolean properties offset mismatch");for(const y of n.numbers)d.setFloat64(h,t[y]),h+=8;if(Jn(h===n.#t,"FontInfo.write: Number properties offset mismatch"),t.bbox){d.setUint8(h++,4);for(const y of t.bbox)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=8;if(Jn(h===n.#r,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){d.setUint8(h++,6);for(const y of t.fontMatrix)d.setFloat64(h,y,!0),h+=8}else d.setUint8(h++,0),h+=48;if(Jn(h===n.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){d.setUint8(h++,1);for(const y of t.defaultVMetrics)d.setInt16(h,y,!0),h+=2}else d.setUint8(h++,0),h+=6;Jn(h===n.#o,"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(n.#o,0),h+=4;for(const y of n.strings){const b=o[y],A=b.length;d.setUint32(h,A),u.set(b,h+4),h+=4+A}if(d.setUint32(n.#o,h-n.#o-4),r){const y=r.byteLength;d.setUint32(h,y),Jn(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+y}else d.setUint32(h,0),h+=4;if(i){const y=i.byteLength;d.setUint32(h,y),Jn(h+4+y<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),h+4),h+=4+y}else d.setUint32(h,0),h+=4;return void 0===t.data?(d.setUint32(h,0),h+=4):(d.setUint32(h,t.data.length),u.set(t.data,h+4),h+=4+t.data.length),Jn(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}}return n})();class Bs{static#e=0;static#t=1;static#r=2;static#n=3;static#o=4;static#s=8;static#i=12;static#a=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,r=null,i=[],s=[],o=[],a=[],l=null,c=null;switch(e[0]){case"RadialAxial":t="axial"===e[1]?1:2,r=e[2],o=e[3],1===t?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,l=e[1],i=e[2],s=e[3],a=e[4]||[],r=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const u=Math.floor(i.length/2),d=Math.floor(s.length/3),h=o.length,f=a.length;let m=0;for(const V of a)m+=1,m=4*Math.ceil(m/4),m+=4+4*V.coords.length,m+=4+4*V.colors.length,void 0!==V.verticesPerRow&&(m+=4);const y=new ArrayBuffer(20+8*u+3*d+8*h+(r?16:0)+(c?3:0)+m),b=new DataView(y),A=new Uint8Array(y);b.setUint8(Bs.#e,t),b.setUint8(Bs.#t,r?1:0),b.setUint8(Bs.#r,c?1:0),b.setUint8(Bs.#n,l),b.setUint32(Bs.#o,u,!0),b.setUint32(Bs.#s,d,!0),b.setUint32(Bs.#i,h,!0),b.setUint32(Bs.#a,f,!0);let T=20;new Float32Array(y,T,2*u).set(i),T+=8*u,A.set(s,T),T+=3*d;for(const[V,q]of o)b.setFloat32(T,V,!0),T+=4,b.setUint32(T,parseInt(q.slice(1),16),!0),T+=4;if(r)for(const V of r)b.setFloat32(T,V,!0),T+=4;c&&(A.set(c,T),T+=3);for(let V=0;V<a.length;V++){const q=a[V];b.setUint8(T,q.type),T+=1,T=4*Math.ceil(T/4),b.setUint32(T,q.coords.length,!0),T+=4,new Int32Array(y,T,q.coords.length).set(q.coords),T+=4*q.coords.length,b.setUint32(T,q.colors.length,!0),T+=4,new Int32Array(y,T,q.colors.length).set(q.colors),T+=4*q.colors.length,void 0!==q.verticesPerRow&&(b.setUint32(T,q.verticesPerRow,!0),T+=4)}return y}getIR(){const e=this.view,t=this.data[Bs.#e],r=!!this.data[Bs.#t],i=!!this.data[Bs.#r],s=e.getUint32(Bs.#o,!0),o=e.getUint32(Bs.#s,!0),a=e.getUint32(Bs.#i,!0),l=e.getUint32(Bs.#a,!0);let c=20;const u=new Float32Array(this.buffer,c,2*s);c+=8*s;const d=new Uint8Array(this.buffer,c,3*o);c+=3*o;const h=[];for(let y=0;y<a;++y){const b=e.getFloat32(c,!0);c+=4;const A=e.getUint32(c,!0);c+=4,h.push([b,`#${A.toString(16).padStart(6,"0")}`])}let f=null;if(r){f=[];for(let y=0;y<4;++y)f.push(e.getFloat32(c,!0)),c+=4}let m=null;i&&(m=new Uint8Array(this.buffer,c,3),c+=3);const v=[];for(let y=0;y<l;++y){const b=e.getUint8(c);c+=1,c=4*Math.ceil(c/4);const A=e.getUint32(c,!0);c+=4;const T=new Int32Array(this.buffer,c,A);c+=4*A;const P=e.getUint32(c,!0);c+=4;const V=new Int32Array(this.buffer,c,P);c+=4*P;const q={type:b,coords:T,colors:V};2===b&&(q.verticesPerRow=e.getUint32(c,!0),c+=4),v.push(q)}if(1===t)return["RadialAxial","axial",f,h,Array.from(u.slice(0,2)),Array.from(u.slice(2,4)),null,null];if(2===t)return["RadialAxial","radial",f,h,[u[0],u[1]],[u[3],u[4]],u[2],u[5]];if(3===t){const y=this.data[Bs.#n];let b=null;if(u.length>0){let A=u[0],T=u[0],P=u[1],V=u[1];for(let q=0;q<u.length;q+=2){const N=u[q],D=u[q+1];A=A>N?N:A,P=P>D?D:P,T=T<N?N:T,V=V<D?D:V}b=[A,P,T,V]}return["Mesh",y,u,d,v,b,f,m]}throw new Error(`Unsupported pattern kind: ${t}`)}}class $Te{static write(e){let t,r;return ys.isFloat16ArraySupported?(r=new ArrayBuffer(2*e.length),t=new Float16Array(r)):(r=new ArrayBuffer(4*e.length),t=new Float32Array(r)),t.set(e),r}#e;constructor(e){this.#e=e}get path(){return ys.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function BC(n){if("string"!=typeof n)return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const MN=n=>"object"==typeof n&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,WTe=function ITe(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...s]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const o=s.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return 0===o;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(4!==o)return!1;a=!1;break;default:return!1}for(const l of s)if(!("number"==typeof l||a&&null===l))return!1;return!0}.bind(null,MN,n=>"object"==typeof n&&"string"==typeof n?.name);class KTe{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:s}=r;if(s.aborted)return void _n("LoopbackPort - cannot use an `aborted` signal.");const o=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}function JK(){}function xa(n){if(n instanceof Vh||n instanceof yN||n instanceof RK||n instanceof NC||n instanceof vN)return n;switch(n instanceof Error||"object"==typeof n&&null!==n||Br('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Vh(n.message);case"InvalidPDFException":return new yN(n.message);case"PasswordException":return new RK(n.message,n.code);case"ResponseException":return new NC(n.message,n.status,n.missing);case"UnknownErrorException":return new vN(n.message,n.details)}return new vN(n.message,n.toString())}class u1{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#n(e);if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],1===e.callback)i.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");i.reject(xa(e.reason))}return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:1,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:2,callbackId:e.callbackId,reason:xa(o)})})}else e.streamId?this.#r(e):t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:6,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Jn(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:1,streamId:s,reason:xa(c)}),u.promise}},r)}#r(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:4,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:3,streamId:t}),delete o.streamSinks[t])},error(c){Jn(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:5,streamId:t,reason:xa(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:8,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:8,streamId:t,reason:xa(c)})})}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case 8:e.success?o.startCall.resolve():o.startCall.reject(xa(e.reason));break;case 7:e.success?o.pullCall.resolve():o.pullCall.reject(xa(e.reason));break;case 6:if(!a){s.postMessage({sourceName:r,targetName:i,stream:7,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||JK).then(function(){s.postMessage({sourceName:r,targetName:i,stream:7,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:7,streamId:t,reason:xa(c)})});break;case 4:if(Jn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case 3:if(Jn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#o(o,t);break;case 5:Jn(o,"error should have stream controller"),o.controller.error(xa(e.reason)),this.#o(o,t);break;case 2:e.success?o.cancelCall.resolve():o.cancelCall.reject(xa(e.reason)),this.#o(o,t);break;case 1:if(!a)break;const l=xa(e.reason);Promise.try(a.onCancel||JK,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:2,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:2,streamId:t,reason:xa(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#o(e,t){var r=this;return(0,Q.A)(function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete r.streamControllers[t]})()}destroy(){this.#e?.abort(),this.#e=null}}class eY{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Br("Abstract method `_createCanvas` called.")}}class YTe extends eY{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class tY{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(e){var t=this;return(0,Q.A)(function*({name:r}){if(!t.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!r)throw new Error("CMap name must be specified.");const i=t.baseUrl+r+(t.isCompressed?".bcmap":"");return t._fetch(i).then(s=>({cMapData:s,isCompressed:t.isCompressed})).catch(s=>{throw new Error(`Unable to load ${t.isCompressed?"binary ":""}CMap at: ${i}`)})}).apply(this,arguments)}_fetch(e){return(0,Q.A)(function*(){Br("Abstract method `_fetch` called.")})()}}class nY extends tY{_fetch(e){var t=this;return(0,Q.A)(function*(){const r=yield r1(e,t.isCompressed?"arraybuffer":"text");return r instanceof ArrayBuffer?new Uint8Array(r):m_(r)})()}}class rY{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}class XTe extends rY{#e;#t;#r;#n;#o;#s;#i=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#o=t}get#a(){return this.#t||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#r){const e=this.#o.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#o.createElementNS(pd,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#r=this.#o.createElementNS(pd,"defs"),e.append(r),r.append(this.#r),this.#o.body.append(e)}return this.#r}#h(e){if(1===e.length){const l=e[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const u=c.join(",");return[u,u,u]}const[t,r,i]=e,s=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=t[l]/255,o[l]=r[l]/255,a[l]=i[l]/255;return[s.join(","),o.join(","),a.join(",")]}#d(e){if(void 0===this.#e){this.#e="";const t=this.#o.URL;t!==this.#o.baseURI&&(LC(t)?_n('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=kK(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#a.get(e);if(t)return t;const[r,i,s]=this.#h(e),o=1===e.length?r:`${r}${i}${s}`;if(t=this.#a.get(o),t)return this.#a.set(e,t),t;const a=`g_${this.#n}_transfer_map_${this.#i++}`,l=this.#d(a);this.#a.set(e,l),this.#a.set(o,l);const c=this.#g(a);return this.#p(r,i,s,c),l}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let s=this.#c.get(i);if(s?.key===r||(s?(s.filter?.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},this.#c.set(i,s)),!e||!t))return s.url;const o=this.#y(e);e=ht.makeHexColor(...o);const a=this.#y(t);if(t=ht.makeHexColor(...a),this.#l.style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const l=new Array(256);for(let f=0;f<=255;f++){const m=f/255;l[f]=m<=.03928?m/12.92:((m+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#n}_hcm_filter`,d=s.filter=this.#g(u);this.#p(c,c,c,d),this.#m(d);const h=(f,m)=>{const v=o[f]/255,y=a[f]/255,b=new Array(m+1);for(let A=0;A<=m;A++)b[A]=v+A/m*(y-v);return b.join(",")};return this.#p(h(0,5),h(1,5),h(2,5),d),s.url=this.#d(u),s.url}addAlphaFilter(e){let t=this.#a.get(e);if(t)return t;const[r]=this.#h([e]),i=`alpha_${r}`;if(t=this.#a.get(i),t)return this.#a.set(e,t),t;const s=`g_${this.#n}_alpha_map_${this.#i++}`,o=this.#d(s);this.#a.set(e,o),this.#a.set(i,o);const a=this.#g(s);return this.#_(r,a),o}addLuminosityFilter(e){let r,i,t=this.#a.get(e||"luminosity");if(t)return t;if(e?([r]=this.#h([e]),i=`luminosity_${r}`):i="luminosity",t=this.#a.get(i),t)return this.#a.set(e,t),t;const s=`g_${this.#n}_luminosity_map_${this.#i++}`,o=this.#d(s);this.#a.set(e,o),this.#a.set(i,o);const a=this.#g(s);return this.#f(a),e&&this.#_(r,a),o}addHighlightHCMFilter(e,t,r,i,s){const o=`${t}-${r}-${i}-${s}`;let a=this.#c.get(e);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#c.set(e,a)),!t||!r))return a.url;const[l,c]=[t,r].map(this.#y.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[i,s].map(this.#y.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#l.style.color="";const m=(b,A,T)=>{const P=new Array(256),V=(d-u)/T,q=b/255,N=(A-b)/(255*T);let D=0;for(let S=0;S<=T;S++){const F=Math.round(u+S*V),I=q+S*N;for(let O=D;O<=F;O++)P[O]=I;D=F+1}for(let S=D;S<256;S++)P[S]=P[D-1];return P.join(",")},v=`g_${this.#n}_hcm_${e}_filter`,y=a.filter=this.#g(v);return this.#m(y),this.#p(m(h[0],f[0],5),m(h[1],f[1],5),m(h[2],f[2],5),y),a.url=this.#d(v),a.url}destroy(e=!1){e&&this.#s?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#i=0)}#f(e){const t=this.#o.createElementNS(pd,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#m(e){const t=this.#o.createElementNS(pd,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#g(e){const t=this.#o.createElementNS(pd,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,r){const i=this.#o.createElementNS(pd,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#p(e,t,r,i){const s=this.#o.createElementNS(pd,"feComponentTransfer");i.append(s),this.#u(s,"feFuncR",e),this.#u(s,"feFuncG",t),this.#u(s,"feFuncB",r)}#_(e,t){const r=this.#o.createElementNS(pd,"feComponentTransfer");t.append(r),this.#u(r,"feFuncA",e)}#y(e){return this.#l.style.color=e,o1(getComputedStyle(this.#l).getPropertyValue("color"))}}class iY{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(e){var t=this;return(0,Q.A)(function*({filename:r}){if(!t.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!r)throw new Error("Font filename must be specified.");const i=`${t.baseUrl}${r}`;return t._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}).apply(this,arguments)}_fetch(e){return(0,Q.A)(function*(){Br("Abstract method `_fetch` called.")})()}}class sY extends iY{_fetch(e){return(0,Q.A)(function*(){const t=yield r1(e,"arraybuffer");return new Uint8Array(t)})()}}class oY{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(e){var t=this;return(0,Q.A)(function*({filename:r}){if(!t.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!r)throw new Error("Wasm filename must be specified.");const i=`${t.baseUrl}${r}`;return t._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}).apply(this,arguments)}_fetch(e){return(0,Q.A)(function*(){Br("Abstract method `_fetch` called.")})()}}class aY extends oY{_fetch(e){return(0,Q.A)(function*(){const t=yield r1(e,"arraybuffer");return new Uint8Array(t)})()}}function kN(n){return RN.apply(this,arguments)}function RN(){return RN=(0,Q.A)(function*(n){const t=yield process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}),RN.apply(this,arguments)}ta&&_n("Please use the `legacy` build in Node.js environments.");class QTe extends rY{}class ZTe extends eY{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///home/runner/work/thunders-pwa/thunders-pwa/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class JTe extends tY{_fetch(e){return(0,Q.A)(function*(){return kN(e)})()}}class eSe extends iY{_fetch(e){return(0,Q.A)(function*(){return kN(e)})()}}class tSe extends oY{_fetch(e){return(0,Q.A)(function*(){return kN(e)})()}}const y_="__forcedDependency",{floor:lY,ceil:cY}=Math;function jC(n,e,t,r,i,s){n[4*e+0]=Math.min(n[4*e+0],t),n[4*e+1]=Math.min(n[4*e+1],r),n[4*e+2]=Math.max(n[4*e+2],i),n[4*e+3]=Math.max(n[4*e+3],s)}const NN=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class nSe{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===NN}minX(e){return this.#t[4*e+0]/256}minY(e){return this.#t[4*e+1]/256}maxX(e){return(this.#t[4*e+2]+1)/256}maxY(e){return(this.#t[4*e+3]+1)/256}}const zC=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};class rSe{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[y_]:[]};#r=new Map;#n=[];#o=[];#s=[[1,0,0,1,0,0]];#i=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#m;#g;#u;#p;constructor(e,t,r=!1){this.#f=e.width,this.#m=e.height,this.#_(t),r&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#_(e,this.#u)}#_(e,t){const r=new ArrayBuffer(4*e);this.#g=new Uint8ClampedArray(r),this.#u=new Uint32Array(r),t&&t.length>0?(this.#u.set(t),this.#u.fill(NN,t.length)):this.#u.fill(NN)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[y_]:{__proto__:this.#t[y_]}},this.#i={__proto__:this.#i},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(null===t)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#i=Object.getPrototypeOf(this.#i);const r=this.#n.pop();return void 0!==r&&(zC(this.#p,e)?.dependencies.add(r),this.#u[e]=this.#u[r]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return 0===this.#n.length?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return void 0!==t&&(zC(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#o.push(e),this}endMarkedContent(e){const t=this.#o.pop();return void 0!==t&&(zC(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#s.push(ht.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#r.set(e,t),this}recordSimpleDataFromNamed(e,t,r){this.#e[e]=this.#r.get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(y_,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(y_,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0),this}recordClipBox(e,t,r,i,s,o){const a=ht.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];ht.axialAlignedBoundingBox([r,s,i,o],a,l);const c=ht.intersect(this.#i,l);return c?(this.#i[0]=c[0],this.#i[1]=c[1],this.#i[2]=c[2],this.#i[3]=c[3]):(this.#i[0]=this.#i[1]=1/0,this.#i[2]=this.#i[3]=-1/0),this}recordBBox(e,t,r,i,s,o){const a=this.#i;if(a[0]===1/0)return this;const l=ht.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform());if(a[0]===-1/0)return ht.axialAlignedBoundingBox([r,s,i,o],l,this.#a),this;const c=[1/0,1/0,-1/0,-1/0];return ht.axialAlignedBoundingBox([r,s,i,o],l,c),this.#a[0]=Math.min(this.#a[0],Math.max(c[0],a[0])),this.#a[1]=Math.min(this.#a[1],Math.max(c[1],a[1])),this.#a[2]=Math.max(this.#a[2],Math.min(c[2],a[2])),this.#a[3]=Math.max(this.#a[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,t,r,i=1,s=0,o=0,a){const l=r.bbox;let c,u;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&this.#d.get(r),!1!==c&&(u=[0,0,0,0],ht.axialAlignedBoundingBox(l,r.fontMatrix,u),(1!==i||0!==s||0!==o)&&ht.scaleMinMax([i,0,0,-i,s,o],u),c)))return this.recordBBox(e,t,u[0],u[2],u[1],u[3]);if(!a)return this.recordFullPageBBox(e);const d=a();return l&&u&&void 0===c&&(c=u[0]<=s-d.actualBoundingBoxLeft&&u[2]>=s+d.actualBoundingBoxRight&&u[1]<=o-d.actualBoundingBoxAscent&&u[3]>=o+d.actualBoundingBoxDescent,this.#d.set(r,c),c)?this.recordBBox(e,t,u[0],u[2],u[1],u[3]):this.recordBBox(e,t,s-d.actualBoundingBoxLeft,s+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#a[0]=Math.max(0,this.#i[0]),this.#a[1]=Math.max(0,this.#i[1]),this.#a[2]=Math.min(this.#f,this.#i[2]),this.#a[3]=Math.min(this.#m,this.#i[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const r=this.#l,i=this.#e,s=this.#t;for(const o of t)o in this.#e?r.add(i[o]):o in s&&s[o].forEach(r.add,r);return this}recordNamedDependency(e,t){return this.#r.has(t)&&this.#l.add(this.#r.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[y_]),this.#p){const r=zC(this.#p,e),{dependencies:i}=r;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#o.forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(this.#c===e){const r=lY(256*this.#a[0]/this.#f),i=lY(256*this.#a[1]/this.#m),s=cY(256*this.#a[2]/this.#f),o=cY(256*this.#a[3]/this.#m);jC(this.#g,e,r,i,s,o);for(const a of this.#l)a!==e&&jC(this.#g,a,r,i,s,o);for(const a of this.#n)a!==e&&jC(this.#g,a,r,i,s,o);for(const a of this.#o)a!==e&&jC(this.#g,a,r,i,s,o);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const r=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#i[0]=Math.max(this.#i[0],this.#a[0]),this.#i[1]=Math.max(this.#i[1],this.#a[1]),this.#i[2]=Math.min(this.#i[2],this.#a[2]),this.#i[3]=Math.min(this.#i[3],this.#a[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new nSe(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class $C{#e;#t;#r;#n=0;#o=0;constructor(e,t,r){if(e instanceof $C&&e.#r===!!r)return e;this.#e=e,this.#t=t,this.#r=!!r}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#o++,this.#e.save(this.#t),this}restore(e){return this.#o>0&&(this.#e.restore(this.#t),this.#o--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#r||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,r,i,s,o){return this.#r||this.#e.recordClipBox(this.#t,t,r,i,s,o),this}recordBBox(e,t,r,i,s,o){return this.#r||this.#e.recordBBox(this.#t,t,r,i,s,o),this}recordCharacterBBox(e,t,r,i,s,o,a){return this.#r||this.#e.recordCharacterBBox(this.#t,t,r,i,s,o,a),this}recordFullPageBBox(e){return this.#r||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#r||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Vl_stroke=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],Vl_fill=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],Vl_imageXObject=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],Vl_rawFillPath=["filter","fillColor","fillAlpha"],Vl_showText=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],Vl_transform=["transform"],Vl_transformAndFill=["transform","fillColor"];function ON(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class LN{isModifyingCurrentTransform(){return!1}getPattern(){Br("Abstract method `getPattern` called.")}}class iSe extends LN{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return 0===this._p0[0]&&0===this._p0[1]&&(!this.isRadial()||0===this._p1[0]&&0===this._p1[1])}isRadial(){return"radial"===this._type}_createGradient(e,t=null){let r,i=this._p0,s=this._p1;if(t&&(i=i.slice(),s=s.slice(),ht.applyTransform(i,t),ht.applyTransform(s,t)),"axial"===this._type)r=e.createLinearGradient(i[0],i[1],s[0],s[1]);else if("radial"===this._type){let o=this._r0,a=this._r1;if(t){const l=new Float32Array(2);ht.singularValueDecompose2dScale(t,l),o*=l[0],a*=l[0]}r=e.createRadialGradient(i[0],i[1],o,s[0],s[1],a)}for(const o of this._colorStops)r.addColorStop(o[0],o[1]);return r}getPattern(e,t,r,i){let s;if("Stroke"===i||"Fill"===i){if(this.isOriginBased()){let h=ht.transform(r,t.baseTransform);this.matrix&&(h=ht.transform(h,this.matrix));const f=.001,m=Math.hypot(h[0],h[1]),v=Math.hypot(h[2],h[3]);if(Math.abs((h[0]*h[2]+h[1]*h[3])/(m*v))<f){if(!this.isRadial())return this._createGradient(e,h);if(Math.abs(m-v)<f)return this._createGradient(e,h)}}const o=t.current.getClippedPathBoundingBox(i,Ci(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=ht.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),ON(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(r);s.setTransform(d)}else ON(e,this._bbox),s=this._createGradient(e);return s}}function FN(n,e,t,r,i,s,o,a){const l=e.coords,c=e.colors,u=n.data,d=4*n.width;let h;l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=o,o=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=o,o=a,a=h),l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=o,o=h);const f=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,y=(l[r+1]+e.offsetY)*e.scaleY,b=(l[i]+e.offsetX)*e.scaleX,A=(l[i+1]+e.offsetY)*e.scaleY;if(m>=A)return;const T=c[s],P=c[s+1],V=c[s+2],q=c[o],N=c[o+1],D=c[o+2],S=c[a],F=c[a+1],I=c[a+2],O=Math.round(m),L=Math.round(A);let te,me,le,ue,he,be,Ge,Pe;for(let j=O;j<=L;j++){if(j<y){const fe=j<m?0:(m-j)/(m-y);te=f-(f-v)*fe,me=T-(T-q)*fe,le=P-(P-N)*fe,ue=V-(V-D)*fe}else{let fe;fe=j>A?1:y===A?0:(y-j)/(y-A),te=v-(v-b)*fe,me=q-(q-S)*fe,le=N-(N-F)*fe,ue=D-(D-I)*fe}let Y;Y=j<m?0:j>A?1:(m-j)/(m-A),he=f-(f-b)*Y,be=T-(T-S)*Y,Ge=P-(P-F)*Y,Pe=V-(V-I)*Y;const ne=Math.round(Math.min(te,he)),ie=Math.round(Math.max(te,he));let de=d*j+4*ne;for(let fe=ne;fe<=ie;fe++)Y=(te-fe)/(te-he),Y<0?Y=0:Y>1&&(Y=1),u[de++]=me-(me-be)*Y|0,u[de++]=le-(le-Ge)*Y|0,u[de++]=ue-(ue-Pe)*Y|0,u[de++]=255}}function sSe(n,e,t){const r=e.coords,i=e.colors;let s,o;switch(e.type){case 2:const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let d=0;d<c;d++,u++)FN(n,t,r[u],r[u+1],r[u+a],i[u],i[u+1],i[u+a]),FN(n,t,r[u+a+1],r[u+1],r[u+a],i[u+a+1],i[u+1],i[u+a])}break;case 1:for(s=0,o=r.length;s<o;s+=3)FN(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class oSe extends LN{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=c/d,m=u/h,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/m},A=r.getCanvas("mesh",d+4,h+4),T=A.context,P=T.createImageData(d,h);if(t){const q=P.data;for(let N=0,D=q.length;N<D;N+=4)q[N]=t[0],q[N+1]=t[1],q[N+2]=t[2],q[N+3]=255}for(const q of this._figures)sSe(P,q,v);return T.putImageData(P,2,2),{canvas:A.canvas,offsetX:a-2*f,offsetY:l-2*m,scaleX:f,scaleY:m}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){ON(e,this._bbox);const s=new Float32Array(2);if("Shading"===i)ht.singularValueDecompose2dScale(Ci(e),s);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,s);const[a,l]=s;ht.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=a,s[1]*=l}else ht.singularValueDecompose2dScale(t.baseTransform,s);const o=this._createMeshCanvas(s,"Shading"===i?null:this._background,t.cachedCanvases);return"Shading"!==i&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class aSe extends LN{getPattern(){return"hotpink"}}let cSe=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(t,r,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t,r){const{bbox:i,operatorList:s,paintType:o,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),RC("TilingType: "+a);const h=i[0],f=i[1],m=i[2],v=i[3],y=m-h,b=v-f,A=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,A);const[T,P]=A;ht.singularValueDecompose2dScale(this.baseTransform,A);const V=T*A[0],q=P*A[1];let N=y,D=b,S=!1,F=!1;const I=Math.ceil(u*V),O=Math.ceil(d*q);I>=Math.ceil(y*V)?N=u:S=!0,O>=Math.ceil(b*q)?D=d:F=!0;const me=this.getSizeAndScale(N,this.ctx.canvas.width,V),le=this.getSizeAndScale(D,this.ctx.canvas.height,q),ue=t.cachedCanvases.getCanvas("pattern",me.size,le.size),he=ue.context,be=c.createCanvasGraphics(he,r);if(be.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(be,o,l),he.translate(-me.scale*h,-le.scale*f),be.transform(0,me.scale,0,0,le.scale,0,0),he.save(),be.dependencyTracker?.save(),this.clipBbox(be,h,f,m,v),be.baseTransform=Ci(be.ctx),be.executeOperatorList(s),be.endDrawing(),be.dependencyTracker?.restore(),he.restore(),S||F){const Ge=ue.canvas;S&&(N=u),F&&(D=d);const Pe=this.getSizeAndScale(N,this.ctx.canvas.width,V),j=this.getSizeAndScale(D,this.ctx.canvas.height,q),Y=Pe.size,ne=j.size,ie=t.cachedCanvases.getCanvas("pattern-workaround",Y,ne),de=ie.context,fe=S?Math.floor(y/u):0,Ce=F?Math.floor(b/d):0;for(let Ie=0;Ie<=fe;Ie++)for(let ke=0;ke<=Ce;ke++)de.drawImage(Ge,Y*Ie,ne*ke,Y,ne,0,0,Y,ne);return{canvas:ie.canvas,scaleX:Pe.scale,scaleY:j.scale,offsetX:h,offsetY:f}}return{canvas:ue.canvas,scaleX:me.scale,scaleY:le.scale,offsetX:h,offsetY:f}}getSizeAndScale(t,r,i){const s=Math.max(n.MAX_PATTERN_SIZE,r);let o=Math.ceil(t*i);return o>=s?o=s:i=o/t,{scale:i,size:o}}clipBbox(t,r,i,s,o){t.ctx.rect(r,i,s-r,o-i),ht.axialAlignedBoundingBox([r,i,s,o],Ci(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,r,i){const s=t.ctx,o=t.current;switch(r){case 1:const{fillStyle:a,strokeStyle:l}=this.ctx;s.fillStyle=o.fillColor=a,s.strokeStyle=o.strokeColor=l;break;case 2:s.fillStyle=s.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new vTe(`Unsupported paint type: ${r}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,r,i,s,o){let a=i;"Shading"!==s&&(a=ht.transform(a,r.baseTransform),this.matrix&&(a=ht.transform(a,this.matrix)));const l=this.createPatternCanvas(r,o);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=t.createPattern(l.canvas,"repeat");return u.setTransform(c),u}}return n})();function dY({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=ys.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=r>>3,d=7&r,h=n.length;t=new Uint32Array(t.buffer);let f=0;for(let m=0;m<i;m++){for(const y=e+u;e<y;e++){const b=e<h?n[e]:255;t[f++]=128&b?c:l,t[f++]=64&b?c:l,t[f++]=32&b?c:l,t[f++]=16&b?c:l,t[f++]=8&b?c:l,t[f++]=4&b?c:l,t[f++]=2&b?c:l,t[f++]=1&b?c:l}if(0===d)continue;const v=e<h?n[e++]:255;for(let y=0;y<d;y++)t[f++]=v&1<<7-y?c:l}return{srcPos:e,destPos:f}}const VN=new DOMMatrix,tl=new Float32Array(2),b_=new Float32Array([1/0,1/0,-1/0,-1/0]);class fSe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache)this.canvasFactory.destroy(this.cache[e]),delete this.cache[e]}}function HC(n,e,t,r,i,s,o,a,l,c){const[u,d,h,f,m,v]=Ci(n);if(0===d&&0===h){const T=Math.round(o*u+m),V=Math.round(a*f+v),N=Math.abs(Math.round((o+l)*u+m)-T)||1,S=Math.abs(Math.round((a+c)*f+v)-V)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),T,V),n.drawImage(e,t,r,i,s,0,0,N,S),n.setTransform(u,d,h,f,m,v),[N,S]}if(0===u&&0===f){const T=Math.round(a*h+m),V=Math.round(o*d+v),N=Math.abs(Math.round((a+c)*h+m)-T)||1,S=Math.abs(Math.round((o+l)*d+v)-V)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,T,V),n.drawImage(e,t,r,i,s,0,0,S,N),n.setTransform(u,d,h,f,m,v),[S,N]}return n.drawImage(e,t,r,i,s,o,a,l,c),[Math.hypot(u,d)*l,Math.hypot(h,f)*c]}class gY{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=mN;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=0;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,r){r?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=b_.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e="Fill",t=null){const r=this.minMax.slice();if("Stroke"===e){t||Br("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(t,tl);const i=tl[0]*this.lineWidth/2,s=tl[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(b_,0)}getClippedPathBoundingBox(e="Fill",t=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function mY(n,e){if(e instanceof ImageData)return void n.putImageData(e,0,0);const t=e.height,r=e.width,i=t%16,s=(t-i)/16,o=0===i?s:s+1,a=n.createImageData(r,16);let c,l=0;const u=e.data,d=a.data;let h,f,m,v;if(e.kind===PC.GRAYSCALE_1BPP){const y=u.byteLength,b=new Uint32Array(d.buffer,0,d.byteLength>>2),A=b.length,T=r+7>>3,P=4294967295,V=ys.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(m=h<s?16:i,c=0,f=0;f<m;f++){const q=y-l;let N=0;const D=q>T?r:8*q-7,S=-8&D;let F=0,I=0;for(;N<S;N+=8)I=u[l++],b[c++]=128&I?P:V,b[c++]=64&I?P:V,b[c++]=32&I?P:V,b[c++]=16&I?P:V,b[c++]=8&I?P:V,b[c++]=4&I?P:V,b[c++]=2&I?P:V,b[c++]=1&I?P:V;for(;N<D;N++)0===F&&(I=u[l++],F=128),b[c++]=I&F?P:V,F>>=1}for(;c<A;)b[c++]=0;n.putImageData(a,0,16*h)}}else if(e.kind===PC.RGBA_32BPP){for(f=0,v=16*r*4,h=0;h<s;h++)d.set(u.subarray(l,l+v)),l+=v,n.putImageData(a,0,f),f+=16;h<o&&(v=r*i*4,d.set(u.subarray(l,l+v)),n.putImageData(a,0,f))}else{if(e.kind!==PC.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(m=16,v=r*m,h=0;h<o;h++){for(h>=s&&(m=i,v=r*m),c=0,f=v;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,16*h)}}}function _Y(n,e){if(e.bitmap)return void n.drawImage(e.bitmap,0,0);const t=e.height,r=e.width,i=t%16,s=(t-i)/16,o=0===i?s:s+1,a=n.createImageData(r,16);let l=0;const c=e.data,u=a.data;for(let d=0;d<o;d++){const h=d<s?16:i;({srcPos:l}=dY({src:c,srcPos:l,dest:u,width:r,height:h,nonBlackColor:0})),n.putImageData(a,0,16*d)}}function d1(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)void 0!==n[r]&&(e[r]=n[r]);void 0!==n.setLineDash&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function GC(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",void 0!==n.setLineDash&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;"none"!==e&&""!==e&&(n.filter="none")}function vY(n,e){if(e)return!0;ht.singularValueDecompose2dScale(n,tl);const t=Math.fround(du.pixelRatio*v_.PDF_TO_CSS_UNITS);return tl[0]<=t&&tl[1]<=t}const pSe=["butt","round","square"],gSe=["miter","round","bevel"],mSe={},yY={};class w_{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c,u){this.ctx=e,this.current=new gY(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new fSe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(e,t,r=null){return"string"==typeof t?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ci(this.compositeCtx))}this.ctx.save(),GC(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ci(this.ctx)}executeOperatorList(e,t,r,i,s){const o=e.argsArray,a=e.fnArray;let l=t||0;const c=o.length;if(c===l)return l;const u=c-l>10&&"function"==typeof r,d=u?Date.now()+15:0;let h=0;const f=this.commonObjs,m=this.objs;let v,y;for(;;){if(void 0!==i&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!s||s(l))if(v=a[l],y=o[l]??null,v!==e1.dependency)null===y?this[v](l):this[v](l,...y);else for(const b of y){this.dependencyTracker?.recordNamedData(b,l);const A=b.startsWith("g_")?f:m;if(!A.has(b))return A.get(b,r),l}if(l++,l===c)return l;if(u&&++h>10){if(Date.now()>d)return r(),l;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let u,d,s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=i,c="prescale1";for(;s>2&&a>1||o>2&&l>1;){let h=a,f=l;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(e,0,0,a,l,0,0,h,f),e=u.canvas,a=h,l=f,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e,t){const r=this.ctx,{width:i,height:s}=t,o=this.current.fillColor,a=this.current.patternFill,l=Ci(r);let c,u,d,h;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(F),c||(c=new Map,this._cachedBitmapsMap.set(F,c));const I=c.get(u);if(I&&!a){const O=Math.round(Math.min(l[0],l[2])+l[4]),L=Math.round(Math.min(l[1],l[3])+l[5]);return this.dependencyTracker?.recordDependencies(e,Vl_transformAndFill),{canvas:I,offsetX:O,offsetY:L}}d=I}d||(h=this.cachedCanvases.getCanvas("maskCanvas",i,s),_Y(h.context,t));let f=ht.transform(l,[1/i,0,0,-1/s,0,0]);f=ht.transform(f,[1,0,0,1,0,-s]);const m=b_.slice();ht.axialAlignedBoundingBox([0,0,i,s],f,m);const[v,y,b,A]=m,T=Math.round(b-v)||1,P=Math.round(A-y)||1,V=this.cachedCanvases.getCanvas("fillCanvas",T,P),q=V.context,N=v,D=y;q.translate(-N,-D),q.transform(...f),d||(d=this._scaleImage(h.canvas,uu(q)),d=d.img,c&&a&&c.set(u,d)),q.imageSmoothingEnabled=vY(Ci(q),t.interpolate),HC(q,d,0,0,d.width,d.height,0,0,i,s),q.globalCompositeOperation="source-in";const S=ht.transform(uu(q),[1,0,0,1,-N,-D]);return q.fillStyle=a?o.getPattern(r,this,S,"Fill",e):o,q.fillRect(0,0,i,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,V.canvas)),this.dependencyTracker?.recordDependencies(e,Vl_transformAndFill),{canvas:V.canvas,offsetX:Math.round(N),offsetY:Math.round(D)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=pSe[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=gSe[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[r,i]of t)switch(r){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),d1(this.suspendedCtx,o),function hSe(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,s,o,a){e.transform(t,r,i,s,o,a),this.__originalTransform(t,r,i,s,o,a)},n.setTransform=function(t,r,i,s,o,a){e.setTransform(t,r,i,s,o,a),this.__originalSetTransform(t,r,i,s,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,a){e.bezierCurveTo(t,r,i,s,o,a),this.__originalBezierCurveTo(t,r,i,s,o,a)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),d1(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],this.composeSMask(this.suspendedCtx,this.current.activeSMask,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(e,t,r,i){const s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;0===a||0===l||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,a,l,c,u,d){let h=e.canvas,f=l-u,m=c-d;if(o)if(f<0||m<0||f+r>h.width||m+i>h.height){const y=this.cachedCanvases.getCanvas("maskExtension",r,i),b=y.context;b.drawImage(h,-f,-m),b.globalCompositeOperation="destination-atop",b.fillStyle=o,b.fillRect(0,0,r,i),b.globalCompositeOperation="source-over",h=y.canvas,f=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(f,m,r,i),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(f,m,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,c,r,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(h,f,m,r,i,l,c,r,i),t.restore()}save(e){this.inSMaskMode&&d1(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){this.dependencyTracker?.restore(e),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&d1(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,r,i,s,o,a){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,r,i,s,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,i){let[s]=r;if(!i)return s||=r[0]=new Path2D,void this[t](e,s);if(null!==this.dependencyTracker){const o=t===e1.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}s instanceof Path2D||(s=r[0]=GK(s)),ht.axialAlignedBoundingBox(i,Ci(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"==typeof s&&s?.getPattern){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,uu(i),"Stroke",e),o){const a=new Path2D;a.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=a}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Vl_stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox("Stroke",Ci(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){const i=this.ctx,s=this.current.fillColor;let a=!1;if(this.current.patternFill){const c=s.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=s.getPattern(i,this,uu(i),"Fill",e),c){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=u}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==l&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,Vl_fill),a&&(i.restore(),this.dependencyTracker?.restore(e)),r&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Vl_rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=mSe}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=yY}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;void 0!==t&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(void 0!==t){const i=new Path2D,s=r.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:c,path:u}of t)u&&i.addPath(u,new DOMMatrix(o).preMultiplySelf(s).translate(a,l).scale(c,-c));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||mN,(0===s.fontMatrix[0]||0===s.fontMatrix[3])&&_n("Invalid font matrix for font "+t),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const o=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let u=r;r<16?u=16:r>100&&(u=100),this.current.fontSizeScale=r/u,this.ctx.font=`${c} ${l} ${u}px ${a}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#r(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i}paintChar(e,t,r,i,s,o){const a=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,h=3&u,f=!!(4&u),m=l.patternFill&&!c.missingFile,v=l.patternStroke&&!c.missingFile;let y;if((c.disableFontFace||f||m||v)&&!c.missingFile&&(y=c.getPathGenerator(this.commonObjs,t)),y&&(c.disableFontFace||m||v)){let b;if(a.save(),a.translate(r,i),a.scale(d,-d),this.dependencyTracker?.recordCharacterBBox(e,a,c),0===h||2===h)if(s){b=a.getTransform(),a.setTransform(...s);const A=this.#r(y,b,s);a.fill(A)}else a.fill(y);if(1===h||2===h)if(o){b||=a.getTransform(),a.setTransform(...o);const{a:A,b:T,c:P,d:V}=b,q=ht.inverseTransform(o),N=ht.transform([A,T,P,V,0,0],q);ht.singularValueDecompose2dScale(N,tl),a.lineWidth*=Math.max(tl[0],tl[1])/d,a.stroke(this.#r(y,b,o))}else a.lineWidth/=d,a.stroke(y);a.restore()}else(0===h||2===h)&&(a.fillText(t,r,i),this.dependencyTracker?.recordCharacterBBox(e,a,c,d,r,i,()=>a.measureText(t))),(1===h||2===h)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,a,c,d,r,i,()=>a.measureText(t)).recordDependencies(e,Vl_stroke),a.strokeText(t,r,i));f&&((this.pendingTextPaths||=[]).push({transform:Ci(a),x:r,y:i,fontSize:d,path:y}),this.dependencyTracker?.recordCharacterBBox(e,a,c,d,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return wn(this,"isFontSubpixelAAEnabled",r)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Vl_showText).resetBBox(e),4&this.current.textRenderingMode&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font)return this.showType3Text(e,t),void this.dependencyTracker?.recordShowTextOperation(e);const s=r.fontSize;if(0===s)return void this.dependencyTracker?.recordOperation(e);const o=this.ctx,a=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,u=r.fontDirection,d=r.textHScale*u,h=t.length,f=i.vertical,m=f?1:-1,v=i.defaultVMetrics,y=s*r.fontMatrix[0],b=0===r.textRenderingMode&&!i.disableFontFace&&!r.patternFill;let A,T;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),o.scale(d,u>0?-1:1);const P=3&r.textRenderingMode,q=1===P||2===P;if((0===P||2===P)&&r.patternFill){o.save();const I=r.fillColor.getPattern(o,this,uu(o),"Fill",e);A=Ci(o),o.restore(),o.fillStyle=I}if(q&&r.patternStroke){o.save();const I=r.strokeColor.getPattern(o,this,uu(o),"Stroke",e);T=Ci(o),o.restore(),o.strokeStyle=I}let N=r.lineWidth;const D=r.textMatrixScale;if(0===D||0===N?q&&(N=this.getSinglePixelWidth()):N/=D,1!==a&&(o.scale(a,a),N/=a),o.lineWidth=N,i.isInvalidPDFjsFont){const I=[];let O=0;for(const te of t)I.push(te.unicode),O+=te.width;const L=I.join("");if(o.fillText(L,0,0),null!==this.dependencyTracker){const te=o.measureText(L);this.dependencyTracker.recordBBox(e,this.ctx,-te.actualBoundingBoxLeft,te.actualBoundingBoxRight,-te.actualBoundingBoxAscent,te.actualBoundingBoxDescent).recordShowTextOperation(e)}return r.x+=O*y*d,o.restore(),void this.compose()}let F,S=0;for(F=0;F<h;++F){const I=t[F];if("number"==typeof I){S+=m*I*s/1e3;continue}let O=!1;const L=(I.isSpace?c:0)+l,te=I.fontChar,me=I.accent;let le,ue,be,he=I.width;if(f){const Pe=I.vmetric||v,j=-(I.vmetric?Pe[1]:.5*he)*y;he=Pe?-Pe[0]:he,le=j/a,ue=(S+Pe[2]*y)/a}else le=S/a,ue=0;if(i.remeasure&&he>0){be=o.measureText(te);const Pe=1e3*be.width/s*a;if(he<Pe&&this.isFontSubpixelAAEnabled){const j=he/Pe;O=!0,o.save(),o.scale(j,1),le/=j}else he!==Pe&&(le+=(he-Pe)/2e3*s/a)}this.contentVisible&&(I.isInFont||i.missingFile)&&(b&&!me?(o.fillText(te,le,ue),this.dependencyTracker?.recordCharacterBBox(e,o,be?{bbox:null}:i,s/a,le,ue,()=>be??o.measureText(te))):(this.paintChar(e,te,le,ue,A,T),me&&this.paintChar(e,me.fontChar,le+s*me.offset.x/a,ue-s*me.offset.y/a,A,T))),S+=f?he*y-L*u:he*y+L*u,O&&o.restore()}f?r.y-=S:r.x+=S*d,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,i=this.current,s=i.font,o=i.fontSize,a=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||mN,f=t.length;let v,y,b,A;if(3===i.textRenderingMode||0===o)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(d,a);const T=this.dependencyTracker;for(this.dependencyTracker=T?new $C(T,e):null,v=0;v<f;++v){if(y=t[v],"number"==typeof y){A=l*y*o/1e3,this.ctx.translate(A,0),i.x+=A*d;continue}const P=(y.isSpace?u:0)+c,V=s.charProcOperatorList[y.operatorListId];V?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...h),this.executeOperatorList(V),this.restore()):_n(`Type3 character "${y.operatorListId}" is not available.`);const q=[y.width,0];ht.applyTransform(q,h),b=q[0]*o+P,r.translate(b,0),i.x+=b*d}r.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,i,s,o,a){const l=new Path2D;l.rect(i,s,o-i,a-s),this.ctx.clip(l),this.dependencyTracker?.recordBBox(e,this.ctx,i,o,s,a).recordClipBox(e,this.ctx,i,o,s,a),this.endPath(e)}getColorN_Pattern(e,t){let r;if("TilingPattern"===t[0]){const i=this.baseTransform||Ci(this.ctx);r=new cSe(t,this.ctx,{createCanvasGraphics:(o,a)=>new w_(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new $C(this.dependencyTracker,a,!0):null)},i)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=function lSe(n){switch(n[0]){case"RadialAxial":return new iSe(n);case"Mesh":return new oSe(n);case"Dummy":return new aSe}throw new Error(`Unknown IR type: ${n[0]}`)}(this.getObject(e,t)),this.cachedPatterns.set(t,i)),r&&(i.matrix=r),i}shadingFill(e,t){if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,uu(r),"Shading",e);const s=uu(r);if(s){const{width:o,height:a}=r.canvas,l=b_.slice();ht.axialAlignedBoundingBox([0,0,o,a],s,l);const[c,u,d,h]=l;this.ctx.fillRect(c,u,d-c,h-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Vl_transform).recordDependencies(e,Vl_fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Br("Should not call beginInlineImage")}beginImageData(){Br("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Ci(this.ctx),r)){ht.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,s,o,a]=r,l=new Path2D;l.rect(i,s,o-i,a-s),this.ctx.clip(l),this.dependencyTracker?.recordClipBox(e,this.ctx,i,o,s,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||RC("TODO: Support non-isolated groups."),t.knockout&&_n("Knockout groups not supported.");const i=Ci(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=b_.slice();ht.axialAlignedBoundingBox(t.bbox,Ci(r),s),s=ht.intersect(s,[0,0,r.canvas.width,r.canvas.height])||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,c,u),f=h.context;f.translate(-a,-l),f.transform(...i);let m=new Path2D;const[v,y,b,A]=t.bbox;if(m.rect(v,y,b-v,A-y),t.matrix){const T=new Path2D;T.addPath(m,new DOMMatrix(t.matrix)),m=T}f.clip(m),t.smask&&this.smaskStack.push({canvas:h.canvas,context:f,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,l),r.save()),d1(r,f),this.ctx=f,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=Ci(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const o=b_.slice();ht.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],s,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,r,i,s,o){if(this.#e(),GC(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const a=r[2]-r[0],l=r[3]-r[1];if(o&&this.annotationCanvasMap){(i=i.slice())[4]-=r[0],i[5]-=r[1],(r=r.slice())[0]=r[1]=0,r[2]=a,r[3]=l,ht.singularValueDecompose2dScale(Ci(this.ctx),tl);const{viewportScale:c}=this,u=Math.ceil(a*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:h,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(tl[0],0,0,-tl[1],0,l*tl[1]),GC(this.ctx)}else{GC(this.ctx),this.endPath(e);const c=new Path2D;c.rect(r[0],r[1],a,l),this.ctx.clip(c)}}this.current=new gY(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const r=t.count;(t=this.getObject(e,t.data,t)).count=r;const i=this.ctx,s=this._createMaskCanvas(e,t),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,i=0,s=0,o,a){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const c=Ci(l);l.transform(r,i,s,o,0,0);const u=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]),this.dependencyTracker?.resetBBox(e);for(let d=0,h=a.length;d<h;d+=2){const f=ht.transform(c,[r,i,s,o,a[d],a[d+1]]);l.drawImage(u.canvas,f[4],f[5]),this.dependencyTracker?.recordBBox(e,this.ctx,f[4],f[4]+u.canvas.width,f[5],f[5]+u.canvas.height)}l.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Vl_transformAndFill);for(const o of t){const{data:a,width:l,height:c,transform:u}=o,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=d.context;h.save(),_Y(h,this.getObject(e,a,o)),h.globalCompositeOperation="source-in",h.fillStyle=s?i.getPattern(h,this,uu(r),"Fill",e):i,h.fillRect(0,0,l,c),h.restore(),r.save(),r.transform(...u),r.scale(1,-1),HC(r,d.canvas,0,0,l,c,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,l,0,c),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);r?this.paintInlineImageXObject(e,r):_n("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,r,i,s){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o)return void _n("Dependent image isn't ready yet");const a=o.width,l=o.height,c=[];for(let u=0,d=s.length;u<d;u+=2)c.push({transform:[r,0,0,i,s[u],s[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(e,o,c)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const r=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:o}=s;let a;if("none"!==o&&""!==o&&(s.filter="none"),s.scale(1/r,-1/i),t.bitmap)a=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)a=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",r,i).context;mY(u,t),a=this.applyTransferMapsToCanvas(u)}const l=this._scaleImage(a,uu(s));s.imageSmoothingEnabled=vY(Ci(s),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,Vl_imageXObject).recordOperation(e),HC(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const c=this.cachedCanvases.getCanvas("inlineImage",t.width,t.height).context;mY(c,t),s=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(e);for(const o of r)i.save(),i.transform(...o.transform),i.scale(1,-1),HC(i,s,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Vl_fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push("OC"===t?{visible:this.optionalContentConfig.isVisible(r)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===yY?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ci(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let o,a;if(0===r&&0===i){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(0===e)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(0===e)o=1/l,a=1/c;else{const u=l*e,d=c*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(t*s-r*i),c=Math.hypot(t,r),u=Math.hypot(i,s);if(0===e)o=u/l,a=c/l;else{const d=e*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[s,o]=this.getScaleForStroking();if(s===o)return r.lineWidth=(i||1)*s,void r.stroke(e);const a=r.getLineDash();t&&r.save(),r.scale(s,o),VN.a=1/s,VN.d=1/o;const l=new Path2D;if(l.addPath(e,VN),a.length>0){const c=Math.max(s,o);r.setLineDash(a.map(u=>u/c)),r.lineDashOffset/=c}r.lineWidth=i||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in e1)void 0!==w_.prototype[n]&&(w_.prototype[e1[n]]=w_.prototype[n]);class A_{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");this.#t=e}}class _Se{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const C_=Symbol("INTERNAL");class vSe{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){this.#e=!!(2&e),this.#t=!!(4&e),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?"OFF"!==t?.viewState:!this.#t||"OFF"!==e?.printState}_setVisible(e,t,r=!1){e!==C_&&Br("Internal method `_setVisible` called."),this.#r=r,this.#n=t}}class ySe{#e=null;#t=new Map;#r=null;#n=null;constructor(e,t=2){if(this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const r of e.groups)this.#t.set(r.id,new vSe(t,r));if("OFF"===e.baseState)for(const r of this.#t.values())r._setVisible(C_,!1);for(const r of e.on)this.#t.get(r)._setVisible(C_,!0);for(const r of e.off)this.#t.get(r)._setVisible(C_,!1);this.#r=this.getHash()}}#o(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let o;if(Array.isArray(s))o=this.#o(s);else{if(!this.#t.has(s))return _n(`Optional content group not found: ${s}`),!0;o=this.#t.get(s).visible}switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===r}isVisible(e){if(0===this.#t.size)return!0;if(!e)return RC("Optional content group not defined."),!0;if("OCG"===e.type)return this.#t.has(e.id)?this.#t.get(e.id).visible:(_n(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#o(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return _n(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return _n(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return _n(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return _n(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return _n(`Unknown optional content policy ${e.policy}.`),!0}return _n(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(i){if(r&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const o of s)o!==e&&this.#t.get(o)?._setVisible(C_,!1,!0);i._setVisible(C_,!!t,!0),this.#e=null}else _n(`Optional content group not found: ${e}`)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=this.#t.get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t)}}this.#e=null}get hasInitialVisibility(){return null===this.#r||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(null!==this.#e)return this.#e;const e=new YK;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class bSe{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Jn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,s?.length>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r):Jn(this._rangeReaders.some(function(s){return s._begin===e&&(s._enqueue(r),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Jn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new wSe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new ASe(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class wSe{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=CN(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var e=this;return(0,Q.A)(function*(){if(e._queuedChunks.length>0)return{value:e._queuedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ASe{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var e=this;return(0,Q.A)(function*(){if(e._queuedChunk){const r=e._queuedChunk;return e._queuedChunk=null,{value:r,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bY(n,e){const t=new Headers;if(!n||!e||"object"!=typeof e)return t;for(const r in e){const i=e[r];void 0!==i&&t.append(r,i)}return t}function qC(n){return URL.parse(n)?.origin??null}function wY({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||"bytes"!==n.get("Accept-Ranges")||"identity"!==(n.get("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i}function AY(n){const e=n.get("Content-Disposition");if(e){let t=function CSe(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),s(u)}if(t=function o(u){const d=[];let h;const f=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(h=f.exec(u));){let[,v,y,b]=h;if(v=parseInt(v,10),v in d){if(0===v)break}else d[v]=[y,b]}const m=[];for(let v=0;v<d.length&&v in d;++v){let[y,b]=d[v];b=a(b),y&&(b=unescape(b),0===v&&(b=l(b))),m.push(b)}return m.join("")}(n),t)return s(c(t));if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),s(u)}function r(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const h=new TextDecoder(u,{fatal:!0}),f=m_(d);d=h.decode(f),e=!1}catch{}}return d}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){const f=d[h].indexOf('"');-1!==f&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");return-1===d?u:i(u.slice(0,d),u.slice(d+1).replace(/^[^']*'/,""))}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,m){if("q"===f||"Q"===f)return i(h,m=(m=m.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(v,y){return String.fromCharCode(parseInt(y,16))}));try{m=atob(m)}catch{}return i(h,m)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(CN(t))return t}return null}function h1(n,e){return new NC(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,404===n||0===n&&e.startsWith("file:"))}function CY(n){return 200===n||206===n}function EY(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function IY(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(_n(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class ESe{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=bY(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Jn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ISe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new TSe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class ISe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,EY(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=qC(s.url),!CY(s.status))throw h1(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:l}=wY({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=AY(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Vh("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,Q.A)(function*(){yield e._headersCapability.promise;const{value:t,done:r}=yield e._reader.read();return r?{value:t,done:r}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:IY(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class TSe{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const o=i.url;fetch(o,EY(s,this._withCredentials,this._abortController)).then(a=>{const l=qC(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!CY(a.status))throw h1(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,Q.A)(function*(){yield e._readCapability.promise;const{value:t,done:r}=yield e._reader.read();return r?{value:t,done:r}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded}),{value:IY(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class xSe{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=bY(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",Jn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4!==i.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void r.onError(i.status);const s=i.status||200;if((200!==s||206!==r.expectedStatus)&&s!==r.expectedStatus)return void r.onError(i.status);const a=function SSe(n){const e=n.response;return"string"!=typeof e?e:m_(e).buffer}(i);if(206===s){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:a}):(_n('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class DSe{constructor(e){this._source=e,this._manager=new xSe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Jn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PSe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new MSe(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class PSe{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=qC(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=wY({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=AY(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=h1(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){var e=this;return(0,Q.A)(function*(){if(yield e._headersCapability.promise,e._storedError)throw e._storedError;if(e._cachedChunks.length>0)return{value:e._cachedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class MSe{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=qC(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=h1(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){var e=this;return(0,Q.A)(function*(){if(e._storedError)throw e._storedError;if(null!==e._queuedChunk){const r=e._queuedChunk;return e._queuedChunk=null,{value:r,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const kSe=/^[a-z][a-z0-9\-+.]+:/i;class NSe{constructor(e){this.source=e,this.url=function RSe(n){if(kSe.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}(e.url),Jn("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Jn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new OSe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new LSe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class OSe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{"ENOENT"===i.code&&(i=h1(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,Q.A)(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Vh("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class LSe{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!e.source.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,Q.A)(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const f1=Symbol("INITIAL_DATA");class TY{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:f1}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===f1)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==f1}delete(e){const t=this.#e[e];return!(!t||t.data===f1||(delete this.#e[e],0))}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==f1&&(yield[e,t])}}}class nl{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#o=null;#s=null;#i=0;#a=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#_=null;static#y=new Map;static#v=new Map;static#I=new WeakMap;static#C=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#g=e;else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');this.#g=new ReadableStream({start(l){l.enqueue(e),l.close()}})}this.#t=this.#l=t,this.#d=r.scale*du.pixelRatio,this.#h=r.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;this.#_=[1,0,0,-1,-o,a+s],this.#a=i,this.#i=s,nl.#D(),t.style.setProperty("--min-font-size",nl.#C),yp(t,r),this.#e.promise.finally(()=>{nl.#w.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=ys.platform;return wn(this,"fontFamilyMap",new Map([["sans-serif",(e&&t?"Calibri, ":"")+"sans-serif"],["monospace",(e&&t?"Lucida Console, ":"")+"monospace"]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:r})=>{r?this.#e.resolve():(this.#o??=t.lang,Object.assign(this.#f,t.styles),this.#S(t.items),e())},this.#e.reject)};return this.#c=this.#g.getReader(),nl.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*du.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,yp(this.#l,{rotation:i})),r!==this.#d){t?.(),this.#d=r;const s={div:null,properties:null,ctx:nl.#P(this.#o)};for(const o of this.#u)s.properties=this.#p.get(o),s.div=o,this.#E(s)}}cancel(){const e=new Vh("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#S(e){if(this.#r)return;this.#s.ctx??=nl.#P(this.#o);const t=this.#u,r=this.#m;for(const i of e){if(t.length>1e5)return _n("Ignoring additional textDivs for performance reasons."),void(this.#r=!0);if(void 0!==i.str)r.push(i.str),this.#b(i);else if("beginMarkedContentProps"===i.type||"beginMarkedContent"===i.type){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else"endMarkedContent"===i.type&&(this.#t=this.#t.parentNode)}}#b(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=ht.transform(this.#_,e.transform);let s=Math.atan2(i[1],i[0]);const o=this.#f[e.fontName];o.vertical&&(s+=Math.PI/2);let a=this.#n&&o.fontSubstitution||o.fontFamily;a=nl.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*nl.#F(a,o,this.#o);let u,d;0===s?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));const h=t.style;h.left=`${(100*u/this.#a).toFixed(2)}%`,h.top=`${(100*d/this.#i).toFixed(2)}%`,h.setProperty("--font-height",`${l.toFixed(2)}px`),h.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),0!==s&&(r.angle=s*(180/Math.PI));let f=!1;if(e.str.length>1)f=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const m=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);m!==v&&Math.max(m,v)/Math.min(m,v)>1.5&&(f=!0)}if(f&&(r.canvasWidth=o.vertical?e.height:e.width),this.#p.set(t,r),this.#s.div=t,this.#s.properties=r,this.#E(this.#s),r.hasText&&this.#t.append(t),r.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this.#t.append(m)}}#E(e){const{div:t,properties:r,ctx:i}=e,{style:s}=t;if(0!==r.canvasWidth&&r.hasText){const{fontFamily:o}=s,{canvasWidth:a,fontSize:l}=r;nl.#x(i,l*this.#d,o);const{width:c}=i.measureText(t.textContent);c>0&&s.setProperty("--scale-x",a*this.#d/c)}0!==r.angle&&s.setProperty("--rotate",`${r.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#y.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#P(e=null){let t=this.#v.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#I.set(t,{size:0,family:""})}return t}static#x(e,t,r){const i=this.#I.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#D(){if(null!==this.#C)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#C=e.getBoundingClientRect().height,e.remove()}static#F(e,t,r){const i=this.#y.get(e);if(i)return i;const s=this.#P(r);s.canvas.width=s.canvas.height=30,this.#x(s,30,e);const o=s.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return a?c=a/(a+l):(ys.platform.isFirefox&&_n("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),this.#y.set(e,c),c}}function xY(n={}){"string"==typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new jN,{docId:t}=e,r=n.url?function HTe(n){if(n instanceof URL)return n.href;if("string"==typeof n){if(ta)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,i=n.data?function GTe(n){if(ta&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if("string"==typeof n)return m_(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||"object"==typeof n&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,s=n.httpHeaders||null,o=!0===n.withCredentials,a=n.password??null,l=n.range instanceof DY?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let u=n.worker instanceof ro?n.worker:null;const d=n.verbosity,h="string"!=typeof n.docBaseUrl||LC(n.docBaseUrl)?null:n.docBaseUrl,f=BC(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(ta?JTe:nY),y=BC(n.iccUrl),b=BC(n.standardFontDataUrl),A=n.StandardFontDataFactory||(ta?eSe:sY),T=BC(n.wasmUrl),P=n.WasmFactory||(ta?tSe:aY),V=!0!==n.stopAtErrors,q=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=!1!==n.isEvalSupported,D="boolean"==typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!ta,S="boolean"==typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!ta&&(ys.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I="boolean"==typeof n.disableFontFace?n.disableFontFace:ta,O=!0===n.fontExtraProperties,L=!0===n.enableXfa,te=n.ownerDocument||globalThis.document,me=!0===n.disableRange,le=!0===n.disableStream,ue=!0===n.disableAutoFetch,he=!0===n.pdfBug,be=n.CanvasFactory||(ta?ZTe:YTe),Ge=n.FilterFactory||(ta?QTe:XTe),Pe=!0===n.enableHWA,j=!1!==n.useWasm,Y=l?l.length:n.length??NaN,ne="boolean"==typeof n.useSystemFonts?n.useSystemFonts:!ta&&!I,ie="boolean"==typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===nY&&A===sY&&P===aY&&f&&b&&T&&s1(f,document.baseURI)&&s1(b,document.baseURI)&&s1(T,document.baseURI));!function gTe(n){Number.isInteger(n)&&(kC=n)}(d);const fe={canvasFactory:new be({ownerDocument:te,enableHWA:Pe}),filterFactory:new Ge({docId:t,ownerDocument:te}),cMapReaderFactory:ie?null:new v({baseUrl:f,isCompressed:m}),standardFontDataFactory:ie?null:new A({baseUrl:b}),wasmFactory:ie?null:new P({baseUrl:T})};u||(u=ro.create({verbosity:d,port:A_.workerPort}),e._worker=u);const Ce={docId:t,apiVersion:"5.4.530",data:i,password:a,disableAutoFetch:ue,rangeChunkSize:c,length:Y,docBaseUrl:h,enableXfa:L,evaluatorOptions:{maxImageSize:q,disableFontFace:I,ignoreErrors:V,isEvalSupported:N,isOffscreenCanvasSupported:D,isImageDecoderSupported:S,canvasMaxAreaInBytes:F,fontExtraProperties:O,useSystemFonts:ne,useWasm:j,useWorkerFetch:ie,cMapUrl:f,iccUrl:y,standardFontDataUrl:b,wasmUrl:T}},Ie={ownerDocument:te,pdfBug:he,styleElement:null,loadingParams:{disableAutoFetch:ue,enableXfa:L}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ke=u.messageHandler.sendWithPromise("GetDocRequest",Ce,i?[i.buffer]:null);let Me;if(l)Me=new bSe(l,{disableRange:me,disableStream:le});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Je=s1(r)?ESe:ta?NSe:DSe;Me=new Je({url:r,length:Y,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:me,disableStream:le})}return ke.then(Je=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const et=new u1(t,Je,u.port),De=new jSe(et,e,Me,Ie,fe,Pe);e._transport=De,et.send("Ready",null)})}).catch(e._capability.reject),e}class jN{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId="d"+jN.#e++;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}destroy(){var e=this;return(0,Q.A)(function*(){e.destroyed=!0;try{e._worker?.port&&(e._worker._pendingDestroy=!0),yield e._transport?.destroy()}catch(t){throw e._worker?.port&&delete e._worker._pendingDestroy,t}e._transport=null,e._worker?.destroy(),e._worker=null})()}getData(){var e=this;return(0,Q.A)(function*(){return e._transport.getData()})()}}class DY{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#o=[];constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){this.#o.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const r of this.#o)r(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const r of this.#n)r(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#r)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){Br("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class BSe{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class USe{#e=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new BK:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new TY,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new i1({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wn(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var e=this;return(0,Q.A)(function*(){return e._transport._htmlForXfa?.children[e._pageIndex]||null})()}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:i="display",annotationMode:s=Fh.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:h=!1,recordOperations:f=!1,operationsFilter:m=null}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(i,s,d,h),{renderingIntent:y,cacheKey:b}=v;this.#e=!1,l||=this._transport.getOptionalContentConfig(y);let A=this._intentStates.get(b);A||(A=Object.create(null),this._intentStates.set(b,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const T=!!(4&y);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const P=!(!this._pdfBug||!globalThis.StepperManager?.enabled),V=!this.recordedBBoxes&&(f||P),q=S=>{if(A.renderTasks.delete(N),V){const F=N.gfx?.dependencyTracker.take();F&&(N.stepper&&N.stepper.setOperatorBBoxes(F,N.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=F))}T&&(this.#e=!0),this.#t(),S?(N.capability.reject(S),this._abortOperatorList({intentState:A,reason:S instanceof Error?S:new Error(S)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new E_({callback:q,params:{canvas:t,canvasContext:e,dependencyTracker:V?new rSe(t,A.operatorList.length,P):null,viewport:r,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,operationsFilter:m});(A.renderTasks||=new Set).add(N);const D=N.task;return Promise.all([A.displayReadyCapability.promise,l]).then(([S,F])=>{if(this.destroyed)q();else{if(this._stats?.time("Rendering"),!(F.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:S,optionalContentConfig:F}),N.operatorListChanged()}}).catch(q),D}getOperatorList({intent:e="display",annotationMode:t=Fh.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){const o=this._transport.getRenderingIntent(e,t,r,i,!0);let l,a=this._intentStates.get(o.cacheKey);return a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a)),a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))},a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:i=>i.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>n1.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};!function s(){o.read().then(function({value:l,done:c}){c?r(a):(a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),s())},i)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new BK),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:h})=>{h?c.streamReader=null:this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const h of c.renderTasks)h.operatorListChanged();this.#t()}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else{if(!c.opListReadCapability)throw d;c.opListReadCapability.reject(d)}}})};u()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof AN){let i=100;return t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i))}}if(e.streamReader.cancel(new Vh(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class ro{#e=Promise.withResolvers();#t=null;#r=null;#n=null;static#o=0;static#s=!1;static#i=new WeakMap;static{ta&&(this.#s=!0,A_.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!r?.origin||"null"===r.origin)return!1;const i=new URL(t,r);return r.origin===i.origin},this._createCDNWrapper=e=>URL.createObjectURL(new Blob([`await import("${e}");`],{type:"text/javascript"})),this.fromPort=e=>{if(function DTe(n){console.log("Deprecated API usage: "+n)}("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.create(e)}}constructor({name:e=null,port:t=null,verbosity:r=mTe()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(ro.#i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");ro.#i.set(t,this),this.#c(t)}else this.#l()}get promise(){return this.#e.promise}#a(){this.#e.resolve(),this.#t.send("configure",{verbosity:this.verbosity})}get port(){return this.#r}get messageHandler(){return this.#t}#c(e){this.#r=e,this.#t=new u1("main","worker",e),this.#t.on("ready",()=>{}),this.#a()}#l(){if(ro.#s||ro.#d)return void this.#h();let{workerSrc:e}=ro;try{ro._isSameOrigin(window.location,e)||(e=ro._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new u1("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?this.#e.reject(new Error("Worker was destroyed")):this.#h()},s=new AbortController;t.addEventListener("error",()=>{this.#n||i()},{signal:s.signal}),r.on("test",a=>{s.abort(),!this.destroyed&&a?(this.#t=r,this.#r=t,this.#n=t,this.#a()):i()}),r.on("ready",a=>{if(s.abort(),this.destroyed)i();else try{o()}catch{this.#h()}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};return void o()}catch{RC("The worker has been disabled.")}this.#h()}#h(){ro.#s||(_n("Setting up fake worker."),ro.#s=!0),ro._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this.#e.reject(new Error("Worker was destroyed"));const t=new KTe;this.#r=t;const r="fake"+ro.#o++,i=new u1(r+"_worker",r,t);e.setup(i,t),this.#t=new u1(r,r+"_worker",t),this.#a()}).catch(e=>{this.#e.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this.#n?.terminate(),this.#n=null,ro.#i.delete(this.#r),this.#r=null,this.#t?.destroy(),this.#t=null}static create(e){const t=this.#i.get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ro(e)}static get workerSrc(){if(A_.workerSrc)return A_.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#d(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var e=this;return wn(this,"_setupFakeWorkerGlobal",function(){var r=(0,Q.A)(function*(){return e.#d?e.#d:(yield import(e.workerSrc)).WorkerMessageHandler});return function(){return r.apply(this,arguments)}}()())}}class jSe{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#o=null;constructor(e,t,r,i,s,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new TY,this.fontLoader=new UTe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#s(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return wn(this,"annotationStorage",new PN)}getRenderingIntent(e,t=Fh.ENABLE,r=null,i=!1,s=!1){let o=2,a=DN;switch(e){case"any":o=1;break;case"display":break;case"print":o=4;break;default:_n(`getRenderingIntent - invalid intent: ${e}`)}const l=4&o&&r instanceof XK?r:this.annotationStorage;switch(t){case Fh.DISABLE:o+=64;break;case Fh.ENABLE:break;case Fh.ENABLE_FORMS:o+=16;break;case Fh.ENABLE_STORAGE:o+=32,a=l.serializable;break;default:_n(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=128),s&&(o+=256);const{ids:c,hash:u}=l.modifiedIds;return{renderingIntent:o,cacheKey:[o,a.hash,u].join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),nl.cleanup(),this._networkStream?.cancelAllRequests(new Vh("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){var e=this;const{messageHandler:t,loadingTask:r}=this;t.on("GetReader",(i,s)=>{Jn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:a}){a?s.close():(Jn(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o]))}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",function(){var i=(0,Q.A)(function*(s){yield e._fullReader.headersReady;const{isStreamingSupported:o,isRangeSupported:a,contentLength:l}=e._fullReader;return(!o||!a)&&(e._lastProgress&&r.onProgress?.(e._lastProgress),e._fullReader.onProgress=c=>{r.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:o,isRangeSupported:a,contentLength:l}});return function(s){return i.apply(this,arguments)}}()),t.on("GetRangeReader",(i,s)=>{Jn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);o?(s.onPull=()=>{o.read().then(function({value:a,done:l}){l?s.close():(Jn(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a]))}).catch(a=>{s.error(a)})},s.onCancel=a=>{o.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}):s.close()}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,r._capability.resolve(new BSe(i,this))}),t.on("DocException",i=>{r._capability.reject(xa(i))}),t.on("PasswordRequest",i=>{this.#o=Promise.withResolvers();try{if(!r.onPassword)throw xa(i);r.onPassword(o=>{o instanceof Error?this.#o.reject(o):this.#o.resolve({password:o})},i.code)}catch(s){this.#o.reject(s)}return this.#o.promise}),t.on("DataLoaded",i=>{r.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{this.destroyed||this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in o){const h=o.error;_n(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}const a=new zTe(o),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new jTe(a,l,o.extra,o.charProcOperatorList);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:u}=o;Jn(u,"The imageRef must be defined.");for(const h of this.#t.values())for(const[,f]of h.objs)if(f?.ref===u)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new $Te(o));break;case"Image":this.commonObjs.resolve(i,o);break;case"Pattern":const d=new Bs(o);this.commonObjs.resolve(i,d.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,o,a])=>{if(this.destroyed)return;const l=this.#t.get(s);if(!l.objs.has(i)){if(0===l._intentStates.size)return void a?.bitmap?.close();switch(o){case"Image":case"Pattern":l.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{this.destroyed||r.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",function(){var i=(0,Q.A)(function*(s){if(e.destroyed)throw new Error("Worker was destroyed.");const o=e[s.type];if(!o)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return o.fetch(s)});return function(s){return i.apply(this,arguments)}}())}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&_n("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#r.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#n.set(s.refStr,e);const o=new USe(t,s,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#r.set(t,i),i}getPageIndex(e){return MN(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new ySe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new _Se(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(){var e=this;return(0,Q.A)(function*(t=!1){if(!e.destroyed){yield e.messageHandler.sendWithPromise("Cleanup",null);for(const r of e.#t.values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);e.commonObjs.clear(),t||e.fontLoader.clear(),e.#e.clear(),e.filterFactory.destroy(!0),nl.cleanup()}}).apply(this,arguments)}cachedPageNumber(e){return MN(e)?this.#n.get(0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`)??null:null}}class zSe{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class E_{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null,enableHWA:f=!1,operationsFilter:m=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zSe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(E_.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");E_.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:s,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new w_(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),E_.#t.delete(this._canvas),e||=new AN(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){this.graphicsReady?(this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return(0,Q.A)(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper,e._operationsFilter),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),E_.#t.delete(e._canvas),e.callback())))})()}}const PY="5.4.530";class Bl{#e=null;#t=null;#r;#n=null;#o=!1;#s=!1;#i=null;#a;#c=null;#l=null;static#h=null;static get _keyboardManager(){return wn(this,"_keyboardManager",new l1([[["Escape","mac+Escape"],Bl.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Bl.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Bl.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Bl.prototype._moveToPrevious],[["Home","mac+Home"],Bl.prototype._moveToBeginning],[["End","mac+End"],Bl.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#i=e):this.#s=!0,this.#l=e?._uiManager||t,this.#a=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Bl.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#i&&(e.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#m.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#r,e.append(r),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Ll,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(e.id=`${this.#i.id}_colorpicker_dropdown`);for(const[r,i]of this.#l.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",Bl.#h[r]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.ariaSelected=i===this.#r,s.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#m.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:Zn.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e)return void this.#g(e);const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){this.#p?e.target!==this.#e?e.target.nextSibling?.focus():this.#n.firstElementChild?.focus():this.#g(e)}_moveToPrevious(e){e.target!==this.#n?.firstElementChild&&e.target!==this.#e?(this.#p||this.#g(e),e.target.previousSibling?.focus()):this.#p&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){this.#p?this.#n.firstElementChild?.focus():this.#g(e)}_moveToEnd(e){this.#p?this.#n.lastElementChild?.focus():this.#g(e)}#m(e){Bl._keyboardManager.exec(this,e)}#g(e){if(this.#p)return void this.hideDropdown();if(this.#o=0===e.detail,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n)return void this.#n.classList.remove("hidden");const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#p)return void this.#i?.unselect();this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const r of this.#n.children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class p1{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,p1.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,color:r}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",p1.#n[e]),i.addEventListener("input",()=>{this.#r.updateParams(t,i.value)},{signal:this.#r._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function MY(n){return Math.floor(255*Math.max(0,Math.min(1,n))).toString(16).padStart(2,"0")}function g1(n){return Math.max(0,Math.min(255,255*n))}class kY{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=g1(e),e,e]}static G_HTML([e]){const t=MY(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(g1)}static RGB_HTML(e){return`#${e.map(MY).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[g1(1-Math.min(1,e+i)),g1(1-Math.min(1,r+i)),g1(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,o=1-r;return["CMYK",i,s,o,Math.min(i,s,o)]}}class HSe{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Br("Abstract method `_createSVG` called.")}}class WC extends HSe{_createSVG(e){return document.createElementNS(pd,e)}}const bp=new WeakSet,qSe=60*(new Date).getTimezoneOffset()*1e3;class zN{static create(e){switch(e.data.annotationType){case ls.LINK:return new $N(e);case ls.TEXT:return new KSe(e);case ls.WIDGET:switch(e.data.fieldType){case"Tx":return new YSe(e);case"Btn":return e.data.radioButton?new RY(e):e.data.checkBox?new QSe(e):new ZSe(e);case"Ch":return new JSe(e);case"Sig":return new XSe(e)}return new wp(e);case ls.POPUP:return new HN(e);case ls.FREETEXT:return new NY(e);case ls.LINE:return new txe(e);case ls.SQUARE:return new nxe(e);case ls.CIRCLE:return new rxe(e);case ls.POLYLINE:return new OY(e);case ls.CARET:return new sxe(e);case ls.INK:return new GN(e);case ls.POLYGON:return new ixe(e);case ls.HIGHLIGHT:return new LY(e);case ls.UNDERLINE:return new oxe(e);case ls.SQUIGGLY:return new axe(e);case ls.STRIKEOUT:return new lxe(e);case ls.STAMP:return new FY(e);case ls.FILEATTACHMENT:return new cxe(e);default:return new Ei(e)}}}class Ei{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!(!e?.str&&!t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ei._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:i}=this.data;let s=-1/0,o=-1/0;if(t?.length>=8){for(let a=0;a<t.length;a+=8)t[a+1]>o?(o=t[a+1],s=t[a+2]):t[a+1]===o&&(s=Math.max(s,t[a+2]));return[s,o]}if(r?.length>=1){for(const a of r)for(let l=0,c=a.length;l<c;l+=2)a[l+1]>o?(o=a[l+1],s=a[l]):a[l+1]===o&&(s=Math.max(s,a[l]));if(s!==1/0)return[s,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/r,e[1]=100*(e[1]-o)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Jy}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${Jy}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:r}=e;t&&this.#n(t);let i=this.#r?.popup||this.popup;!i&&r?.text&&(this._createPopup(r),i=this.#r.popup),i&&(i.updateEdited(e),r?.deleted&&(i.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;r?.splice(0,4,...e),t.left=100*(e[0]-a)/s+"%",t.top=100*(o-e[3]+l)/o+"%",0===i?(t.width=100*(e[2]-e[0])/s+"%",t.height=100*(e[3]-e[1])/o+"%"):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof wp)&&!(this instanceof $N)&&(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof HN){const{rotation:v}=t;return!t.hasOwnCanvas&&0!==v&&this.setRotation(v,s),s}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,y=t.borderStyle.verticalCornerRadius;switch(v>0||y>0?o.borderRadius=`calc(${v}px * var(--total-scale-factor)) / calc(${y}px * var(--total-scale-factor))`:this instanceof RY&&(o.borderRadius=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`),t.borderStyle.style){case 1:o.borderStyle="solid";break;case 2:o.borderStyle="dashed";break;case 3:_n("Unimplemented border style: beveled");break;case 4:_n("Unimplemented border style: inset");break;case 5:o.borderBottomStyle="solid"}const b=t.borderColor||null;b?(this.#t=!0,o.borderColor=ht.makeHexColor(0|b[0],0|b[1],0|b[2])):o.borderWidth=0}const c=ht.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=i.rawDims;o.left=100*(c[0]-h)/u+"%",o.top=100*(c[1]-f)/d+"%";const{rotation:m}=t;return t.hasOwnCanvas||0===m?(o.width=100*a/u+"%",o.height=100*l/d+"%"):this.setRotation(m,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:o}=this;e%180!=0&&([s,o]=[o,s]),t.style.width=100*s/r+"%",t.style.height=100*o/i+"%",t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],o=s[0],a=s.slice(1);i.target.style[r]=kY[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:kY[`${o}_rgb`](a)})};return wn(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===r||2===r})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const o=r[i];o&&(o({detail:{[i]:s},target:e}),delete t[i])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(v=>Math.fround(v));if(8===e.length){const[v,y,b,A]=e.subarray(2,6);if(i===v&&s===y&&t===b&&r===A)return}const{style:o}=this.container;let a;if(this.#t){const{borderColor:v,borderWidth:y}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const l=i-t,c=s-r,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const h=u.createElement("defs");d.append(h);const f=u.createElement("clipPath"),m=`clippath_${this.data.id}`;f.setAttribute("id",m),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let v=2,y=e.length;v<y;v+=8){const b=e[v],A=e[v+1],T=e[v+2],P=e[v+3],V=u.createElement("rect"),q=(T-t)/l,N=(s-A)/c,D=(b-T)/l,S=(A-P)/c;V.setAttribute("x",q),V.setAttribute("y",N),V.setAttribute("width",D),V.setAttribute("height",S),f.append(V),a?.push(`<rect vector-effect="non-scaling-stroke" x="${q}" y="${N}" width="${D}" height="${S}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(e=null){const{data:t}=this;let r,i;e?(r={str:e.text},i=e.date):(r=t.contentsObj,i=t.modificationDate),this.#r=new HN({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){Br("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:a}of i){if(-1===s||o===t)continue;const l="string"==typeof a?a:null,c=document.querySelector(`[data-element-id="${o}"]`);!c||bp.has(c)?r.push({id:o,exportValue:l,domElement:c}):_n(`_getElementsByName - element not allowed: ${o}`)}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&bp.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class WSe extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class $N extends Ei{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(r,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#r(r,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,r=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#e(),r&&(e.title=r)}_bindNamedAction(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),r&&(e.title=r),this.#e()}#t(e,t,r="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:r&&(e.title=r),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#r(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),r&&(e.title=r),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=r.get(i);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return _n('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(r||(e.onclick=()=>!1));e.onclick=()=>{r?.();const{fields:i,refs:s,include:o}=t,a=[];if(0!==i.length||0!==s.length){const u=new Set(s);for(const d of i){const h=this._fieldObjects[d]||[];for(const{id:f}of h)u.add(f)}for(const d of Object.values(this._fieldObjects))for(const h of d)u.has(h.id)===o&&a.push(h)}else for(const u of Object.values(this._fieldObjects))a.push(...u);const l=this.annotationStorage,c=[];for(const u of a){const{id:d}=u;switch(c.push(d),u.type){case"text":case"combobox":case"listbox":l.setValue(d,{value:u.defaultValue||""});break;case"checkbox":case"radiobutton":l.setValue(d,{value:u.defaultValue===u.exportValues});break;default:continue}const h=document.querySelector(`[data-element-id="${d}"]`);h&&(bp.has(h)?h.dispatchEvent(new Event("resetform")):_n(`_bindResetFormAction - element not allowed: ${d}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class KSe extends Ei{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class wp extends Ei{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ys.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{if("blur"===r){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if("focus"===r){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}})})}_setEventListeners(e,t,r,i){for(const[s,o]of r)("Action"===o||this.data.actions?.[o])&&(("Focus"===o||"Blur"===o)&&(t||={focused:!1}),this._setEventListener(e,t,s,o,i),"Focus"!==o||this.data.actions?.Blur?"Blur"===o&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":ht.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=e.style;let o;const l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2),u=Math.round(c/(1.35*i))||1;o=Math.min(i,l(c/u/1.35))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2);o=Math.min(i,l(c/1.35))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=ht.makeHexColor(r[0],r[1],r[2]),null!==this.data.textAlignment&&(s.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class YSe extends wp{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let s=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let a=i.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=a??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",a??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),bp.add(r),this.contentElement=r,r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:c,datetimeType:u,timeStep:d}=this.data,h=!!u&&this.enableScripting;c&&(r.title=c),this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",m=>{e.setValue(t,{value:m.target.value}),this.setPropertyOnSiblings(r,"value",m.target.value,"value"),l.formattedValue=null}),r.addEventListener("resetform",m=>{r.value=l.userValue=this.data.defaultFieldValue??"",l.formattedValue=null});let f=m=>{const{formattedValue:v}=l;null!=v&&(m.target.value=v),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{if(l.focused)return;const{target:y}=v;if(h&&(y.type=u,d&&(y.step=d)),l.userValue){const b=l.userValue;if(h)if("time"===u){const A=new Date(b),T=[A.getHours(),A.getMinutes(),A.getSeconds()];y.value=T.map(P=>P.toString().padStart(2,"0")).join(":")}else y.value=new Date(b-qSe).toISOString().split("date"===u?"T":".",1)[0];else y.value=b}l.lastCommittedValue=y.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target),this._dispatchEventFromSandbox({value(b){l.userValue=b.detail.value??"",h||e.setValue(t,{value:l.userValue.toString()}),b.target.value=l.userValue},formattedValue(b){const{formattedValue:A}=b.detail;l.formattedValue=A,null!=A&&b.target!==document.activeElement&&(b.target.value=A);const T={formattedValue:A};h&&(T.value=A),e.setValue(t,T)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:A}=b.detail,{target:T}=b;if(0===A)return void T.removeAttribute("maxLength");T.setAttribute("maxLength",A);let P=l.userValue;!P||P.length<=A||(P=P.slice(0,A),T.value=l.userValue=P,e.setValue(t,{value:P}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}},v)}),r.addEventListener("keydown",v=>{l.commitKey=1;let y=-1;if("Escape"===v.key?y=0:"Enter"!==v.key||this.data.multiLine?"Tab"===v.key&&(l.commitKey=3):y=2,-1===y)return;const{value:b}=v.target;l.lastCommittedValue!==b&&(l.lastCommittedValue=b,l.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:y,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const m=f;f=null,r.addEventListener("blur",v=>{if(!l.focused||!v.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{target:y}=v;let{value:b}=y;if(h){if(b&&"time"===u){const A=b.split(":").map(T=>parseInt(T,10));b=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),y.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();y.type="text"}l.userValue=b,l.lastCommittedValue!==b&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:l.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),m(v)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",v=>{l.lastCommittedValue=null;const{data:y,target:b}=v,{value:A,selectionStart:T,selectionEnd:P}=b;let V=T,q=P;switch(v.inputType){case"deleteWordBackward":{const N=A.substring(0,T).match(/\w*[^\w]*$/);N&&(V-=N[0].length);break}case"deleteWordForward":{const N=A.substring(T).match(/^[^\w]*\w*/);N&&(q+=N[0].length);break}case"deleteContentBackward":T===P&&(V-=1);break;case"deleteContentForward":T===P&&(q+=1)}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:y||"",willCommit:!1,selStart:V,selEnd:q}})}),this._setEventListeners(r,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class XSe extends wp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class QSe extends wp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;"string"==typeof i&&(i="Off"!==i,e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return bp.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{o.target.checked=(t.defaultFieldValue||"Off")===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{this._dispatchEventFromSandbox({value(l){l.target.checked="Off"!==l.detail.value,e.setValue(r,{value:l.target.checked})}},o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class RY extends wp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof i&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(bp.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=null!=a&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const h=u&&d.id===r;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}}},a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class ZSe extends $N{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class JSe extends wp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");bp.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const h of i.options)h.selected=h.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,r.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let o=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:h,multiple:f}=i;return f?Array.prototype.filter.call(h,m=>m.selected).map(m=>m[d]):-1===h.selectedIndex?null:h[h.selectedIndex][d]};let l=a(!1);const c=u=>Array.prototype.map.call(u.target.options,h=>({displayValue:h.textContent,exportValue:h.value}));return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{this._dispatchEventFromSandbox({value(h){o?.();const f=h.detail.value,m=new Set(Array.isArray(f)?f:[f]);for(const v of i.options)v.selected=m.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(h){i.multiple=!0},remove(h){const f=i.options,m=h.detail.remove;f[m].selected=!1,i.remove(m),f.length>0&&-1===Array.prototype.findIndex.call(f,y=>y.selected)&&(f[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(h){const{index:f,displayValue:m,exportValue:v}=h.detail.insert,y=i.children[f],b=document.createElement("option");b.textContent=m,b.value=v,y?y.before(b):i.append(b),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},items(h){const{items:f}=h.detail;for(;0!==i.length;)i.remove(0);for(const m of f){const{displayValue:v,exportValue:y}=m,b=document.createElement("option");b.textContent=v,b.value=y,i.append(b)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){const f=new Set(h.detail.indices);for(const m of h.target.options)m.selected=f.has(m.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}},u)}),i.addEventListener("input",u=>{const d=a(!0),h=a(!1);e.setValue(t,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class HN extends Ei{constructor(e){const{data:t,elements:r,parent:i}=e,s=!!i._commentManager;if(super(e,{isRenderable:!s&&Ei._hasPopupData(t)}),this.elements=r,s&&Ei._hasPopupData(t)){const o=this.popup=this.#e();for(const a of r)a.popup=o}else this.popup=null}#e(){return new exe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),r=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${__}${i}`).join(",")),this.container}}class exe{#e=null;#t=this.#H.bind(this);#r=this.#B.bind(this);#n=this.#R.bind(this);#o=this.#A.bind(this);#s=null;#i=null;#a=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#_=null;#y=null;#v=null;#I=null;#C=null;#w=null;#S=!1;#b=null;#E=null;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d,commentManager:h=null}){this.#i=e,this.#C=i,this.#a=o,this.#I=a,this.#h=l,this.#s=t,this.#v=c,this.#d=u,this.#l=r,this.#e=h,this.#b=r[0],this.#c=EN.toDateObject(s),this.trigger=r.flatMap(f=>f.getElementsToTriggerPopup()),h||(this.#P(),this.#i.hidden=!0,d&&this.#A())}#P(){if(this.#g)return;this.#g=new AbortController;const{signal:e}=this.#g;for(const t of this.trigger)t.addEventListener("click",this.#o,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#r,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#x(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#_=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p)return void(this.#p.parentNode||this.#b.container.after(this.#p));if(this.#_||this.#x(),!this.#_)return;const{signal:e}=this.#g=new AbortController,t=this.#b.hasOwnCommentButton,r=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},s=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#b.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=this.#p=document.createElement("button");o.className="annotationCommentButton";const a=this.#b.container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#D(),o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),a.after(o)}}#D(){if(this.#b.extraPopupElement&&!this.#b.editor)return;this.#p||this.renderCommentButton();const[e,t]=this.#_,{style:r}=this.#p;r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`}#F(){this.#b.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#b.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:i,modificationDate:s}=this.#b.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:i,modificationDate:s}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#b.commentText,this.#E}set comment(e){e!==this.comment&&(this.#b.commentText=this.#E=e)}focus(){this.#b.container?.focus()}get parentBoundingClientRect(){return this.#b.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:e,y:t,height:r}=this.#p.getBoundingClientRect(),{x:i,y:s,width:o,height:a}=this.#b.layer.getBoundingClientRect();return[(e-i)/o,(t+r-s)/a]}set commentPopupPosition(e){this.#y=e}hasDefaultPopupPosition(){return null===this.#y}get commentButtonPosition(){return this.#_}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=this.#y||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:s,y:o,width:a,height:l}=i;this.#e.showDialog(null,this,s+t*a,o+r*l,{...e,parentDimensions:i})}render(){if(this.#m)return;const e=this.#m=document.createElement("div");if(e.className="popup",this.#s){const r=e.style.outlineColor=ht.makeHexColor(...this.#s);e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#C?.str){const r=document.createElement("span");r.className="title",t.append(r),({dir:r.dir,str:r.textContent}=this.#C)}if(e.append(t),this.#c){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),r.dateTime=this.#c.toISOString(),t.append(r)}HK({html:this.#k||this.#a.str,dir:this.#a?.dir,className:"popupContent"},e),this.#i.append(e)}get#k(){const e=this.#I,t=this.#a;return e?.str&&(!t?.str||t.str===e.str)&&this.#I.html||null}get#N(){return this.#k?.attributes?.style?.fontSize||0}get#V(){return this.#k?.attributes?.style?.color||null}#O(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#V,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:i});return r}#H(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#f)&&this.#A()}updateEdited({rect:e,popup:t,deleted:r}){if(this.#e)return r?(this.remove(),this.#E=null):t&&(t.deleted?this.remove():(this.#F(),this.#E=t.text)),void(e&&(this.#_=null,this.#x(),this.#D()));r||t?.deleted?this.remove():(this.#P(),this.#w||={contentsObj:this.#a,richText:this.#I},e&&(this.#u=null),t&&t.text&&(this.#I=this.#O(t.text),this.#c=EN.toDateObject(t.date),this.#a=null),this.#m?.remove(),this.#m=null)}resetEdited(){this.#w&&(({contentsObj:this.#a,richText:this.#I}=this.#w),this.#w=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#S=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(null!==this.#u)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=this.#h;let o=!!this.#d,a=o?this.#d:this.#v;for(const m of this.#l)if(!a||null!==ht.intersect(m.data.rect,a)){a=m.data.rect,o=!0;break}const l=ht.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]);this.#u=[100*(l[0]+(o?a[2]-a[0]+5:0)-i)/t,100*(l[1]-s)/r];const{style:f}=this.#i;f.left=`${this.#u[0]}%`,f.top=`${this.#u[1]}%`}#A(){this.#e?this.#e.toggleCommentPopup(this,!1):(this.#f=!this.#f,this.#f?(this.#R(),this.#i.addEventListener("click",this.#o),this.#i.addEventListener("keydown",this.#t)):(this.#B(),this.#i.removeEventListener("click",this.#o),this.#i.removeEventListener("keydown",this.#t)))}#R(){this.#m||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#T(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#B(){this.#i.classList.remove("focused"),!this.#f&&this.isVisible&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#S=this.isVisible,this.#S&&(this.#i.hidden=!0)}maybeShow(){this.#e||(this.#P(),this.#S&&(this.#m||this.#R(),this.#S=!1,this.#i.hidden=!1))}get isVisible(){return!this.#e&&!1===this.#i.hidden}}class NY extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Tn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class txe extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class nxe extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",t-s),o.setAttribute("height",r-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class rxe extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",r/2),o.setAttribute("rx",t/2-s/2),o.setAttribute("ry",r/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class OY extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i},width:s,height:o}=this;if(!t)return this.container;const a=this.svgFactory.create(s,o,!0);let l=[];for(let u=0,d=t.length;u<d;u+=2)l.push(`${t[u]-e[0]},${e[3]-t[u+1]}`);l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",r.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ixe extends OY{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sxe extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class GN extends Ei{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Tn.HIGHLIGHT:Tn.INK}#r(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:r,borderStyle:i,popupRef:s}}=this,{transform:o,width:a,height:l}=this.#r(t,e),c=this.svgFactory.create(a,l,!0),u=this.#e=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let d=0,h=r.length;d<h;d++){const f=this.svgFactory.createElement(this.svgElementName);this.#t.push(f),f.setAttribute("points",r[d].join(",")),u.append(f)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:r,rect:i}=e,s=this.#e;if(t>=0&&s.setAttribute("stroke-width",t||1),r)for(let o=0,a=this.#t.length;o<a;o++)this.#t[o].setAttribute("points",r[o].join(","));if(i){const{transform:o,width:a,height:l}=this.#r(this.data.rotation,i);s.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class LY extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Tn.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class oxe extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class axe extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class lxe extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class FY extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Tn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class cxe extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||0===t.fillAlpha?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=ys.platform;return e.addEventListener("keydown",s=>{"Enter"===s.key&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class qN{#e=null;#t=null;#r=null;#n=new Map;#o=null;#s=null;#i=[];#a=!1;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a,commentManager:l,linkService:c,annotationStorage:u}){this.div=e,this.#e=t,this.#t=r,this.#o=a||null,this.#s=c||null,this.#r=u||new PN,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return this.#n.size>0}render(e){var t=this;return(0,Q.A)(function*(){const{annotations:r}=e,i=t.div;yp(i,t.viewport);const s=new Map,o=[],a={data:null,layer:i,linkService:t.#s,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new WC,annotationStorage:t.#r,enableComment:!0===e.enableComment,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:t,elements:null};for(const l of r){if(l.noHTML)continue;const c=l.annotationType===ls.POPUP;if(c){const h=s.get(l.id);if(!h)continue;if(!t._commentManager){o.push(l);continue}a.elements=h}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const u=zN.create(a);if(!u.isRenderable)continue;if(!c&&(t.#i.push(u),l.popupRef)){const h=s.get(l.popupRef);h?h.push(u):s.set(l.popupRef,[u])}const d=u.render();l.hidden&&(d.style.visibility="hidden"),u._isEditable&&(t.#n.set(u.data.id,u),t._annotationEditorUIManager?.renderAnnotationElement(u))}yield t.#c();for(const l of o){const c=a.elements=s.get(l.id);a.data=l;const u=zN.create(a);if(!u.isRenderable)continue;const d=u.render();u.contentElement.id=`${__}${l.id}`,l.hidden&&(d.style.visibility="hidden"),c.at(-1).container.after(d)}t.#l()})()}#c(){var e=this;return(0,Q.A)(function*(){if(0===e.#i.length)return;e.div.replaceChildren();const t=[];if(!e.#a){e.#a=!0;for(const{contentElement:i,data:{id:s}}of e.#i){const o=i.id=`${__}${s}`;t.push(e.#o?.getAriaAttributes(o).then(a=>{if(a)for(const[l,c]of a)i.setAttribute(l,c)}))}}e.#i.sort(({data:{rect:[i,s,o,a]}},{data:{rect:[l,c,u,d]}})=>{if(i===o&&s===a)return 1;if(l===u&&c===d)return-1;const m=(s+a)/2,b=(c+d)/2;return m>=d&&b<=s?-1:b>=a&&m<=c?1:(i+o)/2-(l+u)/2});const r=document.createDocumentFragment();for(const i of e.#i)r.append(i.container),e._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&r.append(i.extraPopupElement.render());if(e.div.append(r),yield Promise.all(t),e.#e)for(const i of e.#i)e.#e.addPointerInTextLayer(i.contentElement,!1)})()}addLinkAnnotations(e){var t=this;return(0,Q.A)(function*(){const r={data:null,layer:t.div,linkService:t.#s,svgFactory:new WC,parent:t};for(const i of e){i.borderStyle||=qN._defaultBorderStyle,r.data=i;const s=zN.create(r);s.isRenderable&&(s.render(),s.contentElement.id=`${__}${i.id}`,t.#i.push(s))}yield t.#c()})()}update({viewport:e}){const t=this.div;this.viewport=e,yp(t,{rotation:e.rotation}),this.#l(),t.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?"CANVAS"===s.nodeName?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r);const o=this.#n.get(t);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,r),o._hasNoCanvas=!1):o.canvas=r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:r,rotation:i}=e,s=new WSe({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#r});return s.render(),s.contentElement.id=`${__}${r}`,s.createOrUpdatePopup(),this.#i.push(s),s}removeAnnotation(e){const t=this.#i.findIndex(i=>i.data.id===e);if(t<0)return;const[r]=this.#i.splice(t,1);this.#e?.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(0!==e.length){for(const t of e)t.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return wn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:1,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const KC=/\r\n?|\n/g;class Us extends Ut{#e="";#t=`${this.id}-editor`;#r=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Us.prototype,t=s=>s.isEmpty(),r=c1.TRANSLATE_SMALL,i=c1.TRANSLATE_BIG;return wn(this,"_keyboardManager",new l1([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Tn.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Us._defaultColor||Ut._defaultLineColor,this.#n=e.fontSize||Us._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){Ut.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Zn.FREETEXT_SIZE:Us._defaultFontSize=t;break;case Zn.FREETEXT_COLOR:Us._defaultColor=t}}updateParams(e,t){switch(e){case Zn.FREETEXT_SIZE:this.#o(t);break;case Zn.FREETEXT_COLOR:this.#s(t)}}static get defaultPropertiesToUpdate(){return[[Zn.FREETEXT_SIZE,Us._defaultFontSize],[Zn.FREETEXT_COLOR,Us._defaultColor||Ut._defaultLineColor]]}get propertiesToUpdate(){return[[Zn.FREETEXT_SIZE,this.#n],[Zn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new p1(this),[["colorPicker",this._colorPicker]]}get colorType(){return Zn.FREETEXT_COLOR}#o(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#a()},r=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(e){const t=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Us._internalPadding*e,-(Us._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#i(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&"BR"===r.nodeName||(e.push(Us.#c(r)),t=r);return e.join("\n")}#a(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:s}=this,o=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),r=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",a)}this.rotation%180==this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#i().trimEnd();if(e===t)return;const r=i=>{this.#e=i,i?(this.#l(),this._uiManager.rebuild(this),this.#a()):this.remove()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#a()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Us._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[c,u]=this.pageDimensions,[d,h]=this.pageTranslation;let f,m;switch(this.rotation){case 0:f=e+(o[0]-d)/c,m=t+this.height-(o[1]-h)/u;break;case 90:f=e+(o[0]-d)/c,m=t-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=e-this.width+(o[0]-d)/c,m=t-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=e+(o[0]-d-this.height*u)/c,m=t+(o[1]-h-this.width*c)/u,[a,l]=[-l,a]}this.setAt(f*i,m*s,a,l)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(KC,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(1===r.length&&"text/plain"===r[0])return;e.preventDefault();const i=Us.#d(t.getData("text")||"").replaceAll(KC,"\n");if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!i.includes("\n"))return o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){const f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(KC,"")),f!==this.editorDiv){let m=c;for(const v of this.editorDiv.childNodes)v!==f?m.push(Us.#c(v)):m=u}c.push(a.nodeValue.slice(0,l).replaceAll(KC,""))}else if(a===this.editorDiv){let f=c,m=0;for(const v of this.editorDiv.childNodes)m++===l&&(f=u),f.push(Us.#c(v))}this.#e=`${c.join("\n")}${i}${u.join("\n")}`,this.#l();const d=new Range;let h=Math.sumPrecise(c.map(f=>f.length));for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const m=f.nodeValue.length;if(h<=m){d.setStart(f,h),d.setEnd(f,h);break}h-=m}s.removeAllRanges(),s.addRange(d)}#l(){if(this.editorDiv.replaceChildren(),this.#e)for(const e of this.#e.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll("\xa0"," ")}static#d(e){return e.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Us._internalPadding*this.parentScale;return this.getRect(e,e)}static deserialize(e,t,r){var i=()=>super.deserialize,s=this;return(0,Q.A)(function*(){let o=null;if(e instanceof NY){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:d,id:h,popupRef:f,richText:m,contentsObj:v,creationDate:y,modificationDate:b},textContent:A,textPosition:T,parent:{page:{pageNumber:P}}}=e;if(!A||0===A.length)return null;o=e={annotationType:Tn.FREETEXT,color:Array.from(c),fontSize:l,value:A.join("\n"),position:T,pageIndex:P-1,rect:u.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:f,comment:v?.str||null,richText:m,creationDate:y,modificationDate:b}}const a=yield i().call(s,e,t,r);return a.#n=e.fontSize,a.color=ht.makeHexColor(...e.color),a.#e=Us.#d(e.value),a._initialData=o,e.comment&&a.setCommentData(e),a})()}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Ut._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!this.#f(r)?null:(r.id=this.annotationElementId,r)}#f(e){const{value:t,fontSize:r,color:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((o,a)=>o!==i[a])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:r}=t;r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,t.replaceChildren();for(const i of this.#e.split("\n")){const s=document.createElement("div");s.append(i?document.createTextNode(i):document.createElement("br")),t.append(s)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}let _t=(()=>class n{static PRECISION=1e-4;toSVGPath(){Br("Abstract method `toSVGPath` must be implemented.")}get box(){Br("Abstract getter `box` must be implemented.")}serialize(t,r){Br("Abstract method `serialize` must be implemented.")}static _rescale(t,r,i,s,o,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l]*s,a[l+1]=i+t[l+1]*o;return a}static _rescaleAndSwap(t,r,i,s,o,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=r+t[l+1]*s,a[l+1]=i+t[l]*o;return a}static _translate(t,r,i,s){s||=new Float32Array(t.length);for(let o=0,a=t.length;o<a;o+=2)s[o]=r+t[o],s[o+1]=i+t[o+1];return s}static svgRound(t){return Math.round(1e4*t)}static _normalizePoint(t,r,i,s,o){switch(o){case 90:return[1-r/i,t/s];case 180:return[1-t/i,1-r/s];case 270:return[r/i,1-t/s];default:return[t/i,r/s]}}static _normalizePagePoint(t,r,i){switch(i){case 90:return[1-r,t];case 180:return[1-t,1-r];case 270:return[r,1-t];default:return[t,r]}}static createBezierPoints(t,r,i,s,o,a){return[(t+5*i)/6,(r+5*s)/6,(5*i+o)/6,(5*s+a)/6,(i+o)/2,(s+a)/2]}})();class Ap{#e;#t=[];#r;#n;#o=[];#s=new Float32Array(18);#i;#a;#c;#l;#h;#d;#f=[];static#m=8;static#g=2;static#u=Ap.#m+Ap.#g;constructor({x:e,y:t},r,i,s,o,a=0){this.#e=r,this.#d=s*i,this.#n=o,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#r=a,this.#l=Ap.#m*i,this.#c=Ap.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#p(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[r,i,s,o]=this.#e;return[(this.#i+(e[0]-t[0])/2-r)/s,(this.#a+(e[1]-t[1])/2-i)/o,(this.#i+(t[0]-e[0])/2-r)/s,(this.#a+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#i=e,this.#a=t;const[r,i,s,o]=this.#e;let[a,l,c,u]=this.#s.subarray(8,12);const d=e-c,h=t-u,f=Math.hypot(d,h);if(f<this.#c)return!1;const m=f-this.#l,v=m/f,y=v*d,b=v*h;let A=a,T=l;a=c,l=u,c+=y,u+=b,this.#f?.push(e,t);const q=-b/m*this.#d,N=y/m*this.#d;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+q,u+N],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-q,u-N],16),isNaN(this.#s[6])?(0===this.#o.length&&(this.#s.set([a+q,l+N],2),this.#o.push(NaN,NaN,NaN,NaN,(a+q-r)/s,(l+N-i)/o),this.#s.set([a-q,l-N],14),this.#t.push(NaN,NaN,NaN,NaN,(a-q-r)/s,(l-N-i)/o)),this.#s.set([A,T,a,l,c,u],6),!this.isEmpty()):(this.#s.set([A,T,a,l,c,u],6),Math.abs(Math.atan2(T-l,A-a)-Math.atan2(b,y))<Math.PI/2?([a,l,c,u]=this.#s.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((a+c)/2-r)/s,((l+u)/2-i)/o),[a,l,A,T]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((A+a)/2-r)/s,((T+l)/2-i)/o),!0):([A,T,a,l,c,u]=this.#s.subarray(0,6),this.#o.push(((A+5*a)/6-r)/s,((T+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),[c,u,a,l,A,T]=this.#s.subarray(12,18),this.#t.push(((A+5*a)/6-r)/s,((T+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#o,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#_();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#v(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(r),r.join(" ")}#_(){const[e,t,r,i]=this.#e,[s,o,a,l]=this.#p();return`M${(this.#s[2]-e)/r} ${(this.#s[3]-t)/i} L${(this.#s[4]-e)/r} ${(this.#s[5]-t)/i} L${s} ${o} L${a} ${l} L${(this.#s[16]-e)/r} ${(this.#s[17]-t)/i} L${(this.#s[14]-e)/r} ${(this.#s[15]-t)/i} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,r,i,s]=this.#e,o=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[l,c,u,d]=this.#p();e.push(`L${(o[0]-t)/i} ${(o[1]-r)/s} L${l} ${c} L${u} ${d} L${(a[0]-t)/i} ${(a[1]-r)/s}`)}newFreeDrawOutline(e,t,r,i,s,o){return new VY(e,t,r,i,s,o)}getOutlines(){const e=this.#o,t=this.#t,r=this.#s,[i,s,o,a]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#f[d]-i)/o,l[d+1]=(this.#f[d+1]-s)/a;if(l[l.length-2]=(this.#i-i)/o,l[l.length-1]=(this.#a-s)/a,isNaN(r[6])&&!this.isEmpty())return this.#I(l);const c=new Float32Array(this.#o.length+24+this.#t.length);let u=e.length;for(let d=0;d<u;d+=2)isNaN(e[d])?c[d]=c[d+1]=NaN:(c[d]=e[d],c[d+1]=e[d+1]);u=this.#w(c,u);for(let d=t.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2)isNaN(t[d+h])?(c[u]=c[u+1]=NaN,u+=2):(c[u]=t[d+h],c[u+1]=t[d+h+1],u+=2);return this.#C(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#h,this.#r,this.#n)}#I(e){const t=this.#s,[r,i,s,o]=this.#e,[a,l,c,u]=this.#p(),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,this.#e,this.#h,this.#r,this.#n)}#C(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+6}#w(e,t){const r=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[s,o,a,l]=this.#e,[c,u,d,h]=this.#p();return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l],t),t+24}}class VY extends _t{#e;#t=new Float32Array(4);#r;#n;#o;#s;#i;constructor(e,t,r,i,s,o){super(),this.#i=e,this.#o=t,this.#e=r,this.#s=i,this.#r=s,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#a(o);const[a,l,c,u]=this.#t;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u}toSVGPath(){const e=[`M${this.#i[4]} ${this.#i[5]}`];for(let t=6,r=this.#i.length;t<r;t+=6)isNaN(this.#i[t])?e.push(`L${this.#i[t+4]} ${this.#i[t+5]}`):e.push(`C${this.#i[t]} ${this.#i[t+1]} ${this.#i[t+2]} ${this.#i[t+3]} ${this.#i[t+4]} ${this.#i[t+5]}`);return e.push("Z"),e.join(" ")}serialize([e,t,r,i],s){const o=r-e,a=i-t;let l,c;switch(s){case 0:l=_t._rescale(this.#i,e,i,o,-a),c=_t._rescale(this.#o,e,i,o,-a);break;case 90:l=_t._rescaleAndSwap(this.#i,e,t,o,a),c=_t._rescaleAndSwap(this.#o,e,t,o,a);break;case 180:l=_t._rescale(this.#i,r,t,-o,a),c=_t._rescale(this.#o,r,t,-o,a);break;case 270:l=_t._rescaleAndSwap(this.#i,r,i,-o,-a),c=_t._rescaleAndSwap(this.#o,r,i,-o,-a)}return{outline:Array.from(l),points:[Array.from(c)]}}#a(e){const t=this.#i;let r=t[4],i=t[5];const s=[r,i,r,i];let o=r,a=i,l=r,c=i;const u=e?Math.max:Math.min,d=new Float32Array(4);for(let f=6,m=t.length;f<m;f+=6){const v=t[f+4],y=t[f+5];isNaN(t[f])?(ht.pointBoundingBox(v,y,s),a>y?(o=v,a=y):a===y&&(o=u(o,v)),c<y?(l=v,c=y):c===y&&(l=u(l,v))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,ht.bezierBoundingBox(r,i,...t.slice(f,f+6),d),ht.rectBoundingBox(d[0],d[1],d[2],d[3],s),a>d[1]?(o=d[0],a=d[1]):a===d[1]&&(o=u(o,d[0])),c<d[3]?(l=d[2],c=d[3]):c===d[3]&&(l=u(l,d[2]))),r=v,i=y}const h=this.#t;h[0]=s[0]-this.#r,h[1]=s[1]-this.#r,h[2]=s[2]-s[0]+2*this.#r,h[3]=s[3]-s[1]+2*this.#r,this.firstPoint=[o,a],this.lastPoint=[l,c]}get box(){return this.#t}newOutliner(e,t,r,i,s,o=0){return new Ap(e,t,r,i,s,o)}getNewOutline(e,t){const[r,i,s,o]=this.#t,[a,l,c,u]=this.#e,d=s*c,h=o*u,f=r*c+a,m=i*u+l,v=this.newOutliner({x:this.#o[0]*d+f,y:this.#o[1]*h+m},this.#e,this.#s,e,this.#n,t??this.#r);for(let y=2;y<this.#o.length;y+=2)v.add({x:this.#o[y]*d+f,y:this.#o[y+1]*h+m});return v.getOutlines()}}class WN{#e;#t;#r;#n=[];#o=[];constructor(e,t=0,r=0,i=!0){const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:y,y:b,width:A,height:T}of e){const P=Math.floor((y-t)/a)*a,V=Math.ceil((y+A+t)/a)*a,q=Math.floor((b-t)/a)*a,N=Math.ceil((b+T+t)/a)*a;this.#n.push([P,q,N,!0],[V,q,N,!1]),ht.rectBoundingBox(P,q,V,N,s)}const l=s[2]-s[0]+2*r,c=s[3]-s[1]+2*r,u=s[0]-r,d=s[1]-r;let h=i?-1/0:1/0,f=1/0;const m=this.#n.at(i?-1:-2),v=[m[0],m[2]];for(const y of this.#n){const[b,A,T,P]=y;!P&&i?A<f?(f=A,h=b):A===f&&(h=Math.max(h,b)):P&&!i&&(A<f?(f=A,h=b):A===f&&(h=Math.min(h,b))),y[0]=(b-u)/l,y[1]=(A-d)/c,y[2]=(T-d)/c}this.#e=new Float32Array([u,d,l,c]),this.#t=[h,f],this.#r=v}getOutlines(){this.#n.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#a(t)):(this.#c(t),e.push(...this.#l(t)));return this.#s(e)}#s(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,u,d]=o;r.delete(o);let h=a,f=l;for(s=[a,c],i.push(s);;){let m;if(r.has(u))m=u;else{if(!r.has(d))break;m=d}r.delete(m),[a,l,c,u,d]=m,h!==a&&(s.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}s.push(h,f)}return new uxe(i,this.#e,this.#t,this.#r)}#i(e){const t=this.#o;let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1}#a([,e,t]){const r=this.#i(e);this.#o.splice(r,0,[e,t])}#c([,e,t]){const r=this.#i(e);for(let i=r;i<this.#o.length;i++){const[s,o]=this.#o[i];if(s!==e)break;if(s===e&&o===t)return void this.#o.splice(i,1)}for(let i=r-1;i>=0;i--){const[s,o]=this.#o[i];if(s!==e)break;if(s===e&&o===t)return void this.#o.splice(i,1)}}#l(e){const[t,r,i]=e,s=[[t,r,i]],o=this.#i(i);for(let a=0;a<o;a++){const[l,c]=this.#o[a];for(let u=0,d=s.length;u<d;u++){const[,h,f]=s[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)s[u][1]=c;else{if(1===d)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,f>c&&s.push([t,c,f])}}}return s}}class uxe extends _t{#e;#t;constructor(e,t,r,i){super(),this.#t=e,this.#e=t,this.firstPoint=r,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let s=2;s<t.length;s+=2){const o=t[s],a=t[s+1];o===r?(e.push(`V${a}`),i=a):a===i&&(e.push(`H${o}`),r=o)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],s){const o=[],a=r-e,l=i-t;for(const c of this.#t){const u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=e+c[d]*a,u[d+1]=i-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class KN extends Ap{newFreeDrawOutline(e,t,r,i,s,o){return new dxe(e,t,r,i,s,o)}}class dxe extends VY{newOutliner(e,t,r,i,s,o=0){return new KN(e,t,r,i,s,o)}}class Zi extends Ut{#e=null;#t=0;#r;#n=null;#o=null;#s=null;#i=null;#a=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#m=null;#g=null;#u="";#p;#_="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Tn.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Zi.prototype;return wn(this,"_keyboardManager",new l1([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Zi._defaultColor,this.#p=e.thickness||Zi._defaultThickness,this.opacity=e.opacity||Zi._defaultOpacity,this.#r=e.boxes||null,this.#_=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#b()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#i=e.focusNode,this.#a=e.focusOffset,this.#y(),this.#b(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#_}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new WN(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new WN(this.#r,.0025,.001,"ltr"===this._uiManager.direction);this.#s=t.getOutlines();const{firstPoint:r}=this.#l;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height];const{lastPoint:i}=this.#s;this.#m=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:r}){if(this.#l=e,this.#s=e.getNewOutline(this.#p/2+1.5,.0025),t>=0)this.#h=t,this.#n=r,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Zi.#E(this.#l.box,(d-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Zi.#E(this.#s.box,d),path:{d:this.#s.toSVGPath()}})}const[s,o,a,l]=e.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=a,this.height=l;break;case 90:{const[d,h]=this.parentDimensions;this.x=o,this.y=1-s,this.width=a*h/d,this.height=l*d/h;break}case 180:this.x=1-s,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[d,h]=this.parentDimensions;this.x=1-o,this.y=s,this.width=a*h/d,this.height=l*d/h;break}}const{firstPoint:c}=e;this.#f=[(c[0]-s)/a,(c[1]-o)/l];const{lastPoint:u}=this.#s;this.#m=[(u[0]-s)/a,(u[1]-o)/l]}static initialize(e,t){Ut.initialize(e,t),Zi._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Zn.HIGHLIGHT_COLOR:Zi._defaultColor=t;break;case Zn.HIGHLIGHT_THICKNESS:Zi._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Zn.HIGHLIGHT_COLOR:this.#I(t);break;case Zn.HIGHLIGHT_THICKNESS:this.#C(t)}}static get defaultPropertiesToUpdate(){return[[Zn.HIGHLIGHT_COLOR,Zi._defaultColor],[Zn.HIGHLIGHT_THICKNESS,Zi._defaultThickness]]}get propertiesToUpdate(){return[[Zn.HIGHLIGHT_COLOR,this.color||Zi._defaultColor],[Zn.HIGHLIGHT_THICKNESS,this.#p||Zi._defaultThickness],[Zn.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#o?.updateColor(this.color),super.onUpdatedColor()}#I(e){const t=(s,o)=>{this.color=s,this.opacity=o,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Zi._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#C(e){const t=this.#p,r=i=>{this.#p=i,this.#w(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Zn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#o=new Bl({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#D())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#S(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#b(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#S():e&&(this.#b(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#S(){null===this.#h||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#b(e=this.parent){null===this.#h&&(({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0)),this.#g=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,t,r,i],s){switch(s){case 90:return[1-t-i,e,i,r];case 180:return[1-e-r,1-t-i,r,i];case 270:return[t,1-e-r,i,r]}return[e,t,r,i]}rotate(e){const{drawLayer:t}=this.parent;let r;r=this.#d?Zi.#E(this.#l.box,e=(e-this.rotation+360)%360):Zi.#E([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),t.updateProperties(this.#g,{bbox:Zi.#E(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#P.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(),qK(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#P(e){Zi._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#x(!0);break;case 1:case 3:this.#x(!1)}}#x(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#i,this.#a)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#d||this.#x(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!e}}))}#D(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,s=this.#r,o=new Float32Array(8*s.length);let a=0;for(const{x:l,y:c,width:u,height:d}of s){const h=l*e+r,f=(1-c)*t+i;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*e,o[a+5]=o[a+7]=f-d*t,a+=8}return o}#k(e){return this.#l.serialize(e,this.#D())}static startHighlighting(e,t,{target:r,x:i,y:s}){const{x:o,y:a,width:l,height:c}=r.getBoundingClientRect(),u=new AbortController,d=e.combinedSignal(u),h=f=>{u.abort(),this.#V(e,f)};window.addEventListener("blur",h,{signal:d}),window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("pointerdown",Oi,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Ll,{signal:d}),r.addEventListener("pointermove",this.#N.bind(this,e),{signal:d}),this._freeHighlight=new KN({x:i,y:s},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static#N(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#V(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,r){var i=()=>super.deserialize,s=this;return(0,Q.A)(function*(){let o=null;if(e instanceof LY){const{data:{quadPoints:y,rect:b,rotation:A,id:T,color:P,opacity:V,popupRef:q,richText:N,contentsObj:D,creationDate:S,modificationDate:F},parent:{page:{pageNumber:I}}}=e;o=e={annotationType:Tn.HIGHLIGHT,color:Array.from(P),opacity:V,quadPoints:y,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:A,annotationElementId:T,id:T,deleted:!1,popupRef:q,richText:N,comment:D?.str||null,creationDate:S,modificationDate:F}}else if(e instanceof GN){const{data:{inkLists:y,rect:b,rotation:A,id:T,color:P,borderStyle:{rawWidth:V},popupRef:q,richText:N,contentsObj:D,creationDate:S,modificationDate:F},parent:{page:{pageNumber:I}}}=e;o=e={annotationType:Tn.HIGHLIGHT,color:Array.from(P),thickness:V,inkLists:y,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:A,annotationElementId:T,id:T,deleted:!1,popupRef:q,richText:N,comment:D?.str||null,creationDate:S,modificationDate:F}}const{color:a,quadPoints:l,inkLists:c,opacity:u}=e,d=yield i().call(s,e,t,r);d.color=ht.makeHexColor(...a),d.opacity=u||1,c&&(d.#p=e.thickness),d._initialData=o,e.comment&&d.setCommentData(e);const[h,f]=d.pageDimensions,[m,v]=d.pageTranslation;if(l){const y=d.#r=[];for(let b=0;b<l.length;b+=8)y.push({x:(l[b]-m)/h,y:1-(l[b+1]-v)/f,width:(l[b+2]-l[b])/h,height:(l[b+1]-l[b+5])/f});d.#y(),d.#b(),d.rotate(d.rotation)}else if(c){d.#d=!0;const y=c[0],b={x:y[0]-m,y:f-(y[1]-v)},A=new KN(b,[0,0,h,f],1,d.#p/2,!0,.001);for(let V=0,q=y.length;V<q;V+=2)b.x=y[V]-m,b.y=f-(y[V+1]-v),A.add(b);const{id:T,clipPathId:P}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);d.#v({highlightOutlines:A.getOutlines(),highlightId:T,clipPathId:P}),d.#b(),d.rotate(d.parentRotation)}return d})()}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#F(),outlines:this.#k(r.rect)}),this.addComment(r),this.annotationElementId&&!this.#O(r)?null:(r.id=this.annotationElementId,r)}#O(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class BY{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Br("Not implemented")}}let UY=(()=>{class n extends Ut{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#o=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#t=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#s(t),this.#c())}#s({drawOutlines:t,drawId:r,drawingOptions:i}){this.#e=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=this.#i(t,this.parent),this.#d(t.box)}#i(t,r){const{id:i}=r.drawLayer.draw(n._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,r){const i=new Set(Object.keys(t));for(const[s,o]of Object.entries(r))i.has(s)?Object.assign(t[s],o):t[s]=o;return t}static getDefaultDrawingOptions(t){Br("Not implemented")}static get typesMap(){Br("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(n.#r.updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,r[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,r[s]]);return t}_updateProperty(t,r,i){const s=this._drawingOptions,o=s[r],a=l=>{s.updateProperty(r,l);const c=this.#e.updateProperty(r,l);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(t,r){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#a(),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#c(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#a()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),r&&this.select()}#a(){null===this._drawId||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(null===this._drawId||this.parent!==t){if(null!==this._drawId)return void this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);this._drawingOptions.updateAll(),this._drawId=this.#i(this.#e,t)}}#l([t,r,i,s]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[r,1-t,i*(a/o),s*(o/a)];case 180:return[1-t,1-r,i,s];case 270:return[1-r,t,i*(a/o),s*(o/a)];default:return[t,r,i,s]}}#h(){const{x:t,y:r,width:i,height:s,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-r,t,i*(o/a),s*(a/o)];case 180:return[1-t,1-r,i,s];case 270:return[r,1-t,i*(o/a),s*(a/o)];default:return[t,r,i,s]}}#d(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:r,width:i,height:s,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((4*o+a)/90){case 1:return[1-r-s,t,s,i];case 2:return[1-t-i,1-r-s,i,s];case 3:return[r,1-t-i,s,i];case 4:return[t,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,t,i*(l/c),s*(c/l)];case 6:return[1-t-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-t-s*(c/l),i*(l/c),s*(c/l)];case 8:return[t-i,r-s,i,s];case 9:return[1-r,t-i,s,i];case 10:return[1-t,1-r,i,s];case 11:return[r-s,1-t,s,i];case 12:return[t-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),t-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-t,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-t,i*(l/c),s*(c/l)];default:return[t,r,i,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),i}static createDrawerInstance(t,r,i,s,o){Br("Not implemented")}static startDrawing(t,r,i,s){const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=s;if(gr.isInitializedAndDifferentPointerType(u))return;const{viewport:{rotation:d}}=t,{width:h,height:f}=o.getBoundingClientRect(),m=n.#n=new AbortController,v=t.combinedSignal(m);gr.setPointer(u,c),window.addEventListener("pointerup",y=>{gr.isSamePointerIdOrRemove(y.pointerId)&&this._endDraw(y)},{signal:v}),window.addEventListener("pointercancel",y=>{gr.isSamePointerIdOrRemove(y.pointerId)&&this._currentParent.endDrawingSession()},{signal:v}),window.addEventListener("pointerdown",y=>{gr.isSamePointerType(y.pointerType)&&(gr.initializeAndAddPointerId(y.pointerId),n.#r.isCancellable()&&(n.#r.removeLastElement(),n.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ll,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",y=>{gr.isSameTimeStamp(y.timeStamp)&&Oi(y)},{signal:v}),t.toggleDrawing(),r._editorUndoBar?.hide(),n.#r?t.drawLayer.updateProperties(this._currentDrawId,n.#r.startNew(a,l,h,f,d)):(r.updateUIForDefaultProperties(this),n.#r=this.createDrawerInstance(a,l,h,f,d),n.#o=this.getDefaultDrawingOptions(),this._currentParent=t,({id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(n.#o.toSVGProperties(),n.#r.defaultSVGProperties),!0,!1)))}static _drawMove(t){if(gr.isSameTimeStamp(t.timeStamp),!n.#r)return;const{offsetX:r,offsetY:i,pointerId:s}=t;if(gr.isSamePointerId(s)){if(gr.isUsingMultiplePointers())return void this._endDraw(t);this._currentParent.drawLayer.updateProperties(this._currentDrawId,n.#r.add(r,i)),gr.setTimeStamp(t.timeStamp),Oi(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,n.#r=null,n.#o=null,gr.clearTimeStamp()),n.#n&&(n.#n.abort(),n.#n=null,gr.clearPointerIds())}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),t?.target===r.div&&r.drawLayer.updateProperties(this._currentDrawId,n.#r.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=n.#r,s=this._currentDrawId,o=i.getLastElement();return void r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Zn.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Zn.DRAW_STEP),!n.#r.isEmpty()){const{pageDimensions:[i,s],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:n.#r.getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:n.#o,mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,i,s,o,a){Br("Not implemented")}static deserialize(t,r,i){var s=()=>super.deserialize,o=this;return(0,Q.A)(function*(){const{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:u}}=r.viewport,d=o.deserializeDraw(c,u,a,l,o._INNER_MARGIN,t),h=yield s().call(o,t,r,i);return h.createDrawingOptions(t),h.#s({drawOutlines:d}),h.#c(),h.onScaleChanging(),h.rotate(),h})()}serializeDraw(t){const[r,i]=this.pageTranslation,[s,o]=this.pageDimensions;return this.#e.serialize([r,i,s,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}return n})();class hxe{#e=new Float64Array(6);#t;#r;#n;#o;#s;#i="";#a=0;#c=new m1;#l;#h;constructor(e,t,r,i,s,o){this.#l=r,this.#h=i,this.#n=s,this.#o=o,[e,t]=this.#d(e,t);const a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t],this.#r=[{line:a,points:this.#s}],this.#e.set(a,0)}updateProperty(e,t){"stroke-width"===e&&(this.#o=t)}#d(e,t){return _t._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#r||0===this.#r.length}isCancellable(){return this.#s.length<=10}add(e,t){[e,t]=this.#d(e,t);const[r,i,s,o]=this.#e.subarray(2,6);return Math.hypot(this.#l*(e-s),this.#h*(t-o))<=2?null:(this.#s.push(e,t),isNaN(r)?(this.#e.set([s,o,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,i,s,o,e,t],0),this.#t.push(..._t.createBezierPoints(r,i,s,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){return this.add(e,t)||(2===this.#s.length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,s){this.#l=r,this.#h=i,this.#n=s,[e,t]=this.#d(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t];const a=this.#r.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#r.push({line:o,points:this.#s}),this.#e.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#s=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#c.removeLastElement();this.#r.pop(),this.#i="";for(let e=0,t=this.#r.length;e<t;e++){const{line:r,points:i}=this.#r[e];this.#t=r,this.#s=i,this.#a=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const e=_t.svgRound(this.#t[4]),t=_t.svgRound(this.#t[5]);if(2===this.#s.length)return this.#i=`${this.#i} M ${e} ${t} Z`,this.#i;if(this.#s.length<=6){const i=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,i)} M ${e} ${t}`,this.#a=6}if(4===this.#s.length){const i=_t.svgRound(this.#t[10]),s=_t.svgRound(this.#t[11]);return this.#i=`${this.#i} L ${i} ${s}`,this.#a=12,this.#i}const r=[];0===this.#a&&(r.push(`M ${e} ${t}`),this.#a=6);for(let i=this.#a,s=this.#t.length;i<s;i+=6){const[o,a,l,c,u,d]=this.#t.slice(i,i+6).map(_t.svgRound);r.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return this.#i+=r.join(" "),this.#a=this.#t.length,this.#i}getOutlines(e,t,r,i){const s=this.#r.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#c.build(this.#r,e,t,r,this.#n,this.#o,i),this.#e=null,this.#t=null,this.#r=null,this.#i=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class m1 extends _t{#e;#t=0;#r;#n;#o;#s;#i;#a;#c;build(e,t,r,i,s,o,a){this.#o=t,this.#s=r,this.#i=i,this.#a=s,this.#c=o,this.#r=a??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n)if(e.push(`M${_t.svgRound(t[4])} ${_t.svgRound(t[5])}`),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push(`L${_t.svgRound(t[10])} ${_t.svgRound(t[11])}`);else for(let r=6,i=t.length;r<i;r+=6){const[s,o,a,l,c,u]=t.subarray(r,r+6).map(_t.svgRound);e.push(`C${s} ${o} ${a} ${l} ${c} ${u}`)}else e.push("Z");return e.join("")}serialize([e,t,r,i],s){const o=[],a=[],[l,c,u,d]=this.#h();let h,f,m,v,y,b,A,T,P;switch(this.#a){case 0:P=_t._rescale,h=e,f=t+i,m=r,v=-i,y=e+l*r,b=t+(1-c-d)*i,A=e+(l+u)*r,T=t+(1-c)*i;break;case 90:P=_t._rescaleAndSwap,h=e,f=t,m=r,v=i,y=e+c*r,b=t+l*i,A=e+(c+d)*r,T=t+(l+u)*i;break;case 180:P=_t._rescale,h=e+r,f=t,m=-r,v=i,y=e+(1-l-u)*r,b=t+c*i,A=e+(1-l)*r,T=t+(c+d)*i;break;case 270:P=_t._rescaleAndSwap,h=e+r,f=t+i,m=-r,v=-i,y=e+(1-c-d)*r,b=t+(1-l-u)*i,A=e+(1-c)*r,T=t+(1-l)*i}for(const{line:V,points:q}of this.#n)o.push(P(V,h,f,m,v,s?new Array(V.length):null)),a.push(P(q,h,f,m,v,s?new Array(q.length):null));return{lines:o,points:a,rect:[y,b,A,T]}}static deserialize(e,t,r,i,s,{paths:{lines:o,points:a},rotation:l,thickness:c}){const u=[];let d,h,f,m,v;switch(l){case 0:v=_t._rescale,d=-e/r,h=t/i+1,f=1/r,m=-1/i;break;case 90:v=_t._rescaleAndSwap,d=-t/i,h=-e/r,f=1/i,m=1/r;break;case 180:v=_t._rescale,d=e/r+1,h=-t/i,f=-1/r,m=1/i;break;case 270:v=_t._rescaleAndSwap,d=t/i+1,h=e/r+1,f=-1/i,m=-1/r}if(!o){o=[];for(const b of a){const A=b.length;if(2===A){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(4===A){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const T=new Float32Array(3*(A-2));o.push(T);let[P,V,q,N]=b.subarray(0,4);T.set([NaN,NaN,NaN,NaN,P,V],0);for(let D=4;D<A;D+=2){const S=b[D],F=b[D+1];T.set(_t.createBezierPoints(P,V,q,N,S,F),3*(D-2)),[P,V,q,N]=[q,N,S,F]}}}for(let b=0,A=o.length;b<A;b++)u.push({line:v(o[b].map(T=>T??NaN),d,h,f,m),points:v(a[b].map(T=>T??NaN),d,h,f,m)});const y=new this.prototype.constructor;return y.build(u,r,i,1,l,c,s),y}#l(e=this.#c){const t=this.#r+e/2*this.#i;return this.#a%180==0?[t/this.#o,t/this.#s]:[t/this.#s,t/this.#o]}#h(){const[e,t,r,i]=this.#e,[s,o]=this.#l(0);return[e+s,t+o,r-2*s,i-2*o]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let a=4,l=i.length;a<l;a+=6)ht.pointBoundingBox(i[a],i[a+1],e);continue}let s=i[4],o=i[5];for(let a=6,l=i.length;a<l;a+=6){const[c,u,d,h,f,m]=i.subarray(a,a+6);ht.bezierBoundingBox(s,o,c,u,d,h,f,m,e),s=f,o=m}}const[t,r]=this.#l();e[0]=na(e[0]-t,0,1),e[1]=na(e[1]-r,0,1),e[2]=na(e[2]+t,0,1),e[3]=na(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return"stroke-width"===e?this.#f(t):null}#f(e){const[t,r]=this.#l();this.#c=e;const[i,s]=this.#l(),[o,a]=[i-t,s-r],l=this.#e;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}updateParentDimensions([e,t],r){const[i,s]=this.#l();this.#o=e,this.#s=t,this.#i=r;const[o,a]=this.#l(),l=o-i,c=a-s,u=this.#e;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(_t.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${_t.svgRound(e)} ${_t.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let r=0,i=0,s=0,o=0,a=0,l=0;switch(this.#t){case 90:i=t/e,s=-e/t,a=e;break;case 180:r=-1,o=-1,a=e,l=t;break;case 270:i=-t/e,s=e/t,l=t;break;default:return""}return`matrix(${r} ${i} ${s} ${o} ${_t.svgRound(a)} ${_t.svgRound(l)})`}getPathResizingSVGProperties([e,t,r,i]){const[s,o]=this.#l(),[a,l,c,u]=this.#e;if(Math.abs(c-s)<=_t.PRECISION||Math.abs(u-o)<=_t.PRECISION){const v=e+r/2-(a+c/2),y=t+i/2-(l+u/2);return{path:{"transform-origin":`${_t.svgRound(e)} ${_t.svgRound(t)}`,transform:`${this.rotationTransform} translate(${v} ${y})`}}}const d=(r-2*s)/(c-2*s),h=(i-2*o)/(u-2*o),f=c/r,m=u/i;return{path:{"transform-origin":`${_t.svgRound(a)} ${_t.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${m}) translate(${_t.svgRound(s)} ${_t.svgRound(o)}) scale(${d} ${h}) translate(${_t.svgRound(-s)} ${_t.svgRound(-o)})`}}}getPathResizedSVGProperties([e,t,r,i]){const[s,o]=this.#l(),a=this.#e,[l,c,u,d]=a;if(a[0]=e,a[1]=t,a[2]=r,a[3]=i,Math.abs(u-s)<=_t.PRECISION||Math.abs(d-o)<=_t.PRECISION){const y=e+r/2-(l+u/2),b=t+i/2-(c+d/2);for(const{line:A,points:T}of this.#n)_t._translate(A,y,b,A),_t._translate(T,y,b,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${_t.svgRound(e)} ${_t.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(r-2*s)/(u-2*s),f=(i-2*o)/(d-2*o),m=-h*(l+s)+e+s,v=-f*(c+o)+t+o;if(1!==h||1!==f||0!==m||0!==v)for(const{line:y,points:b}of this.#n)_t._rescale(y,m,v,h,f,y),_t._rescale(b,m,v,h,f,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${_t.svgRound(e)} ${_t.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],r){const[i,s]=r,o=this.#e,a=e-o[0],l=t-o[1];if(this.#o===i&&this.#s===s)for(const{line:c,points:u}of this.#n)_t._translate(c,a,l,c),_t._translate(u,a,l,u);else{const c=this.#o/i,u=this.#s/s;this.#o=i,this.#s=s;for(const{line:d,points:h}of this.#n)_t._rescale(d,a,l,c,u,d),_t._rescale(h,a,l,c,u,h);o[2]*=c,o[3]*=u}return o[0]=e,o[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${_t.svgRound(e)} ${_t.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${_t.svgRound(e[0])} ${_t.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class YC extends BY{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ut._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new YC(this._viewParameters);return e.updateAll(this),e}}class YN extends UY{static _type="ink";static _editorType=Tn.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Ut.initialize(e,t),this._defaultDrawingOptions=new YC(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return wn(this,"typesMap",new Map([[Zn.INK_THICKNESS,"stroke-width"],[Zn.INK_COLOR,"stroke"],[Zn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,r,i,s){return new hxe(e,t,r,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,r,i,s,o){return m1.deserialize(e,t,r,i,s,o)}static deserialize(e,t,r){var i=()=>super.deserialize,s=this;return(0,Q.A)(function*(){let o=null;if(e instanceof GN){const{data:{inkLists:l,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:v,richText:y,contentsObj:b,creationDate:A,modificationDate:T},parent:{page:{pageNumber:P}}}=e;o=e={annotationType:Tn.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:l},boxes:null,pageIndex:P-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:v,richText:y,comment:b?.str||null,creationDate:A,modificationDate:T}}const a=yield i().call(s,e,t,r);return a._initialData=o,e.comment&&a.setCommentData(e),a})()}get toolbarButtons(){return this._colorPicker||=new p1(this),[["colorPicker",this._colorPicker]]}get colorType(){return Zn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:r}=this;t.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:r}){this._drawingOptions=YN.getDefaultDrawingOptions({stroke:ht.makeHexColor(...e),"stroke-width":t,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":s,"stroke-width":o}}=this,a=Object.assign(super.serialize(e),{color:Ut._colorManager.convert(i),opacity:s,thickness:o,paths:{lines:t,points:r}});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!this.#e(a)?null:(a.id=this.annotationElementId,a)}#e(e){const{color:t,thickness:r,opacity:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,a)=>o!==t[a])||e.thickness!==r||e.opacity!==i||e.pageIndex!==s}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class XN extends m1{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class I_{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,r,i){return i-=t,0==(r-=e)?i>0?0:4:1===r?i+6:2-i}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,r,i,s,o,a){const l=this.#t(r,i,s,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8;if(0!==e[(r+this.#r[2*u])*t+(i+this.#r[2*u+1])])return u}return-1}static#o(e,t,r,i,s,o,a){const l=this.#t(r,i,s,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8;if(0!==e[(r+this.#r[2*u])*t+(i+this.#r[2*u+1])])return u}return-1}static#s(e,t,r,i){const s=e.length,o=new Int32Array(s);for(let u=0;u<s;u++)o[u]=e[u]<=i?1:0;for(let u=1;u<r-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*r-1-u]=0;let l,a=1;const c=[];for(let u=1;u<r-1;u++){l=1;for(let d=1;d<t-1;d++){const h=u*t+d,f=o[h];if(0===f)continue;let m=u,v=d;if(1===f&&0===o[h-1])a+=1,v-=1;else{if(!(f>=1&&0===o[h+1])){1!==f&&(l=Math.abs(f));continue}a+=1,v+=1,f>1&&(l=f)}const y=[d,u],b=v===d+1,A={isHole:b,points:y,id:a,parent:0};let T;c.push(A);for(const I of c)if(I.id===l){T=I;break}A.parent=T?T.isHole?b?T.parent:l:b?l:T.parent:b?l:0;const P=this.#n(o,t,u,d,m,v,0);if(-1===P){o[h]=-a,1!==o[h]&&(l=Math.abs(o[h]));continue}let V=this.#r[2*P],q=this.#r[2*P+1];const N=u+V,D=d+q;m=N,v=D;let S=u,F=d;for(;;){const I=this.#o(o,t,S,F,m,v,1);V=this.#r[2*I],q=this.#r[2*I+1];const O=S+V,L=F+q;y.push(L,O);const te=S*t+F;if(0===o[te+1]?o[te]=-a:1===o[te]&&(o[te]=a),O===u&&L===d&&S===N&&F===D){1!==o[h]&&(l=Math.abs(o[h]));break}m=S,v=F,S=O,F=L}}}return c}static#i(e,t,r,i){if(r-t<=4){for(let N=t;N<r-2;N+=2)i.push(e[N],e[N+1]);return}const s=e[t],o=e[t+1],a=e[r-4]-s,l=e[r-3]-o,c=Math.hypot(a,l),u=a/c,d=l/c,h=u*o-d*s,m=1/c,v=Math.atan(l/a),y=Math.cos(v),b=Math.sin(v),A=m*(Math.abs(y)+Math.abs(b)),T=m*(1-A+A**2),P=Math.max(Math.atan(Math.abs(b+y)*T),Math.atan(Math.abs(b-y)*T));let V=0,q=t;for(let N=t+2;N<r-2;N+=2){const D=Math.abs(h-u*e[N+1]+d*e[N]);D>V&&(q=N,V=D)}V>(c*P)**2?(this.#i(e,t,q+2,i),this.#i(e,q,r,i)):i.push(s,o)}static#a(e){const t=[],r=e.length;return this.#i(e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t}static#c(e,t,r,i,s,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let v=0;v<o;v++){const y=(v-c)**2;for(let b=0;b<o;b++)a[v*o+b]=Math.exp((y+(b-c)**2)/l)}const u=new Float32Array(256),d=-2*s**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/d);const f=new Uint8Array(e.length),m=new Uint32Array(256);for(let v=0;v<r;v++)for(let y=0;y<t;y++){const b=v*t+y,A=e[b];let T=0,P=0;for(let q=0;q<o;q++){const N=v+q-c;if(!(N<0||N>=r))for(let D=0;D<o;D++){const S=y+D-c;if(S<0||S>=t)continue;const F=e[N*t+S],I=a[q*o+D]*u[Math.abs(F-A)];T+=F*I,P+=I}}m[f[b]=Math.round(T/P)]++}return[f,m]}static#l(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t}static#h(e){const r=new Uint8ClampedArray(e.length>>2);let i=-1/0,s=1/0;for(let a=0,l=r.length;a<l;a++){const c=r[a]=e[a<<2];i=Math.max(i,c),s=Math.min(s,c)}const o=255/(i-s);for(let a=0,l=r.length;a<l;a++)r[a]=(r[a]-s)*o;return r}static#d(e){let t,r=-1/0,i=-1/0;const s=e.findIndex(l=>0!==l);let o=s,a=s;for(t=s;t<256;t++){const l=e[t];l>r&&(t-o>i&&(i=t-o,a=t-1),r=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:r,height:i}=e,{maxDim:s}=this.#e;let o=r,a=i;if(r>s||i>s){let h=r,f=i,m=Math.log2(Math.max(r,i)/s);const v=Math.floor(m);m=m===v?v-1:v;for(let b=0;b<m;b++){o=Math.ceil(h/2),a=Math.ceil(f/2);const A=new OffscreenCanvas(o,a);A.getContext("2d").drawImage(e,0,0,h,f,0,0,o,a),h=o,f=a,e!==t&&e.close(),e=A.transferToImageBitmap()}const y=Math.min(s/o,s/a);o=Math.round(o*y),a=Math.round(a*y)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[this.#h(u),o,a]}static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},s,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=u.font=`${r} ${i} 200px ${t}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:m,actualBoundingBoxAscent:v,actualBoundingBoxDescent:y,fontBoundingBoxAscent:b,fontBoundingBoxDescent:A,width:T}=u.measureText(e),V=Math.ceil(1.5*Math.max(Math.abs(f)+Math.abs(m)||0,T)),q=Math.ceil(1.5*Math.max(Math.abs(v)+Math.abs(y)||200,Math.abs(b)+Math.abs(A)||200));c=new OffscreenCanvas(V,q),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,V,q),u.fillStyle="black",u.fillText(e,.5*V/2,1.5*q/2);const N=this.#h(u.getImageData(0,0,V,q).data),D=this.#l(N),S=this.#d(D),F=this.#s(N,V,q,S);return this.processDrawnLines({lines:{curves:F,width:V,height:q},pageWidth:s,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,s){const[o,a,l]=this.#f(e),[c,u]=this.#c(o,a,l,Math.hypot(a,l)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),d=this.#d(u),h=this.#s(c,a,l,d);return this.processDrawnLines({lines:{curves:h,width:a,height:l},pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:o,areContours:a}){i%180!=0&&([t,r]=[r,t]);const{curves:l,width:c,height:u}=e,d=e.thickness??0,h=[],f=Math.min(t/c,r/u),m=f/t,v=f/r,y=[];for(const{points:A}of l){const T=o?this.#a(A):A;if(!T)continue;y.push(T);const P=T.length,V=new Float32Array(P),q=new Float32Array(3*(2===P?2:P-2));if(h.push({line:q,points:V}),2===P){V[0]=T[0]*m,V[1]=T[1]*v,q.set([NaN,NaN,NaN,NaN,V[0],V[1]],0);continue}let[N,D,S,F]=T;N*=m,D*=v,S*=m,F*=v,V.set([N,D,S,F],0),q.set([NaN,NaN,NaN,NaN,N,D],0);for(let I=4;I<P;I+=2){const O=V[I]=T[I]*m,L=V[I+1]=T[I+1]*v;q.set(_t.createBezierPoints(N,D,S,F,O,L),3*(I-2)),[N,D,S,F]=[S,F,O,L]}}if(0===h.length)return null;const b=a?new XN:new m1;return b.build(h,t,r,1,i,a?0:d,s),{outline:b,newCurves:y,areContours:a,thickness:d,width:c,height:u}}static compressSignature(e){return(0,Q.A)(function*({outlines:t,areContours:r,thickness:i,width:s,height:o}){let u,a=1/0,l=-1/0,c=0;for(const P of t){c+=P.length;for(let V=2,q=P.length;V<q;V++){const N=P[V]-P[V-2];a=Math.min(a,N),l=Math.max(l,N)}}u=a>=-128&&l<=127?Int8Array:a>=-32768&&l<=32767?Int16Array:Int32Array;const d=t.length,h=8+3*d,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=s,f[m++]=o,f[m++]=r?0:1,f[m++]=Math.max(0,Math.floor(i??0)),f[m++]=d,f[m++]=u.BYTES_PER_ELEMENT;for(const P of t)f[m++]=P.length-2,f[m++]=P[0],f[m++]=P[1];const v=new CompressionStream("deflate-raw"),y=v.writable.getWriter();yield y.ready,y.write(f);const b=u.prototype.constructor;for(const P of t){const V=new b(P.length-2);for(let q=2,N=P.length;q<N;q++)V[q-2]=P[q]-P[q-2];y.write(V)}y.close();const A=yield new Response(v.readable).arrayBuffer();return FK(new Uint8Array(A))}).apply(this,arguments)}static decompressSignature(e){return(0,Q.A)(function*(){try{const a=function TTe(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):m_(atob(n))}(e),{readable:l,writable:c}=new DecompressionStream("deflate-raw"),u=c.getWriter();yield u.ready,u.write(a).then((0,Q.A)(function*(){yield u.ready,yield u.close()})).catch(()=>{});let d=null,h=0;var i,t=!1,r=!1;try{for(var o,s=function hTe(n){var e,t,r,i=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(t&&null!=(e=n[t]))return e.call(n);if(r&&null!=(e=n[r]))return new SC(e.call(n));t="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(l);t=!(o=yield s.next()).done;t=!1){const D=o.value;d||=new Uint8Array(new Uint32Array(D.buffer,0,4)[0]),d.set(D,h),h+=D.length}}catch(D){r=!0,i=D}finally{try{t&&null!=s.return&&(yield s.return())}finally{if(r)throw i}}const f=new Uint32Array(d.buffer,0,d.length>>2),m=f[1];if(0!==m)throw new Error(`Invalid version: ${m}`);const v=f[2],y=f[3],b=0===f[4],A=f[5],T=f[6],V=[],q=(8+3*T)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(f[7]){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(d.buffer,q);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(d.buffer,q);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(d.buffer,q)}h=0;for(let D=0;D<T;D++){const S=f[3*D+8],F=new Float32Array(S+2);V.push(F);for(let I=0;I<2;I++)F[I]=f[3*D+8+I+1];for(let I=0;I<S;I++)F[I+2]=F[I]+N[h++]}return{areContours:b,thickness:A,outlines:V,width:v,height:y}}catch(a){return _n(`decompressSignature: ${a}`),null}})()}}class QN extends BY{constructor(){super(),super.updateProperties({fill:Ut._defaultLineColor,"stroke-width":0})}clone(){const e=new QN;return e.updateAll(this),e}}class ZN extends YC{constructor(e){super(e),super.updateProperties({stroke:Ut._defaultLineColor,"stroke-width":1})}clone(){const e=new ZN(this._viewParameters);return e.updateAll(this),e}}class fu extends UY{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=Tn.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Ut.initialize(e,t),this._defaultDrawingOptions=new QN,this._defaultDrawnSignatureOptions=new ZN(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return wn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(this.#r){const{lines:i,mustSmooth:s,areContours:o,description:a,uuid:l,heightInPage:c}=this.#r,{rawDims:{pageWidth:u,pageHeight:d},rotation:h}=this.parent.viewport,f=I_.processDrawnLines({lines:i,pageWidth:u,pageHeight:d,rotation:h,innerMargin:fu._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(f,c,a,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:r,width:i,height:s}=this.#r,o=Math.max(i,s);return{areContours:t,outline:I_.processDrawnLines({lines:{curves:e.map(l=>({points:l})),thickness:r,width:i,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,r,i){const{x:s,y:o}=this,{outline:a}=this.#r=e;let l;this.#e=a instanceof XN,this.description=r,this.#e?l=fu.getDefaultDrawingOptions():(l=fu._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});const[,c]=this.pageDimensions;let u=t/c;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:i}=this.parent.viewport;return I_.process(e,t,r,i,fu._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return I_.extractContoursFromText(e,t,r,i,s,fu._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:i}=this.parent.viewport;return I_.processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:fu._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=fu.getDefaultDrawingOptions():(this._drawingOptions=fu._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,s=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(s),e?(s.paths={lines:t,points:r},s.uuid=this.#n,s.isCopy=!0):s.lines=t,this.#t&&(s.accessibilityData={type:"Figure",alt:this.#t}),s}static deserializeDraw(e,t,r,i,s,o){return o.areContours?XN.deserialize(e,t,r,i,s,o):m1.deserialize(e,t,r,i,s,o)}static deserialize(e,t,r){var i=()=>super.deserialize,s=this;return(0,Q.A)(function*(){const o=yield i().call(s,e,t,r);return o.#e=e.areContours,o.description=e.accessibilityData?.alt||"",o.#n=e.uuid,o})()}}class fxe extends Ut{#e=null;#t=null;#r=null;#n=null;#o=null;#s="";#i=null;#a=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Tn.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#o=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Ut.initialize(e,t)}static isHandlingMimeForPasting(e){return IN.includes(e)}static paste(e,t){t.pasteEditor({mode:Tn.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){e?(this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#s=e.file.name),this.#g()):this.remove()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e)return void this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(){var e=this;return(0,Q.A)(function*(t=null,r=!0){if(e.hasAltTextData())return null;const{mlManager:i}=e._uiManager;if(!i)throw new Error("No ML.");if(!(yield i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||e.copyCanvas(null,null,!0).imageData,l=yield i.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return yield e.setGuessedAltText(c),r&&!e.hasAltTextData()&&(e.altTextData={alt:c,decorative:!1}),c}).apply(this,arguments)}#m(){var e=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#d(i,!0)).finally(()=>this.#f());if(this.#n){const i=this.#n;return this.#n=null,this._uiManager.enableWaiting(!0),void(this.#r=this._uiManager.imageManager.getFromUrl(i).then(s=>this.#d(s)).finally(()=>this.#f()))}if(this.#o){const i=this.#o;return this.#o=null,this._uiManager.enableWaiting(!0),void(this.#r=this._uiManager.imageManager.getFromFile(i).then(s=>this.#d(s)).finally(()=>this.#f()))}const t=document.createElement("input");t.type="file",t.accept=IN.join(",");const r=this._uiManager._signal;this.#r=new Promise(i=>{t.addEventListener("change",(0,Q.A)(function*(){if(t.files&&0!==t.files.length){e._uiManager.enableWaiting(!0);const s=yield e._uiManager.imageManager.getFromFile(t.files[0]);e._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:e._uiManager.useNewAltTextFlow}}),e.#d(s)}else e.remove();i()}),{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>this.#f()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#i?.remove(),this.#i=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&null===this.#i&&this.#m(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#m()}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#o||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#t=r,i&&(this.#e=i),this.#a=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==this.#c&&clearTimeout(this.#c),this.#c=setTimeout(()=>{this.#c=null,this.#p()},200))}#g(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,s]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,r=this.height*s;else if(t>o*i||r>o*s){const l=Math.min(o*i/t,o*s/r);t*=l,r*=l}this._uiManager.enableWaiting(!1);const a=this.#i=document.createElement("canvas");a.setAttribute("role","img"),this.addContainer(a),this.width=t/i,this.height=r/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:s}=this.#e,o=new du;let a=this.#e,l=i,c=s,u=null;if(t){if(i>t||s>t){const q=Math.min(t/i,t/s);l=Math.floor(i*q),c=Math.floor(s*q)}u=document.createElement("canvas");const h=u.width=Math.ceil(l*o.sx),f=u.height=Math.ceil(c*o.sy);this.#l||(a=this.#u(h,f));const m=u.getContext("2d");m.filter=this._uiManager.hcmFilter;let v="white",y="#cfcfd8";"none"!==this._uiManager.hcmFilter?y="black":kTe.isDarkMode&&(v="#8f8f9d",y="#42414d");const b=15,A=b*o.sx,T=b*o.sy,P=new OffscreenCanvas(2*A,2*T),V=P.getContext("2d");V.fillStyle=v,V.fillRect(0,0,2*A,2*T),V.fillStyle=y,V.fillRect(0,0,A,T),V.fillRect(A,T,A,T),m.fillStyle=m.createPattern(P,"repeat"),m.fillRect(0,0,h,f),m.drawImage(a,0,0,a.width,a.height,0,0,h,f)}let d=null;if(r){let h,f;if(o.symmetric&&a.width<e&&a.height<e)h=a.width,f=a.height;else if(a=this.#e,i>e||s>e){const y=Math.min(e/i,e/s);h=Math.floor(i*y),f=Math.floor(s*y),this.#l||(a=this.#u(h,f))}const v=new OffscreenCanvas(h,f).getContext("2d",{willReadFrequently:!0});v.drawImage(a,0,0,a.width,a.height,0,0,h,f),d={width:h,height:f,data:v.getImageData(0,0,h,f).data}}return{canvas:u,width:l,height:c,imageData:d}}#u(e,t){const{width:r,height:i}=this.#e;let s=r,o=i,a=this.#e;for(;s>2*e||o>2*t;){const l=s,c=o;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(s,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,s,o),a=u.transferToImageBitmap()}return a}#p(){const[e,t]=this.parentDimensions,{width:r,height:i}=this,s=new du,o=Math.ceil(r*e*s.sx),a=Math.ceil(i*t*s.sy),l=this.#i;if(!l||l.width===o&&l.height===a)return;l.width=o,l.height=a;const c=this.#l?this.#e:this.#u(o,a),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,o,a)}#_(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#e),t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*v_.PDF_TO_CSS_UNITS),s=Math.round(this.height*r*v_.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),o.transferToImageBitmap()}return structuredClone(this.#e)}static deserialize(e,t,r){var i=()=>super.deserialize,s=this;return(0,Q.A)(function*(){let o=null,a=!1;if(e instanceof FY){const{data:{rect:b,rotation:A,id:T,structParent:P,popupRef:V,richText:q,contentsObj:N,creationDate:D,modificationDate:S},container:F,parent:{page:{pageNumber:I}},canvas:O}=e;let L,te;O?(delete e.canvas,({id:L,bitmap:te}=r.imageManager.getFromCanvas(F.id,O)),O.remove()):(a=!0,e._hasNoCanvas=!0);const me=(yield t._structTree.getAriaAttributes(`${__}${T}`))?.get("aria-label")||"";o=e={annotationType:Tn.STAMP,bitmapId:L,bitmap:te,pageIndex:I-1,rect:b.slice(0),rotation:A,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:me},isSvg:!1,structParent:P,popupRef:V,richText:q,comment:N?.str||null,creationDate:D,modificationDate:S}}const l=yield i().call(s,e,t,r),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:m}=e;a?(r.addMissingCanvas(e.id,l),l.#a=!0):h&&r.imageManager.isValidId(h)?(l.#t=h,u&&(l.#e=u)):l.#n=d,l.#l=f;const[v,y]=l.pageDimensions;return l.width=(c[2]-c[0])/v,l.height=(c[3]-c[1])/y,m&&(l.altTextData=m),l._initialData=o,e.comment&&l.setCommentData(e),l.#h=!!o,l})()}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(r),e)return r.bitmapUrl=this.#_(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(r.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const a=this.#y(r);return a.isSame?null:(a.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(null===t)return r;t.stamps||=new Map;const o=this.#l?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(t.stamps.has(this.#t)){if(this.#l){const a=t.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#_(!1))}}else t.stamps.set(this.#t,{area:o,serialized:r}),r.bitmap=this.#_(!1);return r}#y(e){const{pageIndex:t,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===t,s=(e.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}let pxe=(()=>{class n{#e;#t=!1;#r=null;#n=null;#o=null;#s=new Map;#i=!1;#a=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([Us,YN,fxe,Zi,fu].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:r,div:i,structTreeLayer:s,accessibilityManager:o,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:d}){const h=[...n.#p.values()];if(!n._initialized){n._initialized=!0;for(const f of h)f.initialize(d,t)}t.registerEditorTypes(h),this.#u=t,this.pageIndex=r,this.div=i,this.#e=o,this.#r=a,this.viewport=u,this.#d=c,this.drawLayer=l,this._structTree=s,this.#u.addLayer(this)}get isEmpty(){return 0===this.#s.size}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Tn.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#w(),t){case Tn.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Tn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Tn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:r}=this.div;if(r.toggle("nonEditing",!1),t===Tn.POPUP)r.toggle("commentEditing",!0);else{r.toggle("commentEditing",!1);for(const i of n.#p.values())r.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#d?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#r?.togglePointerEvents(t)}get#_(){return 0!==this.#s.size?this.#s.values():this.#u.getEditors(this.pageIndex)}enable(){var t=this;return(0,Q.A)(function*(){t.#c=!0,t.div.tabIndex=0,t.togglePointerEvents(!0),t.div.classList.toggle("nonEditing",!1),t.#m?.abort(),t.#m=null;const r=new Set;for(const s of t.#_)s.enableEditing(),s.show(!0),s.annotationElementId&&(t.#u.removeChangedExistingAnnotation(s),r.add(s.annotationElementId));const i=t.#r;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),t.#u.isDeletedAnnotationElement(s.data.id)||r.has(s.data.id))continue;const o=yield t.deserialize(s);o&&(t.addOrRebuild(o),o.enableEditing())}t.#c=!1,t.#u._eventBus.dispatch("editorsrendered",{source:t,pageNumber:t.pageIndex+1})})()}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#d.div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:u}=o;if(u-this.#g>500)return void(this.#g=u);this.#g=-1;const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const v=new RegExp(`^${Jy}[0-9]+$`);for(const b of f)if(v.test(b.id)){m=b.id;break}if(!m)return;const y=this.#s.get(m);null===y?.annotationElementId&&(o.stopPropagation(),o.preventDefault(),y.dblclick(o))},{signal:s,capture:!0})}const t=this.#r,r=[];if(t){const s=new Map,o=new Map;for(const l of this.#_)l.disableEditing(),l.annotationElementId?null===l.serialize()?(o.set(l.annotationElementId,l),this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()):s.set(l.annotationElementId,l):r.push(l);const a=t.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(this.#u.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=o.get(c);u?(u.resetAnnotationElement(l),u.show(!1),l.show()):(u=s.get(c),u&&(this.#u.addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show())}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of n.#p.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(r),this.#a=!1}getEditableAnnotation(t){return this.#r?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:r}=t;if(r===this.#d.div||("img"===r.getAttribute("role")||r.classList.contains("endOfContent"))&&this.#d.div.contains(r)){const{isMac:i}=ys.platform;if(0!==t.button||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Zi.startHighlighting(this,"ltr"===this.#u.direction,{target:this.#d.div,x:t.x,y:t.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const r=this.pointerup.bind(this);this.div.addEventListener("pointerup",r,{signal:t}),this.div.addEventListener("pointercancel",r,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:r}=t;r&&this.#u.isDeletedAnnotationElement(r)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#a&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),Ut.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const r=t.render();this.div.append(r),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:r}=document;t.div.contains(r)&&!this.#o&&(t._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),r.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getEditorByUID(t){for(const r of this.#s.values())if(r.uid===t)return r;return null}getNextId(){return this.#u.getId()}get#v(){return n.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#I(t){const r=this.#v;return r?new r.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}pasteEditor(t,r){var i=this;return(0,Q.A)(function*(){i.updateToolbar(t),yield i.#u.updateMode(t.mode);const{offsetX:s,offsetY:o}=i.#C(),a=i.getNextId(),l=i.#I({parent:i,id:a,x:s,y:o,uiManager:i.#u,isCentered:!0,...r});l&&i.add(l)})()}deserialize(t){var r=this;return(0,Q.A)(function*(){return(yield n.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,r,r.#u))||null})()}createAndAddNewEditor(t,r,i={}){const s=this.getNextId(),o=this.#I({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:r,...i});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#C(){const{x:t,y:r,width:i,height:s}=this.boundingClientRect,o=Math.max(0,t),a=Math.max(0,r),u=(o+Math.min(window.innerWidth,t+i))/2-t,d=(a+Math.min(window.innerHeight,r+s))/2-r,[h,f]=this.viewport.rotation%180==0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(t={}){this.createAndAddNewEditor(this.#C(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:r}=ys.platform;if(0!==t.button||t.ctrlKey&&r||t.target!==this.div||!this.#i||(this.#i=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t)return void(this.#t=!0);const i=this.#u.getMode();i!==Tn.STAMP&&i!==Tn.SIGNATURE?this.createAndAddNewEditor(t,!1):this.#u.unselectAll()}pointerdown(t){if(this.#u.getMode()===Tn.HIGHLIGHT&&this.enableTextSelection(),this.#i)return void(this.#i=!1);const{isMac:r}=ys.platform;if(0!==t.button||t.ctrlKey&&r||t.target!==this.div)return;if(this.#i=!0,this.#v?.isDrawer)return void this.startDrawingSession(t);const i=this.#u.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l)return void this.#v.startDrawing(this,this.#u,!1,t);this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const r=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:r}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:r}=document;this.div.contains(r)&&(this.#h=r)}else this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(t)):null}findNewParent(t,r,i){const s=this.#u.findParent(r,i);return null!==s&&s!==this&&(s.changeParent(t),!0)}commitOrRemove(){return!!this.#l&&(this.endDrawingSession(),!0)}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(const t of this.#s.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#w(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,yp(this.div,t);for(const r of this.#u.getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#w();const r=this.viewport.rotation,i=t.rotation;if(this.viewport=t,yp(this.div,{rotation:i}),r!==i)for(const s of this.#s.values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:r}=this.viewport.rawDims;return[t,r]}get scale(){return this.#u.viewParameters.realScale}}return n})();class io{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(this.#e){if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}else this.#e=e}static get _svgFactory(){return wn(this,"_svgFactory",new WC)}static#o(e,[t,r,i,s]){const{style:o}=e;o.top=100*r+"%",o.left=100*t+"%",o.width=100*i+"%",o.height=100*s+"%"}#s(){const e=io._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#i(e,t){const r=io._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=io._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i}#a(e,t){for(const[r,i]of Object.entries(t))null===i?e.removeAttribute(r):e.setAttribute(r,i)}draw(e,t=!1,r=!1){const i=io.#n++,s=this.#s(),o=io._svgFactory.createElement("defs");s.append(o);const a=io._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(i,a);const c=r?this.#i(o,l):null,u=io._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,e),this.#t.set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){const r=io.#n++,i=this.#s(),s=io._svgFactory.createElement("defs");i.append(s);const o=io._svgFactory.createElement("path");s.append(o);const a=`path_p${this.pageIndex}_${r}`;let l;if(o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke"),t){const d=io._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${r}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const h=io._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const f=io._svgFactory.createElement("use");d.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=io._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(r,i),r}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:r,bbox:i,rootClass:s,path:o}=t,a="number"==typeof e?this.#t.get(e):e;if(a){if(r&&this.#a(a,r),i&&io.#o(a,i),s){const{classList:l}=a;for(const[c,u]of Object.entries(s))l.toggle(c,u)}o&&this.#a(a.firstElementChild.firstElementChild,o)}}updateParent(e,t){if(t===this)return;const r=this.#t.get(e);r&&(t.#e.append(r),this.#t.delete(e),t.#t.set(e,r))}remove(e){this.#r.delete(e),null!==this.#e&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:WN},globalThis.pdfjsLib={AbortException:Vh,AnnotationEditorLayer:pxe,AnnotationEditorParamsType:Zn,AnnotationEditorType:Tn,AnnotationEditorUIManager:c1,AnnotationLayer:qN,AnnotationMode:Fh,AnnotationType:ls,applyOpacity:function NTe(n,e,t,r){const i=255*(1-(r=Math.min(Math.max(r??1,0),1)));return[n=Math.round(n*r+i),e=Math.round(e*r+i),t=Math.round(t*r+i)]},build:"50cc4adac",ColorPicker:Bl,createValidAbsoluteUrl:MK,CSSConstants:class RTe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),wn(this,"commentForegroundColor",o1(r))}},DOMSVGFactory:WC,DrawLayer:io,FeatureTest:ys,fetchData:r1,findContrastColor:function OTe(n,e){const t=n[0]+256*n[1]+65536*n[2]+16777216*e[0]+4294967296*e[1]+1099511627776*e[2];let r=$K.get(t);if(r)return r;const i=new Float32Array(9),s=i.subarray(0,3),o=i.subarray(3,6);UK(n,o);const a=i.subarray(6,9);UK(e,a);const l=a[2]<.5,c=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),zK(o,a,s)<c){let u,d;l?(u=o[2],d=1):(u=0,d=o[2]);const h=.005;for(;d-u>h;){const f=o[2]=(u+d)/2;l===zK(o,a,s)<c?u=f:d=f}o[2]=l?d:u}return TN(o,s),r=ht.makeHexColor(Math.round(255*s[0]),Math.round(255*s[1]),Math.round(255*s[2])),$K.set(t,r),r},getDocument:xY,getFilenameFromUrl:function STe(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function xTe(n,e="document.pdf"){if("string"!=typeof n)return e;if(LC(n))return _n('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},s=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(s.test(o))return i(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const c of a)if(s.test(c))return i(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(s.test(c))return i(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e},getRGB:o1,getUuid:LK,getXfaPageViewport:function PTe(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new i1({viewBox:s,userUnit:1,scale:e,rotation:t})},GlobalWorkerOptions:A_,ImageKind:PC,InvalidPDFException:yN,isDataScheme:LC,isPdfFile:CN,isValidExplicitDest:WTe,MathClamp:na,noContextMenu:Ll,normalizeUnicode:function ETe(n){return bN||(bN=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,OK=new Map([["\ufb05","\u017ft"]])),n.replaceAll(bN,(e,t,r)=>t?t.normalize("NFKC"):OK.get(r))},OPS:e1,OutputScale:du,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:DY,PDFDateString:EN,PDFWorker:ro,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:v_,RenderingCancelledException:AN,renderRichText:HK,ResponseException:NC,setLayerDimensions:yp,shadow:wn,SignatureExtractor:I_,stopEvent:Oi,SupportedImageMimeTypes:IN,TextLayer:nl,TouchManager:VC,updateUrlHash:kK,Util:ht,VerbosityLevel:MC,version:PY,XfaLayer:VK};var gxe=tt(3459);function mxe(n,e){1&n&&(x(0,"div",20),oe(1,"i",21),M())}function _xe(n,e){if(1&n&&(x(0,"div",22),oe(1,"img",23),M()),2&n){const t=Te(2);z(1),ae("src",t.currentUser.fotoUrl,LI)}}function vxe(n,e){if(1&n){const t=Fn();x(0,"button",24),Ee("click",function(i){return rt(t),Te(2).rimuoviFoto(),it(i.stopPropagation())}),oe(1,"i",25),M()}}function yxe(n,e){1&n&&(x(0,"div",50),oe(1,"i",51),H(2," Nessun certificato medico caricato "),M())}function bxe(n,e){if(1&n){const t=Fn();x(0,"div",52)(1,"div",53)(2,"div",54),oe(3,"i",55),x(4,"div")(5,"div",56),H(6),M(),x(7,"small",7),H(8,"File caricato"),M()()(),x(9,"div",57)(10,"button",58),Ee("click",function(){return rt(t),it(Te(3).scaricaCertificato())}),oe(11,"i",59),H(12,"Scarica "),M(),x(13,"button",60),Ee("click",function(){return rt(t),it(Te(3).rimuoviCertificato())}),oe(14,"i",25),M()()()()}if(2&n){const t=Te(3);z(3),ae("ngClass",null!=t.currentUser.certificatoMedicoNomeFile&&t.currentUser.certificatoMedicoNomeFile.endsWith(".pdf")?"bi-file-pdf text-danger":"bi-file-image text-primary"),z(3),Qe(t.currentUser.certificatoMedicoNomeFile||"certificato_medico")}}function wxe(n,e){1&n&&(x(0,"div",27)(1,"div",40)(2,"div",29)(3,"div",30),oe(4,"i",61),x(5,"span"),H(6,"Capitano"),M()(),x(7,"div",32)(8,"span",62),H(9,"S\xec"),M()()()()())}function Axe(n,e){if(1&n){const t=Fn();x(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30),oe(5,"i",31),x(6,"span"),H(7,"Numero Maglia"),M()(),x(8,"div",32),H(9),M()()(),x(10,"div",28)(11,"div",29)(12,"div",30),oe(13,"i",33),x(14,"span"),H(15,"Data di Nascita"),M()(),x(16,"div",32),H(17),M()()()(),x(18,"div",27)(19,"div",28)(20,"div",29)(21,"div",30),oe(22,"i",34),x(23,"span"),H(24,"Ruolo"),M()(),x(25,"div",32),H(26),ei(27,"capitalize"),M()()(),x(28,"div",28)(29,"div",29)(30,"div",30),oe(31,"i",35),x(32,"span"),H(33,"Tessera UISP"),M()(),x(34,"div",32),H(35),M()()()(),x(36,"div",27)(37,"div",28)(38,"div",29)(39,"div",30),oe(40,"i",36),x(41,"span"),H(42,"Email"),M()(),x(43,"div",32),H(44),M()()(),x(45,"div",28)(46,"div",29)(47,"div",30),oe(48,"i",37),x(49,"span"),H(50,"Codice Fiscale"),M()(),x(51,"div",32),H(52),M()()()(),x(53,"div",27)(54,"div",28)(55,"div",29)(56,"div",30),oe(57,"i",38),x(58,"span"),H(59,"Taglia Divisa"),M()(),x(60,"div",32),H(61),M()()(),x(62,"div",28)(63,"div",29)(64,"div",30),oe(65,"i",39),x(66,"span"),H(67,"Scadenza Certificato Medico"),M()(),x(68,"div",32),H(69),M()()()(),x(70,"div",27)(71,"div",40)(72,"div",41)(73,"div",42),oe(74,"i",43),x(75,"span"),H(76,"Certificato Medico"),M()(),Be(77,yxe,3,0,"div",44),Be(78,bxe,15,2,"div",45),x(79,"div",6)(80,"input",46),Ee("change",function(i){return rt(t),it(Te(2).onCertificatoSelected(i))}),M(),x(81,"input",47),Ee("change",function(i){return rt(t),it(Te(2).onCertificatoSelected(i))}),M(),x(82,"button",48),Ee("click",function(i){return rt(t),Te(2).onClickCaricaCertificato(),it(i.stopPropagation())}),oe(83,"i",12),H(84),M()()()()(),Be(85,wxe,10,0,"div",49),M()}if(2&n){const t=Te(2);z(9),Qe(t.currentUser.numeroMaglia),z(8),Qe(t.formatDate(t.currentUser.dataDiNascita)),z(9),Qe(Cl(27,14,t.currentUser.ruolo)),z(9),Qe(t.currentUser.tesseraUisp),z(9),Qe(t.currentUser.email||"Non specificata"),z(8),Qe(t.currentUser.codiceFiscale||"Non specificato"),z(9),Qe(t.currentUser.tagliaDivisa||"Non specificata"),z(8),Qe(t.formatDate(t.currentUser.scadenzaCertificatoMedico)||"Non specificata"),z(8),ae("ngIf",!t.currentUser.certificatoMedicoUrl),z(1),ae("ngIf",t.currentUser.certificatoMedicoUrl),z(4),ae("disabled",t.uploadingCertificato),z(1),ae("ngClass",t.uploadingCertificato?"bi-hourglass-split":"bi-upload"),z(1),Hn(" ",t.uploadingCertificato?"Caricamento...":t.currentUser.certificatoMedicoUrl?"Sostituisci certificato":"Carica certificato (PDF o immagine)"," "),z(1),ae("ngIf",t.currentUser.capitano)}}function Cxe(n,e){if(1&n){const t=Fn();x(0,"div",63)(1,"div",27)(2,"div",64)(3,"label",65),oe(4,"i",66),H(5,"Email "),M(),x(6,"input",67),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editedUser.email=i)}),M()(),x(7,"div",64)(8,"label",65),oe(9,"i",68),H(10,"Codice Fiscale "),M(),x(11,"input",69),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editedUser.codiceFiscale=i)}),M()()(),x(12,"div",27)(13,"div",64)(14,"label",65),oe(15,"i",70),H(16,"Data di Nascita "),M(),x(17,"input",71),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editedUser.dataDiNascita=i)}),M()(),x(18,"div",64)(19,"label",65),oe(20,"i",72),H(21,"Numero Maglia "),M(),x(22,"input",73),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editedUser.numeroMaglia=i)}),M()()(),x(23,"div",27)(24,"div",64)(25,"label",65),oe(26,"i",74),H(27,"Taglia Divisa "),M(),x(28,"select",75),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editedUser.tagliaDivisa=i)}),x(29,"option",76),H(30,"Seleziona..."),M(),x(31,"option",77),H(32,"XS"),M(),x(33,"option",78),H(34,"S"),M(),x(35,"option",79),H(36,"M"),M(),x(37,"option",80),H(38,"L"),M(),x(39,"option",81),H(40,"XL"),M(),x(41,"option",82),H(42,"XXL"),M()()(),x(43,"div",64)(44,"label",65),oe(45,"i",83),H(46,"Scadenza Certificato Medico "),M(),x(47,"input",71),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editedUser.scadenzaCertificatoMedico=i)}),M()()()()}if(2&n){const t=Te(2);z(6),ae("ngModel",t.editedUser.email),z(5),ae("ngModel",t.editedUser.codiceFiscale),z(6),ae("ngModel",t.editedUser.dataDiNascita),z(5),ae("ngModel",t.editedUser.numeroMaglia),z(6),ae("ngModel",t.editedUser.tagliaDivisa),z(19),ae("ngModel",t.editedUser.scadenzaCertificatoMedico)}}function Exe(n,e){if(1&n){const t=Fn();x(0,"button",84),Ee("click",function(){return rt(t),it(Te(2).toggleEditMode())}),oe(1,"i",85),H(2,"Modifica Dati "),M()}}function Ixe(n,e){if(1&n){const t=Fn();x(0,"div",92),Ee("click",function(){return rt(t),it(Te(3).showFotoSourceDialog=!1)}),M()}}function Txe(n,e){if(1&n){const t=Fn();x(0,"div",93),Ee("click",function(i){return i.stopPropagation()}),x(1,"div",94)(2,"h5"),H(3,"Seleziona sorgente"),M(),x(4,"button",95),Ee("click",function(i){return rt(t),Te(3).showFotoSourceDialog=!1,it(i.stopPropagation())}),oe(5,"i",96),M()(),x(6,"div",97)(7,"button",98),Ee("click",function(i){return rt(t),Te(3).scegliSorgenteFoto("fotocamera"),it(i.stopPropagation())}),oe(8,"i",99),x(9,"span"),H(10,"Scatta foto"),M()(),x(11,"button",98),Ee("click",function(i){return rt(t),Te(3).scegliSorgenteFoto("galleria"),it(i.stopPropagation())}),oe(12,"i",100),x(13,"span"),H(14,"Scegli dalla galleria"),M()()()()}}function Sxe(n,e){if(1&n){const t=Fn();x(0,"div",92),Ee("click",function(){return rt(t),it(Te(3).showCertificatoSourceDialog=!1)}),M()}}function xxe(n,e){if(1&n){const t=Fn();x(0,"div",93),Ee("click",function(i){return i.stopPropagation()}),x(1,"div",94)(2,"h5"),H(3,"Seleziona sorgente"),M(),x(4,"button",95),Ee("click",function(i){return rt(t),Te(3).showCertificatoSourceDialog=!1,it(i.stopPropagation())}),oe(5,"i",96),M()(),x(6,"div",97)(7,"button",98),Ee("click",function(i){return rt(t),Te(3).scegliSorgenteCertificato("fotocamera"),it(i.stopPropagation())}),oe(8,"i",99),x(9,"span"),H(10,"Scatta foto"),M()(),x(11,"button",98),Ee("click",function(i){return rt(t),Te(3).scegliSorgenteCertificato("galleria"),it(i.stopPropagation())}),oe(12,"i",100),x(13,"span"),H(14,"Scegli dalla galleria"),M()()()()}}function Dxe(n,e){if(1&n){const t=Fn();x(0,"div",57)(1,"button",86),Ee("click",function(){return rt(t),it(Te(2).saveChanges())}),oe(2,"i",87),H(3,"Salva "),M(),x(4,"button",88),Ee("click",function(){return rt(t),it(Te(2).cancelEdit())}),oe(5,"i",89),H(6,"Annulla "),M(),Be(7,Ixe,1,0,"div",90),Be(8,Txe,15,0,"div",91),Be(9,Sxe,1,0,"div",90),Be(10,xxe,15,0,"div",91),M()}if(2&n){const t=Te(2);z(7),ae("ngIf",t.showFotoSourceDialog),z(1),ae("ngIf",t.showFotoSourceDialog),z(1),ae("ngIf",t.showCertificatoSourceDialog),z(1),ae("ngIf",t.showCertificatoSourceDialog)}}function Pxe(n,e){if(1&n){const t=Fn();x(0,"div",2)(1,"div",3),Be(2,mxe,2,0,"div",4),Be(3,_xe,2,1,"div",5),x(4,"h2",6),H(5),ei(6,"capitalize"),ei(7,"capitalize"),M(),x(8,"p",7),H(9),M(),x(10,"div",8)(11,"input",9),Ee("change",function(i){return rt(t),it(Te().onFotoSelected(i))}),M(),x(12,"input",10),Ee("change",function(i){return rt(t),it(Te().onFotoSelected(i))}),M(),x(13,"button",11),Ee("click",function(i){return rt(t),Te().onClickCaricaFoto(),it(i.stopPropagation())}),oe(14,"i",12),H(15),M(),Be(16,vxe,2,0,"button",13),M()(),x(17,"div",14),Be(18,Axe,86,16,"div",15),Be(19,Cxe,48,6,"div",16),M(),x(20,"div",17),Be(21,Exe,3,0,"button",18),Be(22,Dxe,11,4,"div",19),M()()}if(2&n){const t=Te();z(2),ae("ngIf",!t.currentUser.fotoUrl),z(1),ae("ngIf",t.currentUser.fotoUrl),z(2),ic("",Cl(6,13,t.currentUser.nome)," ",Cl(7,15,t.currentUser.cognome),""),z(4),Qe(t.currentUser.profilo),z(4),ae("disabled",t.uploadingFoto),z(1),ae("ngClass",t.uploadingFoto?"bi-hourglass-split":"bi-camera-fill"),z(1),Hn(" ",t.uploadingFoto?"Caricamento...":t.currentUser.fotoUrl?"Cambia foto":"Carica foto"," "),z(1),ae("ngIf",t.currentUser.fotoUrl),z(2),ae("ngIf",!t.isEditMode),z(1),ae("ngIf",t.isEditMode&&t.editedUser),z(2),ae("ngIf",!t.isEditMode),z(1),ae("ngIf",t.isEditMode)}}A_.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${PY}/pdf.worker.min.js`;let Mxe=(()=>{class n{constructor(t,r,i){this.authService=t,this.giocatoriService=r,this.storage=i,this.currentUser=null,this.isEditMode=!1,this.editedUser=null,this.uploadingFoto=!1,this.uploadingCertificato=!1,this.isMobile=!1,this.showFotoSourceDialog=!1,this.showCertificatoSourceDialog=!1}ngOnInit(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.authService.currentUser.subscribe(t=>{this.currentUser=t,t&&(this.editedUser={...t})})}toggleEditMode(){this.isEditMode&&this.currentUser&&(this.editedUser={...this.currentUser}),this.isEditMode=!this.isEditMode}saveChanges(){var t=this;return(0,Q.A)(function*(){if(t.editedUser&&t.currentUser)try{const r=t.editedUser.id;if(!r)return void alert("Impossibile salvare: ID giocatore non trovato");yield t.giocatoriService.updateGiocatore(r,t.editedUser),localStorage.setItem("currentUser",JSON.stringify(t.editedUser)),t.currentUser=t.editedUser,t.isEditMode=!1,alert("Dati aggiornati con successo!")}catch(r){console.error("Errore durante il salvataggio:",r),alert("Errore durante il salvataggio dei dati")}})()}cancelEdit(){this.currentUser&&(this.editedUser={...this.currentUser}),this.isEditMode=!1}formatDate(t){return ks.formatDate(t)}onClickCaricaFoto(){this.isMobile?setTimeout(()=>{this.showFotoSourceDialog=!0},0):document.getElementById("fotoInputGallery")?.click()}onClickCaricaCertificato(){this.isMobile?setTimeout(()=>{this.showCertificatoSourceDialog=!0},0):document.getElementById("certificatoInputGallery")?.click()}scegliSorgenteFoto(t){this.showFotoSourceDialog=!1;const r="galleria"===t?"fotoInputGallery":"fotoInputCamera";document.getElementById(r)?.click()}scegliSorgenteCertificato(t){this.showCertificatoSourceDialog=!1;const r="galleria"===t?"certificatoInputGallery":"certificatoInputCamera";document.getElementById(r)?.click()}onFotoSelected(t){var r=this;return(0,Q.A)(function*(){const i=t.target;if(!i.files||!i.files[0]||!r.currentUser)return;const s=i.files[0];if(console.log("File selezionato:",s.name,"Tipo:",s.type,"Dimensione:",s.size),s.type&&!s.type.startsWith("image/"))return alert("Seleziona un file immagine valido"),void(i.value="");if(!s.type){const o=s.name.split(".").pop()?.toLowerCase();if(!o||!["jpg","jpeg","png","gif","bmp","webp"].includes(o))return alert("Seleziona un file immagine valido"),void(i.value="")}if(s.size>5242880)return alert("Il file \xe8 troppo grande. Massimo 5MB"),void(i.value="");r.uploadingFoto=!0;try{const o=r.currentUser.id;if(!o)return void alert("Impossibile caricare: ID giocatore non trovato");if(r.currentUser.fotoUrl)try{const c=Lh(r.storage,`giocatori/${o}/foto`);yield Zy(c)}catch{console.log("Nessuna foto precedente da eliminare")}const a=Lh(r.storage,`giocatori/${o}/foto`);yield gN(a,s);const l=yield pN(a);yield r.giocatoriService.updateGiocatore(o,{fotoUrl:l}),r.currentUser={...r.currentUser,fotoUrl:l},r.editedUser&&(r.editedUser={...r.editedUser,fotoUrl:l}),localStorage.setItem("currentUser",JSON.stringify(r.currentUser)),alert("Foto caricata con successo!")}catch(o){console.error("Errore durante il caricamento della foto:",o);const a=o instanceof Error?o.message:"Errore sconosciuto";alert(`Errore durante il caricamento della foto: ${a}`)}finally{r.uploadingFoto=!1,i.value=""}})()}onCertificatoSelected(t){var r=this;return(0,Q.A)(function*(){const i=t.target;if(!i.files||!i.files[0]||!r.currentUser)return;const s=i.files[0];console.log("Certificato selezionato:",s.name,"Tipo:",s.type,"Dimensione:",s.size);const o="application/pdf"===s.type,a=!s.type||s.type.startsWith("image/");if(!o&&!a){const l=s.name.split(".").pop()?.toLowerCase();if(!l||!["pdf","jpg","jpeg","png","gif","bmp","webp"].includes(l))return alert("Seleziona un file PDF o un'immagine"),void(i.value="")}if(s.size>10485760)return alert("Il file \xe8 troppo grande. Massimo 10MB"),void(i.value="");r.uploadingCertificato=!0;try{const l=r.currentUser.id;if(!l)return void alert("Impossibile caricare: ID giocatore non trovato");if(r.currentUser.certificatoMedicoUrl)try{const f=Lh(r.storage,`giocatori/${l}/certificato`);yield Zy(f)}catch{console.log("Nessun certificato precedente da eliminare")}const c=Lh(r.storage,`giocatori/${l}/certificato`);yield gN(c,s);const u=yield pN(c),d=yield r.estraiDataScadenza(s),h={certificatoMedicoUrl:u,certificatoMedicoNomeFile:s.name};d&&(h.scadenzaCertificatoMedico=d),yield r.giocatoriService.updateGiocatore(l,h),r.currentUser={...r.currentUser,certificatoMedicoUrl:u,certificatoMedicoNomeFile:s.name,...d&&{scadenzaCertificatoMedico:d}},r.editedUser&&(r.editedUser={...r.editedUser,certificatoMedicoUrl:u,certificatoMedicoNomeFile:s.name,...d&&{scadenzaCertificatoMedico:d}}),localStorage.setItem("currentUser",JSON.stringify(r.currentUser)),alert(d?`Certificato caricato con successo!\n\nData di scadenza rilevata automaticamente: ${r.formatDate(d)}`:"Certificato caricato con successo!\n\nNon \xe8 stato possibile rilevare automaticamente la data di scadenza.")}catch(l){console.error("Errore durante il caricamento del certificato:",l);const c=l instanceof Error?l.message:"Errore sconosciuto";alert(`Errore durante il caricamento del certificato: ${c}`)}finally{r.uploadingCertificato=!1,i.value=""}})()}rimuoviFoto(){var t=this;return(0,Q.A)(function*(){if(t.currentUser&&t.currentUser.fotoUrl&&confirm("Sei sicuro di voler rimuovere la foto profilo?"))try{const r=t.currentUser.id;if(!r)return;const i=Lh(t.storage,`giocatori/${r}/foto`);yield Zy(i),yield t.giocatoriService.updateGiocatore(r,{fotoUrl:null}),t.currentUser={...t.currentUser,fotoUrl:void 0},t.editedUser&&(t.editedUser={...t.editedUser,fotoUrl:void 0}),localStorage.setItem("currentUser",JSON.stringify(t.currentUser)),alert("Foto rimossa con successo!")}catch(r){console.error("Errore durante la rimozione della foto:",r),alert("Errore durante la rimozione della foto")}})()}scaricaCertificato(){var t=this;return(0,Q.A)(function*(){!t.currentUser||!t.currentUser.certificatoMedicoUrl||window.open(t.currentUser.certificatoMedicoUrl,"_blank")})()}rimuoviCertificato(){var t=this;return(0,Q.A)(function*(){if(t.currentUser&&t.currentUser.certificatoMedicoUrl&&confirm("Sei sicuro di voler rimuovere il certificato medico?"))try{const r=t.currentUser.id;if(!r)return;const i=Lh(t.storage,`giocatori/${r}/certificato`);yield Zy(i),yield t.giocatoriService.updateGiocatore(r,{certificatoMedicoUrl:null,certificatoMedicoNomeFile:null}),t.currentUser={...t.currentUser,certificatoMedicoUrl:void 0,certificatoMedicoNomeFile:void 0},t.editedUser&&(t.editedUser={...t.editedUser,certificatoMedicoUrl:void 0,certificatoMedicoNomeFile:void 0}),localStorage.setItem("currentUser",JSON.stringify(t.currentUser)),alert("Certificato rimosso con successo!")}catch(r){console.error("Errore durante la rimozione del certificato:",r),alert("Errore durante la rimozione del certificato")}})()}estraiDataScadenza(t){var r=this;return(0,Q.A)(function*(){try{let i="";return"application/pdf"===t.type?i=yield r.estraiTestoDaPdf(t):t.type.startsWith("image/")&&(i=yield r.estraiTestoDaImmagine(t)),i?(console.log("Testo estratto:",i),r.trovaDataScadenza(i)):(console.log("Nessun testo estratto dal file"),null)}catch(i){return console.error("Errore durante l'estrazione della data:",i),null}})()}estraiTestoDaPdf(t){return(0,Q.A)(function*(){const r=yield t.arrayBuffer(),i=yield xY({data:r}).promise;let s="";const o=Math.min(i.numPages,3);for(let a=1;a<=o;a++)s+=(yield(yield i.getPage(a)).getTextContent()).items.map(d=>d.str).join(" ")+" ";return s})()}estraiTestoDaImmagine(t){return(0,Q.A)(function*(){const r=yield(0,gxe.createWorker)("ita+eng");try{const{data:i}=yield r.recognize(t);return i.text}finally{yield r.terminate()}})()}trovaDataScadenza(t){const r=[/scad(?:enza|e)?[:\s]*(?:il)?[\s]*(\d{1,2})[\/-](\d{1,2})[\/-](\d{4})/i,/valid(?:o|it\xe0)?[\s]*(?:fino|until)?[\s]*(?:al|to)?[:\s]*(\d{1,2})[\/-](\d{1,2})[\/-](\d{4})/i,/expir(?:y|ation)?[\s]*date[:\s]*(\d{1,2})[\/-](\d{1,2})[\/-](\d{4})/i,/(?:scadenza|scade|valid|valido|expiry|fino)[\s\S]{0,50}?(\d{1,2})[\/-](\d{1,2})[\/-](\d{4})/i,/scad(?:enza|e)?[:\s]*(?:il)?[\s]*(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})/i];for(const i of r){const s=t.match(i);if(s){let o,a,l;4===s[1].length?(l=s[1],a=s[2].padStart(2,"0"),o=s[3].padStart(2,"0")):(o=s[1].padStart(2,"0"),a=s[2].padStart(2,"0"),l=s[3]);const c=new Date(`${l}-${a}-${o}`),u=new Date,d=new Date;if(d.setFullYear(d.getFullYear()+5),c>u&&c<d)return`${l}-${a}-${o}`}}return null}static{this.\u0275fac=function(r){return new(r||n)(Le(ld),Le(AA),Le(Qy))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-profilo"]],decls:2,vars:1,consts:[[1,"profilo-container"],["class","profilo-card",4,"ngIf"],[1,"profilo-card"],[1,"profilo-header"],["class","user-avatar-large",4,"ngIf"],["class","user-photo-container",4,"ngIf"],[1,"mt-3"],[1,"text-muted"],[1,"foto-upload-section","mt-3"],["type","file","id","fotoInputGallery","accept","image/*",2,"display","none",3,"change"],["type","file","id","fotoInputCamera","accept","image/*","capture","environment",2,"display","none",3,"change"],[1,"btn","btn-sm","btn-light",3,"disabled","click"],[1,"bi",3,"ngClass"],["class","btn btn-sm btn-outline-light ms-2",3,"click",4,"ngIf"],[1,"profilo-body"],["class","info-section",4,"ngIf"],["class","edit-section",4,"ngIf"],[1,"profilo-footer"],["class","btn btn-primary w-100",3,"click",4,"ngIf"],["class","d-flex gap-2",4,"ngIf"],[1,"user-avatar-large"],[1,"bi","bi-person-circle"],[1,"user-photo-container"],["alt","Foto profilo",1,"user-photo",3,"src"],[1,"btn","btn-sm","btn-outline-light","ms-2",3,"click"],[1,"bi","bi-trash"],[1,"info-section"],[1,"row"],[1,"col-md-6"],[1,"info-row"],[1,"info-label"],[1,"bi","bi-person-badge"],[1,"info-value"],[1,"bi","bi-calendar3"],[1,"bi","bi-trophy"],[1,"bi","bi-card-text"],[1,"bi","bi-envelope"],[1,"bi","bi-credit-card"],[1,"bi","bi-rulers"],[1,"bi","bi-file-medical"],[1,"col-12"],[1,"certificato-section"],[1,"info-label","mb-2"],[1,"bi","bi-file-earmark-medical"],["class","alert alert-warning mb-0",4,"ngIf"],["class","certificato-info",4,"ngIf"],["type","file","id","certificatoInputGallery","accept","application/pdf,image/*",2,"display","none",3,"change"],["type","file","id","certificatoInputCamera","accept","image/*","capture","environment",2,"display","none",3,"change"],[1,"btn","btn-outline-primary",3,"disabled","click"],["class","row",4,"ngIf"],[1,"alert","alert-warning","mb-0"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"certificato-info"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"d-flex","align-items-center","gap-2"],[1,"bi",2,"font-size","1.5rem",3,"ngClass"],[1,"fw-bold"],[1,"d-flex","gap-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-download","me-1"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-star-fill","text-warning"],[1,"badge","bg-warning"],[1,"edit-section"],[1,"col-md-6","mb-3"],[1,"form-label"],[1,"bi","bi-envelope","me-2"],["type","email","placeholder","esempio@email.com",1,"form-control",3,"ngModel","ngModelChange"],[1,"bi","bi-credit-card","me-2"],["type","text","maxlength","16","placeholder","RSSMRA80A01H501U",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],[1,"bi","bi-calendar3","me-2"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"bi","bi-person-badge","me-2"],["type","text","placeholder","10",1,"form-control",3,"ngModel","ngModelChange"],[1,"bi","bi-rulers","me-2"],[1,"form-select",3,"ngModel","ngModelChange"],["value",""],["value","XS"],["value","S"],["value","M"],["value","L"],["value","XL"],["value","XXL"],[1,"bi","bi-file-medical","me-2"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-pencil","me-2"],[1,"btn","btn-success","flex-fill",3,"click"],[1,"bi","bi-check-lg","me-2"],[1,"btn","btn-secondary","flex-fill",3,"click"],[1,"bi","bi-x-lg","me-2"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","source-dialog",3,"click",4,"ngIf"],[1,"modal-backdrop",3,"click"],[1,"source-dialog",3,"click"],[1,"source-dialog-header"],[1,"btn-close-dialog",3,"click"],[1,"bi","bi-x-lg"],[1,"source-dialog-body"],[1,"source-option",3,"click"],[1,"bi","bi-camera-fill"],[1,"bi","bi-images"]],template:function(r,i){1&r&&(x(0,"div",0),Be(1,Pxe,23,17,"div",1),M()),2&r&&(z(1),ae("ngIf",i.currentUser))},dependencies:[Fg,Sl,NA,OA,Qc,zm,wh,vy,rp,qk],styles:[".profilo-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.profilo-card[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.profilo-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--bs-primary) 0%,var(--bs-primary-dark, #0056b3) 100%);color:#fff;padding:40px 20px;text-align:center}.user-avatar-large[_ngcontent-%COMP%]{font-size:80px;color:#fff;margin-bottom:10px}.profilo-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:700}.profilo-body[_ngcontent-%COMP%]{padding:20px}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:1px solid #e9ecef}@media (min-width: 768px){.info-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef}.info-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-section[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{border-bottom:none}.info-section[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:first-child{border-right:1px solid #e9ecef;padding-right:20px}.info-section[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]:last-child{padding-left:20px}}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:500;color:#495057}.info-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--bs-primary)}.info-value[_ngcontent-%COMP%]{font-weight:600;color:#212529}.profilo-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #e9ecef}.edit-section[_ngcontent-%COMP%]{padding-top:10px}.user-photo-container[_ngcontent-%COMP%]{width:120px;height:120px;margin:0 auto;border-radius:50%;overflow:hidden;border:4px solid rgba(255,255,255,.3);box-shadow:0 4px 8px #0003}.user-photo[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.foto-upload-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px}.certificato-section[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;border-radius:8px;margin-top:10px}.certificato-info[_ngcontent-%COMP%]{padding:15px;background:white;border-radius:6px;border:1px solid #dee2e6}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1040;animation:_ngcontent-%COMP%_fadeIn .2s ease-in}.source-dialog[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:white;border-radius:20px 20px 0 0;z-index:1050;animation:_ngcontent-%COMP%_slideUp .3s ease-out;max-width:600px;margin:0 auto}.source-dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e9ecef}.source-dialog-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-weight:600;color:#212529}.btn-close-dialog[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;color:#6c757d;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s}.btn-close-dialog[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#212529}.source-dialog-body[_ngcontent-%COMP%]{padding:10px}.source-option[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:15px;padding:18px 20px;background:white;border:none;border-radius:12px;cursor:pointer;transition:all .2s;font-size:1rem;color:#212529;margin-bottom:8px}.source-option[_ngcontent-%COMP%]:hover{background:#f8f9fa}.source-option[_ngcontent-%COMP%]:active{transform:scale(.98);background:#e9ecef}.source-option[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--bs-primary);width:32px;text-align:center}.source-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}@media (max-width: 768px){.profilo-container[_ngcontent-%COMP%]{padding:10px}.profilo-header[_ngcontent-%COMP%]{padding:30px 15px}.user-avatar-large[_ngcontent-%COMP%]{font-size:60px}.profilo-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.info-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.info-value[_ngcontent-%COMP%]{margin-left:32px}}"]})}}return n})();function kxe(n,e){if(1&n){const t=Fn();x(0,"button",16),Ee("click",function(){return rt(t),it(Te().startAdding())}),oe(1,"i",17),H(2," Aggiungi Allenamento "),M()}}function Rxe(n,e){if(1&n&&(x(0,"option",34),H(1),M()),2&n){const t=e.$implicit;ae("value",t.nome),z(1),Hn(" ",t.nome," ")}}function Nxe(n,e){if(1&n){const t=Fn();x(0,"div",18)(1,"h6",19),H(2,"Nuovo Allenamento"),M(),x(3,"div",20)(4,"div",21)(5,"label",22),H(6,"Giorno della settimana"),M(),x(7,"select",23),Ee("ngModelChange",function(i){return rt(t),it(Te().nuovoAllenamento.giorno=i)}),x(8,"option",24),H(9,"Seleziona un giorno"),M(),Be(10,Rxe,2,2,"option",25),M()(),x(11,"div",26)(12,"label",22),H(13,"Orario Inizio"),M(),x(14,"input",27),Ee("ngModelChange",function(i){return rt(t),it(Te().nuovoAllenamento.orarioInizio=i)}),M()(),x(15,"div",26)(16,"label",22),H(17,"Orario Fine"),M(),x(18,"input",27),Ee("ngModelChange",function(i){return rt(t),it(Te().nuovoAllenamento.orarioFine=i)}),M()(),x(19,"div",21)(20,"label",22),H(21,"Nome Palestra"),M(),x(22,"input",28),Ee("ngModelChange",function(i){return rt(t),it(Te().nuovoAllenamento.nomePalestra=i)}),M()(),x(23,"div",21)(24,"label",22),H(25,"Indirizzo"),M(),x(26,"input",29),Ee("ngModelChange",function(i){return rt(t),it(Te().nuovoAllenamento.indirizzo=i)}),M()(),x(27,"div",2)(28,"button",30),Ee("click",function(){return rt(t),it(Te().saveAllenamento())}),oe(29,"i",31),H(30," Salva "),M(),x(31,"button",32),Ee("click",function(){return rt(t),it(Te().cancelAdding())}),oe(32,"i",33),H(33," Annulla "),M()()()()}if(2&n){const t=Te();z(7),ae("ngModel",t.nuovoAllenamento.giorno),z(3),ae("ngForOf",t.giorniSettimana),z(4),ae("ngModel",t.nuovoAllenamento.orarioInizio),z(4),ae("ngModel",t.nuovoAllenamento.orarioFine),z(4),ae("ngModel",t.nuovoAllenamento.nomePalestra),z(4),ae("ngModel",t.nuovoAllenamento.indirizzo),z(2),ae("disabled",!t.isFormValid(t.nuovoAllenamento))}}function Oxe(n,e){1&n&&(x(0,"div",2)(1,"p",35),oe(2,"i",36),H(3,' Nessun allenamento configurato. Clicca su "Aggiungi Allenamento" per iniziare. '),M()())}function Lxe(n,e){if(1&n){const t=Fn();x(0,"div")(1,"h5",40),oe(2,"i",41),H(3),M(),x(4,"p",42),oe(5,"i",43),x(6,"strong"),H(7),M()(),x(8,"p",42),oe(9,"i",44),x(10,"strong"),H(11),M()(),x(12,"p",45),H(13),M(),x(14,"div",46)(15,"button",47),Ee("click",function(){rt(t);const i=Te().$implicit;return it(Te().startEditing(i))}),oe(16,"i",48),H(17," Modifica "),M(),x(18,"button",49),Ee("click",function(){rt(t);const i=Te().$implicit;return it(Te().deleteAllenamento(i.id))}),oe(19,"i",50),H(20," Elimina "),M()()()}if(2&n){const t=Te().$implicit;z(3),Hn(" ",t.giorno," "),z(4),ic("",t.orarioInizio," - ",t.orarioFine,""),z(4),Qe(t.nomePalestra),z(2),Hn(" ",t.indirizzo," ")}}function Fxe(n,e){if(1&n&&(x(0,"option",34),H(1),M()),2&n){const t=e.$implicit;ae("value",t.nome),z(1),Hn(" ",t.nome," ")}}function Vxe(n,e){if(1&n){const t=Fn();x(0,"div")(1,"h6",19),H(2,"Modifica Allenamento"),M(),x(3,"div",42)(4,"label",51),H(5,"Giorno"),M(),x(6,"select",52),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editingAllenamento.giorno=i)}),Be(7,Fxe,2,2,"option",25),M()(),x(8,"div",42)(9,"label",51),H(10,"Orario Inizio"),M(),x(11,"input",53),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editingAllenamento.orarioInizio=i)}),M()(),x(12,"div",42)(13,"label",51),H(14,"Orario Fine"),M(),x(15,"input",53),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editingAllenamento.orarioFine=i)}),M()(),x(16,"div",42)(17,"label",51),H(18,"Nome Palestra"),M(),x(19,"input",54),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editingAllenamento.nomePalestra=i)}),M()(),x(20,"div",55)(21,"label",51),H(22,"Indirizzo"),M(),x(23,"input",54),Ee("ngModelChange",function(i){return rt(t),it(Te(2).editingAllenamento.indirizzo=i)}),M()(),x(24,"div",46)(25,"button",56),Ee("click",function(){return rt(t),it(Te(2).updateAllenamento())}),oe(26,"i",57),H(27," Salva "),M(),x(28,"button",58),Ee("click",function(){return rt(t),it(Te(2).cancelEditing())}),oe(29,"i",59),H(30," Annulla "),M()()()}if(2&n){const t=Te(2);z(6),ae("ngModel",t.editingAllenamento.giorno),z(1),ae("ngForOf",t.giorniSettimana),z(4),ae("ngModel",t.editingAllenamento.orarioInizio),z(4),ae("ngModel",t.editingAllenamento.orarioFine),z(4),ae("ngModel",t.editingAllenamento.nomePalestra),z(4),ae("ngModel",t.editingAllenamento.indirizzo),z(2),ae("disabled",!t.isFormValid(t.editingAllenamento))}}function Bxe(n,e){if(1&n&&(x(0,"div",37)(1,"div",38)(2,"div",11),Be(3,Lxe,21,5,"div",39),Be(4,Vxe,31,7,"div",39),M()()()),2&n){const t=e.$implicit,r=Te();z(1),rn("border-primary",(null==r.editingAllenamento?null:r.editingAllenamento.id)===t.id),z(2),ae("ngIf",(null==r.editingAllenamento?null:r.editingAllenamento.id)!==t.id),z(1),ae("ngIf",(null==r.editingAllenamento?null:r.editingAllenamento.id)===t.id)}}let Uxe=(()=>{class n{constructor(t){this.allenamentiService=t,this.allenamenti=[],this.editingAllenamento=null,this.isAdding=!1,this.nuovoAllenamento={giorno:"",orarioInizio:"",orarioFine:"",indirizzo:"",nomePalestra:"",ordinamento:0},this.giorniSettimana=[{nome:"Luned\xec",valore:1},{nome:"Marted\xec",valore:2},{nome:"Mercoled\xec",valore:3},{nome:"Gioved\xec",valore:4},{nome:"Venerd\xec",valore:5},{nome:"Sabato",valore:6},{nome:"Domenica",valore:7}]}ngOnInit(){this.loadAllenamenti()}loadAllenamenti(){this.allenamentiService.getAllenamenti().subscribe(t=>{this.allenamenti=t})}startAdding(){this.isAdding=!0,this.nuovoAllenamento={giorno:"",orarioInizio:"",orarioFine:"",indirizzo:"",nomePalestra:"",ordinamento:0}}cancelAdding(){this.isAdding=!1}saveAllenamento(){if(this.isFormValid(this.nuovoAllenamento)){const t=this.giorniSettimana.find(r=>r.nome===this.nuovoAllenamento.giorno);this.nuovoAllenamento.ordinamento=t?t.valore:0,this.allenamentiService.addAllenamento(this.nuovoAllenamento).then(()=>{this.isAdding=!1,this.loadAllenamenti()})}}startEditing(t){this.editingAllenamento={...t}}cancelEditing(){this.editingAllenamento=null}updateAllenamento(){if(this.editingAllenamento&&this.editingAllenamento.id&&this.isFormValid(this.editingAllenamento)){const t=this.giorniSettimana.find(s=>s.nome===this.editingAllenamento.giorno);this.editingAllenamento.ordinamento=t?t.valore:0;const{id:r,...i}=this.editingAllenamento;this.allenamentiService.updateAllenamento(r,i).then(()=>{this.editingAllenamento=null,this.loadAllenamenti()})}}deleteAllenamento(t){t&&confirm("Sei sicuro di voler eliminare questo allenamento?")&&this.allenamentiService.deleteAllenamento(t).then(()=>{this.loadAllenamenti()})}isFormValid(t){return!!(t.giorno&&t.orarioInizio&&t.orarioFine&&t.indirizzo&&t.nomePalestra)}static{this.\u0275fac=function(r){return new(r||n)(Le(X$))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-impostazioni"]],decls:19,vars:4,consts:[[1,"container-fluid","px-4","mt-3"],[1,"row","mb-4"],[1,"col-12"],[1,"fw-bold","text-primary"],[1,"bi","bi-gear-fill","me-2"],[1,"row"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-calendar3","me-2"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"card-body"],["class","alert alert-info",4,"ngIf"],[1,"row","g-3","mt-2"],["class","col-12",4,"ngIf"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-plus-circle","me-1"],[1,"alert","alert-info"],[1,"fw-bold","mb-3"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],[1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3"],["type","time",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","es. Palestra Paolo VI",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","es. Via Ercolano 11, Castel Gandolfo",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","me-2",3,"disabled","click"],[1,"bi","bi-check-circle","me-1"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[3,"value"],[1,"text-muted","text-center","py-4"],[1,"bi","bi-info-circle","me-2"],[1,"col-md-6","col-lg-4"],[1,"card","h-100"],[4,"ngIf"],[1,"card-title","text-primary"],[1,"bi","bi-calendar-week","me-2"],[1,"mb-2"],[1,"bi","bi-clock","me-2"],[1,"bi","bi-geo-alt","me-2"],[1,"mb-3","text-muted","small"],[1,"d-flex","gap-2"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"form-label","small"],[1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["type","time",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"mb-3"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"bi","bi-check-circle"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"bi","bi-x-circle"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),oe(4,"i",4),H(5," Impostazioni "),M()()(),x(6,"div",5)(7,"div",2)(8,"div",6)(9,"div",7)(10,"h5",8),oe(11,"i",9),H(12," Gestione Allenamenti "),M(),Be(13,kxe,3,0,"button",10),M(),x(14,"div",11),Be(15,Nxe,34,7,"div",12),x(16,"div",13),Be(17,Oxe,4,0,"div",14),Be(18,Bxe,5,4,"div",15),M()()()()()()),2&r&&(z(13),ae("ngIf",!i.isAdding),z(2),ae("ngIf",i.isAdding),z(2),ae("ngIf",0===i.allenamenti.length&&!i.isAdding),z(1),ae("ngForOf",i.allenamenti))},dependencies:[Wd,Sl,NA,OA,Qc,zm,wh,rp],styles:[".card-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.2);color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .2s;font-weight:500}.card-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.25);border-color:#ffffff4d;color:#fff;transform:translateY(-1px)}.card-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{background:rgba(255,255,255,.2);transform:translateY(0)}"]})}}return n})(),jxe=(()=>{class n{constructor(t,r){this.storage=t,this.firestore=r,this.STORAGE_PATH="moduli",this.COLLECTION_NAME="moduli"}caricaModulo(t,r,i){var s=this;return(0,Q.A)(function*(){const o=Date.now(),a=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),c=Lh(s.storage,`${s.STORAGE_PATH}/${o}_${a}`);yield gN(c,t);const u=yield pN(c),d={nome:r,nomeFile:t.name,url:u,dataCaricamento:new Date,dimensione:t.size,tipo:t.type,caricatoDa:i},h=Yc(s.firestore,s.COLLECTION_NAME);yield cy(h,{...d,dataCaricamento:di.fromDate(d.dataCaricamento)})})()}getModuli(){const t=Yc(this.firestore,this.COLLECTION_NAME),r=bA(t,yA("dataCaricamento","desc"));return fs(Jye(r)).pipe(Xt(i=>i.docs.map(s=>{const o=s.data();return{id:s.id,nome:o.nome,nomeFile:o.nomeFile,url:o.url,dataCaricamento:o.dataCaricamento.toDate(),dimensione:o.dimensione,tipo:o.tipo,caricatoDa:o.caricatoDa}})))}eliminaModulo(t){var r=this;return(0,Q.A)(function*(){if(!t.id)throw new Error("ID modulo non valido");const i=ep(r.firestore,r.COLLECTION_NAME,t.id);yield vA(i);try{const s=t.url.match(/o\/(.*?)\?/);if(s&&s[1]){const o=decodeURIComponent(s[1]),a=Lh(r.storage,o);yield Zy(a)}}catch(s){console.error("Errore durante l'eliminazione del file da Storage:",s)}})()}formattaDimensione(t){if(0===t)return"0 Bytes";const s=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]}scaricaModulo(t){const r=document.createElement("a");r.href=t.url,r.download=t.nomeFile,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)}static{this.\u0275fac=function(r){return new(r||n)(bt(Qy),bt(_h))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zxe(n,e){if(1&n){const t=Fn();x(0,"div",30),oe(1,"i",31),H(2),x(3,"button",32),Ee("click",function(){return rt(t),it(Te().successMessage="")}),M()()}if(2&n){const t=Te();z(2),Hn("",t.successMessage," ")}}function $xe(n,e){if(1&n){const t=Fn();x(0,"div",33),oe(1,"i",34),H(2),x(3,"button",32),Ee("click",function(){return rt(t),it(Te().errorMessage="")}),M()()}if(2&n){const t=Te();z(2),Hn("",t.errorMessage," ")}}function Hxe(n,e){1&n&&(x(0,"span"),oe(1,"i",52),H(2,"Carica "),M())}function Gxe(n,e){1&n&&(x(0,"span"),oe(1,"span",53),H(2," Caricamento... "),M())}function qxe(n,e){if(1&n&&(x(0,"div",54)(1,"small",55),oe(2,"i",56),H(3," File selezionato: "),x(4,"strong"),H(5),M(),H(6),M()()),2&n){const t=Te(2);z(5),Qe(t.fileSelezionato.name),z(1),Hn(" (",t.formattaDimensione(t.fileSelezionato.size),") ")}}function Wxe(n,e){if(1&n){const t=Fn();x(0,"div",35)(1,"div",36),Ee("click",function(){return rt(t),it(Te().toggleUploadSection())}),x(2,"div",37)(3,"h5",38),oe(4,"i",39),H(5," Carica nuovo documento "),M(),oe(6,"i",40),M()(),x(7,"div",41)(8,"div",42)(9,"div",43)(10,"label",44),H(11,"Nome documento"),M(),x(12,"input",45),Ee("ngModelChange",function(i){return rt(t),it(Te().nomeModulo=i)}),M()(),x(13,"div",43)(14,"label",46),H(15,"Seleziona file"),M(),x(16,"input",47),Ee("change",function(i){return rt(t),it(Te().onFileSelected(i))}),M()(),x(17,"div",48)(18,"button",49),Ee("click",function(){return rt(t),it(Te().caricaFile())}),Be(19,Hxe,3,0,"span",50),Be(20,Gxe,3,0,"span",50),M()()(),Be(21,qxe,7,2,"div",51),M()()}if(2&n){const t=Te();z(1),rn("collapsed-header",!t.isUploadSectionOpen),z(5),ae("ngClass",t.isUploadSectionOpen?"bi-chevron-up":"bi-chevron-down"),z(1),rn("open",t.isUploadSectionOpen),z(5),ae("ngModel",t.nomeModulo)("disabled",t.isUploading),z(4),ae("disabled",t.isUploading),z(2),ae("disabled",!t.fileSelezionato||!t.nomeModulo.trim()||t.isUploading),z(1),ae("ngIf",!t.isUploading),z(1),ae("ngIf",t.isUploading),z(1),ae("ngIf",t.fileSelezionato)}}function Kxe(n,e){1&n&&(x(0,"div",57)(1,"div",58)(2,"span",59),H(3,"Caricamento..."),M()()())}function Yxe(n,e){1&n&&(x(0,"div",60),oe(1,"i",61),x(2,"p",38),H(3,"Nessun documento disponibile"),M()())}function Xxe(n,e){if(1&n){const t=Fn();x(0,"button",84),Ee("click",function(){rt(t);const i=Te().$implicit;return it(Te(2).eliminaModulo(i))}),oe(1,"i",85),M()}}function Qxe(n,e){if(1&n){const t=Fn();x(0,"tr")(1,"td")(2,"div",78)(3,"div",79),oe(4,"i",40),M(),x(5,"strong"),H(6),M()()(),x(7,"td"),H(8),M(),x(9,"td"),H(10),M(),x(11,"td"),H(12),M(),x(13,"td"),H(14),M(),x(15,"td",80)(16,"button",81),Ee("click",function(){const s=rt(t).$implicit;return it(Te(2).scaricaModulo(s))}),oe(17,"i",82),M(),Be(18,Xxe,2,0,"button",83),M()()}if(2&n){const t=e.$implicit,r=Te(2);z(4),ae("ngClass",r.getIconaFile(t.tipo)),z(2),Qe(t.nome),z(2),Qe(t.nomeFile),z(2),Qe(t.caricatoDa),z(2),Qe(r.formatDate(t.dataCaricamento)),z(2),Qe(r.formattaDimensione(t.dimensione)),z(4),ae("ngIf",r.authService.hasEditPermission())}}const v1=function(n,e,t){return{"bi-arrow-down":n,"bi-arrow-up":e,"bi-arrow-down-up":t}};function Zxe(n,e){if(1&n){const t=Fn();x(0,"div",62)(1,"div",63)(2,"table",64)(3,"thead",65)(4,"tr")(5,"th",66),Ee("click",function(){return rt(t),it(Te().sortBy("nome"))}),x(6,"div",67)(7,"span"),H(8,"Nome Documento"),M(),oe(9,"i",40),M()(),x(10,"th",66),Ee("click",function(){return rt(t),it(Te().sortBy("nomeFile"))}),x(11,"div",67)(12,"span"),H(13,"Nome File"),M(),oe(14,"i",40),M()(),x(15,"th",66),Ee("click",function(){return rt(t),it(Te().sortBy("caricatoDa"))}),x(16,"div",67)(17,"span"),H(18,"Caricato da"),M(),oe(19,"i",40),M()(),x(20,"th",66),Ee("click",function(){return rt(t),it(Te().sortBy("dataCaricamento"))}),x(21,"div",67)(22,"span"),H(23,"Data Caricamento"),M(),oe(24,"i",40),M()(),x(25,"th",66),Ee("click",function(){return rt(t),it(Te().sortBy("dimensione"))}),x(26,"div",67)(27,"span"),H(28,"Dimensione"),M(),oe(29,"i",40),M()(),x(30,"th",68)(31,"div",67)(32,"span"),H(33,"Azioni"),M(),x(34,"button",69),Ee("click",function(){return rt(t),it(Te().clearFilters())}),oe(35,"i",70),M()()()(),x(36,"tr",71)(37,"th")(38,"input",72),Ee("ngModelChange",function(i){return rt(t),it(Te().filters.nome=i)})("input",function(i){return i.stopPropagation()}),M()(),x(39,"th")(40,"input",73),Ee("ngModelChange",function(i){return rt(t),it(Te().filters.nomeFile=i)})("input",function(i){return i.stopPropagation()}),M()(),x(41,"th")(42,"input",74),Ee("ngModelChange",function(i){return rt(t),it(Te().filters.caricatoDa=i)})("input",function(i){return i.stopPropagation()}),M()(),x(43,"th")(44,"input",75),Ee("ngModelChange",function(i){return rt(t),it(Te().filters.dataCaricamento=i)})("input",function(i){return i.stopPropagation()}),M()(),x(45,"th")(46,"input",76),Ee("ngModelChange",function(i){return rt(t),it(Te().filters.dimensione=i)})("input",function(i){return i.stopPropagation()}),M()(),oe(47,"th"),M()(),x(48,"tbody"),Be(49,Qxe,19,7,"tr",77),M()()()()}if(2&n){const t=Te();z(9),ae("ngClass",Jr(11,v1,"nome"===t.sortColumn&&"asc"===t.sortDirection,"nome"===t.sortColumn&&"desc"===t.sortDirection,"nome"!==t.sortColumn)),z(5),ae("ngClass",Jr(15,v1,"nomeFile"===t.sortColumn&&"asc"===t.sortDirection,"nomeFile"===t.sortColumn&&"desc"===t.sortDirection,"nomeFile"!==t.sortColumn)),z(5),ae("ngClass",Jr(19,v1,"caricatoDa"===t.sortColumn&&"asc"===t.sortDirection,"caricatoDa"===t.sortColumn&&"desc"===t.sortDirection,"caricatoDa"!==t.sortColumn)),z(5),ae("ngClass",Jr(23,v1,"dataCaricamento"===t.sortColumn&&"asc"===t.sortDirection,"dataCaricamento"===t.sortColumn&&"desc"===t.sortDirection,"dataCaricamento"!==t.sortColumn)),z(5),ae("ngClass",Jr(27,v1,"dimensione"===t.sortColumn&&"asc"===t.sortDirection,"dimensione"===t.sortColumn&&"desc"===t.sortDirection,"dimensione"!==t.sortColumn)),z(9),ae("ngModel",t.filters.nome),z(2),ae("ngModel",t.filters.nomeFile),z(2),ae("ngModel",t.filters.caricatoDa),z(2),ae("ngModel",t.filters.dataCaricamento),z(2),ae("ngModel",t.filters.dimensione),z(3),ae("ngForOf",t.moduliFiltrati)}}function Jxe(n,e){1&n&&(x(0,"div",57)(1,"div",58)(2,"span",59),H(3,"Caricamento..."),M()()())}function e5e(n,e){1&n&&(x(0,"div",60),oe(1,"i",61),x(2,"p",38),H(3,"Nessun documento disponibile"),M()())}function t5e(n,e){if(1&n){const t=Fn();x(0,"button",104),Ee("click",function(){rt(t);const i=Te().$implicit;return it(Te(2).eliminaModulo(i))}),oe(1,"i",105),H(2,"Elimina "),M()}}function n5e(n,e){if(1&n){const t=Fn();x(0,"div",88)(1,"h2",89)(2,"button",90)(3,"div",91),oe(4,"i",40),M(),x(5,"div",92)(6,"div",93),H(7),M(),x(8,"small",55),H(9),M()()()(),x(10,"div",94)(11,"div",95)(12,"div",96)(13,"div",97)(14,"span",98),H(15,"Nome file"),M(),x(16,"span",99),H(17),M()()(),x(18,"div",96)(19,"div",97)(20,"span",98),H(21,"Caricato il"),M(),x(22,"span",99),H(23),ei(24,"date"),M()()(),x(25,"div",96)(26,"div",97)(27,"span",98),H(28,"Caricato da"),M(),x(29,"span",99),H(30),M()()(),x(31,"div",100)(32,"button",101),Ee("click",function(){const s=rt(t).$implicit;return it(Te(2).scaricaModulo(s))}),oe(33,"i",102),H(34,"Scarica "),M(),Be(35,t5e,3,0,"button",103),M()()()()}if(2&n){const t=e.$implicit,r=e.index,i=Te(2);z(1),Pi("id","heading"+r),z(1),Pi("data-bs-target","#collapse"+r)("aria-controls","collapse"+r),z(2),ae("ngClass",i.getIconaFile(t.tipo)),z(3),Qe(t.nome),z(2),Qe(i.formattaDimensione(t.dimensione)),z(1),Pi("id","collapse"+r)("aria-labelledby","heading"+r),z(7),Qe(t.nomeFile),z(6),Qe(va(24,12,t.dataCaricamento,"dd/MM/yyyy HH:mm")),z(7),Qe(t.caricatoDa),z(5),ae("ngIf",i.authService.hasEditPermission())}}function r5e(n,e){if(1&n&&(x(0,"div",86),Be(1,n5e,36,15,"div",87),M()),2&n){const t=Te();z(1),ae("ngForOf",t.moduli)}}let i5e=(()=>{class n{constructor(t,r){this.moduliService=t,this.authService=r,this.moduli=[],this.isLoading=!1,this.isUploading=!1,this.errorMessage="",this.successMessage="",this.isUploadSectionOpen=!1,this.nomeModulo="",this.fileSelezionato=null,this.filters={nome:"",nomeFile:"",caricatoDa:"",dataCaricamento:"",dimensione:""},this.sortColumn="dataCaricamento",this.sortDirection="desc"}ngOnInit(){this.caricaModuli()}caricaModuli(){this.isLoading=!0,this.errorMessage="",this.moduliService.getModuli().subscribe({next:t=>{this.moduli=t,this.isLoading=!1},error:t=>{console.error("Errore nel caricamento dei moduli:",t),this.errorMessage="Errore nel caricamento dei moduli",this.isLoading=!1}})}onFileSelected(t){const r=t.target.files[0];r&&(this.fileSelezionato=r,this.nomeModulo||(this.nomeModulo=r.name.replace(/\.[^/.]+$/,"")))}caricaFile(){var t=this;return(0,Q.A)(function*(){if(!t.fileSelezionato||!t.nomeModulo.trim())return void(t.errorMessage="Seleziona un file e inserisci un nome");const r=t.authService.currentUserValue;if(r){t.isUploading=!0,t.errorMessage="",t.successMessage="";try{const i=`${r.nome} ${r.cognome}`;yield t.moduliService.caricaModulo(t.fileSelezionato,t.nomeModulo,i),t.successMessage="File caricato con successo!",t.nomeModulo="",t.fileSelezionato=null;const s=document.getElementById("fileInput");s&&(s.value=""),t.caricaModuli(),setTimeout(()=>{t.successMessage=""},3e3)}catch(i){console.error("Errore nel caricamento del file:",i),t.errorMessage="Errore nel caricamento del file"}finally{t.isUploading=!1}}else t.errorMessage="Utente non autenticato"})()}eliminaModulo(t){var r=this;return(0,Q.A)(function*(){if(confirm(`Sei sicuro di voler eliminare "${t.nome}"?`))try{yield r.moduliService.eliminaModulo(t),r.successMessage="File eliminato con successo!",r.caricaModuli(),setTimeout(()=>{r.successMessage=""},3e3)}catch(i){console.error("Errore nell'eliminazione del file:",i),r.errorMessage="Errore nell'eliminazione del file"}})()}scaricaModulo(t){this.moduliService.scaricaModulo(t)}formattaDimensione(t){return this.moduliService.formattaDimensione(t)}getIconaFile(t){return t.includes("pdf")?"bi-file-pdf-fill":t.includes("word")||t.includes("document")?"bi-file-word-fill":t.includes("excel")||t.includes("spreadsheet")?"bi-file-excel-fill":t.includes("image")?"bi-file-image-fill":t.includes("zip")||t.includes("compressed")?"bi-file-zip-fill":"bi-file-earmark-fill"}toggleUploadSection(){this.isUploadSectionOpen=!this.isUploadSectionOpen}get moduliFiltrati(){let t=[...this.moduli];return this.filters.nome&&(t=t.filter(r=>r.nome.toLowerCase().includes(this.filters.nome.toLowerCase()))),this.filters.nomeFile&&(t=t.filter(r=>r.nomeFile.toLowerCase().includes(this.filters.nomeFile.toLowerCase()))),this.filters.caricatoDa&&(t=t.filter(r=>r.caricatoDa.toLowerCase().includes(this.filters.caricatoDa.toLowerCase()))),this.filters.dataCaricamento&&(t=t.filter(r=>this.formatDate(r.dataCaricamento).includes(this.filters.dataCaricamento))),this.filters.dimensione&&(t=t.filter(r=>this.formattaDimensione(r.dimensione).toLowerCase().includes(this.filters.dimensione.toLowerCase()))),t.sort((r,i)=>{let s,o;switch(this.sortColumn){case"nome":s=r.nome.toLowerCase(),o=i.nome.toLowerCase();break;case"nomeFile":s=r.nomeFile.toLowerCase(),o=i.nomeFile.toLowerCase();break;case"caricatoDa":s=r.caricatoDa.toLowerCase(),o=i.caricatoDa.toLowerCase();break;case"dataCaricamento":s=r.dataCaricamento.getTime(),o=i.dataCaricamento.getTime();break;case"dimensione":s=r.dimensione,o=i.dimensione;break;default:return 0}return s<o?"asc"===this.sortDirection?-1:1:s>o?"asc"===this.sortDirection?1:-1:0}),t}sortBy(t){this.sortColumn===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=t,this.sortDirection="asc")}clearFilters(){this.filters={nome:"",nomeFile:"",caricatoDa:"",dataCaricamento:"",dimensione:""}}formatDate(t){return ks.formatDateTime(t)}static{this.\u0275fac=function(r){return new(r||n)(Le(jxe),Le(ld))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-moduli"]],decls:37,vars:11,consts:[[1,"container-fluid","py-4","custom-spacing"],[1,"desktop-header","d-none","d-md-block","mb-3"],[1,"desktop-header-card"],[1,"desktop-header-content"],[1,"header-left"],[1,"header-icon"],[1,"bi","bi-file-earmark-text-fill"],[1,"header-text"],[1,"header-title"],[1,"header-meta"],[1,"meta-item"],[1,"bi","bi-files","me-1"],[1,"mobile-header","d-md-none","mb-3"],[1,"mobile-header-card"],[1,"mobile-header-title"],[1,"bi","bi-file-earmark-text-fill","me-2"],[1,"title-text"],[1,"mobile-header-info"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","card mb-4 upload-card",4,"ngIf"],[1,"d-none","d-md-block"],["class","text-center py-5",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"d-md-none"],["class","accordion","id","moduliAccordion",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"card","mb-4","upload-card"],[1,"card-header","bg-primary","text-white",2,"cursor","pointer",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-cloud-upload-fill","me-2"],[1,"bi",3,"ngClass"],[1,"card-body","upload-body"],[1,"row","g-3"],[1,"col-md-5"],["for","nomeModulo",1,"form-label","fw-semibold"],["type","text","id","nomeModulo","placeholder","Es: Modulo iscrizione 2025/26",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","fileInput",1,"form-label","fw-semibold"],["type","file","id","fileInput",1,"form-control",3,"disabled","change"],[1,"col-md-2","d-flex","align-items-end"],[1,"btn","btn-primary","w-100",3,"disabled","click"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"bi","bi-upload","me-1"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"mt-2"],[1,"text-muted"],[1,"bi","bi-file-earmark","me-1"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-5","text-muted"],[1,"bi","bi-inbox","fs-1","d-block","mb-3"],[1,"table-container"],[1,"table-wrapper"],[1,"table","table-hover","modern-table"],[1,"table-header","sticky-header"],[1,"sortable",3,"click"],[1,"th-content"],[1,"actions-column"],["title","Pulisci filtri",1,"btn","btn-sm","btn-link","text-white",3,"click"],[1,"bi","bi-x-circle"],[1,"filter-row"],["type","text","placeholder","Filtra nome...",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Filtra file...",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Filtra utente...",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Filtra data...",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],["type","text","placeholder","Filtra dimensione...",1,"form-control","form-control-sm","filter-input",3,"ngModel","ngModelChange","input"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"file-icon-small","me-2"],[1,"actions-cell"],["title","Scarica",1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"bi","bi-download"],["class","btn btn-sm btn-danger","title","Elimina",3,"click",4,"ngIf"],["title","Elimina",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],["id","moduliAccordion",1,"accordion"],["class","accordion-item mobile-modulo-card",4,"ngFor","ngForOf"],[1,"accordion-item","mobile-modulo-card"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","mobile-modulo-header"],[1,"file-icon-mobile","me-3"],[1,"flex-grow-1"],[1,"modulo-nome"],["data-bs-parent","#moduliAccordion",1,"accordion-collapse","collapse"],[1,"accordion-body","mobile-modulo-details"],[1,"detail-row"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"action-buttons","mt-3"],[1,"btn","btn-primary","btn-sm","flex-fill",3,"click"],[1,"bi","bi-download","me-1"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash","me-1"]],template:function(r,i){1&r&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),oe(6,"i",6),M(),x(7,"div",7)(8,"h3",8),H(9,"Moduli e Documenti"),M(),x(10,"div",9)(11,"span",10),oe(12,"i",11),H(13),M()()()()()()(),x(14,"div",12)(15,"div",13)(16,"div",14),oe(17,"i",15),x(18,"span",16),H(19,"Moduli"),M()(),x(20,"div",17)(21,"div",18)(22,"span",19),H(23,"Documenti"),M(),x(24,"span",20),H(25),M()()()()(),Be(26,zxe,4,1,"div",21),Be(27,$xe,4,1,"div",22),Be(28,Wxe,22,12,"div",23),x(29,"div",24),Be(30,Kxe,4,0,"div",25),Be(31,Yxe,4,0,"div",26),Be(32,Zxe,50,31,"div",27),M(),x(33,"div",28),Be(34,Jxe,4,0,"div",25),Be(35,e5e,4,0,"div",26),Be(36,r5e,2,1,"div",29),M()()),2&r&&(z(13),Hn("",i.moduli.length," documenti disponibili "),z(12),Qe(i.moduli.length),z(1),ae("ngIf",i.successMessage),z(1),ae("ngIf",i.errorMessage),z(1),ae("ngIf",i.authService.hasEditPermission()),z(2),ae("ngIf",i.isLoading),z(1),ae("ngIf",!i.isLoading&&0===i.moduli.length),z(1),ae("ngIf",!i.isLoading&&i.moduli.length>0),z(2),ae("ngIf",i.isLoading),z(1),ae("ngIf",!i.isLoading&&0===i.moduli.length),z(1),ae("ngIf",!i.isLoading&&i.moduli.length>0))},dependencies:[Fg,Wd,Sl,Qc,wh,rp,L0],styles:[".custom-spacing[_ngcontent-%COMP%]{padding-bottom:80px}.desktop-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #00000026;color:#fff}.desktop-header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{font-size:2.5rem;opacity:.9}.header-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.header-meta[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-top:.5rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.95rem;opacity:.95}.mobile-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:12px;padding:1rem;box-shadow:0 4px 8px #00000026;color:#fff}.mobile-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;font-weight:700;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid rgba(255,255,255,.2);color:#fff}.title-text[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.5px;color:#fff}.mobile-header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.9rem;color:#fff!important}.info-label[_ngcontent-%COMP%]{opacity:.9;color:#fff!important}.info-value[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#fff!important}.upload-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a;border:none;border-radius:12px;overflow:hidden}.upload-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border-bottom:none;padding:1rem 1.5rem;transition:all .3s ease}.upload-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0a58ca 0%,#084298 100%)!important}.upload-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem;transition:all .3s ease}.upload-card[_ngcontent-%COMP%]   .upload-body[_ngcontent-%COMP%]{display:none}.upload-card[_ngcontent-%COMP%]   .upload-body.open[_ngcontent-%COMP%]{display:block}.table-container[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.modern-table[_ngcontent-%COMP%]{margin-bottom:0;width:100%}.table-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);color:#fff}.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}.table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:1rem;font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:.5px;vertical-align:middle}.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.sortable[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1)}.th-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem}.th-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;opacity:.8}.filter-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem 1rem;background:rgba(255,255,255,.95)}.filter-input[_ngcontent-%COMP%]{background:white;border:1px solid #dee2e6;border-radius:6px;font-size:.875rem}.filter-input[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:background-color .2s}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle}.file-icon-small[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:6px;color:#fff;font-size:1rem;flex-shrink:0}.actions-column[_ngcontent-%COMP%]{width:120px;text-align:center}.actions-cell[_ngcontent-%COMP%]{white-space:nowrap;text-align:center}.actions-cell[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem}.modulo-card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 2px 8px #00000014;transition:transform .2s,box-shadow .2s}.modulo-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 16px #00000026}.file-icon[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:10px;color:#fff;font-size:1.5rem;flex-shrink:0}.modulo-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:600;color:#212529;font-size:1rem;margin:0}.modulo-info[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:.75rem}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.25rem 0;font-size:.875rem}.info-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #e9ecef}.info-label[_ngcontent-%COMP%]{color:#6c757d;font-weight:500}.info-value[_ngcontent-%COMP%]{color:#212529;font-weight:600;text-align:right}.mobile-modulo-card[_ngcontent-%COMP%]{border:none;border-radius:12px;margin-bottom:.75rem;box-shadow:0 2px 8px #00000014;overflow:hidden}.mobile-modulo-header[_ngcontent-%COMP%]{padding:1rem;background:white;border:none;display:flex;align-items:center;gap:.75rem}.mobile-modulo-header[_ngcontent-%COMP%]:not(.collapsed){background:#f8f9fa;border-bottom:1px solid #dee2e6}.mobile-modulo-header[_ngcontent-%COMP%]:after{margin-left:auto;flex-shrink:0}.file-icon-mobile[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d6efd 0%,#0a58ca 100%);border-radius:8px;color:#fff;font-size:1.25rem;flex-shrink:0}.modulo-nome[_ngcontent-%COMP%]{font-weight:600;color:#212529;font-size:.95rem;margin-bottom:.25rem}.mobile-modulo-details[_ngcontent-%COMP%]{padding:1rem;background:white}.detail-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.75rem}.detail-row[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.detail-item[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.detail-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.detail-value[_ngcontent-%COMP%]{font-size:.9rem;color:#212529;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media (max-width: 767.98px){.custom-spacing[_ngcontent-%COMP%]{padding-bottom:100px}.upload-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}}"]})}}return n})(),Cp=(()=>{class n{constructor(t,r){this.router=t,this.authService=r}canActivate(t,r){return!!this.authService.isAuthenticated()||(this.router.navigate(["/login"]),!1)}static{this.\u0275fac=function(r){return new(r||n)(bt(wo),bt(ld))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const s5e=[{path:"login",component:xEe},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"home",component:p1e,canActivate:[Cp]},{path:"profilo",component:Mxe,canActivate:[Cp]},{path:"squadra",component:Tbe,canActivate:[Cp]},{path:"calendario",component:pEe,canActivate:[Cp]},{path:"classifica",component:EEe,canActivate:[Cp]},{path:"moduli",component:i5e,canActivate:[Cp]},{path:"impostazioni",component:Uxe,canActivate:[Cp]}];let o5e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({imports:[AU.forRoot(s5e),AU]})}}return n})();function a5e(n,e){if(1&n&&(x(0,"a",42)(1,"div",43),oe(2,"i",44),M(),x(3,"div",45)(4,"p",46),H(5),ei(6,"capitalize"),ei(7,"capitalize"),M(),x(8,"small",47),H(9),M()(),oe(10,"i",48),M()),2&n){const t=Te();z(5),ic("",Cl(6,3,t.currentUser.nome)," ",Cl(7,5,t.currentUser.cognome),""),z(4),Qe(t.currentUser.profilo)}}function l5e(n,e){1&n&&(x(0,"li",12)(1,"a",49),oe(2,"i",50),x(3,"span"),H(4,"Squadra"),M(),oe(5,"i",15),M()())}function c5e(n,e){1&n&&(x(0,"div",25)(1,"a",51),oe(2,"i",52),x(3,"span"),H(4,"Impostazioni"),M(),oe(5,"i",15),M()())}function u5e(n,e){if(1&n){const t=Fn();x(0,"a",53),Ee("click",function(){return rt(t),it(Te().toggleMenu())}),x(1,"div",43),oe(2,"i",44),M(),x(3,"div",45)(4,"p",46),H(5),ei(6,"capitalize"),ei(7,"capitalize"),M(),x(8,"small",47),H(9),M()(),oe(10,"i",48),M()}if(2&n){const t=Te();z(5),ic("",Cl(6,3,t.currentUser.nome)," ",Cl(7,5,t.currentUser.cognome),""),z(4),Qe(t.currentUser.profilo)}}function d5e(n,e){if(1&n){const t=Fn();x(0,"li",12)(1,"a",54),Ee("click",function(){return rt(t),it(Te().toggleMenu())}),oe(2,"i",50),x(3,"span"),H(4,"Squadra"),M(),oe(5,"i",15),M()()}}function h5e(n,e){if(1&n){const t=Fn();x(0,"li",12)(1,"a",55),Ee("click",function(){return rt(t),it(Te().toggleMenu())}),oe(2,"i",52),x(3,"span"),H(4,"Impostazioni"),M(),oe(5,"i",15),M()()}}function f5e(n,e){if(1&n){const t=Fn();x(0,"div",56),Ee("click",function(){return rt(t),it(Te().toggleMenu())}),M()}2&n&&rn("show",Te().menuOpen)}let p5e=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.menuOpen=!1,this.currentUser=null}ngOnInit(){this.authService.currentUser.subscribe(t=>{this.currentUser=t}),window.addEventListener("toggleMenu",()=>{this.toggleMenu()})}toggleMenu(){this.menuOpen=!this.menuOpen}isAdmin(){return this.authService.hasEditPermission()}getInitials(){return this.currentUser?((this.currentUser.nome?.charAt(0)||"")+(this.currentUser.cognome?.charAt(0)||"")).toUpperCase():""}logout(){this.authService.logout(),this.menuOpen=!1,this.router.navigate(["/login"])}static{this.\u0275fac=function(r){return new(r||n)(Le(ld),Le(wo))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-header"]],decls:82,vars:9,consts:[[1,"navbar","navbar-dark","bg-primary","d-md-none"],[1,"container-fluid","justify-content-center"],[1,"navbar-brand"],[1,"bi","bi-lightning-fill"],[1,"sidebar","d-none","d-md-flex","flex-column"],[1,"sidebar-header","bg-primary","text-white","p-3"],[1,"mb-0","fw-bold"],[1,"bi","bi-list-ul","me-2"],[1,"sidebar-body","flex-grow-1","d-flex","flex-column"],[1,"user-info-section","p-3","bg-light","border-bottom"],["class","d-flex align-items-center text-decoration-none text-dark user-info-link","routerLink","/profilo","routerLinkActive","active",4,"ngIf"],[1,"nav","flex-column","menu-items"],[1,"nav-item"],["routerLink","/home","routerLinkActive","active",1,"nav-link","menu-link"],[1,"bi","bi-house-door-fill","me-3"],[1,"bi","bi-chevron-right","ms-auto"],["class","nav-item",4,"ngIf"],["routerLink","/calendario","routerLinkActive","active",1,"nav-link","menu-link"],[1,"bi","bi-calendar-event-fill","me-3"],["routerLink","/classifica","routerLinkActive","active",1,"nav-link","menu-link"],[1,"bi","bi-trophy-fill","me-3"],["routerLink","/moduli","routerLinkActive","active",1,"nav-link","menu-link"],[1,"bi","bi-file-earmark-text-fill","me-3"],[1,"mt-auto","p-3"],["class","p-3 border-top",4,"ngIf"],[1,"p-3","border-top"],["href","https://www.instagram.com/thunders.team_/","target","_blank","rel","noopener noreferrer",1,"nav-link","menu-link","instagram-sidebar-link"],[1,"bi","bi-instagram","me-3"],[1,"bi","bi-box-arrow-up-right","ms-auto"],[1,"logout-section","p-3","bg-light","border-top"],[1,"nav-link","menu-link","logout-link",3,"click"],[1,"bi","bi-box-arrow-right","me-3"],["tabindex","-1",1,"offcanvas","offcanvas-start","d-md-none"],[1,"offcanvas-header","bg-primary","text-white"],[1,"offcanvas-title","fw-bold"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"offcanvas-body","p-0"],["class","d-flex align-items-center text-decoration-none text-dark user-info-link","routerLink","/profilo","routerLinkActive","active",3,"click",4,"ngIf"],["routerLink","/moduli","routerLinkActive","active",1,"nav-link","menu-link",3,"click"],["href","https://www.instagram.com/thunders.team_/","target","_blank","rel","noopener noreferrer",1,"nav-link","menu-link","instagram-link"],[1,"logout-section","mt-auto","p-3","border-top"],["class","offcanvas-backdrop fade d-md-none",3,"show","click",4,"ngIf"],["routerLink","/profilo","routerLinkActive","active",1,"d-flex","align-items-center","text-decoration-none","text-dark","user-info-link"],[1,"user-avatar","me-3"],[1,"bi","bi-person-circle"],[1,"flex-grow-1"],[1,"mb-0","fw-semibold"],[1,"text-muted"],[1,"bi","bi-chevron-right"],["routerLink","/squadra","routerLinkActive","active",1,"nav-link","menu-link"],[1,"bi","bi-people-fill","me-3"],["routerLink","/impostazioni","routerLinkActive","active",1,"nav-link","menu-link"],[1,"bi","bi-gear-fill","me-3"],["routerLink","/profilo","routerLinkActive","active",1,"d-flex","align-items-center","text-decoration-none","text-dark","user-info-link",3,"click"],["routerLink","/squadra","routerLinkActive","active",1,"nav-link","menu-link",3,"click"],["routerLink","/impostazioni","routerLinkActive","active",1,"nav-link","menu-link",3,"click"],[1,"offcanvas-backdrop","fade","d-md-none",3,"click"]],template:function(r,i){1&r&&(x(0,"nav",0)(1,"div",1)(2,"span",2),H(3," PuntoVolley Thunders "),oe(4,"i",3),M()()(),x(5,"div",4)(6,"div",5)(7,"h5",6),oe(8,"i",7),H(9,"Menu "),M()(),x(10,"div",8)(11,"div",9),Be(12,a5e,11,7,"a",10),M(),x(13,"ul",11)(14,"li",12)(15,"a",13),oe(16,"i",14),x(17,"span"),H(18,"Home"),M(),oe(19,"i",15),M()(),Be(20,l5e,6,0,"li",16),x(21,"li",12)(22,"a",17),oe(23,"i",18),x(24,"span"),H(25,"Calendario"),M(),oe(26,"i",15),M()(),x(27,"li",12)(28,"a",19),oe(29,"i",20),x(30,"span"),H(31,"Classifica"),M(),oe(32,"i",15),M()(),x(33,"li",12)(34,"a",21),oe(35,"i",22),x(36,"span"),H(37,"Moduli"),M(),oe(38,"i",15),M()()(),oe(39,"div",23),Be(40,c5e,6,0,"div",24),x(41,"div",25)(42,"a",26),oe(43,"i",27),x(44,"span"),H(45,"Seguici su Instagram!"),M(),oe(46,"i",28),M()(),x(47,"div",29)(48,"a",30),Ee("click",function(){return i.logout()}),oe(49,"i",31),x(50,"span"),H(51,"Logout"),M()()()()(),x(52,"div",32)(53,"div",33)(54,"h5",34),oe(55,"i",7),H(56,"Menu "),M(),x(57,"button",35),Ee("click",function(){return i.toggleMenu()}),M()(),x(58,"div",36)(59,"div",9),Be(60,u5e,11,7,"a",37),M(),x(61,"ul",11),Be(62,d5e,6,0,"li",16),Be(63,h5e,6,0,"li",16),x(64,"li",12)(65,"a",38),Ee("click",function(){return i.toggleMenu()}),oe(66,"i",22),x(67,"span"),H(68,"Moduli"),M(),oe(69,"i",15),M()(),x(70,"li",12)(71,"a",39),oe(72,"i",27),x(73,"span"),H(74,"Seguici su Instagram!"),M(),oe(75,"i",28),M()()(),x(76,"div",40)(77,"a",30),Ee("click",function(){return i.logout()}),oe(78,"i",31),x(79,"span"),H(80,"Logout"),M()()()()(),Be(81,f5e,1,2,"div",41)),2&r&&(z(12),ae("ngIf",i.currentUser),z(8),ae("ngIf",i.isAdmin()),z(20),ae("ngIf",i.isAdmin()),z(12),rn("show",i.menuOpen),z(8),ae("ngIf",i.currentUser),z(2),ae("ngIf",i.isAdmin()),z(1),ae("ngIf",i.isAdmin()),z(18),ae("ngIf",i.menuOpen))},dependencies:[Sl,Kg,px,qk],styles:['.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:280px;height:100vh;background-color:#fff;box-shadow:2px 0 5px #0000001a;z-index:1010;display:flex;flex-direction:column}.sidebar-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.sidebar-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column;min-height:0}.navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1030}.navbar-brand[_ngcontent-%COMP%]{font-weight:700}.offcanvas[_ngcontent-%COMP%]{visibility:hidden;transform:translate(-100%);transition:transform .3s ease-in-out;width:280px;max-width:80vw}.offcanvas.show[_ngcontent-%COMP%]{visibility:visible;transform:translate(0)}.offcanvas-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000;opacity:0;visibility:hidden;transition:opacity .3s ease-in-out}.offcanvas-backdrop.show[_ngcontent-%COMP%]{opacity:.5;visibility:visible}.offcanvas-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.user-info-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)}.user-info-link[_ngcontent-%COMP%]{transition:background-color .2s ease;border-radius:8px;padding:4px;margin:-4px}.user-info-link[_ngcontent-%COMP%]:hover{background-color:#0000000d}.user-info-link.active[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1)}.user-avatar[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--bs-primary);line-height:1}.menu-items[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem 0}.menu-link[_ngcontent-%COMP%]{color:#212529;padding:1rem 1.5rem;display:flex;align-items:center;transition:all .2s ease;border-left:3px solid transparent;font-weight:500;position:relative;overflow:hidden}.menu-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;height:100%;width:0;background:linear-gradient(90deg,rgba(13,110,253,.1) 0%,transparent 100%);transition:width .3s ease}.menu-link[_ngcontent-%COMP%]:hover:before{width:100%}.menu-link[_ngcontent-%COMP%]:hover{background-color:#0d6efd0d;border-left-color:var(--bs-primary);color:var(--bs-primary);transform:translate(5px)}.menu-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(13,110,253,.15) 0%,rgba(13,110,253,.05) 100%);border-left-color:var(--bs-primary);color:var(--bs-primary);font-weight:600}.menu-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:first-child{font-size:1.25rem;width:24px;text-align:center}.menu-link[_ngcontent-%COMP%]   i.bi-chevron-right[_ngcontent-%COMP%]{font-size:.875rem;opacity:.5;transition:transform .2s ease,opacity .2s ease}.menu-link[_ngcontent-%COMP%]:hover   i.bi-chevron-right[_ngcontent-%COMP%], .menu-link.active[_ngcontent-%COMP%]   i.bi-chevron-right[_ngcontent-%COMP%]{opacity:1;transform:translate(3px)}.logout-section[_ngcontent-%COMP%]{background-color:#f8f9fa}.logout-link[_ngcontent-%COMP%]{color:#dc3545;padding:.75rem 1rem;display:flex;align-items:center;transition:all .2s ease;border-radius:.375rem;font-weight:500}.logout-link[_ngcontent-%COMP%]:hover{background-color:#dc35451a;color:#bb2d3b;transform:translate(5px)}.logout-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}']})}}return n})(),g5e=(()=>{class n{constructor(t){this.router=t}isActive(t){return this.router.url===t||this.router.url.startsWith(t+"/")}openMenu(){window.dispatchEvent(new CustomEvent("toggleMenu"))}static{this.\u0275fac=function(r){return new(r||n)(Le(wo))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-footer"]],decls:22,vars:6,consts:[[1,"bottom-nav","bg-white","fixed-bottom","shadow-lg","d-md-none"],[1,"nav-container"],["routerLink","/home","routerLinkActive","active",1,"nav-item"],[1,"nav-icon"],[1,"bi","bi-house-door-fill"],[1,"nav-label"],["routerLink","/calendario","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-calendar-event-fill"],["routerLink","/classifica","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-trophy-fill"],[1,"nav-item",3,"click"],[1,"bi","bi-grid-fill"]],template:function(r,i){1&r&&(x(0,"nav",0)(1,"div",1)(2,"a",2)(3,"div",3),oe(4,"i",4),M(),x(5,"span",5),H(6,"Home"),M()(),x(7,"a",6)(8,"div",3),oe(9,"i",7),M(),x(10,"span",5),H(11,"Calendario"),M()(),x(12,"a",8)(13,"div",3),oe(14,"i",9),M(),x(15,"span",5),H(16,"Classifica"),M()(),x(17,"a",10),Ee("click",function(){return i.openMenu()}),x(18,"div",3),oe(19,"i",11),M(),x(20,"span",5),H(21,"Altro"),M()()()()),2&r&&(z(2),rn("active",i.isActive("/home")),z(5),rn("active",i.isActive("/calendario")),z(5),rn("active",i.isActive("/classifica")))},dependencies:[Kg,px],styles:[".bottom-nav[_ngcontent-%COMP%]{z-index:1030;border-top:1px solid rgba(0,0,0,.08);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:#fffffff2!important;padding-bottom:env(safe-area-inset-bottom)}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;height:75px;max-width:600px;margin:0 auto;padding:0 1rem}.nav-item[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-decoration:none;color:#6c757d;padding:.5rem;border-radius:12px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;gap:.25rem}.nav-icon[_ngcontent-%COMP%]{font-size:1.5rem;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:12px}.nav-item[_ngcontent-%COMP%]:not(.active):active   .nav-icon[_ngcontent-%COMP%]{transform:scale(.9)}.nav-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;transition:all .3s cubic-bezier(.4,0,.2,1);opacity:.8}.nav-item.active[_ngcontent-%COMP%]{color:var(--bs-primary)}.nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(13,110,253,.15) 0%,rgba(13,110,253,.25) 100%);transform:translateY(-2px);box-shadow:0 4px 12px #0d6efd33}.nav-item.active[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-weight:600;opacity:1}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 4px 12px #0d6efd33}50%{box-shadow:0 4px 16px #0d6efd4d}to{box-shadow:0 4px 12px #0d6efd33}}.nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@media (hover: hover){.nav-item[_ngcontent-%COMP%]:hover:not(.active){color:var(--bs-primary)}.nav-item[_ngcontent-%COMP%]:hover:not(.active)   .nav-icon[_ngcontent-%COMP%]{background:rgba(13,110,253,.08);transform:translateY(-2px)}.nav-item[_ngcontent-%COMP%]:hover:not(.active)   .nav-label[_ngcontent-%COMP%]{opacity:1}}"]})}}return n})();function m5e(n,e){1&n&&oe(0,"app-header")}function _5e(n,e){1&n&&oe(0,"app-footer")}let v5e=(()=>{class n{constructor(t){this.authService=t,this.title="thunders-pwa"}static{this.\u0275fac=function(r){return new(r||n)(Le(ld))}}static{this.\u0275cmp=fa({type:n,selectors:[["app-root"]],decls:4,vars:4,consts:[[4,"ngIf"]],template:function(r,i){1&r&&(Be(0,m5e,1,0,"app-header",0),x(1,"div"),oe(2,"router-outlet"),M(),Be(3,_5e,1,0,"app-footer",0)),2&r&&(ae("ngIf",i.authService.isAuthenticated()),z(1),rn("with-nav",i.authService.isAuthenticated()),z(2),ae("ngIf",i.authService.isAuthenticated()))},dependencies:[Sl,ax,p5e,g5e],styles:[".with-nav[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:85px;min-height:calc(100vh - 141px)}@media (min-width: 768px){.with-nav[_ngcontent-%COMP%]{padding-top:10px;padding-left:280px;padding-bottom:0;min-height:100vh}}"]})}}return n})();const y5e=["addListener","removeListener"],b5e=["addEventListener","removeEventListener"],w5e=["on","off"];function QC(n,e,t,r){if(nt(t)&&(r=t,t=void 0),r)return QC(n,e,t).pipe(HS(r));const[i,s]=function E5e(n){return nt(n.addEventListener)&&nt(n.removeEventListener)}(n)?b5e.map(o=>a=>n[o](e,a,t)):function A5e(n){return nt(n.addListener)&&nt(n.removeListener)}(n)?y5e.map(jY(n,e)):function C5e(n){return nt(n.on)&&nt(n.off)}(n)?w5e.map(jY(n,e)):[];if(!i&&AE(n))return hs(o=>QC(o,e,t))(go(n));if(!i)throw new TypeError("Invalid event target");return new Ve(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function jY(n,e){return t=>r=>n[t](e,r)}const Bh=new Ve(ho),T5e={connector:()=>new pn};function zY(n,e=T5e){const{connector:t}=e;return Wn((r,i)=>{const s=t();go(n(function I5e(n){return new Ve(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function $Y(n,e){return e?t=>U0(e.pipe(ba(1),function D5e(){return Wn((n,e)=>{n.subscribe(Bn(e,ho))})}()),t.pipe($Y(n))):hs((t,r)=>go(n(t,r)).pipe(ba(1),wB(t)))}const y1="Service workers are disabled or not supported by this browser";class ZC{constructor(e){if(this.serviceWorker=e,e){const r=QC(e,"controllerchange").pipe(Xt(()=>e.controller)),s=U0(Pw(()=>Qt(e.controller)),r);this.worker=s.pipe(wa(u=>!!u)),this.registration=this.worker.pipe(da(()=>e.getRegistration()));const c=QC(e,"message").pipe(Xt(u=>u.data)).pipe(wa(u=>u&&u.type)).pipe(function x5e(n){return n?e=>zY(n)(e):e=>function S5e(n,e){const t=nt(n)?n:()=>n;return nt(e)?zY(e,{connector:t}):r=>new qS(r,t)}(new pn)(e)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=function R5e(n){return Pw(()=>Vg(new Error(n)))}(y1)}postMessage(e,t){return this.worker.pipe(ba(1),Ms(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(wa(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(ba(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(wa(t=>t.nonce===e),ba(1),Xt(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let HY=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new pn,!t.isEnabled)return this.messages=Bh,this.notificationClicks=Bh,void(this.subscription=Bh);this.messages=this.sw.eventsOfType("PUSH").pipe(Xt(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Xt(i=>i.data)),this.pushManager=this.sw.registration.pipe(Xt(i=>i.pushManager));const r=this.pushManager.pipe(da(i=>i.getSubscription()));this.subscription=EE(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(y1));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(da(o=>o.subscribe(r)),ba(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ba(1),da(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(y1))}decodeBase64(t){return atob(t)}static{this.\u0275fac=function(r){return new(r||n)(bt(ZC))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})(),GY=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Bh,this.available=Bh,this.activated=Bh,void(this.unrecoverable=Bh);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(wa(r=>"VERSION_READY"===r.type),Xt(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(y1));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(y1));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static{this.\u0275fac=function(r){return new(r||n)(bt(ZC))}}static{this.\u0275prov=Et({token:n,factory:n.\u0275fac})}}return n})();const qY=new gt("NGSW_REGISTER_SCRIPT");function N5e(n,e,t,r){return()=>{if(!KV(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)i=t.registrationStrategy();else{const[o,...a]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Qt(null);break;case"registerWithDelay":i=WY(+a[0]||0);break;case"registerWhenStable":i=a[0]?EE(KY(n),WY(+a[0])):KY(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(dr).runOutsideAngular(()=>i.pipe(ba(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function WY(n){return Qt(null).pipe(function k5e(n,e=Lx){const t=function M5e(n=0,e,t=Zfe){let r=-1;return null!=e&&(PO(e)?t=e:r=e),new Ve(i=>{let s=function P5e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return $Y(()=>t)}(n))}function KY(n){return n.get(yf).isStable.pipe(wa(t=>t))}function O5e(n,e){return new ZC(KV(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class JN{}function L5e(n,e={}){return function VI(n){return{\u0275providers:n}}([HY,GY,{provide:qY,useValue:n},{provide:JN,useValue:e},{provide:ZC,useFactory:O5e,deps:[JN,Ou]},{provide:aw,useFactory:N5e,deps:[Ys,qY,JN,Ou],multi:!0}])}let F5e=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[L5e(t,r)]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n})}static{this.\u0275inj=mo({providers:[HY,GY]})}}return n})();const V5e_firebase={apiKey:"AIzaSyAUbG_IDk6TFGtGbpkMVY4j2ZLvtvYee3A",authDomain:"thunders-pwa.firebaseapp.com",projectId:"thunders-pwa",storageBucket:"thunders-pwa.firebasestorage.app",messagingSenderId:"521968874196",appId:"1:521968874196:web:d279af17ffb90278814141"};let B5e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Uo({type:n,bootstrap:[v5e]})}static{this.\u0275inj=mo({imports:[Tce,o5e,F5e.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"}),abe,obe,upe(()=>dpe(V5e_firebase)),Zye(()=>e1e()),uTe(()=>dTe())]})}}return n})();Ece().bootstrapModule(B5e).catch(n=>console.error(n))},5091:Gt=>{var Un=function(tt){"use strict";var Yt,nt=Object.prototype,An=nt.hasOwnProperty,Kt=Object.defineProperty||function(Ve,We,ct){Ve[We]=ct.value},pt="function"==typeof Symbol?Symbol:{},zt=pt.iterator||"@@iterator",Cn=pt.asyncIterator||"@@asyncIterator",jn=pt.toStringTag||"@@toStringTag";function vn(Ve,We,ct){return Object.defineProperty(Ve,We,{value:ct,enumerable:!0,configurable:!0,writable:!0}),Ve[We]}try{vn({},"")}catch{vn=function(We,ct,En){return We[ct]=En}}function Qr(Ve,We,ct,En){var pn=Object.create((We&&We.prototype instanceof Vo?We:Vo).prototype),rs=new ua(En||[]);return Kt(pn,"_invoke",{value:sf(Ve,ct,rs)}),pn}function Is(Ve,We,ct){try{return{type:"normal",arg:Ve.call(We,ct)}}catch(En){return{type:"throw",arg:En}}}tt.wrap=Qr;var ho="suspendedStart",Tc="suspendedYield",ml="executing",Ql="completed",Ts={};function Vo(){}function wr(){}function Zr(){}var Ss={};vn(Ss,zt,function(){return this});var xs=Object.getPrototypeOf,Ds=xs&&xs(xs(Ba([])));Ds&&Ds!==nt&&An.call(Ds,zt)&&(Ss=Ds);var Va=Zr.prototype=Vo.prototype=Object.create(Ss);function Ps(Ve){["next","throw","return"].forEach(function(We){vn(Ve,We,function(ct){return this._invoke(We,ct)})})}function ca(Ve,We){function ct(pn,rs,Ui,Wn){var Bn=Is(Ve[pn],Ve,rs);if("throw"!==Bn.type){var af=Bn.arg,Xt=af.value;return Xt&&"object"==typeof Xt&&An.call(Xt,"__await")?We.resolve(Xt.__await).then(function(Ua){ct("next",Ua,Ui,Wn)},function(Ua){ct("throw",Ua,Ui,Wn)}):We.resolve(Xt).then(function(Ua){af.value=Ua,Ui(af)},function(Ua){return ct("throw",Ua,Ui,Wn)})}Wn(Bn.arg)}var En;Kt(this,"_invoke",{value:function $t(pn,rs){function Ui(){return new We(function(Wn,Bn){ct(pn,rs,Wn,Bn)})}return En=En?En.then(Ui,Ui):Ui()}})}function sf(Ve,We,ct){var En=ho;return function(pn,rs){if(En===ml)throw new Error("Generator is already running");if(En===Ql){if("throw"===pn)throw rs;return fo()}for(ct.method=pn,ct.arg=rs;;){var Ui=ct.delegate;if(Ui){var Wn=Sc(Ui,ct);if(Wn){if(Wn===Ts)continue;return Wn}}if("next"===ct.method)ct.sent=ct._sent=ct.arg;else if("throw"===ct.method){if(En===ho)throw En=Ql,ct.arg;ct.dispatchException(ct.arg)}else"return"===ct.method&&ct.abrupt("return",ct.arg);En=ml;var Bn=Is(Ve,We,ct);if("normal"===Bn.type){if(En=ct.done?Ql:Tc,Bn.arg===Ts)continue;return{value:Bn.arg,done:ct.done}}"throw"===Bn.type&&(En=Ql,ct.method="throw",ct.arg=Bn.arg)}}}function Sc(Ve,We){var ct=We.method,En=Ve.iterator[ct];if(En===Yt)return We.delegate=null,"throw"===ct&&Ve.iterator.return&&(We.method="return",We.arg=Yt,Sc(Ve,We),"throw"===We.method)||"return"!==ct&&(We.method="throw",We.arg=new TypeError("The iterator does not provide a '"+ct+"' method")),Ts;var $t=Is(En,Ve.iterator,We.arg);if("throw"===$t.type)return We.method="throw",We.arg=$t.arg,We.delegate=null,Ts;var pn=$t.arg;return pn?pn.done?(We[Ve.resultName]=pn.value,We.next=Ve.nextLoc,"return"!==We.method&&(We.method="next",We.arg=Yt),We.delegate=null,Ts):pn:(We.method="throw",We.arg=new TypeError("iterator result is not an object"),We.delegate=null,Ts)}function Bp(Ve){var We={tryLoc:Ve[0]};1 in Ve&&(We.catchLoc=Ve[1]),2 in Ve&&(We.finallyLoc=Ve[2],We.afterLoc=Ve[3]),this.tryEntries.push(We)}function Su(Ve){var We=Ve.completion||{};We.type="normal",delete We.arg,Ve.completion=We}function ua(Ve){this.tryEntries=[{tryLoc:"root"}],Ve.forEach(Bp,this),this.reset(!0)}function Ba(Ve){if(Ve){var We=Ve[zt];if(We)return We.call(Ve);if("function"==typeof Ve.next)return Ve;if(!isNaN(Ve.length)){var ct=-1,En=function $t(){for(;++ct<Ve.length;)if(An.call(Ve,ct))return $t.value=Ve[ct],$t.done=!1,$t;return $t.value=Yt,$t.done=!0,$t};return En.next=En}}return{next:fo}}function fo(){return{value:Yt,done:!0}}return wr.prototype=Zr,Kt(Va,"constructor",{value:Zr,configurable:!0}),Kt(Zr,"constructor",{value:wr,configurable:!0}),wr.displayName=vn(Zr,jn,"GeneratorFunction"),tt.isGeneratorFunction=function(Ve){var We="function"==typeof Ve&&Ve.constructor;return!!We&&(We===wr||"GeneratorFunction"===(We.displayName||We.name))},tt.mark=function(Ve){return Object.setPrototypeOf?Object.setPrototypeOf(Ve,Zr):(Ve.__proto__=Zr,vn(Ve,jn,"GeneratorFunction")),Ve.prototype=Object.create(Va),Ve},tt.awrap=function(Ve){return{__await:Ve}},Ps(ca.prototype),vn(ca.prototype,Cn,function(){return this}),tt.AsyncIterator=ca,tt.async=function(Ve,We,ct,En,$t){void 0===$t&&($t=Promise);var pn=new ca(Qr(Ve,We,ct,En),$t);return tt.isGeneratorFunction(We)?pn:pn.next().then(function(rs){return rs.done?rs.value:pn.next()})},Ps(Va),vn(Va,jn,"Generator"),vn(Va,zt,function(){return this}),vn(Va,"toString",function(){return"[object Generator]"}),tt.keys=function(Ve){var We=Object(Ve),ct=[];for(var En in We)ct.push(En);return ct.reverse(),function $t(){for(;ct.length;){var pn=ct.pop();if(pn in We)return $t.value=pn,$t.done=!1,$t}return $t.done=!0,$t}},tt.values=Ba,ua.prototype={constructor:ua,reset:function(Ve){if(this.prev=0,this.next=0,this.sent=this._sent=Yt,this.done=!1,this.delegate=null,this.method="next",this.arg=Yt,this.tryEntries.forEach(Su),!Ve)for(var We in this)"t"===We.charAt(0)&&An.call(this,We)&&!isNaN(+We.slice(1))&&(this[We]=Yt)},stop:function(){this.done=!0;var We=this.tryEntries[0].completion;if("throw"===We.type)throw We.arg;return this.rval},dispatchException:function(Ve){if(this.done)throw Ve;var We=this;function ct(Wn,Bn){return pn.type="throw",pn.arg=Ve,We.next=Wn,Bn&&(We.method="next",We.arg=Yt),!!Bn}for(var En=this.tryEntries.length-1;En>=0;--En){var $t=this.tryEntries[En],pn=$t.completion;if("root"===$t.tryLoc)return ct("end");if($t.tryLoc<=this.prev){var rs=An.call($t,"catchLoc"),Ui=An.call($t,"finallyLoc");if(rs&&Ui){if(this.prev<$t.catchLoc)return ct($t.catchLoc,!0);if(this.prev<$t.finallyLoc)return ct($t.finallyLoc)}else if(rs){if(this.prev<$t.catchLoc)return ct($t.catchLoc,!0)}else{if(!Ui)throw new Error("try statement without catch or finally");if(this.prev<$t.finallyLoc)return ct($t.finallyLoc)}}}},abrupt:function(Ve,We){for(var ct=this.tryEntries.length-1;ct>=0;--ct){var En=this.tryEntries[ct];if(En.tryLoc<=this.prev&&An.call(En,"finallyLoc")&&this.prev<En.finallyLoc){var $t=En;break}}$t&&("break"===Ve||"continue"===Ve)&&$t.tryLoc<=We&&We<=$t.finallyLoc&&($t=null);var pn=$t?$t.completion:{};return pn.type=Ve,pn.arg=We,$t?(this.method="next",this.next=$t.finallyLoc,Ts):this.complete(pn)},complete:function(Ve,We){if("throw"===Ve.type)throw Ve.arg;return"break"===Ve.type||"continue"===Ve.type?this.next=Ve.arg:"return"===Ve.type?(this.rval=this.arg=Ve.arg,this.method="return",this.next="end"):"normal"===Ve.type&&We&&(this.next=We),Ts},finish:function(Ve){for(var We=this.tryEntries.length-1;We>=0;--We){var ct=this.tryEntries[We];if(ct.finallyLoc===Ve)return this.complete(ct.completion,ct.afterLoc),Su(ct),Ts}},catch:function(Ve){for(var We=this.tryEntries.length-1;We>=0;--We){var ct=this.tryEntries[We];if(ct.tryLoc===Ve){var En=ct.completion;if("throw"===En.type){var $t=En.arg;Su(ct)}return $t}}throw new Error("illegal catch attempt")},delegateYield:function(Ve,We,ct){return this.delegate={iterator:Ba(Ve),resultName:We,nextLoc:ct},"next"===this.method&&(this.arg=Yt),Ts}},tt}(Gt.exports);try{regeneratorRuntime=Un}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=Un:Function("r","regeneratorRuntime = r")(Un)}},3513:(Gt,Un,tt)=>{"use strict";var nt=tt(9293).default;const An=tt(7853);Gt.exports={recognize:function(){var pt=nt(function*(zt,Cn,jn){const vn=yield An(Cn,1,jn);return vn.recognize(zt).finally(nt(function*(){yield vn.terminate()}))});return function(Cn,jn,vn){return pt.apply(this,arguments)}}(),detect:function(){var pt=nt(function*(zt,Cn){const jn=yield An("osd",0,Cn);return jn.detect(zt).finally(nt(function*(){yield jn.terminate()}))});return function(Cn,jn){return pt.apply(this,arguments)}}()}},7422:Gt=>{"use strict";Gt.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},3029:Gt=>{"use strict";Gt.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},7732:Gt=>{"use strict";Gt.exports={workerBlobURL:!0,logger:()=>{}}},3686:Gt=>{"use strict";Gt.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},9596:(Gt,Un,tt)=>{"use strict";const nt=tt(3668);let An=0;Gt.exports=({id:Kt,action:Yt,payload:pt={}})=>{let zt=Kt;return typeof zt>"u"&&(zt=nt("Job",An),An+=1),{id:zt,action:Yt,payload:pt}}},162:function(Gt,Un,tt){"use strict";var nt=tt(9293).default,An=this;const Kt=tt(9596),{log:Yt}=tt(515),pt=tt(3668);let zt=0;Gt.exports=()=>{const Cn=pt("Scheduler",zt),jn={},vn={};let Qr=[];zt+=1;const ho=()=>Object.keys(jn).length,Tc=()=>{if(0!==Qr.length){const wr=Object.keys(jn);for(let Zr=0;Zr<wr.length;Zr+=1)if(typeof vn[wr[Zr]]>"u"){Qr[0](jn[wr[Zr]]);break}}},ml=(wr,Zr)=>new Promise((Ss,xs)=>{const Ds=Kt({action:wr,payload:Zr});Qr.push(function(){var Va=nt(function*(Ps){Qr.shift(),vn[Ps.id]=Ds;try{Ss(yield Ps[wr].apply(An,[...Zr,Ds.id]))}catch(ca){xs(ca)}finally{delete vn[Ps.id],Tc()}});return function(Ps){return Va.apply(this,arguments)}}()),Yt(`[${Cn}]: Add ${Ds.id} to JobQueue`),Yt(`[${Cn}]: JobQueue length=${Qr.length}`),Tc()});return{addWorker:wr=>(jn[wr.id]=wr,Yt(`[${Cn}]: Add ${wr.id}`),Yt(`[${Cn}]: Number of workers=${ho()}`),Tc(),wr.id),addJob:function(){var wr=nt(function*(Zr,...Ss){if(0===ho())throw Error(`[${Cn}]: You need to have at least one worker before adding jobs`);return ml(Zr,Ss)});return function(Ss){return wr.apply(this,arguments)}}(),terminate:function(){var wr=nt(function*(){Object.keys(jn).forEach(function(){var Zr=nt(function*(Ss){yield jn[Ss].terminate()});return function(Ss){return Zr.apply(this,arguments)}}()),Qr=[]});return function(){return wr.apply(this,arguments)}}(),getQueueLen:()=>Qr.length,getNumWorkers:ho}}},7853:(Gt,Un,tt)=>{"use strict";var nt=tt(9293).default;const An=tt(8173),Kt=tt(9596),{log:Yt}=tt(515),pt=tt(3668),zt=tt(7422),{defaultOptions:Cn,spawnWorker:jn,terminateWorker:vn,onMessage:Qr,loadImage:Is,send:ho}=tt(3833);let Tc=0;Gt.exports=nt(function*(ml="eng",Ql=zt.LSTM_ONLY,Ts={},Vo={}){const wr=pt("Worker",Tc),{logger:Zr,errorHandler:Ss,...xs}=An({...Cn,...Ts}),Ds={},Va="string"==typeof ml?ml.split("+"):ml;let Ps=Ql,ca=Vo;const sf=[zt.DEFAULT,zt.LSTM_ONLY].includes(Ql)&&!xs.legacyCore;let Sc,Bp;const Su=new Promise((kn,Ln)=>{Bp=kn,Sc=Ln});let Ba=jn(xs);Ba.onerror=kn=>{Sc(kn.message)},Tc+=1;const fo=({id:kn,action:Ln,payload:ji})=>new Promise((Bo,po)=>{Yt(`[${wr}]: Start ${kn}, action=${Ln}`),Ds[`${Ln}-${kn}`]={resolve:Bo,reject:po},ho(Ba,{workerId:wr,jobId:kn,action:Ln,payload:ji})}),rs=(kn,Ln)=>fo(Kt({id:Ln,action:"loadLanguage",payload:{langs:kn,options:{langPath:xs.langPath,dataPath:xs.dataPath,cachePath:xs.cachePath,cacheMethod:xs.cacheMethod,gzip:xs.gzip,lstmOnly:[zt.DEFAULT,zt.LSTM_ONLY].includes(Ps)&&!xs.legacyLang}}})),Ui=(kn,Ln,ji,Bo)=>fo(Kt({id:Bo,action:"initialize",payload:{langs:kn,oem:Ln,config:ji}})),af=function(){var kn=nt(function*(Ln,ji={},Bo={text:!0},po){return fo(Kt({id:po,action:"recognize",payload:{image:yield Is(Ln),options:ji,output:Bo}}))});return function(ji){return kn.apply(this,arguments)}}(),Xt=function(){var kn=nt(function*(Ln,ji){if(sf)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return fo(Kt({id:ji,action:"detect",payload:{image:yield Is(Ln)}}))});return function(ji,Bo){return kn.apply(this,arguments)}}(),Ua=function(){var kn=nt(function*(){return null!==Ba&&(vn(Ba),Ba=null),Promise.resolve()});return function(){return kn.apply(this,arguments)}}();Qr(Ba,({workerId:kn,jobId:Ln,status:ji,action:Bo,data:po})=>{const _l=`${Bo}-${Ln}`;if("resolve"===ji)Yt(`[${kn}]: Complete ${Ln}`),Ds[_l].resolve({jobId:Ln,data:po}),delete Ds[_l];else if("reject"===ji){if(Ds[_l].reject(po),delete Ds[_l],"load"===Bo&&Sc(po),!Ss)throw Error(po);Ss(po)}else"progress"===ji&&Zr({...po,userJobId:Ln})});const _E={id:wr,worker:Ba,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(kn,Ln,ji)=>fo(Kt({id:ji,action:"FS",payload:{method:"writeFile",args:[kn,Ln]}})),readText:(kn,Ln)=>fo(Kt({id:Ln,action:"FS",payload:{method:"readFile",args:[kn,{encoding:"utf8"}]}})),removeFile:(kn,Ln)=>fo(Kt({id:Ln,action:"FS",payload:{method:"unlink",args:[kn]}})),FS:(kn,Ln,ji)=>fo(Kt({id:ji,action:"FS",payload:{method:kn,args:Ln}})),reinitialize:(kn="eng",Ln,ji,Bo)=>{if(sf&&[zt.TESSERACT_ONLY,zt.TESSERACT_LSTM_COMBINED].includes(Ln))throw Error("Legacy model requested but code missing.");const po=Ln||Ps;Ps=po;const _l=ji||ca;ca=_l;const N_=("string"==typeof kn?kn.split("+"):kn).filter(vE=>!Va.includes(vE));return Va.push(...N_),N_.length>0?rs(N_,Bo).then(()=>Ui(kn,po,_l,Bo)):Ui(kn,po,_l,Bo)},setParameters:(kn={},Ln)=>fo(Kt({id:Ln,action:"setParameters",payload:{params:kn}})),recognize:af,detect:Xt,terminate:Ua};return fo(Kt({id:undefined,action:"load",payload:{options:{lstmOnly:sf,corePath:xs.corePath,logging:xs.logging}}})).then(()=>rs(ml)).then(()=>Ui(ml,Ql,Vo)).then(()=>Bp(_E)).catch(()=>{}),Su})},3459:(Gt,Un,tt)=>{"use strict";tt(5091);const nt=tt(162),An=tt(7853),Kt=tt(3513),Yt=tt(3686),pt=tt(7422),zt=tt(3029),{setLogging:Cn}=tt(515);Gt.exports={languages:Yt,OEM:pt,PSM:zt,createScheduler:nt,createWorker:An,setLogging:Cn,...Kt}},3388:Gt=>{"use strict";Gt.exports=Un=>{const tt={};return typeof WorkerGlobalScope<"u"?tt.type="webworker":"object"==typeof document?tt.type="browser":"object"==typeof process&&(tt.type="node"),typeof Un>"u"?tt:tt[Un]}},3668:Gt=>{"use strict";Gt.exports=(Un,tt)=>`${Un}-${tt}-${Math.random().toString(16).slice(3,8)}`},515:function(Gt,Un){"use strict";let tt=!1;Un.logging=tt,Un.setLogging=nt=>{tt=nt},Un.log=(...nt)=>tt?console.log.apply(this,nt):null},8173:(Gt,Un,tt)=>{"use strict";const An="browser"===tt(3388)("type")?Kt=>new URL(Kt,window.location.href).href:Kt=>Kt;Gt.exports=Kt=>{const Yt={...Kt};return["corePath","workerPath","langPath"].forEach(pt=>{Kt[pt]&&(Yt[pt]=An(Yt[pt]))}),Yt}},2520:(Gt,Un,tt)=>{"use strict";const nt=tt(6125).rE,An=tt(7732);Gt.exports={...An,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${nt}/dist/worker.min.js`}},3833:(Gt,Un,tt)=>{"use strict";const nt=tt(2520),An=tt(2256),Kt=tt(4988),Yt=tt(8805),pt=tt(9023),zt=tt(1388);Gt.exports={defaultOptions:nt,spawnWorker:An,terminateWorker:Kt,onMessage:Yt,send:pt,loadImage:zt}},1388:(Gt,Un,tt)=>{"use strict";var nt=tt(9293).default;const An=Yt=>new Promise((pt,zt)=>{const Cn=new FileReader;Cn.onload=()=>{pt(Cn.result)},Cn.onerror=({target:{error:{code:jn}}})=>{zt(Error(`File could not be read! Code=${jn}`))},Cn.readAsArrayBuffer(Yt)}),Kt=function(){var Yt=nt(function*(pt){let zt=pt;if(typeof pt>"u")return"undefined";if("string"==typeof pt)zt=/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(pt)?atob(pt.split(",")[1]).split("").map(Cn=>Cn.charCodeAt(0)):yield(yield fetch(pt)).arrayBuffer();else if(typeof HTMLElement<"u"&&pt instanceof HTMLElement)"IMG"===pt.tagName&&(zt=yield Kt(pt.src)),"VIDEO"===pt.tagName&&(zt=yield Kt(pt.poster)),"CANVAS"===pt.tagName&&(yield new Promise(Cn=>{pt.toBlob(function(){var jn=nt(function*(vn){zt=yield An(vn),Cn()});return function(vn){return jn.apply(this,arguments)}}())}));else if(typeof OffscreenCanvas<"u"&&pt instanceof OffscreenCanvas){const Cn=yield pt.convertToBlob();zt=yield An(Cn)}else(pt instanceof File||pt instanceof Blob)&&(zt=yield An(pt));return new Uint8Array(zt)});return function(zt){return Yt.apply(this,arguments)}}();Gt.exports=Kt},8805:Gt=>{"use strict";Gt.exports=(Un,tt)=>{Un.onmessage=({data:nt})=>{tt(nt)}}},9023:(Gt,Un,tt)=>{"use strict";var nt=tt(9293).default;Gt.exports=function(){var An=nt(function*(Kt,Yt){Kt.postMessage(Yt)});return function(Kt,Yt){return An.apply(this,arguments)}}()},2256:Gt=>{"use strict";Gt.exports=({workerPath:Un,workerBlobURL:tt})=>{let nt;if(Blob&&URL&&tt){const An=new Blob([`importScripts("${Un}");`],{type:"application/javascript"});nt=new Worker(URL.createObjectURL(An))}else nt=new Worker(Un);return nt}},4988:Gt=>{"use strict";Gt.exports=Un=>{Un.terminate()}},9293:Gt=>{function Un(nt,An,Kt,Yt,pt,zt,Cn){try{var jn=nt[zt](Cn),vn=jn.value}catch(Qr){return void Kt(Qr)}jn.done?An(vn):Promise.resolve(vn).then(Yt,pt)}Gt.exports=function tt(nt){return function(){var An=this,Kt=arguments;return new Promise(function(Yt,pt){var zt=nt.apply(An,Kt);function Cn(vn){Un(zt,Yt,pt,Cn,jn,"next",vn)}function jn(vn){Un(zt,Yt,pt,Cn,jn,"throw",vn)}Cn(void 0)})}},Gt.exports.__esModule=!0,Gt.exports.default=Gt.exports},467:(Gt,Un,tt)=>{"use strict";function nt(Kt,Yt,pt,zt,Cn,jn,vn){try{var Qr=Kt[jn](vn),Is=Qr.value}catch(ho){return void pt(ho)}Qr.done?Yt(Is):Promise.resolve(Is).then(zt,Cn)}function An(Kt){return function(){var Yt=this,pt=arguments;return new Promise(function(zt,Cn){var jn=Kt.apply(Yt,pt);function vn(Is){nt(jn,zt,Cn,vn,Qr,"next",Is)}function Qr(Is){nt(jn,zt,Cn,vn,Qr,"throw",Is)}vn(void 0)})}}tt.d(Un,{A:()=>An})},6125:Gt=>{"use strict";Gt.exports={rE:"7.0.0"}}},Gt=>{Gt(Gt.s=2791)}]);